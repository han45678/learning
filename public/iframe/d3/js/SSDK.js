!function e(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("SSDK",[],i):"object"==typeof exports?exports.SSDK=i():t.SSDK=i()}(window,function(){return s={},a.m=n=[function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1).default,a=n.trace,s=n.notNull,o=n.isNull,r=n.isTrue,u=i(21).default,l=u.prefixNumberStr,d=u.loadJSON,h=i(22).default.randomInt,p=i(23).default,c=p.getArrayUnique,_=p.checkArrayEquals,g=p.shuffleArray,f=p.sortByNameACS,v=p.sortByValueACS,m=i(24).default,b=m.playSoundCheckLoadRequest,y=m.playSound,S=m.playWebAudioSound,P=m.playWebAudioSound2,M=i(25).default.playWebVideo,k=i(26).default.collisionTest,O=i(27).default,B=O.applyMultiply,x=O.unapplyMultiply,C=O.applyColorFilter,T=O.applyColorGrayFilter,w=O.unapplyColorFilter,L=i(28).default,I=L.generateExtraCommand,N=L.sendExtraCommand,j=L.getHtmlhrefValue,A=L.supportPassive,E=L.createNewEvent,G=L.isIOS;t.default={trace:a,notNull:s,isNull:o,isTrue:r,prefixNumberStr:l,loadJSON:d,randomInt:h,getArrayUnique:c,checkArrayEquals:_,shuffleArray:g,sortByNameACS:f,sortByValueACS:v,playSoundCheckLoadRequest:b,playSound:y,playWebAudioSound:S,playWebAudioSound2:P,playWebVideo:M,collisionTest:k,applyMultiply:B,unapplyMultiply:x,applyColorFilter:C,applyColorGrayFilter:T,unapplyColorFilter:w,generateExtraCommand:I,sendExtraCommand:N,getHtmlhrefValue:j,supportPassive:A,createNewEvent:E,isIOS:G}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={trace:function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n]},notNull:function e(t){return null!=t},isNull:function e(t){return null==t},isTrue:function e(t){return"string"==typeof t&&"true"===t.toLowerCase()||("boolean"==typeof t?t:Boolean(t))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommonBookPage=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,k=i(15).ModuleOnAndOff,O=i(16).ModuleCalculator,B=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=(h(w,T=p),n(w,[{key:"init",value:function e(){s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.stop(n,a,!0)}},{key:"stop",value:function e(t,i,n){var a=0<arguments.length&&void 0!==t?t:null,s=1<arguments.length&&void 0!==i&&i,o=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(a=this.soundObj.excludeTags),r.default.isNull(a)&&(a=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(a=a.concat(this.videoObj.excludeTags)),-1===a.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!o&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!o&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleGoOutCommand&&-1===a.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===a.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===a.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===a.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===a.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===a.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===a.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===a.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===a.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===a.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===a.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===a.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===a.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleAnsZone&&-1===a.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===a.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===a.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),s&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),a&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var a=1<arguments.length&&void 0!==i?i:.2,s=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,a,s)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(s(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new k(this).init(),this._moduleCalculator=new O(this).init(),this._modulePureAnimate=new B(this).init(),this._moduleZoom=new x(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new k(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new O(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new B(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleZoom)?this._moduleZoom=new x(this).init(t):this._moduleZoom.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),w),T;function w(e,t,i,n){l(this,w);var a=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,e,t,i,n));return(a._this=a)._resetExclude=[],a}t.CommonBookPage=C},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasePage=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,g=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=i(29).SoundPlayerBar,l=i(30).VideoPlayerBar,d=(n(h,[{key:"openAlphabeticFix",value:function e(){this.textAlphabeticFixYScale=.77}},{key:"closeAlphabeticFix",value:function e(){this.textAlphabeticFixYScale=0}},{key:"setupBGListenZone",value:function e(t,i,n){var a=0<arguments.length&&void 0!==t?t:1,s=1<arguments.length&&void 0!==i?i:1,o=2<arguments.length&&void 0!==n?n:"mousedown";this.isInited||this.init(),g.default.notNull(this._bgShape)&&(this._bgShape.removeEventListener(this._bgListenZoneBehavior,this.triggerBGMousedownBind),this.exportRoot.contains(this._bgShape)&&this.exportRoot.removeChild(this._bgShape),this._bgShape.uncache(),this._bgShape.graphics.clear()),this._bgShape=new this.createjs.Shape,this._bgShape.graphics.beginFill("#000000").drawRect(0,0,a,s),this._bgShape.alpha=.01,this._bgShape.cache(0,0,a,s),this.exportRoot.addChildAt(this._bgShape,0),this._bgShape.addEventListener(o,this.triggerBGMousedownBind),this._bgListenZoneBehavior=o}},{key:"triggerBGMousedown",value:function e(t){this.sendCommand("BGMouseTrigger","BGMouseTrigger_"+this._bgListenZoneBehavior),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"init",value:function e(){this.isInited||(this._waitInited=!1,this.isInited=!0,this.initModules(),this.updatePageProps(),this.sendCommand("Inited","Inited",this),this._moduleDelayInit=!0,this._waitInited=!0)}},{key:"initByModule",value:function e(){this.initForModuleDelayCallback(),g.default.notNull(this.pageParam)&&(this.updatePageParam(JSON.stringify(this.pageParam)),this._waitInited=!0,0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()))}},{key:"initForModuleDelayCallback",value:function e(){this.isInited||(this._waitInited=!1,this.isInited=!0,this.initModules())}},{key:"loadContentByModule",value:function e(i,n){if(void 0!==i){this._moduleDelayInit&&(document.getElementById("_preload_div_").style.display="inline-block",document.getElementById("canvas").style.display="block");var a=this,t=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript";var o=[];for(var r in window.AdobeAn.compositions)g.default.notNull(r)&&""!==r&&o.push(r);s.onload=s.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState){s.onload=s.onreadystatechange=null;var e=!1;for(var t in window.AdobeAn.compositions)if(-1===o.indexOf(t)){e=!0,a.loadContentInstanceByModule(t,i,n);break}e||alert("載入頁面ID發現重覆:\n"+s.src)}},s.onerror=function(e){a._moduleDelayInit?document.getElementById("_preload_div_").style.display="none":(a.sendCommand("Inited","Inited",this),a._moduleDelayInit=!0,window.callDelayPageInitComplete&&window.callDelayPageInitComplete()),alert("找不到載入頁面:\n"+s.src)},s.src="../"+i.folder+"/"+i.folder+".js?"+Math.ceil(5e3*Math.random()),t.appendChild(s)}}},{key:"loadContentInstanceByModule",value:function e(t,i,n){var a=this;this.__loadinfo=i,this.__backInfo=n,this.contentComp=AdobeAn.getComposition(t),this.contentLib=this.contentComp.getLibrary(),this.contentLoader=new this.createjs.LoadQueue(!0,"../"+i.folder+"/","Anonymous"),this.contentLoader.addEventListener("fileload",function(e){a.handleContentByModuleLoad(e,a.contentComp)}),this.contentLoader.addEventListener("complete",function(e){a.handleContentByModuleComplete(e,a.contentComp)}),this.contentLoader.setMaxConnections(6),this.contentLoader.installPlugin(this.createjs.Sound);for(var s=this.contentLib.properties.manifest.length,o=[],r=0;r<s;r++)-1===this.contentLib.properties.manifest[r].src.indexOf(".mp3")&&o.push(this.contentLib.properties.manifest[r]);0!==o.length?this.contentLoader.loadManifest(o):this.handleMenuComplete({},this.contentComp)}},{key:"handleContentByModuleLoad",value:function e(t,i){var n=i.getImages();t&&"image"==t.item.type&&(n[t.item.id]=t.result)}},{key:"handleContentByModuleComplete",value:function e(t,i){for(var n=this,a=i.getLibrary(),s=i.getSpriteSheet(),o=t.target,r=a.ssMetadata,u=0;u<r.length;u++)s[r[u].name]=new this.createjs.SpriteSheet({images:[o.getResult(r[u].name)],frames:r[u].frames});o.close(),o.removeAllEventListeners(),o.destroy();for(var l=new a[this.__loadinfo.folder],d=[],h=0;h<l.children.length;h++)d[h]=l.children[h];for(var p=0;p<d.length;p++)if(void 0!==d[p].name&&g.default.notNull(this.__loadinfo.instanceReplace))for(var c=this.__loadinfo.instanceReplace.length,_=0;_<c;_++)if(this.__loadinfo.instanceReplace[_][0]===d[p].name){this.exportRoot.addChild(d[p]),d[p].orgVisible=d[p].visible,d[p].name=this.__loadinfo.instanceReplace[_][1],d[p].visible=!1,this.exportRoot[d[p].name]=d[p];break}this.rescanInstanceRef(),this.reprocessInstanceEffectBase(),this.reinitModules("../"+this.__loadinfo.folder+"/"),this._moduleDelayInit?document.getElementById("_preload_div_").style.display="none":(this.sendCommand("Inited","Inited",this),this._moduleDelayInit=!0,window.callDelayPageInitComplete&&window.callDelayPageInitComplete())}},{key:"appendMenu",value:function e(t,i){var n=this,a=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.onload=s.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)for(var e in s.onload=s.onreadystatechange=null,window.AdobeAn.compositions)if(e!==n.animateID){n.loadMenuInstance(e,t,i);break}},s.onerror=function(e){n.init()},s.src="../"+t+"/"+t+".js?"+Math.ceil(5e3*Math.random()),a.appendChild(s)}},{key:"loadMenuInstance",value:function e(t,i,n){var a=this;this.menuID=i,this.menuContent=n,this.contentComp=AdobeAn.getComposition(t),this.contentLib=this.contentComp.getLibrary(),this.contentLoader=new this.createjs.LoadQueue(!0,"../"+i+"/","Anonymous"),this.contentLoader.addEventListener("fileload",function(e){a.handleMenuFileLoad(e,a.contentComp)}),this.contentLoader.addEventListener("complete",function(e){a.handleMenuComplete(e,a.contentComp)}),this.contentLoader.setMaxConnections(6),this.contentLoader.installPlugin(this.createjs.Sound);for(var s=this.contentLib.properties.manifest.length,o=[],r=0;r<s;r++)-1===this.contentLib.properties.manifest[r].src.indexOf(".mp3")&&o.push(this.contentLib.properties.manifest[r]);0!==o.length?this.contentLoader.loadManifest(o):this.handleMenuComplete({},this.contentComp)}},{key:"handleMenuFileLoad",value:function e(t,i){var n=i.getImages();t&&"image"==t.item.type&&(n[t.item.id]=t.result)}},{key:"handleMenuComplete",value:function e(t,i){for(var n=this,a=i.getLibrary(),s=i.getSpriteSheet(),o=t.target,r=a.ssMetadata,u=0;u<r.length;u++)s[r[u].name]=new this.createjs.SpriteSheet({images:[o.getResult(r[u].name)],frames:r[u].frames});o.close(),o.removeAllEventListeners(),o.destroy();for(var l=new a[this.menuID],d=[],h=0;h<l.children.length;h++)d[h]=l.children[h];for(var p=void 0,c=0;c<d.length;c++)this.exportRoot.addChild(d[c]),d[c].orgVisible=d[c].visible,g.default.notNull(d[c].name)&&(this.exportRoot[d[c].name]=d[c]),"MenuScript"===d[c].name&&((p=d[c]).visible=!1);this.scanInstanceRef(),this.processInstanceEffectBase(),g.default.notNull(p.menuRef)&&(this.menuRef=p.menuRef.concat()),this.init()}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i}},{key:"stop",value:function e(t,i,n){var a=0<arguments.length&&void 0!==t?t:null,s=1<arguments.length&&void 0!==i&&i,o=2<arguments.length&&void 0!==n&&n}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i}},{key:"clearSoundChannel",value:function e(){}},{key:"clearVideoChannel",value:function e(){}},{key:"updateMenuParam",value:function e(t){this.isInited||this.init(),g.default.isNull(t)?this.initMenuParamJSON=g.default.notNull(this.lib.js.initMenuParamJSON)?this.lib.js.initMenuParamJSON:this.initMenuParamJSON:(this.initMenuParamJSON=t,this.lib.js.initMenuParamJSON=t),this.pageMenuParam=g.default.notNull(this.initMenuParamJSON)&&""!==this.initMenuParamJSON?JSON.parse(this.initMenuParamJSON):null,this.updatePageParam()}},{key:"updatePageParam",value:function e(t){this.isInited||this.init(),g.default.isNull(t)?this.initParamJSON=g.default.notNull(this.lib.js.initParamJSON)?this.lib.js.initParamJSON:this.initParamJSON:(this.initParamJSON=t,this.lib.js.initParamJSON=t),this.pageParam=g.default.notNull(this.initParamJSON)&&""!==this.initParamJSON?JSON.parse(this.initParamJSON):null,this.updatePageProps()}},{key:"updatePageProps",value:function e(){}},{key:"getGoOutCommandItemList",value:function e(){}},{key:"syncMarqueeSound",value:function e(t,i){}},{key:"getZoomInInfo",value:function e(){}},{key:"setAnsZoneEnable",value:function e(t,i,n){var a=1<arguments.length&&void 0!==i?i:.2,s=2<arguments.length&&void 0!==n&&n}},{key:"updateVolume",value:function e(t){return this.isInited||this.init(),t<0&&(t=0),1<t&&(t=1),this.volume=t,g.default.notNull(this.soundChannel)&&(this.soundChannel.volume=t),g.default.notNull(this.videoChannel)&&(this.videoChannel.volume=t),this.volume}},{key:"receiveMessage",value:function e(t){this.isInited||this.init(),g.default.trace(t)}},{key:"refreshLibProp",value:function e(t,i,n,a,s,o,r){this.isInited||this.init(),g.default.isNull(t)?this.owner=g.default.notNull(this.lib.js.owner)?this.lib.js.owner:this.owner:(this.owner=t,this.lib.js.owner=t),g.default.isNull(i)?this.pageSoundPath=g.default.notNull(this.lib.js.pageSoundPath)?this.lib.js.pageSoundPath:this.pageSoundPath:(this.pageSoundPath=i,this.lib.js.pageSoundPath=i),g.default.isNull(s)?this.pageVideoPath=g.default.notNull(this.lib.js.pageVideoPath)?this.lib.js.pageVideoPath:this.pageVideoPath:(this.pageVideoPath=s,this.lib.js.pageVideoPath=s),g.default.isNull(a)?this.assetSoundPath=g.default.notNull(this.lib.js.assetSoundPath)?this.lib.js.assetSoundPath:this.assetSoundPath:(this.assetSoundPath=a,this.lib.js.assetSoundPath=a),g.default.isNull(o)?this.assetVideoPath=g.default.notNull(this.lib.js.assetVideoPath)?this.lib.js.assetVideoPath:this.assetVideoPath:(this.assetVideoPath=o,this.lib.js.assetVideoPath=o),g.default.isNull(n)?this.globalSoundPath=g.default.notNull(this.lib.js.globalSoundPath)?this.lib.js.globalSoundPath:this.globalSoundPath:(this.globalSoundPath=n,this.lib.js.globalSoundPath=n),g.default.notNull(r)&&(this.wordStrokeOffsetMs=Number(r))}},{key:"updatePairInstance",value:function e(t){this.isInited||this.init(),g.default.notNull(t)?this.pairInstance=t:this.pairInstance=this.lib.js.pairInstance||null,this.lib.js.pairInstance=this.pairInstance}},{key:"callTouchInstance",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:50;this.isInited||this.init();var a=this;clearTimeout(this.callTouchInstanceTimer),this.callTouchInstanceTimer=setTimeout(function(){a.callTouchInstanceRun(t,n)},n)}},{key:"assetBasePageInstance",value:function e(t){this.isInited||this.init(),this.createjs._assetBasePageInstance=t}},{key:"createAudioInstance",value:function e(t){this.isInited||this.init(),g.default.playWebAudioSound(this.createjs,t.path,t.id,t.loop,t.offset,t.volume,t.callback)}},{key:"callTouchInstanceRun",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:50;if(this.isInited||this.init(),g.default.notNull(t)&&0<t.length){for(var o=t.shift(),r=this,u=this.mouseTriggerBehavior,a=function e(t){var i=r.getInstanceMirror(t),n=i.subset.length,a=void 0;a===o&&t.dispatchEvent(u);for(var s=0;s<n;s++)a=i.subset[s],e(i.target[a])},s=this.levelOneInstanceNames.length,l=void 0,d=void 0,h=0;h<s;h++)l=this.levelOneInstanceNames[h],d=this.getInstanceMirror(this.exportRoot[l]),l===o&&this.exportRoot[l].dispatchEvent(u),a(d.target);clearTimeout(r.callTouchInstanceTimer),this.callTouchInstanceTimer=setTimeout(function(){r.callTouchInstanceRun(t,n)},n)}}},{key:"openFPS",value:function e(){this.isInited||this.init(),this._fps&&this._fps.startFPS(this.exportRoot,this)}},{key:"closeFPS",value:function e(){this.isInited||this.init(),this._fps&&this._fps.stopFPS(this.exportRoot)}},{key:"excludePageComponent",value:function e(t){var i=0<arguments.length&&void 0!==t?t:null;return this.isInited||this.init(),this.openMobileMode(i)}},{key:"unexcludePageComponent",value:function e(){return this.isInited||this.init(),this.closeMobileMode()}},{key:"modifyExtraComponentVisible",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=!(1<arguments.length&&void 0!==i)||i;return this.isInited||this.init(),g.default.notNull(this.commandMCListVisible)?this.commandMCListVisibleRest=this.commandMCListVisible:this.commandMCListVisibleRest=this.commandMCListInvisible,this.commandMCListVisible=null,this.commandMCListInvisible=null,a?this.commandMCListVisible=n:this.commandMCListInvisible=n,this.updatePageProps(),!0}},{key:"openMobileMode",value:function e(t){var i=0<arguments.length&&void 0!==t?t:null;return this.isInited||this.init(),this.mobileMode=!0,this.webMode=!0,this.extraToHideMCList=i,this.updatePageProps(),!0}},{key:"closeMobileMode",value:function e(){return this.isInited||this.init(),this.mobileMode=!1,this.webMode=!1,this.extraToHideMCList=null,this.updatePageProps(),!0}},{key:"openWebMode",value:function e(t){var i=0<arguments.length&&void 0!==t?t:null;return this.isInited||this.init(),this.webMode=!0,this.mobileMode=!1,this.extraToHideMCList=i,this.updatePageProps(),!0}},{key:"closeWebMode",value:function e(){return this.isInited||this.init(),this.webMode=!1,this.mobileMode=!1,this.extraToHideMCList=null,this.updatePageProps(),!0}},{key:"openIOSMode",value:function e(){return this.isInited||this.init(),this.iosMode=!0}},{key:"closeIOSMode",value:function e(){return this.isInited||this.init(),!(this.iosMode=!1)}},{key:"openWBCMode",value:function e(){return this.isInited||this.init(),this.wbcMode=!0,this.updatePageProps(),!0}},{key:"closeWBCMode",value:function e(){return this.isInited||this.init(),this.wbcMode=!1,this.updatePageProps(),!0}},{key:"openActWinNavBar",value:function e(){return this.isInited||this.init(),this.actWinNavHide=!1,this.updatePageProps(),!0}},{key:"closeActWinNavBar",value:function e(){return this.isInited||this.init(),this.actWinNavHide=!0,this.updatePageProps(),!0}},{key:"openActWinWordGroupBar",value:function e(){return this.isInited||this.init(),this.actWinNavHide=!1,this.actWinWordGroupHide=!1,this.updatePageProps(),!0}},{key:"closeActWinWordGroupBar",value:function e(){return this.isInited||this.init(),this.actWinNavHide=!0,this.actWinWordGroupHide=!0,this.updatePageProps(),!0}},{key:"updateSoundChannel",value:function e(t){this.isInited||init(),this.soundChannel=t}},{key:"updateVideoChannel",value:function e(t){this.isInited||init(),this.videoChannel=t}},{key:"setPressEventIsOn",value:function e(t){this.isPressMoveOn=t}},{key:"getPressEventIsOn",value:function e(){return this.isPressMoveOn}},{key:"getSoundObject",value:function e(){return this.soundObj}},{key:"getLastestParamJSON",value:function e(){return g.default.notNull(this.pageParam)?JSON.stringify(this.pageParam):null}},{key:"getParentIsNoDefinition",value:function e(){return!(!window.useMarqueeDebug||window.sendFromChild||g.default.notNull(window.parent)&&window.parent.sendFromIFrameChild)}},{key:"sendCommand",value:function e(t,i,n,a){var s=2<arguments.length&&void 0!==n?n:null,o=!(3<arguments.length&&void 0!==a)||a;if(!g.default.isNull(this)){this.isInited||this.init();var r=g.default.generateExtraCommand(t,i,this.owner);g.default.notNull(s)&&(r.selfInstance=s),o&&(r.selfInstance=this),g.default.sendExtraCommand(r)}}},{key:"sendPageFlipMessage",value:function e(){this.isInited&&this._moduleDelayInit&&this.sendCommand("PageFlip","PageFlip")}},{key:"sendPageTouchMessage",value:function e(t,i){this.sendCommand(t,i)}},{key:"setupCreatejs",value:function e(t,i){var n=!(0<arguments.length&&void 0!==t)||t,a=!(1<arguments.length&&void 0!==i)||i;g.default.isNull(this)||(g.default.notNull(this.createjs)&&(this.createjs.Ticker.timingMode=this.createjs.Ticker.RAF),g.default.notNull(this.stage)&&(n?this.stage.enableMouseOver(8):this.stage.enableMouseOver(0),this.createjs.Touch.isSupported()?a?this.createjs.Touch.enable(this.stage,!0,!1,!0):this.createjs.Touch.enable(this.stage,!1,!0,!0):(void 0===this.stage.__notouch&&(this.stage.__notouch={}),this.stage.__notouch.onlyEbookClick=!0),this.stage.preventSelection=!1))}},{key:"resetSingleTouchEvent",value:function e(){g.default.isNull(this)||g.default.notNull(this.createjs)&&g.default.notNull(this.createjs.Touch)&&g.default.notNull(this.createjs.Touch.resetTouchMove)&&this.createjs.Touch.resetTouchMove(this.stage)}},{key:"setTimeout",value:function e(t,i){if(g.default.isNull(this))return null;var n=this,a=this.createjs.Tween.get({}).wait(i).call(function(){t&&t(),n.clearTimeout(a)});return a}},{key:"clearTimeout",value:function e(t){return!(g.default.isNull(this)||(this.createjs.Tween.removeTweens(t.target),t=void 0))}},{key:"setInterval",value:function e(t,i){if(g.default.isNull(this))return null;var n=this.createjs.Tween.get({}).wait(i).call(function(){t&&t()});return n.loop=-1,n}},{key:"clearInterval",value:function e(t){if(!g.default.isNull(this))return this.Tween.removeTweens(t.target),!(t=void 0)}},{key:"scanInstanceRef",value:function e(){if(!g.default.isNull(this)){this.levelOneInstanceNames=[],this.levelInstanceMirror={};var l=this,t=function e(t,i){t.gotoAndStop(0);var n=t.parent.name||"",a,s=(n=""!==n?n+"_$"+t.parent.randID+"$":"")+t.name;i[s]={},i[s].parent=t.parent,i[s].target=t,i[s].name=t.name,t._parentLink=t.parent;var o=t.name.split("_");i[s].command=o[0],l.modulesIsOn.push(i[s].command),o.shift(),i[s].args=o,i[s].subset=[];for(var r=t.children.length,u=0;u<r;u++)t.children[u]instanceof createjs.MovieClip&&null!==t.children[u].name&&(t.children[u].randID=++l._randID,i[s].subset.push(t.children[u].name),e(t.children[u],i))},i="exportRoot";this.levelInstanceMirror[i]={},this.levelInstanceMirror[i].parent=null,this.levelInstanceMirror[i].target=this.exportRoot,this.levelInstanceMirror[i].name="exportRoot",this.levelInstanceMirror[i].name="exportRoot",this.levelInstanceMirror[i].command="",this.levelInstanceMirror[i].args=[],this.levelInstanceMirror[i].subset=[],this.exportRoot.gotoAndStop(0);for(var n=this.exportRoot.children.length,a=0;a<n;a++)this.exportRoot.children[a]instanceof createjs.MovieClip&&null!==this.exportRoot.children[a].name&&(this.exportRoot.children[a].randID=++this._randID,this.levelInstanceMirror[i].subset.push(this.exportRoot.children[a].name),this.levelOneInstanceNames.push(this.exportRoot.children[a].name),t(this.exportRoot.children[a],this.levelInstanceMirror));this.modulesIsOn=this.modulesIsOn.filter(g.default.getArrayUnique)}}},{key:"processInstanceEffectBase",value:function e(){if(!g.default.isNull(this))for(var t=this,i=function e(t,i){if(!t.EffectBaseShadow&&t.EffectBase){var n=t.EffectBase.clone(),a=t.EffectBase;t.EffectBaseShadow=n,t.EffectBase.alpha=0,t.EffectBaseShadow.alpha=.7;var s=t.localToGlobal(t.EffectBase.x-t.EffectBase.regX*t.EffectBase.scaleX,t.EffectBase.y-t.EffectBase.regY*t.EffectBase.scaleY),o=t.parent;g.default.notNull(t.parent._effectBaseToLoc)&&(o=t.parent._effectBaseToLoc);var r=o.globalToLocal(s.x,s.y);n.setTransform(r.x,r.y,n.scaleX*t.scaleX,n.scaleY*t.scaleY,t.rotation+n.rotation),t.timeline.on("change",function(e){a._off?o.removeChild(n):o.addChildAt(n,1)})}for(var u=t.children.length,l=0;l<u;l++)t.children[l]instanceof createjs.MovieClip&&null!==t.children[l].name&&e(t.children[l],i)},n=this.exportRoot.children.length,a=0;a<n;a++)this.exportRoot.children[a]instanceof createjs.MovieClip&&null!==this.exportRoot.children[a].name&&i(this.exportRoot.children[a],this.levelInstanceMirror)}},{key:"rescanInstanceRef",value:function e(){if(!g.default.isNull(this)){for(var l=this,t=function e(t,i){t.gotoAndStop(0);var n=t.parent.name||"",a,s=(n=""!==n?n+"_$"+t.parent.randID+"$":"")+t.name;i[s]={},i[s].parent=t.parent,i[s].target=t,i[s].name=t.name,t._parentLink=t.parent;var o=t.name.split("_");i[s].command=o[0],l.modulesIsOn.push(i[s].command),o.shift(),i[s].args=o,i[s].subset=[];for(var r=t.children.length,u=0;u<r;u++)t.children[u]instanceof createjs.MovieClip&&null!==t.children[u].name&&(t.children[u].randID=++l._randID,i[s].subset.push(t.children[u].name),e(t.children[u],i))},i="exportRoot",n=this.exportRoot.children.length,a=0;a<n;a++)this.exportRoot.children[a]instanceof createjs.MovieClip&&null!==this.exportRoot.children[a].name&&void 0===this.exportRoot.children[a].randID&&(this.exportRoot.children[a].isAppend=!0,this.exportRoot.children[a].randID=++this._randID,this.levelInstanceMirror[i].subset.push(this.exportRoot.children[a].name),this.levelOneInstanceNames.push(this.exportRoot.children[a].name),t(this.exportRoot.children[a],this.levelInstanceMirror));this.modulesIsOn=this.modulesIsOn.filter(g.default.getArrayUnique)}}},{key:"reprocessInstanceEffectBase",value:function e(){if(!g.default.isNull(this))for(var t=this,i=function e(t,i){if(!t.EffectBaseShadow&&t.EffectBase){var n=t.EffectBase.clone(),a=t.EffectBase;t.EffectBaseShadow=n,t.EffectBase.alpha=0,t.EffectBaseShadow.alpha=.7;var s=t.localToGlobal(t.EffectBase.x-t.EffectBase.regX*t.EffectBase.scaleX,t.EffectBase.y-t.EffectBase.regY*t.EffectBase.scaleY),o=t.parent;g.default.notNull(t.parent._effectBaseToLoc)&&(o=t.parent._effectBaseToLoc);var r=o.globalToLocal(s.x,s.y);n.setTransform(r.x,r.y,n.scaleX*t.scaleX,n.scaleY*t.scaleY,t.rotation+n.rotation),t.timeline.on("change",function(e){a._off?o.removeChild(n):o.addChildAt(n,1)})}for(var u=t.children.length,l=0;l<u;l++)t.children[l]instanceof createjs.MovieClip&&null!==t.children[l].name&&e(t.children[l],i)},n=this.exportRoot.children.length,a=0;a<n;a++)this.exportRoot.children[a]instanceof createjs.MovieClip&&null!==this.exportRoot.children[a].name&&!0===this.exportRoot.children[a].isAppend&&(this.exportRoot.children[a].isAppend=void 0,i(this.exportRoot.children[a],this.levelInstanceMirror))}},{key:"getInstanceMirror",value:function e(t){if(!g.default.isNull(this)){var i=void 0,n=void 0;n=g.default.notNull(t._parentLink)?(i=t._parentLink.name||"",t._parentLink.randID):g.default.notNull(t.parent)?(i=t.parent.name||"",t.parent.randID):i="",i=""!==i?i+"_$"+n+"$":"";var a=t.name,s=g.default.notNull(a)?i+a:"exportRoot",o;return this.levelInstanceMirror[s]||null}}},{key:"openSoundPlayBar",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:{};g.default.isNull(this)||this.soundPlayBar&&this.soundPlayBar.openSoundPlayBar(t,n)}},{key:"closeSoundPlayBar",value:function e(){g.default.isNull(this)||this.soundPlayBar&&this.soundPlayBar.closeSoundPlayBar()}},{key:"stopSoundPlayBar",value:function e(){g.default.isNull(this)||this.soundPlayBar&&this.soundPlayBar.stopSoundPlayBar()}},{key:"openVideoPlayBar",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:{};g.default.isNull(this)||this.videoPlayBar&&this.videoPlayBar.openVideoPlayBar(t,n)}},{key:"closeVideoPlayBar",value:function e(){g.default.isNull(this)||this.videoPlayBar&&this.videoPlayBar.closeVideoPlayBar()}},{key:"stopVideoPlayBar",value:function e(){g.default.isNull(this)||this.videoPlayBar&&this.videoPlayBar.stopVideoPlayBar()}},{key:"hideUIComponents",value:function e(){if(!g.default.isNull(this))for(var o=this,t=function e(t){var i=o.getInstanceMirror(t),n=i.subset.length,a=void 0;t._pageUI&&(t.visible=!1);for(var s=0;s<n;s++)a=i.subset[s],e(i.target[a])},i=this.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this.levelOneInstanceNames[s],t((a=this.getInstanceMirror(this.exportRoot[n])).target)}},{key:"initModules",value:function e(){this.isInited&&(this.soundPlayBar=new u(this).init(),this.videoPlayBar=new l(this).init())}}]),h);function h(e,t,i,n){r(this,h),g.default.notNull(i)&&i.gotoAndStop(0),this._resetExclude=[],(this._this=this)._randID=99,this.createjs=null,this.animate=null,this.exportRoot=null,this.animateID=null,this.composition=null,this.lib=null,this.stage=null,this.spriteSheet=null,this.images=null,this.pairInstance=null,this.owner=null,this.pageSoundPath=null,this.pageVideoPath=null,this.assetSoundPath=null,this.assetVideoPath=null,this.globalSoundPath=null,this.mobileMode=!1,this.webMode=!1,this.iosMode=!1,this.initParamJSON=null,this.levelOneInstanceNames=[],this.levelInstanceMirror={},this.modulesIsOn=[""],this.soundChannel=null,this.soundObj=null,this.videoChannel=null,this.videoObj=null,this.soundPlayBar=null,this.videoPlayBar=null,this.pageParam=null,this.wbcMode=!1,this.actWinNavHide=!1,this.actWinWordGroupHide=!1,this.extraToHideMCList=null,this.commandMCListVisibleRest=null,this.commandMCListVisible=null,this.commandMCListInvisible=null,this.volume=1,this.isPressMoveOn=!1,this.mouseTriggerBehavior="click",this.textBaseline="alphabetic",this.textAlphabeticFixYScale=0,this.customMainControl={},this.callTouchInstanceTimer,this.wordStrokeExtends=[],this.wordStrokeLinkInfo=[],this.moduleConfigData={},this.wordStrokeOffsetMs=0,this.isInited=!1,this.createjs=e,this.animate=t,this.exportRoot=i,this.animateID=n,g.default.notNull(t)&&(this.composition=t.getComposition(n),this.lib=this.composition.getLibrary(),this.stage=this.composition.getStage(),this.spriteSheet=this.composition.getSpriteSheet(),this.images=this.composition.getImages(),this.lib.js=this.lib.js||{},(this.lib.js.selfInstance=this).owner=g.default.isNull(this.lib.js.owner)?g.default.getHtmlhrefValue("owner"):this.lib.js.owner,this.pageSoundPath=g.default.isNull(this.lib.js.pageSoundPath)?g.default.getHtmlhrefValue("pageSoundPath"):this.lib.js.pageSoundPath,this.pageVideoPath=g.default.isNull(this.lib.js.pageVideoPath)?g.default.getHtmlhrefValue("pageVideoPath"):this.lib.js.pageVideoPath,this.assetSoundPath=g.default.isNull(this.lib.js.assetSoundPath)?g.default.getHtmlhrefValue("assetSoundPath"):this.lib.js.assetSoundPath,this.assetVideoPath=g.default.isNull(this.lib.js.assetVideoPath)?g.default.getHtmlhrefValue("assetVideoPath"):this.lib.js.assetVideoPath,this.globalSoundPath=g.default.isNull(this.lib.js.globalSoundPath)?g.default.getHtmlhrefValue("globalSoundPath"):this.lib.js.globalSoundPath,this.initParamJSON=g.default.isNull(this.lib.js.initParamJSON)?g.default.getHtmlhrefValue("initParamJSON"):this.lib.js.initParamJSON,this.pageParam=g.default.notNull(this.initParamJSON)&&""!==this.initParamJSON?JSON.parse(this.initParamJSON):[],this.wordStrokeOffsetMs=g.default.notNull(g.default.getHtmlhrefValue("wordStrokeOffsetMs"))?Number(g.default.getHtmlhrefValue("wordStrokeOffsetMs")):this.wordStrokeOffsetMs,this._fps=new p(this.lib)),this.setupCreatejs(!0),this.scanInstanceRef(),this.processInstanceEffectBase(),this.triggerBGMousedownBind=this.triggerBGMousedownBind||this.triggerBGMousedown.bind(this),this._bgListenZoneBehavior="mousedown"}var p=(n(c,[{key:"startFPS",value:function e(t,i){var n=(this._baseThis=i).exportRoot.nominalBounds.x+i.exportRoot.nominalBounds.width,a,s=(i.exportRoot.nominalBounds.y+i.exportRoot.nominalBounds.height)/20;this.shape=new i.createjs.Shape,this.shape.graphics.beginFill("#000000").drawRect(0,0,3*s,s),this.shape.alpha=.5,this.shape.cache(0,0,3*s,s,2),this.shape.updateCache(),t.addChild(this.shape),this.txt=new i.createjs.Text("",.75*s+"px Arial","#ffffff"),this.txt.y=.25*s/2,this.txt.cache(0,0,3*s,s,2),t.addChild(this.txt),i.createjs.Ticker.addEventListener("tick",this.tickerFPSBind)}},{key:"stopFPS",value:function e(t){this.shape&&(this.shape.graphics.clear(),this.shape.uncache(),t.removeChild(this.shape),this.shape=null),t.removeChild(this.txt),this.txt&&(this.txt.uncache(),this.txt=null),this._baseThis.createjs.Ticker.removeEventListener("tick",this.tickerFPSBind)}},{key:"tickerFPS",value:function e(t){this.onceEverySixty()&&(this._fps.FPS=this._baseThis.createjs.Ticker.getMeasuredFPS(),this.txt.text="FPS: "+Math.round(this._fps.FPS),this.txt.updateCache())}}]),c);function c(e){var t;r(this,c),this.time=0,this.fps=0,(this._fps=this).onceEverySixty=(t=0,function(){return++t%e.properties.fps==0}),this.tickerFPSBind=this.tickerFPSBind||this.tickerFPS.bind(this)}t.BasePage=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleGoOutCommand=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,c=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["GoPage","Exe","ParmsExe","Mp4","URL","PopWin","HPopWin","PaPopWin","BWComp","BWCompLink","BWBack","BWBackLink","CDTrackG","Cmd","ExePopWin","CDTrackGHide","HwPopWin","OpenWindow"],l=!1,d=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init(),this.clearInstanceTimeout();for(var t=this._pickList.length,i=void 0,n=void 0,a=0;a<t;a++){if(i=this._pickList[a],n=this._parent.getInstanceMirror(i),c.default.notNull(this._parent.commandMCListVisibleRest)){var s=n.name;-1!==this._parent.commandMCListVisibleRest.indexOf(s)&&(i.orgVisible=i.resetVisible)}if(c.default.notNull(this._parent.commandMCListVisible)){var o=n.name;-1!==this._parent.commandMCListVisible.indexOf(o)&&(c.default.isNull(i.resetVisible)&&(i.resetVisible=i.orgVisible),i.orgVisible=!0)}if(c.default.notNull(this._parent.commandMCListInvisible)){var r=n.name;-1!==this._parent.commandMCListInvisible.indexOf(r)&&(c.default.isNull(i.resetVisible)&&(i.resetVisible=i.orgVisible),i.orgVisible=!1)}this._parent.wbcMode?"BWComp"===n.command||"BWCompLink"===n.command?i.visible=!1:"BWBack"===n.command||"BWBackLink"===n.command?i.visible=!0:i.visible=i.orgVisible:"BWBack"===n.command||"BWBackLink"===n.command?i.visible=!1:"BWComp"===n.command||"BWCompLink"===n.command?i.visible=!0:i.visible=i.orgVisible}this._parent.commandMCListVisibleRest=null,this.switchMobileMode(this._parent.mobileMode),this.switchWebMode(this._parent.webMode)}},{key:"getPickListName",value:function e(){for(var t=[],i=this._pickList.length,n=0;n<i;n++){var a=this._pickList[n],s=this._parent.getInstanceMirror(a);"BWBack"!==s.command&&"BWBackLink"!==s.command&&"BWCompLink"!==s.command&&t.push(a.name)}return t.concat().filter(c.default.getArrayUnique)}},{key:"switchMobileMode",value:function e(t){this.isInited||this.init();var i=this._pickList.length,n=void 0,a=void 0;if(c.default.isNull(this._parent.extraToHideMCList))for(var s=0;s<i;s++)n=this._pickList[s],"ParmsExe"===(a=this._parent.getInstanceMirror(n)).command?n.visible=!t:"Exe"===a.command?n.visible=!t:"ExePopWin"===a.command?n.visible=!t:"BWComp"!==a.command&&"BWBack"!==a.command&&"BWBackLink"!==a.command&&"BWCompLink"!==a.command&&(n.visible=n.orgVisible);else for(var o=0;o<i;o++)n=this._pickList[o],a=this._parent.getInstanceMirror(n),-1!==this._parent.extraToHideMCList.indexOf(n.name)?"BWComp"!==a.command&&"BWBack"!==a.command&&"BWBackLink"!==a.command&&"BWCompLink"!==a.command&&(n.visible=!1):"BWComp"!==a.command&&"BWBack"!==a.command&&"BWBackLink"!==a.command&&"BWCompLink"!==a.command&&(n.visible=n.orgVisible)}},{key:"switchWebMode",value:function e(t){this.isInited||this.init();var i=this._pickList.length,n=void 0,a=void 0;if(c.default.isNull(this._parent.extraToHideMCList))for(var s=0;s<i;s++)n=this._pickList[s],"ParmsExe"===(a=this._parent.getInstanceMirror(n)).command?n.visible=!t:"BWComp"!==a.command&&"BWBack"!==a.command&&"Exe"!==a.command&&"ExePopWin"!==a.command&&"BWBackLink"!==a.command&&"BWCompLink"!==a.command&&(n.visible=n.orgVisible);else for(var o=0;o<i;o++)n=this._pickList[o],a=this._parent.getInstanceMirror(n),-1!==this._parent.extraToHideMCList.indexOf(n.name)?"BWComp"!==a.command&&"BWBack"!==a.command&&"BWBackLink"!==a.command&&"BWCompLink"!==a.command&&(n.visible=!1):"BWComp"!==a.command&&"BWBack"!==a.command&&"BWBackLink"!==a.command&&"BWCompLink"!==a.command&&(n.visible=n.orgVisible)}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this._parent,r=this,t=function e(t){for(var i=o.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],r.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;t._pageUI=!0,this._pickList.push(t)}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=this._pickList.length,a=void 0;this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this);for(var s=0;s<n;s++)if(!(a=this._pickList[s])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.orgVisible=a.visible;var o=this._parent.getInstanceMirror(a);this._parent.wbcMode?("BWComp"===o.command&&(a.visible=!1),"BWCompLink"===o.command&&(a.visible=!1),"BWBack"===o.command&&(a.visible=!0),"BWBackLink"===o.command&&(a.visible=!0)):("BWBack"===o.command&&(a.visible=!1),"BWBackLink"===o.command&&(a.visible=!1),"BWComp"===o.command&&(a.visible=!0),"BWCompLink"===o.command&&(a.visible=!0)),a.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),c.default.notNull(a.EffectBase)&&c.default.applyMultiply(a.EffectBase)}}},{key:"triggerMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i);if(i.parent.isListPop?this._parent.stop(["ModuleListPop","ModuleDragListPop"],!0):this._parent.stop(null,!0),this.clearInstanceTimeout(),i.cursor=null,i.enabled=!1,i.mouseEnabled=!1,i.gotoAndStop(0),i.cache(i.nominalBounds.x,i.nominalBounds.y,i.nominalBounds.width,i.nominalBounds.height),-1===n.command.indexOf("CDTrackG"))this._timeoutID=setTimeout(function(){i.uncache(),i.cursor="pointer",i.gotoAndStop(0),i.enabled=!0,i.mouseEnabled=!0,this._timeoutID=void 0}.bind(this),300),this._parent.sendCommand(n.command,i.name);else if(this._timeoutID=setTimeout(function(){i.uncache(),i.cursor="pointer",i.gotoAndStop(0),i.enabled=!0,i.mouseEnabled=!0,this._timeoutID=void 0}.bind(this),300),c.default.isNull(this._parent.globalSoundPath))this._parent.sendCommand(n.command,i.name);else{this._parent.stop(null,!0);var a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.globalSoundPath?this._parent.globalSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";if(c.default.notNull(this._parent.lib.js.CDTrackHash)&&c.default.notNull(this._parent.lib.js.CDTrackHash[n.args[0]])){u=this._parent.lib.js.CDTrackHash[n.args[0]][0];for(var l=this._parent.lib.js.CDTrackHash[n.args[0]][1].split("."),d=l.length-1,h=l[0],p=1;p<d;p++)h+="."+l[p];this._parent.soundObj={id:h,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:null,completeFunc:null,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null},c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this.delayCommand={command:n.command,name:i.name}}else this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:null,completeFunc:null,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null},c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this.delayCommand={command:n.command,name:i.name}}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(c.default.isNull(this._parent.soundObj)||c.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)c.default.notNull(i)&&i.stop();else switch(n){case"fileload":c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.soundChannel.stop(),c.default.notNull(this.delayCommand)?(this._parent.sendCommand(this.delayCommand.command,this.delayCommand.name),this.delayCommand=null):(this._parent.soundChannel=null,this._parent.soundObj=null)}}},{key:"clearInstanceTimeout",value:function e(){c.default.notNull(this._timeoutID)&&(clearTimeout(this._timeoutID),this._timeoutID=void 0);for(var t=this._pickList.length,i=void 0,n=0;n<t;n++)(i=this._pickList[n]).uncache(),i.cursor="pointer",i.enabled=!0,i.mouseEnabled=!0,i.gotoAndStop(0)}}]),h);function h(e){r(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._timeoutID,this._prevTime=-1}t.ModuleGoOutCommand=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleBookSound=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,P=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["Sound","ReSound","Voice","VoiceTrack","CD","CDTrack","CDEx","CDExTrack"],l={Sound:"none",ReSound:"none",Voice:"mini-close",VoiceTrack:"mini-wait",CD:"normal-close",CDTrack:"normal-wait",CDEx:"ex-normal-close",CDExTrack:"ex-normal-wait"},d=!1,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();for(var t=this._pickList.length,i=void 0,n=void 0,a=0;a<t;a++)i=this._pickList[a],n=this._parent.getInstanceMirror(i);P.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),P.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;t._pageUI=!0,this._pickList.push(t)}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=this._pickList.length,a=void 0;this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this);for(var s=0;s<n;s++)(a=this._pickList[s])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),P.default.notNull(a.EffectBase)&&P.default.applyMultiply(a.EffectBase))}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i);if("Sound"===n.command&&P.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id===n.args[0])this._parent.stop(null,!0);else{this._parent.stop(null,!0);var a=void 0,s=0,o=i.parent,r=0;P.default.notNull(n.args[2])&&(r=Number(n.args[2])-1),r<0&&(r=0),P.default.trace(r),P.default.notNull(this._parent.marqueePagerData)&&P.default.notNull(this._parent.marqueePagerData[n.args[0]])&&(a=this._parent.marqueePagerData[n.args[0]],P.default.notNull(n.args[1])&&(s=a.sub[n.args[1]-1]||0,o=i.parent.parent));var u=this._parent.getInstanceMirror(o),l=u.subset.length,d=void 0,h=!1;if(P.default.notNull(a))for(var p=0;p<l;p++)if(-1!==u.subset[p].indexOf("ShowPic")){if(d=o[u.subset[p]],0===u.subset[p].indexOf("Slient")||0===u.subset[p].indexOf("Silent")){h=!0,d.alpha=.5,d.mouseChildren=!1,d.mouseEnabled=!1;for(var c=d.goPicList.length,_=0;_<c;_++){var g=d.goPicList[_];g.alpha=.5,g.mouseChildren=!1,g.mouseEnabled=!1}}break}var f=i.nominalBounds,v={x:i.x+f.x*i.scale,y:i.y+f.y*i.scale},m=i.parent.localToGlobal(v.x,v.y),b=this._parent.exportRoot.globalToLocal(m.x,m.y),y=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:y,loop:0,offset:s,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:b.x,locY:b.y,excludeTags:null,command:n.command,target:i,pager:d,pagerMarqueeData:a,alphaMode:h,shiftIndex:r};var S=this.checkCommandMode(n.command);this._parent.iosMode&&"none"===S?P.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):P.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(P.default.isNull(this._parent.soundObj)||P.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)P.default.notNull(i)&&i.stop();else switch(n){case"fileload":P.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){if(P.default.notNull(this._parent.soundChannel)&&P.default.notNull(this._parent.soundObj.pagerMarqueeData)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.lib.properties.fps;this.updateMarqueeStatus(i)}}},{key:"updateMarqueeStatus",value:function e(t){var i=this._parent.soundObj.pagerMarqueeData,n=i.sub.length,a=-1,s=void 0;for(s=0;s<n-1;s++)if(t>=i.sub[s]&&t<i.sub[s+1]){a=s;break}-1===a&&i.sub[s]<=t&&(a=s),-1!==a&&this._parent.updatePagerIndex(a+1+this._parent.soundObj.shiftIndex,this._parent.soundObj.pager)}},{key:"triggerSoundComplete",value:function e(t){P.default.trace("SoundComplete"),this.stop();var i=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===i||"normal-close"===i||"ex-normal-close"===i||"none"===i?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===i?P.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):P.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"checkSoundPlayStatus2",value:function e(t,i,n){if(P.default.isNull(this._parent.soundObj)||P.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)P.default.notNull(i)&&i.stop();else switch(n){case"fileerror":this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!this._parent.soundObj.autoPlay:this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch2",value:function e(t){}},{key:"triggerSoundComplete2",value:function e(t){P.default.trace("complete2"),this.stop();var i=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===i||"normal-close"===i||"ex-normal-close"===i||"none"===i?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,P.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._prevTime=-1}t.ModuleBookSound=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleAnsZone=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,C=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["AnsGroup","AnsZone","AnsZoneR","Ans","AnsRef","StepAns","AnimateAns","AnimateAnsSwitch","SyncAns"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"setAnsZoneEnable",value:function e(t,i,n){var a=1<arguments.length&&void 0!==i?i:.2,s=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),this._isEnable=t,a<0&&(a=0),1<a&&(a=1),this._disableAlpha=a,this._isEcho=s,this.reset();var o=void 0,r=void 0,u=void 0,l=void 0,d=void 0,h=void 0,p=void 0,c,_,g,f;for(o=this._ansGroup.length,d=0;d<o;d++)(u=this._ansGroup[d]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho,!this._isEnable&&this._disableAlpha<1?C.default.applyColorGrayFilter(this._parent.createjs,u,this._disableAlpha):C.default.unapplyColorFilter(this._parent.createjs,u);for(o=this._ansZone.length,d=0;d<o;d++)for((u=this._ansZone[d]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho,!this._isEnable&&this._disableAlpha<1?C.default.applyColorGrayFilter(this._parent.createjs,u,this._disableAlpha):C.default.unapplyColorFilter(this._parent.createjs,u),p=this.getCustomTag(u),r=this._ansZoneMirror[p].length,h=0;h<r;h++)(l=this._ansZoneMirror[p][h]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho;for(o=this._ans.length,d=0;d<o;d++)(u=this._ans[d]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho;for(o=this._ansRefGroup.length,d=0;d<o;d++)for((u=this._ansRefGroup[d]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho,!this._isEnable&&this._disableAlpha<1?C.default.applyColorGrayFilter(this._parent.createjs,u,this._disableAlpha):C.default.unapplyColorFilter(this._parent.createjs,u),p=this.getCustomTag(u),r=this._ansRefMirror[p].length,h=0;h<r;h++)(l=this._ansRefMirror[p][h]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho}},{key:"triggerAnsZoneDisableEvent",value:function e(){this.isInited||this.init(),this._parent.sendCommand("SMS","SMS_AnsZoneIsDisabled")}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0;t=this._stepAns.length;for(var i=0;i<t;i++){var n=this._stepAns[i];clearTimeout(n.timeout),n.timeout=null;var a=this._parent.getInstanceMirror(n),s=a.parent[a.args[0]];C.default.notNull(s)&&s.gotoAndStop(s.endStep)}t=this._animateAns.length;for(var o=0;o<t;o++){var r=this._animateAns[o],u=this._parent.getInstanceMirror(r),l=u.parent[u.args[0]];C.default.notNull(l)&&(clearTimeout(l.timeout),l.timeout=null,l.gotoAndStop(0))}t=this._animateAnsSwitch.length;for(var d=0;d<t;d++){var h=this._animateAnsSwitch[d],p=this._parent.getInstanceMirror(h),c=p.parent[p.args[0]];C.default.notNull(c)&&(clearTimeout(c.timeout),c.timeout=null,c.gotoAndStop(0))}}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,r=void 0;for(t=this._ansGroup.length,s=0;s<t;s++)(n=this._ansGroup[s]).isShow=!1;for(t=this._ansZone.length,s=0;s<t;s++)for((n=this._ansZone[s]).isShow=!1,n.parent.isShow=!1,r=this.getCustomTag(n),i=this._ansZoneMirror[r].length,o=0;o<i;o++)(a=this._ansZoneMirror[r][o]).gotoAndStop(a.frameNormal);for(t=this._ans.length,s=0;s<t;s++)(n=this._ans[s]).gotoAndStop(n.frameNormal);for(t=this._ansRefGroup.length,s=0;s<t;s++)for((n=this._ansRefGroup[s]).isShow=!1,n.parent.isShow=!1,r=this.getCustomTag(n),i=this._ansRefMirror[r].length,o=0;o<i;o++)(a=this._ansRefMirror[r][o]).visible=!1;for(t=this._stepAns.length,s=0;s<t;s++){n=this._stepAns[s],clearTimeout(n.timeout),n.timeout=null;var u=this._parent.getInstanceMirror(n);n.stepIndex=0,a=u.parent[u.args[0]],C.default.notNull(a)&&(a.gotoAndStop(0),a.startStep=0,a.endStep=0),this.refreshStepAns(n)}for(t=this._animateAns.length,s=0;s<t;s++){n=this._animateAns[s];var l=this._parent.getInstanceMirror(n);n.stepIndex=0,a=l.parent[l.args[0]],C.default.notNull(a)&&(clearTimeout(a.timeout),a.timeout=null,a.gotoAndStop(0),a.startStep=0,a.endStep=0),this.refreshAnimateAns(n)}for(t=this._animateAnsSwitch.length,s=0;s<t;s++){n=this._animateAnsSwitch[s];var d=this._parent.getInstanceMirror(n);n.stepIndex=0,a=d.parent[d.args[0]],C.default.notNull(a)&&(clearTimeout(a.timeout),a.timeout=null,a.gotoAndStop(0),a.startStep=0,a.endStep=0),this.refreshAnimateAns(n)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"AnsGroup":t._pageUI=!0,n=this.getCustomTag(t),this._ansGroup.push(t),this._ansGroupMirror[n]=this.pickRelation(i.parent,i.args[0]),this._ansGroupMirrorControl[n]=this.pickRelationControl(i.parent,i.args[0],"AnsZone"),this._ansGroupMirrorControl2[n]=this.pickRelationControl(i.parent,i.args[0],"StepAns");break;case"AnsZone":case"AnsZoneR":t._pageUI=!0,n=this.getCustomTag(t),this._ansZone.push(t),this._ansZoneMirror[n]=this.pickRelationPlus(i.parent,i.args[0]);break;case"SyncAns":t._pageUI=!1,n=this.getCustomTag(t),this._syncAns.push(t),this._syncAnsMirror[n]=this.pickRelationPlus(i.parent,i.args[0]);break;case"Ans":t._pageUI=!1,this._ans.push(t);break;case"AnsRef":t._pageUI=!0,n=this.getCustomTag(t),this._ansRefGroup.push(t),this._ansRefMirror[n]=this.pickRelation(i.parent,i.args[0]);break;case"StepAns":t._pageUI=!0,this._stepAns.push(t);break;case"AnimateAns":t._pageUI=!0,this._animateAns.push(t);break;case"AnimateAnsSwitch":t._pageUI=!0,this._animateAnsSwitch.push(t)}}}},{key:"getCustomTag",value:function e(t){return C.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"pickRelationPlus",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=i.split("SS"),r=o.length,u=0;u<r;u++)for(var l=o[u],d=0;d<s;d++){var h=this._parent.getInstanceMirror(a.target[a.subset[d]]),p=a.target[a.subset[d]];h.command===l&&n.push(p)}return n}},{key:"pickRelationControl",value:function e(t,i,n){for(var a=[],s=this._parent.getInstanceMirror(t),o=s.subset.length,r=0;r<o;r++){var u=this._parent.getInstanceMirror(s.target[s.subset[r]]);if(u.command===i)for(var l=u.subset.length,d=0;d<l;d++){var h=u.target[u.subset[d]],p;0===this._parent.getInstanceMirror(h).command.indexOf(n)&&a.push(h)}}return a}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=void 0,o=void 0,r=void 0,u=void 0,l=void 0;for(this.triggerAnsGroupMousedownBind=this.triggerAnsGroupMousedownBind||this.triggerAnsGroupMousedown.bind(this),this.triggerAnsZoneMousedownBind=this.triggerAnsZoneMousedownBind||this.triggerAnsZoneMousedown.bind(this),this.triggerAnsMousedownBind=this.triggerAnsMousedownBind||this.triggerAnsMousedown.bind(this),this.triggerSyncAnsMousedownBind=this.triggerSyncAnsMousedownBind||this.triggerSyncAnsMousedown.bind(this),this.triggerAnsRefMousedownBind=this.triggerAnsRefMousedownBind||this.triggerAnsRefMousedown.bind(this),this.triggerStepAnsFuncMousedownBind=this.triggerStepAnsFuncMousedownBind||this.triggerStepAnsFuncMousedown.bind(this),this.triggerAnimateAnsFuncMousedownBind=this.triggerAnimateAnsFuncMousedownBind||this.triggerAnimateAnsFuncMousedown.bind(this),this.triggerAnimateAnsSwitchFuncMousedownBind=this.triggerAnimateAnsSwitchFuncMousedownBind||this.triggerAnimateAnsSwitchFuncMousedown.bind(this),n=this._ansGroup.length,r=0;r<n;r++)if(!(s=this._ansGroup[r])._isModuleInited){s._replacePath=i,s._isModuleInited=!0,s.isShow=!1,s.cursor="pointer",s.addEventListener(this._mouseTriggerBehavior,this.triggerAnsGroupMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase);for(var d=this._parent.getInstanceMirror(s),h=this._parent.getInstanceMirror(d.parent),p=h.subset.length,c=0;c<p;c++){var _;o=h.target[h.subset[c]],this._parent.getInstanceMirror(o).command===d.args[0]&&(o.refAnsGroup=s)}}for(n=this._ansZone.length,r=0;r<n;r++)if(!(s=this._ansZone[r])._isModuleInited){s._replacePath=i,s._isModuleInited=!0,s.isShow=!1,s.parent.isShow=s.isShow,s.cursor="pointer",s.addEventListener(this._mouseTriggerBehavior,this.triggerAnsZoneMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase),l=this.getCustomTag(s),a=this._ansZoneMirror[l].length;var g="AnsZoneR"===this._parent.getInstanceMirror(s).command;for(u=0;u<a;u++)o=this._ansZoneMirror[l][u],-1===this._pickList.indexOf(o)&&(o.refAnsZone=s,o.cursor="pointer",void 0===o.frameNormal&&(o.frameNormal=0),void 0===o.frameOver&&(o.frameOver=1),g&&(o.frameNormal=1,o.frameOver=0),o.gotoAndStop(o.frameNormal),o.addEventListener(this._mouseTriggerBehavior,this.triggerAnsMousedownBind),C.default.notNull(o.EffectBase)&&C.default.applyMultiply(o.EffectBase))}for(n=this._ans.length,r=0;r<n;r++)(s=this._ans[r])._isModuleInited||(s._replacePath=i,s._isModuleInited=!0,s.cursor="pointer",void 0===s.frameNormal&&(s.frameNormal=0),void 0===s.frameOver&&(s.frameOver=1),s.gotoAndStop(s.frameNormal),s.addEventListener(this._mouseTriggerBehavior,this.triggerAnsMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase));for(n=this._syncAns.length,r=0;r<n;r++)(s=this._syncAns[r])._isModuleInited||(s._replacePath=i,s._isModuleInited=!0,s.cursor="pointer",s.addEventListener(this._mouseTriggerBehavior,this.triggerSyncAnsMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase));for(n=this._ansRefGroup.length,r=0;r<n;r++)if(!(s=this._ansRefGroup[r])._isModuleInited)for(s._replacePath=i,s._isModuleInited=!0,s.isShow=!1,s.cursor="pointer",s.addEventListener(this._mouseTriggerBehavior,this.triggerAnsRefMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase),l=this.getCustomTag(s),a=this._ansRefMirror[l].length,u=0;u<a;u++)o=this._ansRefMirror[l][u],C.default.notNull(o)&&(o.visible=!1);for(n=this._stepAns.length,r=0;r<n;r++)if(!(s=this._stepAns[r])._isModuleInited){s._replacePath=i,s._isModuleInited=!0,s.isShow=!1,s.parent.isShow=!1;for(var f=this._parent.getInstanceMirror(s),v=f.subset.length,m=0;m<v;m++){var b;o=s[f.subset[m]],"lastBtn"===this._parent.getInstanceMirror(o).command&&(o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerStepAnsFuncMousedownBind),C.default.notNull(o.EffectBase)&&C.default.applyMultiply(o.EffectBase))}if(o=s.prevBtn,C.default.notNull(o)&&(o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerStepAnsFuncMousedownBind),C.default.notNull(o.EffectBase)&&C.default.applyMultiply(o.EffectBase)),o=s.nextBtn,C.default.notNull(o)&&(o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerStepAnsFuncMousedownBind),C.default.notNull(o.EffectBase)&&C.default.applyMultiply(o.EffectBase)),s.stepIndex=0,o=f.parent[f.args[0]],C.default.notNull(o)){o.stepData=[],o.gotoAndStop(0);for(var y=o.labels.length,S=0;S<y;S++)o.stepData.push(o.labels[S].position);o.startStep=0,o.endStep=0}s._this=this,s.stepAnsRunningBind=s.stepAnsRunningBind||this.stepAnsRunning.bind(s),this.refreshStepAns(s)}for(n=this._animateAns.length,r=0;r<n;r++)if(!(s=this._animateAns[r])._isModuleInited){s._replacePath=i,s._isModuleInited=!0;var P=this._parent.getInstanceMirror(s);if(s.cursor="pointer",s.addEventListener(this._mouseTriggerBehavior,this.triggerAnimateAnsFuncMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase),s.stepIndex=0,o=P.parent[P.args[0]],C.default.notNull(o)){o.stepData=[],o.gotoAndStop(0);for(var M=o.labels.length,k=0;k<M;k++)o.stepData.push(o.labels[k].position);o.startStep=0,o.endStep=0,o._this=this,o.animateAnsRunningBind=o.animateAnsRunningBind||this.animateAnsRunning.bind(o)}this.refreshAnimateAns(s)}for(n=this._animateAnsSwitch.length,r=0;r<n;r++)if(!(s=this._animateAnsSwitch[r])._isModuleInited){s._replacePath=i,s._isModuleInited=!0;var O=this._parent.getInstanceMirror(s);if(s.cursor="pointer",s.addEventListener(this._mouseTriggerBehavior,this.triggerAnimateAnsSwitchFuncMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase),s.stepIndex=0,o=O.parent[O.args[0]],C.default.notNull(o)){o.stepData=[],o.gotoAndStop(0);for(var B=o.labels.length,x=0;x<B;x++)o.stepData.push(o.labels[x].position);o.startStep=0,o.endStep=0,o._this=this,o.animateAnsSwitchRunningBind=o.animateAnsSwitchRunningBind||this.animateAnsSwitchRunning.bind(o)}this.refreshAnimateAnsSwitch(s)}}},{key:"triggerAnsGroupMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();var i=t.currentTarget,n=this.getCustomTag(i),a=void 0,s=i.isShow;a=this._ansGroupMirrorControl2[n].length;for(var o=0;o<a;o++){var r=this._ansGroupMirrorControl2[n][o];if(C.default.notNull(r)){if(s)r.stepIndex=0;else{var u=this._parent.getInstanceMirror(r),l=u.parent[u.args[0]];C.default.notNull(l)&&(r.stepIndex=l.stepData.length)}r.isShow=s,r.parent.isShow=s,this.refreshStepAns(r),this.refreshAnsZoneStatus(r)}}a=this._ansGroupMirrorControl[n].length;for(var d=0;d<a;d++){var h=this._ansGroupMirrorControl[n][d];C.default.notNull(h)&&(h.isShow=s,h.parent.isShow=s,h.dispatchEvent(this._mouseTriggerBehavior),"mousedown"===this._mouseTriggerBehavior&&h.dispatchEvent("pressup"))}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerAnsZoneMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();C.default.notNull(t.stageX);for(var i=t.currentTarget,n=this.getCustomTag(i),a=this._ansZoneMirror[n].length,s=0;s<a;s++){var o=this._ansZoneMirror[n][s];C.default.notNull(o)&&(i.isShow?o.gotoAndStop(o.frameNormal):o.gotoAndStop(o.frameOver))}var r=this._parent.getInstanceMirror(i);if(i.isShow=!i.isShow,i.parent.isShow=i.isShow,C.default.notNull(r.args[1]))for(var u=this._ansZone.length,l=0;l<u;l++){var d=this._ansZone[l],h=this._parent.getInstanceMirror(d);if(d!==i&&h.args[1]===r.args[1]){d.isShow=i.isShow,d.parent.isShow=i.isShow;for(var p=this.getCustomTag(d),c=this._ansZoneMirror[p].length,_=0;_<c;_++){var g=this._ansZoneMirror[p][_];C.default.notNull(g)&&(d.isShow?g.gotoAndStop(g.frameOver):g.gotoAndStop(g.frameNormal))}}}this.refreshAnsZoneStatus(i),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSyncAnsMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();C.default.notNull(t.stageX);for(var i=t.currentTarget,n=this.getCustomTag(i),a=this._syncAnsMirror[n].length,s=0,o=0;o<a;o++){var r=this._syncAnsMirror[n][o];C.default.notNull(r)&&r.currentFrame===r.frameOver&&(s+=1)}var u=!0;s===a&&(u=!1);for(var l=0;l<a;l++){var d=this._syncAnsMirror[n][l];C.default.notNull(d)&&(u?d.gotoAndStop(d.frameOver):d.gotoAndStop(d.frameNormal),C.default.notNull(d.refAnsZone)&&this.refreshAnsStatus(d.refAnsZone))}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"refreshAnsZoneStatus",value:function e(t){var i,n=this._parent.getInstanceMirror(t).parent,a=n.refAnsGroup;if(!C.default.isNull(a)){var s=this._parent.getInstanceMirror(n),o=this._parent.getInstanceMirror(a),r=o.parent;if(!C.default.isNull(r)){for(var u=this._parent.getInstanceMirror(r),l=u.subset.length,d=0,h=0,p=0;p<l;p++){var c=r[u.subset[p]],_;this._parent.getInstanceMirror(c).command===o.args[0]&&(h++,c.isShow&&d++)}0===d?a.isShow=!1:d===h&&(a.isShow=!0)}}}},{key:"triggerAnsMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();var i=t.currentTarget;i.currentFrame===i.frameNormal?i.gotoAndStop(i.frameOver):i.gotoAndStop(i.frameNormal),C.default.notNull(i.refAnsZone)&&this.refreshAnsStatus(i.refAnsZone),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"refreshAnsStatus",value:function e(t){for(var i=this._parent.getInstanceMirror(t),n=i.parent,a=this._parent.getInstanceMirror(n),s=a.subset.length,o=0,r=0,u=0;u<s;u++)for(var l=n[a.subset[u]],d=this._parent.getInstanceMirror(l),h=i.args[0].split("SS"),p=h.length,c=0;c<p;c++)d.command===h[c]&&(r++,l.currentFrame===l.frameOver&&o++);if(0===o?t.isShow=!1:o===r&&(t.isShow=!0),t.parent.isShow=t.isShow,C.default.notNull(i.args[1]))for(var _=this._ansZone.length,g=0;g<_;g++){var f=this._ansZone[g],v=this._parent.getInstanceMirror(f);if(f!==t&&v.args[1]===i.args[1]){f.isShow=t.isShow,f.parent.isShow=t.isShow;for(var m=this.getCustomTag(f),b=this._ansZoneMirror[m].length,y=0;y<b;y++){var S=this._ansZoneMirror[m][y];C.default.notNull(S)&&(f.isShow?S.gotoAndStop(1):S.gotoAndStop(0))}}}this.refreshAnsZoneStatus(t)}},{key:"triggerAnsRefMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();for(var i=t.currentTarget,n=this.getCustomTag(i),a=this._ansRefMirror[n].length,s=0;s<a;s++){var o=this._ansRefMirror[n][s];C.default.notNull(o)&&(i.isShow?o.visible=!1:o.visible=!0)}i.isShow=!i.isShow,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerStepAnsFuncMousedown",value:function e(t){var i=t.currentTarget,n=i.parent,a=this._parent.getInstanceMirror(i),s=this._parent.getInstanceMirror(n),o=s.parent[s.args[0]];switch(a.command){case"lastBtn":n.toEnd?n.stepIndex=o.stepData.length:n.stepIndex=0,this.refreshStepAns(n);break;case"prevBtn":0<=n.stepIndex-1&&(n.stepIndex--,this.refreshStepAns(n));break;case"nextBtn":n.stepIndex+1<o.stepData.length&&(n.stepIndex++,this.refreshStepAns(n));break;default:"lastBtn"===a.command&&(n.toEnd?n.stepIndex=o.stepData.length:n.stepIndex=0,this.refreshStepAns(n))}this.refreshAnsZoneStatus(n)}},{key:"refreshStepAns",value:function e(t){clearTimeout(t.timeout);var i=this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!C.default.isNull(n)){0===t.stepIndex?(t.toEnd=!0,t.isShow=!1,t.parent.isShow=!1):t.stepIndex>=n.stepData.length-1&&(t.toEnd=!1,t.isShow=!0,t.parent.isShow=!0);var a=void 0;if(a=t.prevBtn,C.default.notNull(a)&&(0===t.stepIndex?(a.visible=!1,t.isShow=!1,t.parent.isShow=!1):a.visible=!0),a=t.nextBtn,C.default.notNull(a)&&(0===t.stepIndex?a.visible=!1:a.visible=!0,t.stepIndex<n.stepData.length-1?a.visible=!0:(a.visible=!1,t.isShow=!0,t.parent.isShow=!0)),t.stepIndex===n.stepData.length)return t.stepIndex-=1,n.gotoAndStop(n.totalFrames-1),n.startStep=n.totalFrames-1,void(n.endStep=n.totalFrames-1);n.gotoAndStop(n.stepData[t.stepIndex]),n.startStep=n.stepData[t.stepIndex],n.endStep=n.stepData[t.stepIndex+1]||n.totalFrames,n.endStep--;var s=Math.floor(1e3/this._parent.lib.properties.fps);n.startStep<n.endStep?t.timeout=setTimeout(t.stepAnsRunningBind,s):n.endStep=n.startStep}}},{key:"stepAnsRunning",value:function e(){var t=this,i=this._this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!(n.currentFrame<n.endStep))return n.gotoAndStop(n.currentFrame),clearTimeout(t.timeout),void(t.timeout=null);n.gotoAndStop(n.currentFrame+1);var a=Math.floor(1e3/this._this._parent.lib.properties.fps);t.timeout=setTimeout(t.stepAnsRunningBind,a)}},{key:"triggerAnimateAnsFuncMousedown",value:function e(t){var i=t.currentTarget,n=i.parent,a=this._parent.getInstanceMirror(i),s=this._parent.getInstanceMirror(n),o=a.parent[a.args[0]];i.stepIndex=Number(a.args[1]),this.refreshAnimateAns(i)}},{key:"refreshAnimateAns",value:function e(t){var i=this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!C.default.isNull(n)){clearTimeout(n.timeout),n.gotoAndStop(n.stepData[t.stepIndex]),n.startStep=n.stepData[t.stepIndex],n.endStep=n.stepData[t.stepIndex+1]||n.totalFrames,n.endStep--,n._target=t;var a=Math.floor(1e3/this._parent.lib.properties.fps);n.startStep<n.endStep?n.timeout=setTimeout(n.animateAnsRunningBind,a):n.endStep=n.startStep}}},{key:"animateAnsRunning",value:function e(){var t=this._target,i=this._this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!(n.currentFrame<n.endStep))return n.gotoAndStop(n.currentFrame),clearTimeout(n.timeout),void(n.timeout=null);n.gotoAndStop(n.currentFrame+1);var a=Math.floor(1e3/this._this._parent.lib.properties.fps);n.timeout=setTimeout(n.animateAnsRunningBind,a)}},{key:"triggerAnimateAnsSwitchFuncMousedown",value:function e(t){var i=t.currentTarget,n=i.parent,a=this._parent.getInstanceMirror(i),s=this._parent.getInstanceMirror(n),o=a.parent[a.args[0]];i.stepIndex=Number(a.args[1]),this.refreshAnimateAnsSwitch(i)}},{key:"refreshAnimateAnsSwitch",value:function e(t){var i=this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!C.default.isNull(n)){if(clearTimeout(n.timeout),C.default.notNull(n.timeout)){var a=n.stepData[t.stepIndex]-1;return a<0&&(a=0),n.gotoAndStop(0),void(n.timeout=null)}n.gotoAndStop(n.stepData[t.stepIndex]),n.startStep=n.stepData[t.stepIndex],n.endStep=n.stepData[t.stepIndex+1]||n.totalFrames,n.endStep--,n._target=t;var s=Math.floor(1e3/this._parent.lib.properties.fps);n.startStep<n.endStep?n.timeout=setTimeout(n.animateAnsSwitchRunningBind,s):n.endStep=n.startStep}}},{key:"animateAnsSwitchRunning",value:function e(){var t=this._target,i=this._this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!(n.currentFrame<n.endStep))return n.gotoAndStop(n.currentFrame),void clearTimeout(n.timeout);n.gotoAndStop(n.currentFrame+1);var a=Math.floor(1e3/this._this._parent.lib.properties.fps);n.timeout=setTimeout(n.animateAnsSwitchRunningBind,a)}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._ansGroup=[],this._ansGroupMirror={},this._ansGroupMirrorControl={},this._ansGroupMirrorControl2={},this._ansZone=[],this._ansZoneMirror={},this._syncAns=[],this._syncAnsMirror={},this._ans=[],this._ansRefGroup=[],this._ansRefMirror=[],this._stepAns=[],this._animateAns=[],this._animateAnsSwitch=[],this._seq=999,this._isEnable=!0,this._disableAlpha=.2,this._isEcho=!1}t.ModuleAnsZone=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModulePlaySwitchSound=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,c=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["PlayPause","PlayStop","PlayNoPause"],l=!1,d=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._playPause.length;for(i=0;i<n;i++)(t=this._playPause[i]).gotoAndStop(0);for(n=this._playNoPause.length,i=0;i<n;i++)(t=this._playNoPause[i]).gotoAndStop(0);c.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),c.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0;for(t=this._playStop.length,n=0;n<t;n++)(i=this._playStop[n]).gotoAndStop(0);for(t=this._playPause.length,n=0;n<t;n++)(i=this._playPause[n]).gotoAndStop(0);for(t=this._playNoPause.length,n=0;n<t;n++)(i=this._playNoPause[n]).gotoAndStop(0);c.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),c.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"isForceUseCreateJSAudio",value:function e(t){this._forceUseCreateJSAudio=t}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;t._pageUI=!0,t._seq=this._seq,this._seq++,this._pickList.push(t);var n=void 0;switch(i.command){case"PlayStop":n=this.getCustomTag(t),this._playStop.push(t),this._playStopMirror[n]=this.pickRelation(i.parent,i.command,t);break;case"PlayNoPause":n=this.getCustomTag(t),this._playNoPause.push(t),this._playNoPauseMirror[n]=this.pickRelation(i.parent,i.command,t);break;case"PlayPause":n=this.getCustomTag(t),this._playPause.push(t),this._playPauseMirror[t]=this.pickRelation(i.parent,i.command,t)}}}},{key:"getCustomTag",value:function e(t){return c.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i,n){for(var a=[],s=this._parent.getInstanceMirror(t),o=s.subset.length,r=0;r<o;r++){var u=this._parent.getInstanceMirror(s.target[s.subset[r]]),l=s.target[s.subset[r]];u.command===i&&l!==n&&a.push(l)}return a}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=void 0;for(this.triggerBtnPlayStopMousedownBind=this.triggerBtnPlayStopMousedownBind||this.triggerBtnPlayStopMousedown.bind(this),this.triggerBtnPlayPauseMousedownBind=this.triggerBtnPlayPauseMousedownBind||this.triggerBtnPlayPauseMousedown.bind(this),this.triggerBtnPlayNoPauseMousedownBind=this.triggerBtnPlayNoPauseMousedownBind||this.triggerBtnPlayNoPauseMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerStopSoundCompleteBind=this.triggerStopSoundCompleteBind||this.triggerStopSoundComplete.bind(this),this.triggerPauseSoundCompleteBind=this.triggerPauseSoundCompleteBind||this.triggerPauseSoundComplete.bind(this),this.triggerNoPauseSoundCompleteBind=this.triggerNoPauseSoundCompleteBind||this.triggerNoPauseSoundComplete.bind(this),n=this._playStop.length,s=0;s<n;s++)(a=this._playStop[s])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerBtnPlayStopMousedownBind),c.default.notNull(a.EffectBase)&&c.default.applyMultiply(a.EffectBase));for(n=this._playPause.length,s=0;s<n;s++)(a=this._playPause[s])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerBtnPlayPauseMousedownBind),c.default.notNull(a.EffectBase)&&c.default.applyMultiply(a.EffectBase));for(n=this._playNoPause.length,s=0;s<n;s++)(a=this._playNoPause[s])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerBtnPlayNoPauseMousedownBind),c.default.notNull(a.EffectBase)&&c.default.applyMultiply(a.EffectBase))}},{key:"triggerBtnPlayStopMousedown",value:function e(t){var i=t.currentTarget;if(this._parent.stop(null,!0),1===i.currentFrame)return i.gotoAndStop(0),t.stopPropagation(),void t.stopImmediatePropagation();for(var n=this.getCustomTag(i),a=this._playStopMirror[n].length,s=0;s<a;s++){var o;this._playStopMirror[n][s].gotoAndStop(0)}i.gotoAndStop(1);var r=this._parent.getInstanceMirror(i),u=i.nominalBounds,l={x:i.x+u.x*i.scale,y:i.y+u.y*i.scale},d=i.parent.localToGlobal(l.x,l.y),h=this._parent.exportRoot.globalToLocal(d.x,d.y),p=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:r.args[0],path:p,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerStopSoundCompleteBind,autoPlay:!0,locX:h.x,locY:h.y,excludeTags:null,command:r.command,target:i},this._parent.iosMode||this._forceUseCreateJSAudio?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnPlayPauseMousedown",value:function e(t){var i=t.currentTarget;if(c.default.notNull(this._parent.soundChannel)&&c.default.notNull(this._parent.soundObj)&&this._parent.soundObj.target===i)return 1===i.currentFrame?(this._parent.soundChannel.paused=!0,i.gotoAndStop(0)):(this._parent.soundChannel.paused=!1,i.gotoAndStop(1)),t.stopPropagation(),void t.stopImmediatePropagation();this._parent.stop(null,!0),i.gotoAndStop(1);var n=this._parent.getInstanceMirror(i),a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerPauseSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i},this._parent.iosMode||this._forceUseCreateJSAudio?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnPlayNoPauseMousedown",value:function e(t){var i=t.currentTarget;if(1===i.currentFrame)return this._parent.soundChannel.paused=!0,i.gotoAndStop(0),t.stopPropagation(),void t.stopImmediatePropagation();this._parent.stop(null,!0),i.gotoAndStop(1);var n=this._parent.getInstanceMirror(i),a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerNoPauseSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i},this._parent.iosMode||this._forceUseCreateJSAudio?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(c.default.isNull(this._parent.soundObj)||c.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)c.default.notNull(i)&&i.stop();else switch(n){case"fileload":c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this._parent.soundObj.target.gotoAndStop(0),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc)}}},{key:"triggerSoundWatch",value:function e(t){}},{key:"triggerPauseSoundComplete",value:function e(t){this._parent.soundObj.target.gotoAndStop(0),this.stop(),this._parent.clearSoundChannel()}},{key:"triggerNoPauseSoundComplete",value:function e(t){this._parent.soundObj.target.gotoAndStop(0),this.stop(),this._parent.clearSoundChannel()}},{key:"triggerStopSoundComplete",value:function e(t){this.stop(),this._parent.clearSoundChannel()}}]),h);function h(e){r(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._playStop=[],this._playPause=[],this._playNoPause=[],this._playStopMirror={},this._playNoPauseMirror={},this._playPauseMirror={},this._forceUseCreateJSAudio=!1,this._prevTime=-1,this._seq=999}t.ModulePlaySwitchSound=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleListPop=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,B=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["List","Close"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._listGroup.length;for(i=0;i<n;i++){t=this._listGroup[i];var a=this._parent.getInstanceMirror(t),s=a.parent[a.args[0]];if(B.default.notNull(s)){s.visible=!1;for(var o=this._parent.getInstanceMirror(s),r=o.subset.length,u=0,l=[],d=0;d<r;d++){var h=s[o.subset[d]],p=this._parent.getInstanceMirror(h);"Close"!==p.command&&"StopTouch"!==p.command&&(B.default.isNull(h._orgXY)&&(h.setTransform(h.x-h.regX*h.scaleX,h.y-h.regY*h.scaleY,h.scaleX,h.scaleY),h._orgXY={x:h.x,y:h.y}),l.push({target:h,y:h._orgXY.y,diff:0})),h.visible&&"Close"!==p.command&&"StopTouch"!==p.command&&u++}for(var c=l.sort(function(e,t){return e.y>t.y?1:-1}),_=0,g=c.length,f=1;f<g;f++){var v=c[f].target,m=c[f-1].target,b=m._orgXY.y+m.nominalBounds.height*m.scaleY,y=v._orgXY.y-b;c[f].diff=y}for(var S=null,P=_=0;P<g;P++){var M=c[P].target,k=this._parent.getInstanceMirror(M);if(M.visible&&"Close"!==k.command&&"StopTouch"!==k.command){if(M.y=c[_].y,B.default.isNull(S))M.y=c[_].y;else{var O=S.target.nominalBounds.height*S.target.scaleY;M.y=S.target.y+O+c[_].diff}_++,S=c[P]}}t.visible=0!==u}}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"List":n=this.getCustomTag(t),this._listGroup.push(t),this._listGroupControlMirror[n]=this.pickRelation(i.parent,i.command,t);break;case"Close":n=this.getCustomTag(t),this._closeGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return B.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i,n){for(var a=[],s=this._parent.getInstanceMirror(t),o=s.subset.length,r=0;r<o;r++){var u=this._parent.getInstanceMirror(s.target[s.subset[r]]),l=s.target[s.subset[r]];if(u.command===i&&l!==n){var d=this._parent.getInstanceMirror(l);a.push(d.parent[d.args[0]])}}return a}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=void 0;for(this.triggerBtnListMousedownBind=this.triggerBtnListMousedownBind||this.triggerBtnListMousedown.bind(this),this.triggerBtnCloseMousedownBind=this.triggerBtnCloseMousedownBind||this.triggerBtnCloseMousedown.bind(this),n=this._listGroup.length,s=0;s<n;s++)if(!(a=this._listGroup[s])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer";var o=this._parent.getInstanceMirror(a),r=o.parent[o.args[0]];B.default.notNull(r)&&(r.isListPop=!0,r.visible=!1,B.default.isNull(r._orgXY)&&(r._orgXY={x:r.x,y:r.y})),a.addEventListener(this._mouseTriggerBehavior,this.triggerBtnListMousedownBind),B.default.notNull(a.EffectBase)&&B.default.applyMultiply(a.EffectBase)}for(n=this._closeGroup.length,s=0;s<n;s++)(a=this._closeGroup[s])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerBtnCloseMousedownBind),B.default.notNull(a.EffectBase)&&B.default.applyMultiply(a.EffectBase))}},{key:"triggerBtnListMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]];B.default.isNull(i._orgXY)&&(i.setTransform(i.x-i.regX*i.scaleX,i.y-i.regY*i.scaleY,i.scaleX,i.scaleY),i._orgXY={x:i.x,y:i.y});var s=i.y-i._orgXY.y;0!=s&&(a.y=a._orgXY.y+s),B.default.notNull(a)&&(a.visible=!a.visible);for(var o=this.getCustomTag(i),r=this._listGroupControlMirror[o].length,u=0;u<r;u++)this._listGroupControlMirror[o][u].visible=!1;t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnCloseMousedown",value:function e(t){var i=t.currentTarget,n;this._parent.getInstanceMirror(i).parent.visible=!1,t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._listGroup=[],this._listGroupControlMirror={},this._closeGroup=[],this._seq=999}t.ModuleListPop=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleSwitchPop=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,h=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["Switch","ReverseSwitch"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0;for(n=this._switchGroup.length,i=0;i<n;i++){(t=this._switchGroup[i]).visible=!this._parent.actWinNavHide,t.gotoAndStop(0);var a=this._parent.getInstanceMirror(t),s=a.parent[a.args[0]];h.default.notNull(s)&&(s.visible=!1)}for(n=this._reverseSwitchGroup.length,i=0;i<n;i++){(t=this._reverseSwitchGroup[i]).visible=!this._parent.actWinNavHide,t.gotoAndStop(0);var o=this._parent.getInstanceMirror(t),r=o.parent[o.args[0]];h.default.notNull(r)&&(this._parent.actWinNavHide?r.visible=!1:r.visible=!0)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"Switch":n=this.getCustomTag(t),this._switchGroup.push(t);break;case"ReverseSwitch":n=this.getCustomTag(t),this._reverseSwitchGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return h.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=void 0;for(this.triggerSwitchMousedownBind=this.triggerSwitchMousedownBind||this.triggerSwitchMousedown.bind(this),this.triggerReverseSwitchMousedownBind=this.triggerReverseSwitchMousedownBind||this.triggerReverseSwitchMousedown.bind(this),s=this._switchGroup.length,a=0;a<s;a++)if(!(n=this._switchGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var o=this._parent.getInstanceMirror(n),r=o.parent[o.args[0]];h.default.notNull(r)&&(r.visible=!1),n.addEventListener(this._mouseTriggerBehavior,this.triggerSwitchMousedownBind),h.default.notNull(n.EffectBase)&&h.default.applyMultiply(n.EffectBase)}for(s=this._reverseSwitchGroup.length,a=0;a<s;a++)if(!(n=this._reverseSwitchGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var u=this._parent.getInstanceMirror(n),l=u.parent[u.args[0]];h.default.notNull(l)&&(l.visible=!0),n.addEventListener(this._mouseTriggerBehavior,this.triggerReverseSwitchMousedownBind),h.default.notNull(n.EffectBase)&&h.default.applyMultiply(n.EffectBase)}}},{key:"triggerSwitchMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]];0===i.currentFrame?i.gotoAndStop(1):i.gotoAndStop(0),h.default.notNull(a)&&(a.visible=!a.visible),this.processToggleBehavior(i),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerReverseSwitchMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]];0===i.currentFrame?i.gotoAndStop(1):i.gotoAndStop(0),h.default.notNull(a)&&(a.visible=!a.visible),this.processToggleBehavior(i),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"processToggleBehavior",value:function e(t){var i=this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(h.default.notNull(i.args[1])&&n.visible){var a=void 0,s=void 0,o=void 0;for(o=this._switchGroup.length,s=0;s<o;s++)if((a=this._switchGroup[s])!==t){var r=this._parent.getInstanceMirror(a),u=r.parent[r.args[0]];h.default.notNull(r.args[1])&&r.args[1]===i.args[1]&&u.visible&&(a.gotoAndStop(0),h.default.notNull(u)&&(u.visible=!1))}for(o=this._reverseSwitchGroup.length,s=0;s<o;s++)if((a=this._reverseSwitchGroup[s])!==t){var l=this._parent.getInstanceMirror(a),d=l.parent[l.args[0]];h.default.notNull(l.args[1])&&l.args[1]===i.args[1]&&d.visible&&(a.gotoAndStop(0),h.default.notNull(d)&&(d.visible=!1))}}}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._switchGroup=[],this._reverseSwitchGroup=[],this._seq=999}t.ModuleSwitchPop=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleStopTouch=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,o=r(i(0));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=["StopTouch"],d=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init()}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==l.indexOf(i.command)){if(this._pickList.includes(t))return;t._pageUI=!0,this._pickList.push(t)}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=this._pickList.length,a=void 0;this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this);for(var s=0;s<n;s++)(a=this._pickList[s])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor=null,a.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),o.default.notNull(a.EffectBase)&&o.default.applyMultiply(a.EffectBase))}},{key:"triggerMousedown",value:function e(t){t.stopPropagation(),t.stopImmediatePropagation()}}]),h);function h(e){u(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList}t.ModuleStopTouch=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleDragListPop=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,j=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["DragList","DragMainMenuList"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),j.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1)}},{key:"reset",value:function e(){this.isInited||this.init(),j.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=void 0;for(n=this._dragListGroup.length,i=0;i<n;i++){(t=this._dragListGroup[i]).addEventListener("click",this.triggerBtnDragListClickBind);var a=this._parent.getInstanceMirror(t),s=a.parent[a.args[0]];if(j.default.notNull(s)){s.visible=!1;for(var o=this._parent.getInstanceMirror(s),r=o.subset.length,u=0,l=0;l<r;l++){var d=s[o.subset[l]],h=this._parent.getInstanceMirror(d);d.visible&&"Close"!==h.command&&u++}t.visible=0!==u}}for(n=this._dragMainMenuListGroup.length,i=0;i<n;i++){(t=this._dragMainMenuListGroup[i]).addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),t.addEventListener("click",this.triggerBtnDragMainMenuListClickBind),t.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),t.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind);var p=this._parent.getInstanceMirror(t),c=p.parent[p.args[0]];if(j.default.notNull(c)){c.visible=!1;for(var _=this._parent.getInstanceMirror(c),g=_.subset.length,f=0,v=[],m=0;m<g;m++){var b=c[_.subset[m]],y=this._parent.getInstanceMirror(b);"Close"!==y.command&&(j.default.isNull(b._orgXY)&&(b.setTransform(b.x-b.regX*b.scaleX,b.y-b.regY*b.scaleY,b.scaleX,b.scaleY),b._orgXY={x:b.x,y:b.y}),v.push({target:b,y:b._orgXY.y,diff:0})),"List"===y.command&&(c[y.args[0]].visible=!1),b.visible&&"Close"!==y.command&&f++}for(var S=v.sort(function(e,t){return e.y>t.y?1:-1}),P=0,M=S.length,k=1;k<M;k++){var O=S[k].target,B=S[k-1].target,x=B._orgXY.y+B.nominalBounds.height*B.scaleY,C=O._orgXY.y-x;S[k].diff=C}for(var T=null,w=P=0;w<M;w++){var L=S[w].target,I=this._parent.getInstanceMirror(L);if(L.visible&&"Close"!==I.command){if(L.y=S[P].y,j.default.isNull(T))L.y=S[P].y;else{var N=T.target.nominalBounds.height*T.target.scaleY;L.y=T.target.y+N+S[P].diff}P++,T=S[w]}}t.parent.visible=0!==f}t.visible=!0,p.parent.btnFixed.visible=!1,p.parent.btnNotFixed.visible=!0,p.parent.btnDisplay.visible=!1,p.parent.btnHide.visible=!0,p.parent.btnDisplay.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),p.parent.btnHide.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),p.parent.btnDisplay.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),p.parent.btnDisplay.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),p.parent.btnDisplay.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),p.parent.btnHide.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),p.parent.btnHide.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),p.parent.btnHide.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"DragList":n=this.getCustomTag(t),this._dragListGroup.push(t);break;case"DragMainMenuList":n=this.getCustomTag(t),this._dragMainMenuListGroup.push(t),this._dragMainMenuListGroupMirror[n]=this.pickRelation(i.parent,i.args[0])}}}},{key:"getCustomTag",value:function e(t){return j.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=void 0;for(this.triggerBtnDragListMousedownBind=this.triggerBtnDragListMousedownBind||this.triggerBtnDragListMousedown.bind(this),this.triggerBtnDragListClickBind=this.triggerBtnDragListClickBind||this.triggerBtnDragListClick.bind(this),this.triggerBtnDragListPressmoveBind=this.triggerBtnDragListPressmoveBind||this.triggerBtnDragListPressmove.bind(this),this.triggerBtnDragListPressupBind=this.triggerBtnDragListPressupBind||this.triggerBtnDragListPressup.bind(this),this.triggerBtnDragMainMenuListMousedownBind=this.triggerBtnDragMainMenuListMousedownBind||this.triggerBtnDragMainMenuListMousedown.bind(this),this.triggerBtnDragMainMenuListClickBind=this.triggerBtnDragMainMenuListClickBind||this.triggerBtnDragMainMenuListClick.bind(this),this.triggerBtnDragMainMenuListPressmoveBind=this.triggerBtnDragMainMenuListPressmoveBind||this.triggerBtnDragMainMenuListPressmove.bind(this),this.triggerBtnDragMainMenuListPressupBind=this.triggerBtnDragMainMenuListPressupBind||this.triggerBtnDragMainMenuListPressup.bind(this),this.triggerBtnDragMainMenuListFuncMousedownBind=this.triggerBtnDragMainMenuListFuncMousedownBind||this.triggerBtnDragMainMenuListFuncMousedown.bind(this),s=this._dragListGroup.length,a=0;a<s;a++)if(!(n=this._dragListGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var o=this._parent.getInstanceMirror(n);o.parent.orgX=o.parent.x,o.parent.orgY=o.parent.y;var r=o.parent[o.args[0]];j.default.notNull(r)&&(r.isListPop=!0,r.visible=!1),n.addEventListener("mousedown",this.triggerBtnDragListMousedownBind),n.addEventListener("click",this.triggerBtnDragListClickBind),n.addEventListener("pressmove",this.triggerBtnDragListPressmoveBind,j.default.supportPassive()),n.addEventListener("pressup",this.triggerBtnDragListPressupBind),j.default.notNull(n.EffectBase)&&j.default.applyMultiply(n.EffectBase)}for(s=this._dragMainMenuListGroup.length,a=0;a<s;a++)if(!(n=this._dragMainMenuListGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var u=this._parent.getInstanceMirror(n),l=u.parent[u.args[0]];if(u.parent.orgX=u.parent.x,u.parent.orgY=u.parent.y,j.default.notNull(l)){l.isListPop=!0,l.visible=!1;for(var d=this._parent.getInstanceMirror(l),h=d.subset.length,p=0;p<h;p++){var c=l[d.subset[p]],_=this._parent.getInstanceMirror(c);"List"===_.command&&(l[_.args[0]].visible=!1)}}n.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),n.addEventListener("click",this.triggerBtnDragMainMenuListClickBind),n.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),n.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),j.default.notNull(n.EffectBase)&&j.default.applyMultiply(n.EffectBase),n.visible=!0,u.parent.btnFixed.visible=!1,u.parent.btnNotFixed.visible=!0,u.parent.btnDisplay.visible=!1,u.parent.btnHide.visible=!0,u.parent.btnFixed.dragMainMenuList=n,u.parent.btnNotFixed.dragMainMenuList=n,u.parent.btnDisplay.dragMainMenuList=n,u.parent.btnHide.dragMainMenuList=n,u.parent.btnFixed.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),u.parent.btnNotFixed.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),u.parent.btnDisplay.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),u.parent.btnHide.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),u.parent.btnDisplay.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),u.parent.btnDisplay.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),u.parent.btnDisplay.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),u.parent.btnHide.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),u.parent.btnHide.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),u.parent.btnHide.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind)}}},{key:"triggerBtnDragListClick",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]];j.default.notNull(a)&&(a.visible=!a.visible),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListClick",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]];if(j.default.notNull(a)){a.visible=!a.visible;for(var s=this._parent.getInstanceMirror(a),o=s.subset.length,r=0;r<o;r++){var u=a[s.subset[r]],l=this._parent.getInstanceMirror(u);"List"===l.command&&(a[l.args[0]].visible=!1)}}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListFuncMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent,s=void 0,o=void 0;switch(n.command){case"btnFixed":a.btnFixed.visible=!1,a.btnNotFixed.visible=!0,i.dragMainMenuList.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),i.dragMainMenuList.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),i.dragMainMenuList.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),a.btnDisplay.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),a.btnDisplay.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),a.btnDisplay.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),a.btnHide.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),a.btnHide.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),a.btnHide.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind);break;case"btnNotFixed":a.btnFixed.visible=!0,a.btnNotFixed.visible=!1,i.dragMainMenuList.removeEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),i.dragMainMenuList.removeEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),i.dragMainMenuList.removeEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),a.btnDisplay.removeEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),a.btnDisplay.removeEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),a.btnDisplay.removeEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),a.btnHide.removeEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),a.btnHide.removeEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),a.btnHide.removeEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind);break;case"btnDisplay":if(a.btnHide.visible=!0,a.btnDisplay.visible=!1,o=(s=this._parent.getInstanceMirror(i.dragMainMenuList)).parent[s.args[0]],j.default.notNull(o)){o.visible=!1;for(var r=this._parent.getInstanceMirror(o),u=r.subset.length,l=0;l<u;l++){var d=o[r.subset[l]],h=this._parent.getInstanceMirror(d);"List"===h.command&&(o[h.args[0]].visible=!1)}}i.dragMainMenuList.visible=!0;break;case"btnHide":if(a.btnHide.visible=!1,a.btnDisplay.visible=!0,o=(s=this._parent.getInstanceMirror(i.dragMainMenuList)).parent[s.args[0]],j.default.notNull(o)){o.visible=!1;for(var p=this._parent.getInstanceMirror(o),c=p.subset.length,_=0;_<c;_++){var g=o[p.subset[_]],f=this._parent.getInstanceMirror(g);"List"===f.command&&(o[f.args[0]].visible=!1)}}i.dragMainMenuList.visible=!1}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.parent.globalToLocal(t.stageX,t.stageY);this.isCheckMove=!1,i.parent.fixX=i.parent.x-n.x,i.parent.fixY=i.parent.y-n.y,i.parent.startX=i.parent.x,i.parent.startY=i.parent.y,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget;i.parent.parent.setChildIndex(i.parent,i.parent.parent.getNumChildren()-1);var n=i.parent.parent.globalToLocal(t.stageX,t.stageY);i.parent.x=n.x+i.parent.fixX,i.parent.y=n.y+i.parent.fixY;var a=Math.abs(i.parent.x-i.parent.startX),s=Math.abs(i.parent.y-i.parent.startY),o;60<Math.sqrt(Math.pow(a,2)+Math.pow(s,2))&&i.removeEventListener("click",this.triggerBtnDragListClickBind),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListPressup",value:function e(t){var i;this._parent.setPressEventIsOn(!1),t.currentTarget.addEventListener("click",this.triggerBtnDragListClickBind),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.parent.globalToLocal(t.stageX,t.stageY);this.isCheckMove=!1,i.parent.fixX=i.parent.x-n.x,i.parent.fixY=i.parent.y-n.y,i.parent.startX=i.parent.x,i.parent.startY=i.parent.y,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget;i.parent.parent.setChildIndex(i.parent,i.parent.parent.getNumChildren()-1);var n=i.parent.parent.globalToLocal(t.stageX,t.stageY);i.parent.x=n.x+i.parent.fixX,i.parent.y=n.y+i.parent.fixY;var a=Math.abs(i.parent.x-i.parent.startX),s=Math.abs(i.parent.y-i.parent.startY),o,r;60<Math.sqrt(Math.pow(a,2)+Math.pow(s,2))&&("DragMainMenuList"===this._parent.getInstanceMirror(i).command?i.removeEventListener("click",this.triggerBtnDragMainMenuListClickBind):i.removeEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind)),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListPressup",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n;"DragMainMenuList"===this._parent.getInstanceMirror(i).command?i.addEventListener("click",this.triggerBtnDragMainMenuListClickBind):i.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._parent=e,this._pickList,this._dragListGroup=[],this._dragMainMenuListGroup=[],this._dragMainMenuListGroupMirror={},this._seq=999}t.ModuleDragListPop=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModulePageActSoundMV=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,O=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["ActMV","ActVideo","AbortActMV","OnceActVideo"],l={ActMV:"mini-wait",ActVideo:"mini-wait",AbortActMV:"none",OnceActVideo:"none"},d=!1,h=!0,p=.5,c=(n(_,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();for(var t=!this._parent.stage.contains(this._parent.exportRoot),i=this._actMVGroup.length,n=void 0,a=void 0,s=0;s<i;s++){n=this._actMVGroup[s];var o=(a=this._parent.getInstanceMirror(n)).parent[a.args[0]];if(O.default.notNull(o)){o._changeFinalFrame?o.gotoAndStop(o._changeFinalFrame):o.gotoAndStop(0);var r=o;if(o.useGL&&O.default.notNull(r)){r.bitmapCache&&(r.uncache(),this._parent.stage.update());var u=r._maskBase;if(u){if(this._parent.stage.isWebGL){var l=r.scaleX/u.scaleX,d=r.scaleY/u.scaleY;r.cache(u.nominalBounds.x/l,u.nominalBounds.y/d,u.nominalBounds.width/l,u.nominalBounds.height/d,r._webGLCacheRectSize),r.useGL=!1}}else this._parent.stage.isWebGL;this._parent.stage.update()}o._abortZeroFrame?(o.visible=!1,o.bitmapCache&&(o.uncache(),this._parent.stage.update()),t&&o._maskBase&&o._maskBase.bitmapCache&&o._maskBase.uncache()):t?(o.bitmapCache&&(o.uncache(),this._parent.stage.update()),o._maskBase&&o._maskBase.bitmapCache&&o._maskBase.uncache()):o.bitmapCache&&(o.updateCache(),this._parent.stage.update())}}O.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),O.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc),O.default.notNull(this._parent.videoChannel)&&(O.default.notNull(this._parent.videoChannel.videoBitmap)&&(O.default.notNull(this._parent.videoChannel.videoBitmap.parent)&&this._parent.videoChannel.videoBitmap.parent.removeChild(this._parent.videoChannel.videoBitmap),this._parent.videoChannel.videoBitmap=null,this._parent.videoChannel.videoBuffer=null),this._parent.videoChannel.removeEventListener("complete",this._parent.videoObj.completeFunc)),O.default.notNull(this._parent.videoObj)&&(O.default.notNull(this._parent.videoObj.videoBase)&&(this._parent.videoObj.videoBase.visible=!1,this._parent.videoObj.videoBase._abortZeroFrame&&(this._parent.videoObj.videoBase.visible=!1),this._parent.videoObj.videoBase.bitmapCache&&(this._parent.videoObj.videoBase.uncache(),this._parent.stage.update())),this._parent.createjs.Ticker.removeEventListener("tick",this._parent.videoObj.watchFunc)),i=this._actVideoGroup.length;for(var h=0;h<i;h++){n=this._actVideoGroup[h];var p=(a=this._parent.getInstanceMirror(n)).parent[a.args[0]];O.default.notNull(p)&&t&&(p.bitmapCache&&(p.uncache(),this._parent.stage.update()),p._maskBase&&p._maskBase.bitmapCache&&p._maskBase.uncache())}i=this._onceActVideoGroup.length;for(var c=0;c<i;c++){n=this._onceActVideoGroup[c];var _=(a=this._parent.getInstanceMirror(n)).parent[a.args[0]];O.default.notNull(_)&&t&&(_.bitmapCache&&(_.uncache(),this._parent.stage.update()),_._maskBase&&_._maskBase.bitmapCache&&_._maskBase.uncache())}var g=this;this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),t||(this._timeout=setTimeout(function(){g._parent.stage.contains(g._parent.exportRoot)||g.stop()},100))}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ActMV":this._actMVGroup.push(t);break;case"AbortActMV":this._abortActMVGroup.push(t);break;case"ActVideo":this._actVideoGroup.push(t);break;case"OnceActVideo":this._onceActVideoGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerVideoMousedownBind=this.triggerVideoMousedownBind||this.triggerVideoMousedown.bind(this),this.triggerVideoWatchBind=this.triggerVideoWatchBind||this.triggerVideoWatch.bind(this),this.triggerVideoCompleteBind=this.triggerVideoCompleteBind||this.triggerVideoComplete.bind(this),this.triggerOnceVideoMousedownBind=this.triggerOnceVideoMousedownBind||this.triggerOnceVideoMousedown.bind(this),this.triggerOnceVideoWatchBind=this.triggerOnceVideoWatchBind||this.triggerOnceVideoWatch.bind(this),this.triggerOnceVideoCompleteBind=this.triggerOnceVideoCompleteBind||this.triggerOnceVideoComplete.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundMousedownBind=this.triggerSoundMousedownBind||this.triggerSoundMousedown.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerAbortSoundMousedownBind=this.triggerAbortSoundMousedownBind||this.triggerAbortSoundMousedown.bind(this),this.checkVideoPlayStatusBind=this.checkVideoPlayStatusBind||this.checkVideoPlayStatus.bind(this),this.checkOnceVideoPlayStatusBind=this.checkOnceVideoPlayStatusBind||this.checkOnceVideoPlayStatus.bind(this);var n=void 0;n=this._actMVGroup.length;for(var a=void 0,s=0;s<n;s++)if(!(a=this._actMVGroup[s])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerSoundMousedownBind),O.default.notNull(a.EffectBase)&&O.default.applyMultiply(a.EffectBase);var o=this._parent.getInstanceMirror(a),r=o.parent[o.args[0]];if(O.default.notNull(r)){r._abortZeroFrame=!1,r._changeFinalFrame=0;var u=this._parent.getInstanceMirror(a);r._webGLCacheRectSize=r.scale?r.scale:.5,a._animateBase=r;var l=u.parent[u.args[0]+"_mask"];if(O.default.notNull(l)){if(u.parent.removeChild(l),l.cache(l.nominalBounds.x,l.nominalBounds.y,l.nominalBounds.width,l.nominalBounds.height,r._webGLCacheRectSize),r._maskBase=l,this._parent.stage.isWebGL&&(r.filters=[new createjs.AlphaMaskFilter(l.cacheCanvas)],!r._abortZeroFrame&&O.default.notNull(l))){var d=r.scaleX/l.scaleX,h=r.scaleY/l.scaleY;r.cache(l.nominalBounds.x/d,l.nominalBounds.y/h,l.nominalBounds.width/d,l.nominalBounds.height/h,r._webGLCacheRectSize),r.useGL=!1}}else this._parent.stage.isWebGL}}n=this._abortActMVGroup.length;for(var p=0;p<n;p++)if(!(a=this._abortActMVGroup[p])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerAbortSoundMousedownBind),O.default.notNull(a.EffectBase)&&O.default.applyMultiply(a.EffectBase);var c=this._parent.getInstanceMirror(a),_=c.parent[c.args[0]];O.default.notNull(_)&&(a._animateBase=_,a._animateBase._playCompleteToEndFrame=!0,_._abortBtn=a)}n=this._actVideoGroup.length;for(var g=0;g<n;g++)if(!(a=this._actVideoGroup[g])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerVideoMousedownBind),O.default.notNull(a.EffectBase)&&O.default.applyMultiply(a.EffectBase);var f=this._parent.getInstanceMirror(a),v=f.parent[f.args[0]];if(O.default.notNull(v)){v._abortZeroFrame=!0,v.visible=!1;var m=this._parent.getInstanceMirror(a);v._webGLCacheRectSize=v.scale?v.scale:.5,a._animateBase=v;var b=m.parent[m.args[0]+"_mask"];O.default.notNull(b)&&(m.parent.removeChild(b),b.cache(b.nominalBounds.x,b.nominalBounds.y,b.nominalBounds.width,b.nominalBounds.height,v._webGLCacheRectSize),v._maskBase=b,this._parent.stage.isWebGL&&(v.filters=[new createjs.AlphaMaskFilter(b.cacheCanvas)]))}}n=this._onceActVideoGroup.length;for(var y=0;y<n;y++)if(!(a=this._onceActVideoGroup[y])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerOnceVideoMousedownBind),O.default.notNull(a.EffectBase)&&O.default.applyMultiply(a.EffectBase);var S=this._parent.getInstanceMirror(a),P=S.parent[S.args[0]];if(O.default.notNull(P)){P._abortZeroFrame=!0,P.visible=!1;var M=this._parent.getInstanceMirror(a);P._webGLCacheRectSize=P.scale?P.scale:.5,a._animateBase=P;var k=M.parent[M.args[0]+"_mask"];O.default.notNull(k)&&(M.parent.removeChild(k),k.cache(k.nominalBounds.x,k.nominalBounds.y,k.nominalBounds.width,k.nominalBounds.height,P._webGLCacheRectSize),P._maskBase=k,this._parent.stage.isWebGL&&(P.filters=[new createjs.AlphaMaskFilter(k.cacheCanvas)]))}}}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerAbortSoundMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/",l=i._animateBase;if(O.default.notNull(l)){l.bitmapCache&&l.uncache(),2<=i.totalFrames?0===i.currentFrame?(l._changeFinalFrame=l.totalFrames-1,i.gotoAndStop(1)):(l._changeFinalFrame=0,i.gotoAndStop(0)):l._changeFinalFrame=l.totalFrames-1;var d=l._maskBase;if(l.gotoAndStop(l._changeFinalFrame),d){if(this._parent.stage.isWebGL){var h=l.scaleX/d.scaleX,p=l.scaleY/d.scaleY;l.cache(d.nominalBounds.x/h,d.nominalBounds.y/p,d.nominalBounds.width/h,d.nominalBounds.height/p,l._webGLCacheRectSize),l.useGL=!1}}else this._parent.stage.isWebGL&&(l.cache(l.nominalBounds.x,l.nominalBounds.y,l.nominalBounds.width,l.nominalBounds.height,l._webGLCacheRectSize),l.useGL=!1);this._parent.stage.update()}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSoundMousedown",value:function e(t){var i=t.currentTarget._animateBase,n=0;i&&i._changeFinalFrame&&0!==i._changeFinalFrame&&(n=i._changeFinalFrame,i._changeFinalFrame=0),this._parent.stop(null,!0),i&&(i._changeFinalFrame=n);var a=t.currentTarget,s=this._parent.getInstanceMirror(a),o=a.nominalBounds,r={x:a.x+o.x*a.scale,y:a.y+o.y*a.scale},u=a.parent.localToGlobal(r.x,r.y),l=this._parent.exportRoot.globalToLocal(u.x,u.y),d=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+a._replacePath+"sounds/":a._replacePath+"./sounds/",h=a._animateBase;if(O.default.notNull(h)){h._abortZeroFrame&&(h.visible=!1),h.bitmapCache&&h.uncache();var p=h._maskBase;if(p){if(this._parent.stage.isWebGL){var c=h.scaleX/p.scaleX,_=h.scaleY/p.scaleY;h.cache(p.nominalBounds.x/c,p.nominalBounds.y/_,p.nominalBounds.width/c,p.nominalBounds.height/_,h._webGLCacheRectSize,{useGL:"stage"}),h.useGL=!0}}else this._parent.stage.isWebGL;this._parent.stage.update()}this._parent.soundObj={id:s.args[1],path:d,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:l.x,locY:l.y,excludeTags:null,command:s.command,target:a};var g=this.checkCommandMode(s.command);this._parent.iosMode&&"none"===g?O.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):O.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(O.default.isNull(this._parent.soundObj)||O.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)O.default.notNull(i)&&i.stop();else switch(n){case"fileload":O.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){if(O.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration,a=this._prevTime;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var s=this._parent.lib.properties.fps,o=Math.round(i/1e3*s),r=this._parent.soundObj.target,u=this._parent.getInstanceMirror(r),l=u.parent[u.args[0]];if(O.default.notNull(l)){var d=l.totalFrames;l._playCompleteToEndFrame&&o===d&&(l._changeFinalFrame=l.totalFrames-1),l._playCompleteToEndFrame&&0!==l._changeFinalFrame&&0===o&&this._parent.soundChannel.paused&&(o=l._changeFinalFrame,O.default.notNull(l._abortBtn)&&2<=l._abortBtn.totalFrames&&l._abortBtn.gotoAndStop(1)),o<d&&(l.gotoAndStop(o),l.bitmapCache?(l.visible||l._abortZeroFrame&&0<o&&(l.visible=!0),l.updateCache(),this._parent.stage.update()):l.visible||l._abortZeroFrame&&0<o&&(l.visible=!0))}}}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=void 0,a=void 0;O.default.notNull(i)&&(a=(n=this._parent.getInstanceMirror(i)).parent[n.args[0]]);var s=this.checkCommandMode(this._parent.soundObj.command);if("mini-close"===s||"normal-close"===s||"ex-normal-close"===s||"none"===s)this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel();else if(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===s?O.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):O.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),O.default.notNull(a)){a._playCompleteToEndFrame&&(a._changeFinalFrame=a.totalFrames-1,a._playedEndFinish=!0);var o=a._maskBase;if(a.bitmapCache){if(O.default.notNull(a))if(a.bitmapCache&&a.uncache(),a._changeFinalFrame?a.gotoAndStop(a._changeFinalFrame):a.gotoAndStop(0),o){if(this._parent.stage.isWebGL){var r=a.scaleX/o.scaleX,u=a.scaleY/o.scaleY;a.cache(o.nominalBounds.x/r,o.nominalBounds.y/u,o.nominalBounds.width/r,o.nominalBounds.height/u,a._webGLCacheRectSize),a.useGL=!1}}else this._parent.stage.isWebGL&&(a.cache(a.nominalBounds.x,a.nominalBounds.y,a.nominalBounds.width,a.nominalBounds.height,a._webGLCacheRectSize),a.useGL=!1);this._parent.stage.update()}a._abortZeroFrame&&(a.visible=!1)}}},{key:"triggerVideoMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]],s=i._animateBase;if(O.default.notNull(s)){s._abortZeroFrame&&(s.visible=!1),s.bitmapCache&&s.uncache();var o=s._maskBase;if(o){if(this._parent.stage.isWebGL){var r=s.scaleX/o.scaleX,u=s.scaleY/o.scaleY;s.cache(o.nominalBounds.x/r,o.nominalBounds.y/u,o.nominalBounds.width/r,o.nominalBounds.height/u,s._webGLCacheRectSize,{useGL:"stage"}),s.useGL=!0}}else this._parent.stage.isWebGL;this._parent.stage.update()}null!==this._parent.assetVideoPath&&""!==this._parent.assetVideoPath||(this._parent.assetVideoPath=this._parent.assetSoundPath),null!==this._parent.pageVideoPath&&""!==this._parent.pageVideoPath||(this._parent.pageVideoPath=this._parent.pageSoundPath);var l=i.nominalBounds,d={x:i.x+l.x*i.scale,y:i.y+l.y*i.scale},h=i.parent.localToGlobal(d.x,d.y),p=this._parent.exportRoot.globalToLocal(h.x,h.y),c=this._parent.assetVideoPath?this._parent.assetVideoPath:this._parent.pageVideoPath?this._parent.pageVideoPath+i._replacePath+"videos/":i._replacePath+"./videos/",_=navigator.platform.match(/iPhone|iPod|iPad|Mac/)?15:0;this._parent.videoObj={id:n.args[1],path:c,loop:0,offset:_,volume:this._parent.volume,callback:this.checkVideoPlayStatusBind,watchFunc:this.triggerVideoWatchBind,completeFunc:this.triggerVideoCompleteBind,autoPlay:!0,locX:p.x,locY:p.y,excludeTags:null,command:n.command,target:i,videoBase:a},O.default.playWebVideo(this._parent.createjs,this._parent.videoObj.path,this._parent.videoObj.id,this._parent.videoObj.loop,this._parent.videoObj.offset,this._parent.videoObj.volume,this._parent.videoObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkVideoPlayStatus",value:function e(t,i,n){if(O.default.isNull(this._parent.videoObj)||O.default.notNull(this._parent.videoObj)&&this._parent.videoObj.id!==t)O.default.notNull(i)&&i.stop();else switch(n){case"fileload":break;case"fileerror":this.stop(),this._parent.videoObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.videoChannel=i,this._parent.videoChannel.video.muted=!0,this._parent.videoChannel.paused=!this._parent.videoObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.videoObj.watchFunc),this._parent.videoChannel.addEventListener("complete",this._parent.videoObj.completeFunc);var a=this.checkCommandMode(this._parent.videoObj.command);"none"!==a&&this._parent.openVideoPlayBar(a,this._parent.videoObj)}}},{key:"triggerVideoWatch",value:function e(t){if(O.default.notNull(this._parent.videoChannel)&&O.default.notNull(this._parent.videoObj))if(O.default.isNull(this._parent.videoChannel.videoBitmap))if(this._parent.stage.isWebGL){var i=function e(){a._video.currentTime!==u||a._video.currentTime===u&&3===l?(a._video.currentTime!==u?l=0:l<Number.MAX_VALUE&&l++,u=a._video.currentTime,s.image._invalid=!0,s.parent&&(!n._parent.videoObj.videoBase.visible&&0<=a._video.currentTime&&(n._parent.videoObj.videoBase.visible=!0,a._video.muted=!1),s.parent.bitmapCache&&s.parent.updateCache())):l<Number.MAX_VALUE&&l++,s.parent&&requestAnimationFrame(e)};this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),O.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&O.default.notNull(this._parent.videoObj.videoBase)&&this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap);var n=this,a=this._parent.videoChannel.videoBuffer,s=this._parent.videoChannel.videoBitmap,o=this._parent.videoObj.offset,r=this._parent.videoChannel,u=-1,l=0;requestAnimationFrame(i)}else this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),O.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&(O.default.notNull(this._parent.videoObj.videoBase)&&(this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap),this._parent.videoChannel.video.muted=!1),this._parent.videoObj.videoBase.visible=!0);else!this._parent.stage.isWebGL&&this._parent.videoChannel.paused&&this._parent.videoChannel.position===this._parent.videoObj.offset&&O.default.notNull(this._parent.videoChannel.videoBuffer)&&(this._parent.videoChannel.videoBuffer._lastTime=-1)}},{key:"triggerVideoComplete",value:function e(t){var i=this._parent.videoObj.videoBase,n=this.checkCommandMode(this._parent.videoObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeVideoPlayBar(),this._parent.clearVideoChannel()):(this._parent.stopVideoPlayBar(),this._parent.videoObj.autoPlay=!1,O.default.notNull(i)&&(i.bitmapCache&&(i.updateCache(),this._parent.stage.update()),i._abortZeroFrame))}},{key:"triggerOnceVideoMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]],s=i._animateBase;if(O.default.notNull(s)){s._abortZeroFrame&&(s.visible=!1),s.bitmapCache&&s.uncache();var o=s._maskBase;if(o){if(this._parent.stage.isWebGL){var r=s.scaleX/o.scaleX,u=s.scaleY/o.scaleY;s.cache(o.nominalBounds.x/r,o.nominalBounds.y/u,o.nominalBounds.width/r,o.nominalBounds.height/u,s._webGLCacheRectSize,{useGL:"stage"}),s.useGL=!0}}else this._parent.stage.isWebGL;this._parent.stage.update()}null!==this._parent.assetVideoPath&&""!==this._parent.assetVideoPath||(this._parent.assetVideoPath=this._parent.assetSoundPath),null!==this._parent.pageVideoPath&&""!==this._parent.pageVideoPath||(this._parent.pageVideoPath=this._parent.pageSoundPath);var l=i.nominalBounds,d={x:i.x+l.x*i.scale,y:i.y+l.y*i.scale},h=i.parent.localToGlobal(d.x,d.y),p=this._parent.exportRoot.globalToLocal(h.x,h.y),c=this._parent.assetVideoPath?this._parent.assetVideoPath:this._parent.pageVideoPath?this._parent.pageVideoPath+i._replacePath+"videos/":i._replacePath+"./videos/",_=navigator.platform.match(/iPhone|iPod|iPad|Mac/)?15:0;this._parent.videoObj={id:n.args[1],path:c,loop:0,offset:_,volume:this._parent.volume,callback:this.checkOnceVideoPlayStatusBind,watchFunc:this.triggerOnceVideoWatchBind,completeFunc:this.triggerOnceVideoCompleteBind,autoPlay:!0,locX:p.x,locY:p.y,excludeTags:null,command:n.command,target:i,videoBase:a},O.default.playWebVideo(this._parent.createjs,this._parent.videoObj.path,this._parent.videoObj.id,this._parent.videoObj.loop,this._parent.videoObj.offset,this._parent.videoObj.volume,this._parent.videoObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkOnceVideoPlayStatus",value:function e(t,i,n){if(O.default.isNull(this._parent.videoObj)||O.default.notNull(this._parent.videoObj)&&this._parent.videoObj.id!==t)O.default.notNull(i)&&i.stop();else switch(n){case"fileload":break;case"fileerror":this.stop(),this._parent.videoObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.videoChannel=i,this._parent.videoChannel.video.muted=!0,this._parent.videoChannel.paused=!this._parent.videoObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.videoObj.watchFunc),this._parent.videoChannel.addEventListener("complete",this._parent.videoObj.completeFunc);var a=this.checkCommandMode(this._parent.videoObj.command);"none"!==a&&this._parent.openVideoPlayBar(a,this._parent.videoObj)}}},{key:"triggerOnceVideoWatch",value:function e(t){if(O.default.notNull(this._parent.videoChannel)&&O.default.notNull(this._parent.videoObj))if(O.default.isNull(this._parent.videoChannel.videoBitmap))if(this._parent.stage.isWebGL){var i=function e(){a._video.currentTime!==u||a._video.currentTime===u&&3===l?(a._video.currentTime!==u?l=0:l<Number.MAX_VALUE&&l++,u=a._video.currentTime,s.image._invalid=!0,s.parent&&(!n._parent.videoObj.videoBase.visible&&0<=a._video.currentTime&&(n._parent.videoObj.videoBase.visible=!0,a._video.muted=!1),s.parent.bitmapCache&&s.parent.updateCache())):l<Number.MAX_VALUE&&l++,s.parent&&requestAnimationFrame(e)};this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),O.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&O.default.notNull(this._parent.videoObj.videoBase)&&this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap);var n=this,a=this._parent.videoChannel.videoBuffer,s=this._parent.videoChannel.videoBitmap,o=this._parent.videoObj.offset,r=this._parent.videoChannel,u=-1,l=0;requestAnimationFrame(i)}else this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),O.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&(O.default.notNull(this._parent.videoObj.videoBase)&&(this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap),this._parent.videoChannel.video.muted=!1),this._parent.videoObj.videoBase.visible=!0);else!this._parent.stage.isWebGL&&this._parent.videoChannel.paused&&this._parent.videoChannel.position===this._parent.videoObj.offset&&O.default.notNull(this._parent.videoChannel.videoBuffer)&&(this._parent.videoChannel.videoBuffer._lastTime=-1)}},{key:"triggerOnceVideoComplete",value:function e(t){var i=this._parent.videoObj.videoBase,n=this.checkCommandMode(this._parent.videoObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeVideoPlayBar(),this._parent.clearVideoChannel()):(this._parent.stopVideoPlayBar(),this._parent.videoObj.autoPlay=!1,O.default.notNull(i)&&(i.bitmapCache&&(i.updateCache(),this._parent.stage.update()),i._abortZeroFrame))}}]),_);function _(e){r(this,_),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._actMVGroup=[],this._actVideoGroup=[],this._abortActMVGroup=[],this._onceActVideoGroup=[],this._prevTime=-1,this._seq=999,this._timeout}t.ModulePageActSoundMV=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModulePager=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,y=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["SilentShowPicL","SilentShowPicR","SlientShowPicL","SlientShowPicR","ShowPicL","ShowPicR","PicLabel","GoPic"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._showPicGroup.length;for(i=0;i<n;i++)(t=this._showPicGroup[i]).alpha=1,t.mouseChildren=!0,t.mouseEnabled=!0;for(n=this._goPicGroup.length,i=0;i<n;i++)(t=this._goPicGroup[i]).alpha=1,null!==t.cursor&&(t.mouseChildren=!0,t.mouseEnabled=!0)}},{key:"reset",value:function e(){this.isInited||this.init(),this.stop();var t=void 0,i=void 0,n=this._showPicGroup.length;for(i=0;i<n;i++){t=this._showPicGroup[i];var a,s=this._parent.getInstanceMirror(t).parent;1===n&&(s.visible=!0),this.useJSON?s.showPicFunc(s,Number(this._parent.pageParam[this._parent.pageParam.length-1])):s.showPicFunc(s,1)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"update",value:function e(t,i){this.isInited||this.init();var n=void 0,a=void 0,s=this._showPicGroup.length;for(a=0;a<s;a++){n=this._showPicGroup[a];var o,r=this._parent.getInstanceMirror(n).parent;1===s&&(r.visible=!0),y.default.isNull(i)?r.showPicFunc(r,t,!0):i===n&&r.showPicFunc(r,t,!0,i)}}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ShowPicL":case"ShowPicR":case"SlientShowPicL":case"SlientShowPicR":case"SilentShowPicL":case"SilentShowPicR":n=this.getCustomTag(t),this._showPicGroup.push(t),this._showPicGroupMirror[n]=this.pickRelation(i.parent,i.args[0]);break;case"PicLabel":n=this.getCustomTag(t),this._picLabelGroup.push(t);break;case"GoPic":n=this.getCustomTag(t),this._goPicGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return y.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=void 0,o=void 0,r=void 0,u=void 0,l=void 0;for(this.triggerPicShowControlMousedownBind=this.triggerPicShowControlMousedownBind||this.triggerPicShowControlMousedown.bind(this),this.triggerPicLabelControlMousedownBind=this.triggerPicLabelControlMousedownBind||this.triggerPicLabelControlMousedown.bind(this),this.triggerPicPageControlMousedownBind=this.triggerPicPageControlMousedownBind||this.triggerPicPageControlMousedown.bind(this),this.callShowPicBind=this.callShowPicBind||this.callShowPic.bind(this),s=this._showPicGroup.length,a=0;a<s;a++)if(!(n=this._showPicGroup[a])._isModuleInited){n.goPicList=[],(l=n.parent).showPicFunc=this.callShowPicBind,l.currentPicIndex=1,l.showPicControl=n;var d=this._parent.getInstanceMirror(n);for(y.default.notNull(n.prevBtn)&&("ShowPicR"===d.command||"SlientShowPicR"===d.command||"SilentShowPicR"===d.command?(n.prevBtnRef=n.prevBtn,n.nextBtnRef=n.nextBtn):"ShowPicL"!==d.command&&"SlientShowPicL"!==d.command&&"SilentShowPicL"!==d.command||(n.nextBtnRef=n.prevBtn,n.prevBtnRef=n.nextBtn),n.prevBtn.cursor="pointer",n.prevBtn.addEventListener(this._mouseTriggerBehavior,this.triggerPicShowControlMousedownBind),y.default.notNull(n.prevBtn.EffectBase)&&(y.default.applyMultiply(n.prevBtn.EffectBase),y.default.applyColorFilter(n.prevBtn.createjs,n.EffectBase)),y.default.notNull(n.prevBtn.hintTxt)&&(n.prevBtn.hintTxt.textBaseline=this._parent.textBaseline,n.prevBtn.hintTxt.text="              ","alphabetic"===this._parent.textBaseline&&(n.prevBtn.hintTxt.y+=n.prevBtn.hintTxt.lineHeight*this._parent.textAlphabeticFixYScale),n.prevBtn.hintTxt.cache(n.prevBtn.hintTxt.getBounds().x,n.prevBtn.hintTxt.getBounds().y,n.prevBtn.hintTxt.getBounds().width,n.prevBtn.hintTxt.getBounds().height,2),n.prevBtn.hintTxt.updateCache())),y.default.notNull(n.nextBtn)&&("ShowPicR"===d.command||"SlientShowPicR"===d.command||"SilentShowPicR"===d.command?(n.prevBtnRef=n.prevBtn,n.nextBtnRef=n.nextBtn):"ShowPicL"!==d.command&&"SlientShowPicL"!==d.command&&"SilentShowPicL"!==d.command||(n.nextBtnRef=n.prevBtn,n.prevBtnRef=n.nextBtn),n.nextBtn.cursor="pointer",n.nextBtn.addEventListener(this._mouseTriggerBehavior,this.triggerPicShowControlMousedownBind),y.default.notNull(n.nextBtn.EffectBase)&&(y.default.applyMultiply(n.nextBtn.EffectBase),y.default.applyColorFilter(n.nextBtn.createjs,n.EffectBase)),y.default.notNull(n.nextBtn.hintTxt)&&(n.nextBtn.hintTxt.textBaseline=this._parent.textBaseline,n.nextBtn.hintTxt.text="              ","alphabetic"===this._parent.textBaseline&&(n.nextBtn.hintTxt.y+=n.nextBtn.hintTxt.lineHeight*this._parent.textAlphabeticFixYScale),n.nextBtn.hintTxt.cache(n.nextBtn.hintTxt.getBounds().x,n.nextBtn.hintTxt.getBounds().y,n.nextBtn.hintTxt.getBounds().width,n.nextBtn.hintTxt.getBounds().height,2),n.nextBtn.hintTxt.updateCache())),y.default.notNull(n.noTxt)&&(n.noTxt.textBaseline=this._parent.textBaseline,n.noTxt.text="              ","alphabetic"===this._parent.textBaseline&&(n.noTxt.y+=n.noTxt.lineHeight*this._parent.textAlphabeticFixYScale),n.noTxt.cache(n.noTxt.getBounds().x,n.noTxt.getBounds().y,n.noTxt.getBounds().width,n.noTxt.getBounds().height,2),n.noTxt.updateCache()),o=this.getCustomTag(n),u=this._showPicGroupMirror[o].length,r=0;r<u;r++)this._showPicGroupMirror[o][r].visible=!1}for(s=this._picLabelGroup.length,a=0;a<s;a++)if(!(n=this._picLabelGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var h=this._parent.getInstanceMirror(n);for((l=n.parent).showPicLabels=l.showPicLabels||[],u=Number(h.args[2]),r=Number(h.args[1]);r<=u;r++)l.showPicLabels[r]=h.args[0];n.addEventListener(this._mouseTriggerBehavior,this.triggerPicLabelControlMousedownBind),y.default.notNull(n.EffectBase)&&y.default.applyMultiply(n.EffectBase)}for(s=this._goPicGroup.length,a=0;a<s;a++)if(!(n=this._goPicGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.showPicControlBase=n.parent.parent,n.showPicControlBase.showPicControl.goPicList.push(n),n.cursor="pointer";var p=this._parent.getInstanceMirror(n);n.addEventListener(this._mouseTriggerBehavior,this.triggerPicPageControlMousedownBind),y.default.notNull(n.EffectBase)&&y.default.applyMultiply(n.EffectBase),0<p.args.length&&"ICON"===p.args[0]&&(n.removeEventListener(this._mouseTriggerBehavior,this.triggerPicPageControlMousedownBind),n.gotoAndStop(2),n.cursor=null,n.mouseEnabled=!1,n.mouseChildren=!1)}for(s=this._showPicGroup.length,a=0;a<s;a++)(n=this._showPicGroup[a])._isModuleInited||(n._replacePath=i,n._isModuleInited=!0,(l=n.parent).showPicFunc(l,1))}},{key:"callShowPic",value:function e(t,i,n,a){var s=1<arguments.length&&void 0!==i?i:1,o=2<arguments.length&&void 0!==n&&n,r=3<arguments.length&&void 0!==a?a:null;if(this.useJSON&&(this._parent.pageParam[this._parent.pageParam.length-1]=s),!o||t.currentPicIndex!==s){t.currentPicIndex=s;var u=void 0,l=void 0,d=void 0,h=void 0,p=this.getCustomTag(t.showPicControl),c=void 0;(l=this._showPicGroupMirror[p].length)<s&&(s=l,t.currentPicIndex=s,this.useJSON&&(this._parent.pageParam[this._parent.pageParam.length-1]=s));var _=this._parent.getInstanceMirror(t.showPicControl).command;for(u=0;u<l;u++)(c=this._showPicGroupMirror[p][u]).visible=!1,h=this._parent.getInstanceMirror(c),Number(h.args[0])===s&&null===r?(c.visible=!0,"EnCnTrans"===h.command?y.default.notNull(c.selfReset)&&c.selfReset(c):"RecoverZone"===h.command&&this._parent._waitInited&&this._parent.reset(["ModulePager","ModuleWordsNavigator"],!0)):Number(h.args[0])===s&&null!==r&&(c.visible=!0,"EnCnTrans"===h.command?y.default.notNull(c.selfReset)&&c.selfReset(c):"RecoverZone"===h.command&&-1===_.indexOf("Slient")&&-1===_.indexOf("Silent")?this._parent._waitInited&&this._parent.reset(["ModulePager","ModuleWordsNavigator"],!0):"RecoverZone"===h.command&&this._parent._waitInited&&this._parent.resetAbortSound(["ModulePager","ModuleWordsNavigator"],!0));var g=l;g<=1?t.showPicControl.visible=!1:(t.showPicControl.visible=!0,c=t.showPicControl,d=this._parent.getInstanceMirror(c),y.default.notNull(c.noTxt)&&(c.noTxt.text=s+"/"+g,c.noTxt.updateCache()),c=t.showPicControl.prevBtnRef,y.default.notNull(c.hintTxt)&&(c.hintTxt.text="",c.hintTxt.updateCache()),s<=1?y.default.notNull(c)&&(c.gotoAndStop(0),c.cursor=null,y.default.applyColorGrayFilter(this._parent.createjs,c)):y.default.notNull(c)&&(c.cursor="pointer",c.gotoAndStop(0),y.default.unapplyColorFilter(this._parent.createjs,c)),c=t.showPicControl.nextBtnRef,y.default.notNull(c.hintTxt)&&(c.hintTxt.text="",c.hintTxt.updateCache()),g<=s?y.default.notNull(c)&&(c.gotoAndStop(0),c.cursor=null,y.default.applyColorGrayFilter(this._parent.createjs,c)):y.default.notNull(c)&&(c.cursor="pointer",c.gotoAndStop(0),y.default.unapplyColorFilter(this._parent.createjs,c)));var f=!0;if(y.default.notNull(t.showPicLabels)){var v=void 0;for(l=(d=this._parent.getInstanceMirror(t)).subset.length,u=0;u<l;u++)if(c=t[d.subset[u]],"PicLabel"===(h=this._parent.getInstanceMirror(c)).command&&2===c.currentFrame){v=h.args[0];break}for(u=0;u<l;u++)c=t[d.subset[u]],"PicLabel"===(h=this._parent.getInstanceMirror(c)).command&&(y.default.unapplyColorFilter(this._parent.createjs,c),h.args[0]===t.showPicLabels[s]?(f=v!==h.args[0],c.gotoAndStop(2),this.applyNormalCache(c)):(this.applyReverseCache(c),c.gotoAndStop(0)));var m=s-1,b=s+1;c=t.showPicControl.prevBtnRef,y.default.notNull(t)&&(c.hintTxt.text=t.showPicLabels[m],c.hintTxt.updateCache()),c=t.showPicControl.nextBtnRef,y.default.notNull(t)&&(c.hintTxt.text=t.showPicLabels[b],c.hintTxt.updateCache())}}}},{key:"applyNormalCache",value:function e(t){y.default.isNull(t)||(y.default.notNull(t.nominalBounds)&&t.cache(t.nominalBounds.x,t.nominalBounds.y,t.nominalBounds.width,t.nominalBounds.height),y.default.notNull(t.EffectBase)&&y.default.applyMultiply(t))}},{key:"applyReverseCache",value:function e(t){y.default.isNull(t)||(t.uncache(),y.default.notNull(t.EffectBase)&&y.default.unapplyMultiply(t))}},{key:"triggerPicShowControlMousedown",value:function e(t){if(!y.default.isNull(t.currentTarget.bitmapCache))return t.stopPropagation(),void t.stopImmediatePropagation();var i=this._parent.getInstanceMirror(t.currentTarget.parent);"ShowPicL"!==i.command&&"ShowPicR"!==i.command||this._parent.stop(null,!0);var n=t.currentTarget,a=this._parent.getInstanceMirror(n),s=a.parent,o=a.parent.parent;switch(n){case s.prevBtnRef:o.showPicFunc(o,o.currentPicIndex-1);break;case s.nextBtnRef:o.showPicFunc(o,o.currentPicIndex+1)}this._parent.sendPageFlipMessage(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerPicLabelControlMousedown",value:function e(t){var i=this._parent.getInstanceMirror(t.currentTarget.parent.showPicControl);"ShowPicL"!==i.command&&"ShowPicR"!==i.command||this._parent.stop(null,!0);var n=t.currentTarget,a=this._parent.getInstanceMirror(n),s=a.parent;s.showPicFunc(s,Number(a.args[1])),this._parent.sendPageFlipMessage(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerPicPageControlMousedown",value:function e(t){var i=this._parent.getInstanceMirror(t.currentTarget.parent.parent.showPicControl);"ShowPicL"!==i.command&&"ShowPicR"!==i.command||this._parent.stop(null,!0);var n=t.currentTarget,a=this._parent.getInstanceMirror(n),s=a.parent,o=a.parent.parent;o.showPicFunc(o,Number(a.args[0])),this._parent.sendPageFlipMessage(),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._showPicGroup=[],this._showPicGroupMirror={},this._picLabelGroup=[],this._goPicGroup=[],this._seq=999}t.ModulePager=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleWordsNavigator=void 0;var a=function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e};function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,j=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=["WordsNavL","WordsNavR","OpenWord","ExWB","ExWordBar","ExWord"],d=(a(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e})&&(this.initModulesByModule(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._wordsNavGroup.length;for(i=0;i<n;i++){t=this._wordsNavGroup[i];var a,s=this._parent.getInstanceMirror(t).parent;this.useJSON?s.ExWB?(2===this._parent.pageParam.length&&(this._parent.pageParam[2]="1"),s.showWordFunc(s,Number(this._parent.pageParam[0]),Number(this._parent.pageParam[1]),Number(this._parent.pageParam[2]))):s.showWordFunc(s,Number(this._parent.pageParam[0]),1,Number(this._parent.pageParam[1])):s.showWordFunc(s,1,1,1)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"initModulesByModule",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTargetByModule(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTargetByModule(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==l.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"WordsNavL":case"WordsNavR":n=this.getCustomTag(t),this._wordsNavGroup.push(t),this._wordsNavGroupMirror[n]=this.pickRelation(i.parent,i.args[0]);break;case"OpenWord":n=this.getCustomTag(t),this._openWordGroup.push(t),this._openWordGroupMirror[n]=this.pickRelation(i.parent.parent,i.args[0]);break;case"ExWordBar":n=this.getCustomTag(t),this._exWordBarGroup.push(t);break;case"ExWord":n=this.getCustomTag(t),this._exWordGroup.push(t)}}}},{key:"pickTargetByModule",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==l.indexOf(i.command))switch(i.command){case"OpenWord":n=this.getCustomTag(t),this._openWordGroupMirror[n]=this.pickRelation(i.parent.parent,i.args[0])}}},{key:"getCustomTag",value:function e(t){return j.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=void 0,o=void 0,r=void 0,u=void 0,l=void 0,d=void 0;for(this.callShowWordBind=this.callShowWordBind||this.callShowWord.bind(this),this.triggerPicShowControlMousedownBind=this.triggerPicShowControlMousedownBind||this.triggerPicShowControlMousedown.bind(this),this.triggerOpenWordMousedownBind=this.triggerOpenWordMousedownBind||this.triggerOpenWordMousedown.bind(this),this.triggerWordBarChangeMousedownBind=this.triggerWordBarChangeMousedownBind||this.triggerWordBarChangeMousedown.bind(this),o=this._wordsNavGroup.length,s=0;s<o;s++)if(!(n=this._wordsNavGroup[s])._isModuleInited){(d=n.parent).showWordFunc=this.callShowWordBind,d.currentWordIndex=1,d.currentWordSubIndex=1,n.currentWordNavIndex=1,d.wordsNavControl=n;var h=this._parent.getInstanceMirror(n);for(j.default.notNull(n.prevBtn)&&("WordsNavR"===h.command?(n.prevBtnRef=n.prevBtn,n.nextBtnRef=n.nextBtn):"WordsNavL"===h.command&&(n.nextBtnRef=n.prevBtn,n.prevBtnRef=n.nextBtn),n.prevBtn.cursor="pointer",n.prevBtn.addEventListener(this._mouseTriggerBehavior,this.triggerPicShowControlMousedownBind),j.default.notNull(n.prevBtn.EffectBase)&&(j.default.applyMultiply(n.prevBtn.EffectBase),j.default.applyColorFilter(n.prevBtn.createjs,n.EffectBase))),j.default.notNull(n.nextBtn)&&("WordsNavR"===h.command?(n.prevBtnRef=n.prevBtn,n.nextBtnRef=n.nextBtn):"WordsNavL"===h.command&&(n.nextBtnRef=n.prevBtn,n.prevBtnRef=n.nextBtn),n.nextBtn.cursor="pointer",n.nextBtn.addEventListener(this._mouseTriggerBehavior,this.triggerPicShowControlMousedownBind),j.default.notNull(n.nextBtn.EffectBase)&&(j.default.applyMultiply(n.nextBtn.EffectBase),j.default.applyColorFilter(n.nextBtn.createjs,n.EffectBase))),j.default.notNull(n.noTxt)&&(n.noTxt.text=""),r=this.getCustomTag(n),l=this._wordsNavGroupMirror[r].length,u=0;u<l;u++)this._wordsNavGroupMirror[r][u].visible=!1}for(o=this._openWordGroup.length,s=0;s<o;s++)if(!(n=this._openWordGroup[s])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var p=this._parent.getInstanceMirror(n);for(n.addEventListener(this._mouseTriggerBehavior,this.triggerOpenWordMousedownBind),j.default.notNull(n.EffectBase)&&j.default.applyMultiply(n.EffectBase),r=this.getCustomTag(n),l=this._openWordGroupMirror[r].length,u=0;u<l;u++)(a=this._openWordGroupMirror[r][u]).visible=!1}for(o=this._exWordBarGroup.length,s=0;s<o;s++)if(!(n=this._exWordBarGroup[s])._isModuleInited){n._replacePath=i,n._isModuleInited=!0;var c=this._parent.getInstanceMirror(n);for(l=c.subset.length,u=0;u<l;u++){var _;a=n[c.subset[u]],"opt"===this._parent.getInstanceMirror(a).command&&(a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerWordBarChangeMousedownBind),j.default.notNull(a.EffectBase)&&j.default.applyMultiply(a.EffectBase))}}for(o=this._wordsNavGroup.length,s=0;s<o;s++)(n=this._wordsNavGroup[s])._isModuleInited||(n._replacePath=i,n._isModuleInited=!0,(d=n.parent).showWordFunc(d,1,1))}},{key:"callShowWord",value:function e(t,i,n,a,s){var o=1<arguments.length&&void 0!==i?i:1,r=2<arguments.length&&void 0!==n?n:1,u=3<arguments.length&&void 0!==a?a:1,l=4<arguments.length&&void 0!==s&&s;this.useJSON&&(this._parent.pageParam[0]=o,j.default.notNull(t.ExWB)?(this._parent.pageParam[1]=r,this._parent.pageParam[2]=u):this._parent.pageParam[1]=u);var d=!this._parent.actWinWordGroupHide;t.currentWordIndex=o,t.currentWordSubIndex=r;var h=void 0,p=void 0,c=void 0,_=void 0,g=void 0,f=void 0,v=void 0,m=this.getCustomTag(t.wordsNavControl),b=void 0,y=void 0,S=-1,P=!0,M=null;for(c=this._wordsNavGroupMirror[m].length,h=0;h<c;h++){(b=this._wordsNavGroupMirror[m][h]).visible=!1,_=(f=this._parent.getInstanceMirror(b)).subset.length;var k=Number.MAX_VALUE;for(p=0;p<_;p++)y=b[f.subset[p]],j.default.isNull(y.orgVisible)&&(y.orgVisible=y.visible),j.default.isNull(y.orgWGLoc)&&(y.orgWGLoc={x:y.x,y:y.y}),k>y.orgWGLoc.x&&(k=y.orgWGLoc.x);for(p=0;p<_;p++)y=b[f.subset[p]],v=this._parent.getInstanceMirror(y),Number(v.args[1])===o&&(b.visible=d,S=Number(f.args[0]));for(p=0;p<_;p++)if(y=b[f.subset[p]],v=this._parent.getInstanceMirror(y),y.mouseEnabled=!0,"OpenWord"===v.command)if(Number(v.args[1])===o){if(y.x=d?y.orgWGLoc.x:k,this._parent.menuContentInit&&l&&j.default.notNull(this._parent.menuRef[o-1])){var O=this._parent.menuRef[o-1].split("_")[0];return void this._parent.sendCommand(O,this._parent.menuRef[o-1])}this._parent._waitInited&&(j.default.isNull(t.wordsNavControl.callSpecClickFunc)?y.mouseEnabled=!1:j.default.notNull(t.wordsNavControl.callSpecClickFunc)&&j.default.notNull(y.bitmapCache)?t.wordsNavControl.callSpecClickFunc({self:t.wordsNavControl}):j.default.notNull(t.wordsNavControl.callSpecClickFunc)&&j.default.isNull(y.bitmapCache)&&t.wordsNavControl.callSpecClearFunc({self:t.wordsNavControl}),y.gotoAndStop(2),this.applyNormalCache(y));for(var B=this.getCustomTag(y),x=this._openWordGroupMirror[B].length,C=void 0,T=0;T<x;T++){C=this._openWordGroupMirror[B][T];var w=this._parent.getInstanceMirror(C);Number(w.args[0])===o?(P=!(C.visible=!0),C.showPicFunc&&C.showPicFunc(C,u)):C.visible=!1}null===M&&(M=y)}else y.x=y.orgWGLoc.x,y.gotoAndStop(0),this.applyReverseCache(y)}j.default.notNull(this._parent.menuContent)&&(this._parent.menuContent.visible=!0,this._parent.menuContentInit=!0,this._parent.menuContent.showPicFunc&&this._parent.menuContent.showPicFunc(this._parent.menuContent,u)),t.currentWordNavIndex=S;var L=c;if(L<=1||!d?t.wordsNavControl.visible=!1:(t.wordsNavControl.visible=!0,b=t.wordsNavControl.prevBtnRef,S<=1?j.default.notNull(b)&&(b.cursor=null,b.gotoAndStop(0),b.mouseEnabled=!1,j.default.applyColorGrayFilter(this._parent.createjs,b)):j.default.notNull(b)&&(b.cursor="pointer",b.gotoAndStop(0),b.mouseEnabled=!0,j.default.unapplyColorFilter(this._parent.createjs,b)),b=t.wordsNavControl.nextBtnRef,L<=S?j.default.notNull(b)&&(b.cursor=null,b.gotoAndStop(0),b.mouseEnabled=!1,j.default.applyColorGrayFilter(this._parent.createjs,b)):j.default.notNull(b)&&(b.cursor="pointer",b.gotoAndStop(0),b.mouseEnabled=!0,j.default.unapplyColorFilter(this._parent.createjs,b))),j.default.notNull(t.ExWB)){for(c=this._exWordBarGroup.length,h=0;h<c;h++)if(b=this._exWordBarGroup[h],f=this._parent.getInstanceMirror(b),Number(f.args[0])===o)for(b.visible=!0,_=f.subset.length,p=0;p<_;p++)y=b[f.subset[p]],"opt"===(v=this._parent.getInstanceMirror(y)).command&&(Number(v.args[0])===r?(y.gotoAndStop(2),this.applyNormalCache(y)):(y.gotoAndStop(0),this.applyReverseCache(y)));else b.visible=!1;for(c=this._exWordGroup.length,h=0;h<c;h++)b=this._exWordGroup[h],f=this._parent.getInstanceMirror(b),Number(f.args[0])===o&&Number(f.args[1])===r?b.visible=!0:b.visible=!1}if(P&&null!==M){var I,N=this._parent.getInstanceMirror(M).args[0]+"_"+o;this._parent._waitInited&&j.default.notNull(this._parent.moduleConfigData[N])&&this._parent.loadContentByModule(this._parent.moduleConfigData[N],{target:t,index:o,subindex:r,pagerindex:u,changeBar:l,TYPE:"words-navigator"})}else P||j.default.notNull(t.wordsNavControl.callSpecCompleteFunc)&&t.wordsNavControl.callSpecCompleteFunc({self:t.wordsNavControl,pickTarget:M})}},{key:"applyNormalCache",value:function e(t){j.default.isNull(t)||(j.default.notNull(t.nominalBounds)&&t.cache(t.nominalBounds.x,t.nominalBounds.y,t.nominalBounds.width,t.nominalBounds.height),j.default.notNull(t.EffectBase)&&j.default.applyMultiply(t))}},{key:"applyReverseCache",value:function e(t){j.default.isNull(t)||(t.uncache(),j.default.notNull(t.EffectBase)&&j.default.unapplyMultiply(t))}},{key:"triggerPicShowControlMousedown",value:function e(t){if(j.default.notNull(t.currentTarget.bitmapCache))return t.stopPropagation(),void t.stopImmediatePropagation();var n=t.currentTarget,a=this._parent.getInstanceMirror(n),s=a.parent,o=a.parent.parent,r=this.getCustomTag(s),u=void 0,l=void 0,d=this._wordsNavGroupMirror[r].length;switch(n){case s.prevBtnRef:o.currentWordNavIndex--;break;case s.nextBtnRef:o.currentWordNavIndex++}for(o.currentWordNavIndex<=1&&(o.currentWordNavIndex=1),o.currentWordNavIndex>=d&&(o.currentWordNavIndex=d),i=0;i<d;i++)u=this._wordsNavGroupMirror[r][i],l=this._parent.getInstanceMirror(u),Number(l.args[0])===o.currentWordNavIndex?(u.visible=!0,1!==l.args.length&&(this._parent.stop(null,!0),n.parent.parent.showWordFunc(n.parent.parent,Number(l.args[1]),Number(l.args[0]),1,!0),this._parent.sendPageFlipMessage())):u.visible=!1;u=s.prevBtnRef,o.currentWordNavIndex<=1?j.default.notNull(u)&&(u.cursor=null,u.gotoAndStop(0),u.mouseEnabled=!1,j.default.applyColorGrayFilter(this._parent.createjs,u)):j.default.notNull(u)&&(u.cursor="pointer",u.mouseEnabled=!0,j.default.unapplyColorFilter(this._parent.createjs,u)),u=s.nextBtnRef,o.currentWordNavIndex>=d?j.default.notNull(u)&&(u.cursor=null,u.gotoAndStop(0),u.mouseEnabled=!1,j.default.applyColorGrayFilter(this._parent.createjs,u)):j.default.notNull(u)&&(u.cursor="pointer",u.mouseEnabled=!0,j.default.unapplyColorFilter(this._parent.createjs,u)),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerOpenWordMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent,s=n.parent.parent;if(j.default.isNull(t.currentTarget.bitmapCache)&&this._parent.stop(null,!0),"RecoverZone"===n.args[0]&&("EnBookPage"===this._parent.__specClassName?this._parent.reset(["ModuleWordsNavigator"],!0):this._parent.reset(["ModulePager","ModuleWordsNavigator"],!0)),this._parent.menuContentInit&&j.default.notNull(this._parent.menuRef[Number(n.args[1])-1])){var o=this._parent.menuRef[Number(n.args[1])-1].split("_")[0];return this._parent.sendCommand(o,this._parent.menuRef[Number(n.args[1])-1]),t.stopPropagation(),void t.stopImmediatePropagation()}j.default.isNull(t.currentTarget.bitmapCache)&&this._parent.sendPageFlipMessage(),j.default.notNull(s.ExWB)?s.showWordFunc(s,Number(n.args[1]),Number(n.args[2]),Number(n.args[3])):s.showWordFunc(s,Number(n.args[1]),1,Number(n.args[2])),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerWordBarChangeMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent,s=this._parent.getInstanceMirror(a),o=n.parent.parent.parent;j.default.trace(Number(s.args[0]),Number(n.args[0])),o.showWordFunc(o,Number(s.args[0]),Number(n.args[0])),t.stopPropagation(),t.stopImmediatePropagation()}}]),h);function h(e){u(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._wordsNavGroup=[],this._wordsNavGroupMirror={},this._openWordGroup=[],this._openWordGroupMirror={},this._exWordBarGroup=[],this._exWordGroup=[],this._seq=999}t.ModuleWordsNavigator=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleOnAndOff=void 0;var a=function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e};function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,r=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=["OnToOff","OffToOn","AllOnAndOff","OnAndOffControl"],h=(a(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==d.indexOf(e)||-1!==d.indexOf(t):-1!==d.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==d.indexOf(e)||-1!==d.indexOf(t):-1!==d.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0;i=this._onToOffGroup.length;for(var n=0;n<i;n++)if(0===(t=this._onToOffGroup[n]).groupSync.length){t.btnOn.visible=!0,t.btnOff.visible=!1;for(var a=this.getCustomTag(t),s=this._onToOffBtnGroup[a].length,o=0;o<s;o++){var r;this._onToOffBtnGroup[a][o].gotoAndStop(0)}}i=this._offToOnGroup.length;for(var u=0;u<i;u++)if(0===(t=this._offToOnGroup[u]).groupSync.length){t.btnOn.visible=!1,t.btnOff.visible=!0;for(var l=this.getCustomTag(t),d=this._offToOnBtnGroup[l].length,h=0;h<d;h++){var p;this._offToOnBtnGroup[l][h].gotoAndStop(1)}}i=this._allOnAndOffGroup.length;for(var c=0;c<i;c++)0===(t=this._allOnAndOffGroup[c]).groupSync.length&&(t.btnOn.visible=!1,t.btnOff.visible=!0),this.refreshAllOnAndOffStatus(t);this.refreshOnAndOffControl()}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==d.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"OnToOff":n=this.getCustomTag(t),this._onToOffGroup.push(t),this._onToOffBtnGroup[n]=this.pickRelation(t.parent,i.args[0]);break;case"OffToOn":n=this.getCustomTag(t),this._offToOnGroup.push(t),this._offToOnBtnGroup[n]=this.pickRelation(t.parent,i.args[0]);break;case"AllOnAndOff":n=this.getCustomTag(t),this._allOnAndOffGroup.push(t);break;case"OnAndOffControl":n=this.getCustomTag(t),this._onAndOffControlGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return r.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickAllOnAndOffRelation",value:function e(t){for(var i=this._parent.getInstanceMirror(t),n=i.subset.length,a=0;a<n;a++){var s=this._parent.getInstanceMirror(i.target[i.subset[a]]),o=i.target[i.subset[a]];if("AllOnAndOff"===s.command)return o}return null}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0;this.triggerFuncMousedownBind=this.triggerFuncMousedownBind||this.triggerFuncMousedown.bind(this),this.triggerSubMousedownBind=this.triggerSubMousedownBind||this.triggerSubMousedown.bind(this);var a=void 0;a=this._onToOffGroup.length;for(var s=0;s<a;s++){if(!(n=this._onToOffGroup[s])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.btnOn.cursor="pointer",n.btnOff.cursor="pointer",n.btnOn.visible=!0,n.btnOff.visible=!1,n.btnOn.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.btnOff.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.allOnAndOff=this.pickAllOnAndOffRelation(n.parent);for(var o=this.getCustomTag(n),r=this._onToOffBtnGroup[o].length,u=0;u<r;u++){var l=this._onToOffBtnGroup[o][u];l.cursor="pointer",l.gotoAndStop(0),l.rel=n,l.addEventListener(this._mouseTriggerBehavior,this.triggerSubMousedownBind)}}var d=this._parent.getInstanceMirror(n);if(n.groupSync=[],1<d.args.length)for(var h=0;h<a;h++){var p=this._onToOffGroup[h],c;p!==n&&this._parent.getInstanceMirror(p).args[1]===d.args[1]&&n.groupSync.push(p)}}a=this._offToOnGroup.length;for(var _=0;_<a;_++){if(!(n=this._offToOnGroup[_])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.btnOn.cursor="pointer",n.btnOff.cursor="pointer",n.btnOn.visible=!1,n.btnOff.visible=!0,n.btnOn.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.btnOff.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.allOnAndOff=this.pickAllOnAndOffRelation(n.parent);for(var g=this.getCustomTag(n),f=this._offToOnBtnGroup[g].length,v=0;v<f;v++){var m=this._offToOnBtnGroup[g][v];m.cursor="pointer",m.gotoAndStop(1),m.rel=n,m.addEventListener(this._mouseTriggerBehavior,this.triggerSubMousedownBind)}}var b=this._parent.getInstanceMirror(n);if(n.groupSync=[],1<b.args.length)for(var y=0;y<a;y++){var S=this._offToOnGroup[y],P;S!==n&&this._parent.getInstanceMirror(S).args[1]===b.args[1]&&n.groupSync.push(S)}}a=this._allOnAndOffGroup.length;for(var M=0;M<a;M++){(n=this._allOnAndOffGroup[M])._isModuleInited||(n._replacePath=i,n._isModuleInited=!0,n.btnOn.cursor="pointer",n.btnOff.cursor="pointer",n.btnOn.visible=!1,n.btnOff.visible=!0,n.btnOn.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.btnOff.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.onToOff=this.pickRelation(n.parent,"OnToOff"),n.offToOn=this.pickRelation(n.parent,"OffToOn"),this.refreshAllOnAndOffStatus(n));var k=this._parent.getInstanceMirror(n);if(n.groupSync=[],0<k.args.length)for(var O=0;O<a;O++){var B=this._allOnAndOffGroup[O],x;B!==n&&this._parent.getInstanceMirror(B).args[0]===k.args[0]&&n.groupSync.push(B)}}a=this._onAndOffControlGroup.length;for(var C=0;C<a;C++)(n=this._onAndOffControlGroup[C])._isModuleInited||(n._replacePath=i,n._isModuleInited=!0,n.onToOff=this.pickRelation(n.parent,"OnToOff"),n.offToOn=this.pickRelation(n.parent,"OffToOn"))}},{key:"refreshAllOnAndOffStatus",value:function e(t){if(r.default.notNull(t)){var n=void 0;n=t.onToOff.length;var a=!0;for(i=0;i<n;i++)if(t.onToOff[i].btnOff.visible){a=!1;break}for(n=t.offToOn.length,i=0;i<n;i++)if(t.offToOn[i].btnOff.visible){a=!1;break}a?(t.btnOn.visible=!0,t.btnOff.visible=!1):(t.btnOn.visible=!1,t.btnOff.visible=!0)}}},{key:"refreshOnAndOffControl",value:function e(){this.isInited||this.init();for(var t=void 0,i=this._onAndOffControlGroup.length,n=0;n<i;n++){var a=void 0;a=(t=this._onAndOffControlGroup[n]).onToOff.length;for(var s=!1,o=0;o<a;o++)for(var r=this.getCustomTag(t.onToOff[o]),u=this._onToOffBtnGroup[r].length,l=0;l<u;l++)if(0===this._onToOffBtnGroup[r][l].currentFrame){s=!0;break}var d=!1;a=t.offToOn.length;for(var h=0;h<a;h++)for(var p=this.getCustomTag(t.offToOn[h]),c=this._offToOnBtnGroup[p].length,_=0;_<c;_++)if(0===this._offToOnBtnGroup[p][_].currentFrame){d=!0;break}0<t.onToOff.length&&0<t.offToOn.length?t.visible=!(!s&&!d):0<t.onToOff.length?t.visible=!!s:(t.offToOn.length,t.visible=!0)}}},{key:"updateFuncBtnStatus",value:function e(t){var i=this._parent.getInstanceMirror(t),n=this.getCustomTag(t),a=void 0,s=void 0,o=void 0,r=void 0;switch(i.command){case"OnToOff":if(a=this._onToOffBtnGroup[n].length,t.btnOn.visible){s=!1;for(var u=0;u<a;u++)if(0===this._onToOffBtnGroup[n][u].currentFrame){s=!0;break}}else if(t.btnOff.visible){s=!0;for(var l=0;l<a;l++)if(0!==this._onToOffBtnGroup[n][l].currentFrame){s=!1;break}}if(o=r=!0,0!==t.groupSync.length)for(var d=t.groupSync.length,h=0;h<d;h++){for(var p=t.groupSync[h],c=this.getCustomTag(p),_=this._onToOffBtnGroup[c].length,g=0;g<_;g++)if(0===this._onToOffBtnGroup[c][g].currentFrame){o=!1;break}for(var f=0;f<_;f++)if(0!==this._onToOffBtnGroup[c][f].currentFrame){r=!1;break}}if(0!==t.groupSync.length&&(t.btnOn.visible?s||o||(s=!0):t.btnOn.visible||s&&!r&&(s=!1)),s){if(t.btnOn.visible=!0,t.btnOff.visible=!1,0!==t.groupSync.length)for(var v=t.groupSync.length,m=0;m<v;m++){var b=t.groupSync[m];b.btnOn.visible=!0,b.btnOff.visible=!1}}else if(t.btnOn.visible=!1,t.btnOff.visible=!0,0!==t.groupSync.length)for(var y=t.groupSync.length,S=0;S<y;S++){var P=t.groupSync[S];P.btnOn.visible=!1,P.btnOff.visible=!0}this.refreshAllOnAndOffStatus(t.allOnAndOff);break;case"OffToOn":if(a=this._offToOnBtnGroup[n].length,t.btnOn.visible){s=!1;for(var M=0;M<a;M++)if(0===this._offToOnBtnGroup[n][M].currentFrame){s=!0;break}}else if(t.btnOff.visible){s=!0;for(var k=0;k<a;k++)if(0!==this._offToOnBtnGroup[n][k].currentFrame){s=!1;break}}if(o=r=!0,0!==t.groupSync.length)for(var O=t.groupSync.length,B=0;B<O;B++){for(var x=t.groupSync[B],C=this.getCustomTag(x),T=this._offToOnBtnGroup[C].length,w=0;w<T;w++)if(0===this._offToOnBtnGroup[C][w].currentFrame){o=!1;break}for(var L=0;L<T;L++)if(0!==this._offToOnBtnGroup[C][L].currentFrame){r=!1;break}}if(0!==t.groupSync.length&&(t.btnOn.visible?s||o||(s=!0):t.btnOn.visible||s&&!r&&(s=!1)),s){if(t.btnOn.visible=!0,t.btnOff.visible=!1,0!==t.groupSync.length)for(var I=t.groupSync.length,N=0;N<I;N++){var j=t.groupSync[N];j.btnOn.visible=!0,j.btnOff.visible=!1}}else if(t.btnOn.visible=!1,t.btnOff.visible=!0,0!==t.groupSync.length)for(var A=t.groupSync.length,E=0;E<A;E++){var G=t.groupSync[E];G.btnOn.visible=!1,G.btnOff.visible=!0}this.refreshAllOnAndOffStatus(t.allOnAndOff);break;case"AllOnAndOff":if(t.btnOff.visible){a=t.onToOff.length;for(var q=0;q<a;q++)t.onToOff[q].btnOn.visible=!1,t.onToOff[q].btnOff.visible=!0;a=t.offToOn.length;for(var R=0;R<a;R++)t.offToOn[R].btnOn.visible=!1,t.offToOn[R].btnOff.visible=!0}else{a=t.onToOff.length;for(var z=0;z<a;z++)t.onToOff[z].btnOn.visible=!0,t.onToOff[z].btnOff.visible=!1;a=t.offToOn.length;for(var W=0;W<a;W++)t.offToOn[W].btnOn.visible=!0,t.offToOn[W].btnOff.visible=!1}}this.refreshOnAndOffControl()}},{key:"triggerFuncMousedown",value:function e(t){var n=t.currentTarget,a=this._parent.getInstanceMirror(n),s=this.getCustomTag(n),o=n.parent;switch(n.name){case"btnOn":o.btnOn.visible=!1,o.btnOff.visible=!0;break;case"btnOff":o.btnOn.visible=!0,o.btnOff.visible=!1}var r=void 0;switch(a=this._parent.getInstanceMirror(o),s=this.getCustomTag(o),a.command){case"OnToOff":r=this._onToOffBtnGroup[s].length;for(var u=0;u<r;u++)o.btnOff.visible?this._onToOffBtnGroup[s][u].gotoAndStop(1):this._onToOffBtnGroup[s][u].gotoAndStop(0);if(0!==o.groupSync.length)for(var l=o.groupSync.length,d=0;d<l;d++){var h=o.groupSync[d];h.btnOn.visible=o.btnOn.visible,h.btnOff.visible=o.btnOff.visible;for(var p=this.getCustomTag(h),c=this._onToOffBtnGroup[p].length,_=0;_<c;_++)h.btnOff.visible?this._onToOffBtnGroup[p][_].gotoAndStop(1):this._onToOffBtnGroup[p][_].gotoAndStop(0)}break;case"OffToOn":r=this._offToOnBtnGroup[s].length;for(var g=0;g<r;g++)o.btnOff.visible?this._offToOnBtnGroup[s][g].gotoAndStop(1):this._offToOnBtnGroup[s][g].gotoAndStop(0);if(0!==o.groupSync.length)for(var f=o.groupSync.length,v=0;v<f;v++){var m=o.groupSync[v];m.btnOn.visible=o.btnOn.visible,m.btnOff.visible=o.btnOff.visible;for(var b=this.getCustomTag(m),y=this._offToOnBtnGroup[b].length,S=0;S<y;S++)m.btnOff.visible?this._offToOnBtnGroup[b][S].gotoAndStop(1):this._offToOnBtnGroup[b][S].gotoAndStop(0)}break;case"AllOnAndOff":for(r=o.onToOff.length,i=0;i<r;i++){s=this.getCustomTag(o.onToOff[i]);for(var P=this._onToOffBtnGroup[s].length,M=0;M<P;M++)o.btnOff.visible?this._onToOffBtnGroup[s][M].gotoAndStop(1):this._onToOffBtnGroup[s][M].gotoAndStop(0)}for(r=o.offToOn.length,i=0;i<r;i++){s=this.getCustomTag(o.offToOn[i]);for(var k=this._offToOnBtnGroup[s].length,O=0;O<k;O++)o.btnOff.visible?this._offToOnBtnGroup[s][O].gotoAndStop(1):this._offToOnBtnGroup[s][O].gotoAndStop(0)}if(0!==o.groupSync.length)for(var B=o.groupSync.length,x=0;x<B;x++){var C=o.groupSync[x];C.btnOn.visible=o.btnOn.visible,C.btnOff.visible=o.btnOff.visible;for(var T=C.onToOff.length,w=0;w<T;w++)for(var L=this.getCustomTag(C.onToOff[w]),I=this._onToOffBtnGroup[L].length,N=0;N<I;N++)C.btnOff.visible?this._onToOffBtnGroup[L][N].gotoAndStop(1):this._onToOffBtnGroup[L][N].gotoAndStop(0);T=C.offToOn.length;for(var j=0;j<T;j++)for(var A=this.getCustomTag(C.offToOn[j]),E=this._offToOnBtnGroup[A].length,G=0;G<E;G++)C.btnOff.visible?this._offToOnBtnGroup[A][G].gotoAndStop(1):this._offToOnBtnGroup[A][G].gotoAndStop(0);this.updateFuncBtnStatus(C)}}this.updateFuncBtnStatus(o),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSubMousedown",value:function e(t){var i=t.currentTarget,n=i.bigTag,a=i.parent;0===i.currentFrame?i.gotoAndStop(1):i.gotoAndStop(0),this.updateFuncBtnStatus(i.rel),t.stopPropagation(),t.stopImmediatePropagation()}}]),p);function p(e){l(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._onToOffGroup=[],this._offToOnGroup=[],this._allOnAndOffGroup=[],this._onAndOffControlGroup=[],this._onToOffBtnGroup={},this._offToOnBtnGroup={},this._seq=999}t.ModuleOnAndOff=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleCalculator=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,c=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["Calculator"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),c.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1)}},{key:"reset",value:function e(){this.isInited||this.init(),c.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);for(var t=void 0,i=this._calculatorGroup.length,n=0;n<i;n++){t=this._calculatorGroup[n];var a=this._parent.getInstanceMirror(t);t.txt.text="",t.todo=[""],t.x=t.orgX,t.y=t.orgY}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"Calculator":n=this.getCustomTag(t),this._calculatorGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return c.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0;this.triggerBtnDragMainMenuListFuncMousedownBind=this.triggerBtnDragMainMenuListFuncMousedownBind||this.triggerBtnDragMainMenuListFuncMousedown.bind(this),this.triggerBtnDragListMousedownBind=this.triggerBtnDragListMousedownBind||this.triggerBtnDragListMousedown.bind(this),this.triggerBtnDragListPressmoveBind=this.triggerBtnDragListPressmoveBind||this.triggerBtnDragListPressmove.bind(this),this.triggerBtnDragListPressupBind=this.triggerBtnDragListPressupBind||this.triggerBtnDragListPressup.bind(this);for(var a=this._calculatorGroup.length,s=0;s<a;s++)if(!(n=this._calculatorGroup[s])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer",n.callUpdateFunc=null;var o=this._parent.getInstanceMirror(n);n.txt=o.parent[o.args[0]],n.txtMax=o.parent[o.args[1]]||1,n.limitInput=o.args[2].split("")||null,n.orgX=n.x,n.orgY=n.y,c.default.notNull(n.canDrag)&&(n.canDrag.addEventListener("mousedown",this.triggerBtnDragListMousedownBind),n.canDrag.addEventListener("pressup",this.triggerBtnDragListPressupBind));for(var r=o.subset.length,u=0;u<r;u++){var l=n[o.subset[u]],d;"sp"===this._parent.getInstanceMirror(l).command&&(l.mouseEnabled=!1)}for(var h=void 0,p=0;p<10;p++)h=n["n"+p],c.default.notNull(h)&&(h.value=p,h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind));h=n.b1_btn,c.default.notNull(h)&&(h.value="back",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b2_btn,c.default.notNull(h)&&(h.value="=",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b3_btn,c.default.notNull(h)&&(h.value="<",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b4_btn,c.default.notNull(h)&&(h.value=">",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b5_btn,c.default.notNull(h)&&(h.value=".",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b6_btn,c.default.notNull(h)&&(h.value="+",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b7_btn,c.default.notNull(h)&&(h.value="-",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b8_btn,c.default.notNull(h)&&(h.value="x",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b9_btn,c.default.notNull(h)&&(h.value="÷",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.close_btn,c.default.notNull(h)&&(h.value="close",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind))}}},{key:"triggerBtnDragMainMenuListFuncMousedown",value:function e(t){var i=t.currentTarget,n,a=this._parent.getInstanceMirror(i).parent,s=a.txt,o=void 0,r=void 0;if(a.todo=a.todo||[""],"close"===i.value)a.visible=!1;else if(c.default.isNull(a.limitInput))if(this.isNumber(i.value)){var u=s.text.toString().split("");u.length<a.txtMax&&(u.push(i.value),s.text=u.join(),a.todo[a.todo.length-1]=s.text,c.default.notNull(a.callUpdateFunc)&&a.callUpdateFunc(a))}else{var l=void 0;switch(i.value){case"back":0<(l=s.text.toString().split("")).length&&(l.pop(),s.text=l.join(),a.todo[a.todo.length-1]=s.text);break;case"=":this.calculate(a);break;case"+":case"-":case"x":case"÷":""!==a.todo[a.todo.length-1]&&this.isNumber(a.todo[a.todo.length-1])?a.todo.push(""):(""===a.todo[a.todo.length-1]||this.isNumber(a.todo[a.todo.length-1]),a.todo[a.todo.length-1]=i.value);break;case"<":case">":break;case".":(l=s.text.split("")).length<a.txtMax&&-1===l.indexOf(".")&&(l.push(i.value),s.text=l.join(),a.todo[a.todo.length-1]=s.text)}}else{if(-1===a.limitInput.indexOf(i.value.toString())&&"back"!==i.value){var d=s.text.toString().split("");return d.length<a.txtMax&&(d.push(i.value),s.text=d.join(),a.todo[a.todo.length-1]=s.text,c.default.notNull(a.callUpdateFunc)&&a.callUpdateFunc(a)),s.bitmapCache&&s.updateCache(),t.stopPropagation(),void t.stopImmediatePropagation()}if(this.isNumber(i.value)){var h=s.text.toString().split("");h.length<a.txtMax&&(h.push(i.value),s.text=h.join(),a.todo[a.todo.length-1]=s.text,c.default.notNull(a.callUpdateFunc)&&a.callUpdateFunc(a))}else{var p=void 0;switch(i.value){case"back":0<(p=s.text.toString().split("")).length&&(p.pop(),s.text=p.join(),a.todo[a.todo.length-1]=s.text,c.default.notNull(a.callUpdateFunc)&&a.callUpdateFunc(a));break;case"=":a.visible=!1,this.calculate(a)}}}s.bitmapCache&&s.updateCache(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"calculate",value:function e(t){c.default.notNull(parent.callUpdateFunc)&&parent.callUpdateFunc(t)}},{key:"isNumber",value:function e(t){return!isNaN(t)}},{key:"triggerBtnDragListMousedown",value:function e(t){var i=t.currentTarget,n=i.parent.parent.globalToLocal(t.stageX,t.stageY);i.parent.fixX=i.parent.x-n.x,i.parent.fixY=i.parent.y-n.y,i.parent.startX=i.parent.x+i.parent.fixX,i.parent.startY=i.parent.y+i.parent.fixY,this._parent.setPressEventIsOn(!0),i.addEventListener("pressmove",this.triggerBtnDragListPressmoveBind,c.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListPressmove",value:function e(t){var i=t.currentTarget;i.parent.parent.setChildIndex(i.parent,i.parent.parent.getNumChildren()-1);var n=i.parent.parent.globalToLocal(t.stageX,t.stageY);i.parent.x=n.x+i.parent.fixX,i.parent.y=n.y+i.parent.fixY,this._parent.setPressEventIsOn(!0);var a=Math.abs(i.parent.x-i.parent.startX),s=Math.abs(i.parent.y-i.parent.startY),o=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListPressup",value:function e(t){var i=t.currentTarget;this._parent.setPressEventIsOn(!1),i.removeEventListener("pressmove",this.triggerBtnDragListPressmoveBind,c.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._calculatorGroup=[],this._dragMainMenuListGroup=[],this._dragMainMenuListGroupMirror={},this._seq=999}t.ModuleCalculator=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModulePureAnimate=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,o=r(i(0));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=["ReplayAnimate"],d={ReplayAnimate:"none"},h=!1,p=.5,c=(n(_,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();for(var t=this._pickList.length,i=void 0,n=void 0,a=0;a<t;a++)i=this._pickList[a],n=this._parent.getInstanceMirror(i)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==l.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ReplayAnimate":this._animate.push(t)}}}},{key:"setup",value:function e(t){for(var u=this,l=0<arguments.length&&void 0!==t?t:"",i=this._animate.length,n=function e(t){var s=u._animate[t];if(!s._isModuleInited){var i=function e(t){if(t-s.lastFrameTime<r)requestAnimationFrame(e);else{s.lastFrameTime=t;var i=s.totalFrames,n,a=s.currentFrame+1;i<=a&&(a=0),s.gotoAndStop(a),s.bitmapCache&&s.updateCache(),o._parent.stage.contains(o._parent.exportRoot)?requestAnimationFrame(e):s.bitmapCache&&(s.uncache(),o._parent.stage.update())}};s._replacePath=l,s._isModuleInited=!0,s.fps=1e3/u._parent.lib.properties.fps,s.interval&&(u._parent.clearInterval(s.interval),cancelAnimationFrame(s.interval));var n=u._parent.getInstanceMirror(s);s._webGLCacheRectSize=n.args[1]?Number(n.args[1]):.5;var o=u,a=0,r=1e3/60*(60/u._parent.lib.properties.fps)-1e3/60*.5;s.lastFrameTime=0,u._parent.stage.isWebGL,s.interval=requestAnimationFrame(i)}},a=0;a<i;a++)n(a)}},{key:"checkCommandMode",value:function e(t){var i;return d[t]}}]),_);function _(e){u(this,_),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._animate=[],this._prevTime=-1,this._seq=999}t.ModulePureAnimate=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleZoom=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,v=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["ZoomIn"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._zoomInGroup.length;for(i=0;i<n;i++){t=this._zoomInGroup[i];var a=this._parent.getInstanceMirror(t),s=this.getCustomTag(t),o=this._zoomInGroupMirror[s];v.default.notNull(o)&&(o.visible=!1)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ZoomIn":n=this.getCustomTag(t),this._zoomInGroup.push(t),this._zoomInGroupMirror[n]=this.pickRelation(i.parent,i.args[1])}}}},{key:"getCustomTag",value:function e(t){return v.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){var n=t[i];return null!=n?n:null}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0;this.triggerBtnZoomInMousedownBind=this.triggerBtnZoomInMousedownBind||this.triggerBtnZoomInMousedown.bind(this);var s=this._zoomInGroup.length;for(a=0;a<s;a++)if(!(n=this._zoomInGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var o=this.getCustomTag(n),r=this._parent.getInstanceMirror(n),u=this._zoomInGroupMirror[o];if(v.default.notNull(u)){u.visible=!1;var l=u.parent.localToGlobal(u.x-u.regX*u.scaleX,u.y-u.regY*u.scaleY),d=u.getBounds().width*u.scaleX,h=u.getBounds().height*u.scaleY,p=0<=u.getBounds().x?1:-1,c=0<=u.getBounds().y?1:-1,_=new this._parent.createjs.Point(u.x-u.regX*u.scaleX,u.y-u.regY*u.scaleY);1==p?_.x+=d:_.x-=d,1==c?_.y+=h:_.y-=h;var g=u.parent.localToGlobal(_.x,_.y);if(l.x>g.x){var f=l.clone();l.setValues(g.x,g.y),g.setValues(f.x,f.y)}u._locXY1=l,u._locXY2=g,u._locXY1N=u.parent.parent.globalToLocal(l.x,l.y),u._locXY2N=u.parent.parent.globalToLocal(g.x,g.y),this._zoomInGroupList.push({index:Number(r.args[0]),id:r.args[0],locX1:u._locXY1N.x,locY1:u._locXY1N.y,locX2:u._locXY2N.x,locY2:u._locXY2N.y})}n.addEventListener(this._mouseTriggerBehavior,this.triggerBtnZoomInMousedownBind),v.default.notNull(n.EffectBase)&&v.default.applyMultiply(n.EffectBase)}this._zoomInGroupList=this._zoomInGroupList.sort(function(e,t){return e.index>t.index?1:-1})}},{key:"getZoomInInfoList",value:function e(){return this._zoomInGroupList.concat()}},{key:"triggerBtnZoomInMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i);this._parent.sendCommand(n.command,i.name),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._parent=e,this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._pickList,this._zoomInGroup=[],this._zoomInGroupList=[],this._zoomInGroupMirror={},this._seq=999}t.ModuleZoom=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnBookPage=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,k=i(15).ModuleOnAndOff,O=i(16).ModuleCalculator,B=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(32).ModuleWordsMarqueeSound,T=i(36).ModuleDragQA,w=i(37).ModuleEnCnTranslate,L=i(38).ModuleAnimateAnsRightWrong,I=i(39).ModuleSpotlight,N=i(40).ModuleLetterStroke,j=(h(E,A=p),n(E,[{key:"init",value:function e(){s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.stop(n,a,!0)}},{key:"stop",value:function e(t,i,n){var a=0<arguments.length&&void 0!==t?t:null,s=1<arguments.length&&void 0!==i&&i,o=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(a=this.soundObj.excludeTags),r.default.isNull(a)&&(a=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(a=a.concat(this.videoObj.excludeTags)),-1===a.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!o&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!o&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleWordsMarqueeSound&&-1===a.indexOf("ModuleWordsMarqueeSound")&&-1===this._resetExclude.indexOf("ModuleWordsMarqueeSound")&&this._moduleWordsMarqueeSound.stop(),this._moduleDragQA&&-1===a.indexOf("ModuleDragQA")&&-1===this._resetExclude.indexOf("ModuleDragQA")&&this._moduleDragQA.stop(),this._moduleEnCnTranslate&&-1===a.indexOf("ModuleEnCnTranslate")&&-1===this._resetExclude.indexOf("ModuleEnCnTranslate")&&this._moduleEnCnTranslate.stop(),this._moduleAnimateAnsRightWrong&&-1===a.indexOf("ModuleAnimateAnsRightWrong")&&-1===this._resetExclude.indexOf("ModuleAnimateAnsRightWrong")&&this._moduleAnimateAnsRightWrong.stop(),this._moduleSpotlight&&-1===a.indexOf("ModuleSpotlight")&&-1===this._resetExclude.indexOf("ModuleSpotlight")&&this._moduleSpotlight.stop(),this._moduleLetterStroke&&-1===a.indexOf("ModuleLetterStroke")&&-1===this._resetExclude.indexOf("ModuleLetterStroke")&&this._moduleLetterStroke.stop(),this._moduleGoOutCommand&&-1===a.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===a.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===a.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===a.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===a.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===a.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===a.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===a.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===a.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===a.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===a.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===a.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===a.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleAnsZone&&-1===a.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===a.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===a.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),s&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleWordsMarqueeSound&&-1===n.indexOf("ModuleWordsMarqueeSound")&&-1===this._resetExclude.indexOf("ModuleWordsMarqueeSound")&&this._moduleWordsMarqueeSound.reset(),this._moduleDragQA&&-1===n.indexOf("ModuleDragQA")&&-1===this._resetExclude.indexOf("ModuleDragQA")&&this._moduleDragQA.reset(),this._moduleEnCnTranslate&&-1===n.indexOf("ModuleEnCnTranslate")&&-1===this._resetExclude.indexOf("ModuleEnCnTranslate")&&this._moduleEnCnTranslate.reset(),this._moduleAnimateAnsRightWrong&&-1===n.indexOf("ModuleAnimateAnsRightWrong")&&-1===this._resetExclude.indexOf("ModuleAnimateAnsRightWrong")&&this._moduleAnimateAnsRightWrong.reset(),this._moduleSpotlight&&-1===n.indexOf("ModuleSpotlight")&&-1===this._resetExclude.indexOf("ModuleSpotlight")&&this._moduleSpotlight.reset(),this._moduleLetterStroke&&-1===n.indexOf("ModuleLetterStroke")&&-1===this._resetExclude.indexOf("ModuleLetterStroke")&&this._moduleLetterStroke.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleDragQA&&-1===n.indexOf("ModuleDragQA")&&-1===this._resetExclude.indexOf("ModuleDragQA")&&this._moduleDragQA.reset(),this._moduleEnCnTranslate&&-1===n.indexOf("ModuleEnCnTranslate")&&-1===this._resetExclude.indexOf("ModuleEnCnTranslate")&&this._moduleEnCnTranslate.reset(),this._moduleAnimateAnsRightWrong&&-1===n.indexOf("ModuleAnimateAnsRightWrong")&&-1===this._resetExclude.indexOf("ModuleAnimateAnsRightWrong")&&this._moduleAnimateAnsRightWrong.reset(),this._moduleSpotlight&&-1===n.indexOf("ModuleSpotlight")&&-1===this._resetExclude.indexOf("ModuleSpotlight")&&this._moduleSpotlight.reset(),this._moduleLetterStroke&&-1===n.indexOf("ModuleLetterStroke")&&-1===this._resetExclude.indexOf("ModuleLetterStroke")&&this._moduleLetterStroke.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),a&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var a=1<arguments.length&&void 0!==i?i:.2,s=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,a,s)}},{key:"injectMarqueeData",value:function e(t,i){this.marqueeSData=t,this.marqueeDData=i}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"syncMarqueeSound",value:function e(t,i){t!==this.soundChannel&&r.default.notNull(this._moduleWordsMarqueeSound)&&this._moduleWordsMarqueeSound.syncMarqueeSound(t,i)}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(s(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new k(this).init(),this._moduleCalculator=new O(this).init(),this._modulePureAnimate=new B(this).init(),this._moduleZoom=new x(this).init(),this._moduleWordsMarqueeSound=new C(this).init(),this._moduleDragQA=new T(this).init(),this._moduleEnCnTranslate=new w(this).init(),this._moduleAnimateAnsRightWrong=new L(this).init(),this._moduleSpotlight=new I(this).init(),this._moduleLetterStroke=new N(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new k(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new O(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new B(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleZoom)?this._moduleZoom=new x(this).init(t):this._moduleZoom.reinit(t),r.default.isNull(this._moduleWordsMarqueeSound)?this._moduleWordsMarqueeSound=new C(this).init(t):this._moduleWordsMarqueeSound.reinit(t),r.default.isNull(this._moduleDragQA)?this._moduleDragQA=new T(this).init(t):this._moduleDragQA.reinit(t),r.default.isNull(this._moduleEnCnTranslate)?this._moduleEnCnTranslate=new w(this).init(t):this._moduleEnCnTranslate.reinit(t),r.default.isNull(this._moduleAnimateAnsRightWrong)?this._moduleAnimateAnsRightWrong=new L(this).init(t):this._moduleAnimateAnsRightWrong.reinit(t),r.default.isNull(this._moduleSpotlight)?this._moduleSpotlight=new I(this).init(t):this._moduleSpotlight.reinit(t),r.default.isNull(this._moduleLetterStroke)?this._moduleLetterStroke=new N(this).init(t):this._moduleLetterStroke.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),E),A;function E(e,t,i,n){l(this,E);var a=d(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,e,t,i,n));return(a._this=a)._resetExclude=[],a.__specClassName="EnBookPage",a}t.EnBookPage=j},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChBookPage=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,k=i(15).ModuleOnAndOff,O=i(16).ModuleCalculator,B=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(31).ModuleWordStroke,T=(h(L,w=p),n(L,[{key:"init",value:function e(){s(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.stop(n,a,!0)}},{key:"stop",value:function e(t,i,n){var a=0<arguments.length&&void 0!==t?t:null,s=1<arguments.length&&void 0!==i&&i,o=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(a=this.soundObj.excludeTags),r.default.isNull(a)&&(a=[]),-1===a.indexOf("VideoChannel")&&(r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(a=a.concat(this.videoObj.excludeTags)),r.default.notNull(this.videoChannel)&&!o&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!o&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleWordStroke&&-1===a.indexOf("ModuleWordStroke")&&-1===this._resetExclude.indexOf("ModuleWordStroke")&&this._moduleWordStroke.stop(),this._moduleGoOutCommand&&-1===a.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===a.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===a.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===a.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===a.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===a.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===a.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===a.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===a.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===a.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===a.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===a.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===a.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleAnsZone&&-1===a.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===a.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===a.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),s&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleWordStroke&&-1===n.indexOf("ModuleWordStroke")&&-1===this._resetExclude.indexOf("ModuleWordStroke")&&this._moduleWordStroke.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),a&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(s(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleWordStroke&&(this._moduleWordStroke.useJSON=!0,this._moduleWordStroke.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var a=1<arguments.length&&void 0!==i?i:.2,s=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,a,s)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(s(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new k(this).init(),this._moduleCalculator=new O(this).init(),this._modulePureAnimate=new B(this).init(),this._moduleZoom=new x(this).init(),this._moduleWordStroke=new C(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new k(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new O(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new B(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleZoom)?this._moduleZoom=new x(this).init(t):this._moduleZoom.reinit(t),r.default.isNull(this._moduleWordStroke)?this._moduleWordStroke=new C(this).init(t):this._moduleWordStroke.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar);break;case"word-stroke-mix-canvas":this.__backInfo.base.playWordSound(this.__backInfo.wordStrokeBase,this.__backInfo.target,this.__backInfo.isContinue,this.__backInfo.isPlay)}this.__backInfo=null,this.__loadinfo=null}}}]),L),w;function L(e,t,i,n){l(this,L);var a=d(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,e,t,i,n));return(a._this=a)._resetExclude=[],a}t.ChBookPage=T},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=s(i(1));function s(e){return e&&e.__esModule?e:{default:e}}var o=!window.ActiveXObject&&window.ActiveXObject;t.default={prefixNumberStr:function e(t,i){return(Array(i).join("0")+t).slice(-i)},loadJSON:function e(t,i){var n=void 0;(n=o?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest).callback=i,n.overrideMimeType&&n.overrideMimeType("application/json"),n.open("GET",t,!1),n.onreadystatechange=function(){4==this.readyState&&this.callback(this)},n.send(null)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=s(i(1));function s(e){return e&&e.__esModule?e:{default:e}}t.default={randomInt:function e(t,i,n){for(var a=void 0;a=Math.round(Math.random()*(i-t))+t,helper.notNull(n)&&a===n;);return a},roundX:function e(t,i){return Math.round(Math.round(t*Math.pow(10,(i||0)+1))/10)/Math.pow(10,i||0)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=a(i(1));function a(e){return e&&e.__esModule?e:{default:e}}t.default={checkArrayEquals:function e(t,i){if(!i)return!1;if(t.length!=i.length)return!1;for(var n=0,a=t.length;n<a;n++)if(t[n]instanceof Array&&i[n]instanceof Array){if(!s.default.checkArrayEquals(t[n],i[n]))return!1}else if(t[n]!==i[n])return!1;return!0},getArrayUnique:function e(t,i,n){return n.indexOf(t)===i},shuffleArray:function e(t){for(var i=t.length-1;0<i;i--){var n=Math.floor(Math.random()*(i+1)),a=[t[n],t[i]];t[i]=a[0],t[n]=a[1]}},sortByValueACS:function e(t,i){return t.value-i.value},sortByNameACS:function e(t,i){var n=t.name.toUpperCase(),a=i.name.toUpperCase();return n<a?-1:a<n?1:0}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,p=o(i(1));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=void 0,l=void 0,d=void 0,h=!1,c=!1;t.default={playSoundCheckLoadRequest:function e(i,t,n,a,s,o,r){var u=i.Sound.play(n,{offset:s,interrupt:i.Sound.INTERRUPT_EARLY,loop:a,volume:o});if("playFailed"===u.playState){var l=function e(t){i.Sound.removeEventListener("fileload",e),i.Sound.removeEventListener("fileerror",h),i.Sound.removeEventListener("error",d),p.default.notNull(r)&&r(n,u,"fileload")},d=function e(t){i.Sound.removeEventListener("fileload",l),i.Sound.removeEventListener("fileerror",h),i.Sound.removeEventListener("error",e),p.default.notNull(r)&&r(n,u,"error")},h=function e(t){i.Sound.removeEventListener("fileload",l),i.Sound.removeEventListener("fileerror",e),i.Sound.removeEventListener("error",d),p.default.notNull(r)&&r(n,u,"fileerror")};i.Sound.alternateExtensions=["mp3"],i.Sound.registerSound(t+n+".mp3",n),p.default.notNull(r)&&r(n,u,"preloading"),i.Sound.addEventListener("fileload",l),i.Sound.addEventListener("error",d),i.Sound.addEventListener("fileerror",h)}else p.default.notNull(r)&&(u.paused=!0,r(n,u,"playSuccess"))},playSound:function e(t,i,n){return t.Sound.play(i,{interrupt:t.Sound.INTERRUPT_EARLY,loop:n})},playWebAudioSound:function e(t,i,n,a,s,o,r){d=t,p.default.notNull(u)?u.stop():u=new _,u.path=i,u.id=n,u.loop=a,u.offset=s,u.volume=o,u.callback=r,u.src=i+n+".mp3",u.play()},playWebAudioSound2:function e(t,i,n,a,s,o,r){d=t,p.default.notNull(l)?l.stop():l=new _,l.path=i,l.id=n,l.loop=a,l.offset=s,l.volume=o,l.callback=r,l.src=i+n+".mp3",l.play()}};var _=(n(g,[{key:"addEventListener",value:function e(t,i){this.hasOwnProperty("_listener")||(this._listener=[]),void 0===this._listener[t]&&(this._listener[t]=[]),this._listener[t].push(i)}},{key:"dispatchEvent",value:function e(t){if(t.target,!t.type)throw new Error("Event Object missing 'type' ");var i;this._listener&&this._listener[t.type]instanceof Array&&this._listener[t.type].forEach(function(e){e.call(this,t)})}},{key:"removeEventListener",value:function e(t,i){if(this._listener&&this._listener[t]instanceof Array)for(var n=this._listener[t],a=0,s=n.length;a<s;a++)if(n[a]===i){n.splice(a,1);break}}},{key:"updateTicker",value:function e(){d.Ticker.paused||d.Ticker._tick()}},{key:"stop",value:function e(){d.Ticker.removeEventListener("tick",this.watchCreateJSIsLive),h=!1,this.audio.removeEventListener("canplaythrough",this.triggerWebAudioCanPaly),this.audio.removeEventListener("loadedmetadata",this.triggerWebAudioMetaData),this.audio.removeEventListener("timeupdate",this.updateTicker),this.audio.autoplay=!1,this.audio.pause()}},{key:"play",value:function e(){d.Ticker.addEventListener("tick",this.watchCreateJSIsLive),this.audio.addEventListener("loadedmetadata",this.triggerWebAudioMetaData),this.audio.addEventListener("timeupdate",this.updateTicker),this.audio.load()}},{key:"triggerWebAudioMetaData",value:function e(t){var i=t.target;i.removeEventListener("loadedmetadata",i.__this.triggerWebAudioCanPaly),i.__this.callback(i.__this.id,i.__this,"playSuccess")}},{key:"triggerWebAudioCanPaly",value:function e(t){var i=t.target;i.removeEventListener("canplaythrough",i.__this.triggerWebAudioCanPaly),p.default.trace("canplay",i.duration,i.currentTime),i.__this.position=i.__this.offset;var n=i.play();void 0!==n?n.then(function(){i.play(),i.__this.callback(i.__this.id,i.__this,"playSuccess")}).catch(function(){i.__this.callback(i.__this.id,i.__this,"fileerror")}):i.__this.callback(i.__this.id,i.__this,"playSuccess")}},{key:"triggerWebAudioError",value:function e(t){var i=t.target;i.__this.callback(i.__this.id,i.__this,"fileerror")}},{key:"triggerWebAudioComplete",value:function e(t){var i=t.target;if(0===i.__this.loopMax)i.__this.dispatchEvent(i.__this.createNewEvent("complete"));else if(i.__this.loopCount++,i.__this.loopCount<=i.__this.loopMax){var n=i.play();void 0!==n&&n.then(function(){i.play()}).catch(function(){i.__this.dispatchEvent(i.__this.createNewEvent("complete"))})}else i.__this.dispatchEvent(i.__this.createNewEvent("complete"))}},{key:"watchCreateJSIsLive",value:function e(t){d.Ticker.paused?(u.paused||(h=!0,u.paused=!0),l.paused||(c=!0,l.paused=!0)):(h&&!d.Ticker.paused?(h=!1,u.paused=!1):h=!1,c&&!d.Ticker.paused?(c=!1,l.paused=!1):c=!1)}},{key:"createNewEvent",value:function e(t){var i;return"function"==typeof Event?i=new Event(t,{bubbles:!0,cancelable:!1}):(i=document.createEvent("Event")).initEvent(t,!0,!0),i}},{key:"autoplay",set:function e(t){this.audio.autoplay=t},get:function e(){return this.audio.autoplay}},{key:"playbackRate",set:function e(t){this.audio.playbackRate=t},get:function e(){return this.audio.playbackRate}},{key:"src",set:function e(t){this.audio.src=t},get:function e(){return this.audio.src}},{key:"volume",set:function e(t){this.audio.volume=t},get:function e(){return this.audio.volume}},{key:"loop",set:function e(t){this.loopMax=0<=t?t:0,this.loopCount=0},get:function e(){return this.loopMax}},{key:"duration",get:function e(){return 1e3*this.audio.duration}},{key:"position",get:function e(){return p.default.notNull(this.audio.currentTime)?1e3*this.audio.currentTime:0},set:function e(t){t<=this.offset&&(t=this.offset),this.audio.currentTime=t/1e3}},{key:"paused",set:function e(t){if(t)this.audio.autoplay=!1,this.audio.pause();else{this.audio.autoplay=!0;var i=this.audio.play(),n=this;void 0!==i&&i.then(function(){n.audio.play()}).catch(function(){})}},get:function e(){return this.audio.paused}}]),g);function g(){r(this,g),this.audio=new Audio,this.audio.preload="metadata",(this.audio.__this=this).audio.autoplay=!1,this.path,this.id,this.offset,this.vol,this.loop,this.callback,this.audio.addEventListener("error",this.triggerWebAudioError),this.audio.addEventListener("ended",this.triggerWebAudioComplete)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,u=o(i(1));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=void 0,d=void 0,h=!1;t.default={playWebVideo:function e(t,i,n,a,s,o,r){d=t,u.default.notNull(l)&&l.stop(),(l=new p).path=i,l.id=n,l.loop=a,l.offset=s,l.volume=o,l.callback=r,l.src=i+n+".mp4",l.play()}};var p=(n(c,[{key:"addEventListener",value:function e(t,i){this.hasOwnProperty("_listener")||(this._listener=[]),void 0===this._listener[t]&&(this._listener[t]=[]),this._listener[t].push(i)}},{key:"dispatchEvent",value:function e(t){if(t.target,!t.type)throw new Error("Event Object missing 'type' ");var i;this._listener&&this._listener[t.type]instanceof Array&&this._listener[t.type].forEach(function(e){e.call(this,t)})}},{key:"removeEventListener",value:function e(t,i){if(this._listener&&this._listener[t]instanceof Array)for(var n=this._listener[t],a=0,s=n.length;a<s;a++)if(n[a]===i){n.splice(a,1);break}}},{key:"updateTicker",value:function e(){d.Ticker.paused||d.Ticker._tick()}},{key:"stop",value:function e(t){var i=0<arguments.length&&void 0!==t&&t;d.Ticker.removeEventListener("tick",this.watchCreateJSIsLive),h=!1,this.video.removeEventListener("canplaythrough",this.triggerWebVideoCanPaly),this.video.removeEventListener("loadedmetadata",this.triggerWebVideoMetaData),this.video.autoplay=!1,this.video.pause(),i&&u.default.notNull(this.videoBitmap)&&(u.default.notNull(this.videoBitmap.parent)&&this.videoBitmap.parent.removeChild(this.videoBitmap),this.videoBitmap=null,this.videoBuffer=null)}},{key:"play",value:function e(){u.default.notNull(this.videoBitmap)&&(u.default.notNull(this.videoBitmap.parent)&&this.videoBitmap.parent.removeChild(this.videoBitmap),this.videoBitmap=null,this.videoBuffer=null),d.Ticker.addEventListener("tick",this.watchCreateJSIsLive),this.video.addEventListener("loadedmetadata",this.triggerWebVideoMetaData)}},{key:"triggerWebVideoMetaData",value:function e(t){var i=t.target;i.removeEventListener("loadedmetadata",i.__this.triggerWebVideoMetaData),i.__this.callback(i.__this.id,i.__this,"playSuccess")}},{key:"triggerWebVideoCanPaly",value:function e(t){var i=t.target;i.removeEventListener("canplaythrough",i.__this.triggerWebVideoCanPaly),u.default.trace("canplay",i.duration,i.currentTime),i.__this.position=i.__this.offset;var n=i.play();void 0!==n?n.then(function(){i.play(),i.__this.callback(i.__this.id,i.__this,"playSuccess")}).catch(function(){i.__this.callback(i.__this.id,i.__this,"fileerror")}):(i.__this.videoBuffer=new d.VideoBuffer(i),i.__this.videoBitmap=new d.Bitmap(i.__this.videoBuffer),i.__this.callback(i.__this.id,i.__this,"playSuccess"))}},{key:"triggerWebVideoError",value:function e(t){var i=t.target;i.__this.callback(i.__this.id,i.__this,"fileerror")}},{key:"triggerWebVideoComplete",value:function e(t){var i=t.target;if(0===i.__this.loopMax)i.__this.dispatchEvent(i.__this.createNewEvent("complete"));else if(i.__this.loopCount++,i.__this.loopCount<=i.__this.loopMax){var n=i.play();void 0!==n&&n.then(function(){i.play()}).catch(function(){i.__this.dispatchEvent(i.__this.createNewEvent("complete"))})}else i.__this.dispatchEvent(i.__this.createNewEvent("complete"))}},{key:"watchCreateJSIsLive",value:function e(t){d.Ticker.paused?l.paused||(h=!0,l.paused=!0):h&&!d.Ticker.paused?(h=!1,l.paused=!1):h=!1}},{key:"createNewEvent",value:function e(t){var i;return"function"==typeof Event?i=new Event(t,{bubbles:!0,cancelable:!1}):(i=document.createEvent("Event")).initEvent(t,!0,!0),i}},{key:"autoplay",set:function e(t){this.video.autoplay=t},get:function e(){return this.video.autoplay}},{key:"playbackRate",set:function e(t){this.video.playbackRate=t},get:function e(){return this.video.playbackRate}},{key:"src",set:function e(t){this.video.src=t},get:function e(){return this.video.src}},{key:"volume",set:function e(t){this.video.volume=t},get:function e(){return this.video.volume}},{key:"loop",set:function e(t){this.loopMax=0<=t?t:0,this.loopCount=0},get:function e(){return this.loopMax}},{key:"duration",get:function e(){return 1e3*this.video.duration}},{key:"position",get:function e(){return u.default.notNull(this.video.currentTime)?1e3*this.video.currentTime:0},set:function e(t){t<=this.offset&&(t=this.offset),this.video.currentTime=t/1e3}},{key:"paused",set:function e(t){if(t)this.video.autoplay=!1,this.video.pause();else{this.video.autoplay=!0;var i=this.video.play(),n=this;void 0!==i&&i.then(function(){n.video.play()}).catch(function(){})}},get:function e(){return this.video.paused}}]),c);function c(){r(this,c),this.video=document.createElement("video"),(this.video.__this=this).video.preload="metadata",this.video.autoplay=!1,this.videoBuffer,this.videoBitmap,this.path,this.id,this.offset,this.vol,this.loop,this.callback,this.video.playsInline="true",this.video["webkit-playsinline"]="true",this.video.addEventListener("error",this.triggerWebVideoError),this.video.addEventListener("ended",this.triggerWebVideoComplete)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=s(i(1));function s(e){return e&&e.__esModule?e:{default:e}}t.default={collisionTest:function e(t,i){if(t.getBounds()&&i.getBounds()){var n=t.getBounds().width*t.scaleX,a=t.getBounds().height*t.scaleY,s=i.getBounds().width*i.scaleX,o=i.getBounds().height*i.scaleY,r=t.x+t.getBounds().x*t.scaleX-t.regX*t.scaleX,u=t.y+t.getBounds().y*t.scaleY-t.regY*t.scaleY,l=r+n,d=u+a,h=i.x+i.getBounds().x*i.scaleX-i.regX*i.scaleX,p=i.y+i.getBounds().y*i.scaleY-i.regY*i.scaleY,c=h+s,_=p+o,g=void 0,f=void 0;return f=u<p&&p<d||u<_&&_<d,(g=r<h&&h<l||r<c&&c<l)&&f}return!1}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,h=a(i(1));function a(e){return e&&e.__esModule?e:{default:e}}t.default={applyMultiply:function e(t){h.default.notNull(t)&&(t.compositeOperation="multiply")},unapplyMultiply:function e(t){h.default.notNull(t)&&(t.compositeOperation=null)},applyColorFilter:function e(t,i,n,a,s,o){var r=2<arguments.length&&void 0!==n?n:255,u=3<arguments.length&&void 0!==a?a:0,l=4<arguments.length&&void 0!==s?s:0,d=5<arguments.length&&void 0!==o?o:0;h.default.notNull(i)&&i instanceof t.MovieClip&&(h.default.isNull(i.orgAlpha)&&(i.orgAlpha=i.alpha),i.filters=[new t.ColorFilter(0,0,0,1,r,u,l,d)],h.default.notNull(i.nominalBounds)?i.cache(i.nominalBounds.x,i.nominalBounds.y,i.nominalBounds.width,i.nominalBounds.height):h.default.trace("target.nominalBounds is undefined."))},applyColorGrayFilter:function e(t,i,n){var a=2<arguments.length&&void 0!==n?n:.2;h.default.notNull(i)&&i instanceof t.MovieClip&&(h.default.isNull(i.orgAlpha)&&(i.orgAlpha=i.alpha),i.alpha=a,i.filters=[new createjs.ColorMatrixFilter((new t.ColorMatrix).adjustSaturation(-100))],h.default.notNull(i.nominalBounds)?i.cache(i.nominalBounds.x,i.nominalBounds.y,i.nominalBounds.width,i.nominalBounds.height):h.default.trace("target.nominalBounds is undefined."))},unapplyColorFilter:function e(t,i){h.default.notNull(i)&&i instanceof t.MovieClip&&(h.default.isNull(i.orgAlpha)&&(i.orgAlpha=i.alpha),i.alpha=i.orgAlpha,i.filters=null,i.uncache())}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(i(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=!1;t.default={generateExtraCommand:function e(t,i,n){var a={};if(a.owner=n,l.default.notNull(i)){var s=i.split("_");a.command=t,(a.data=s.concat()).shift()}return a},sendExtraCommand:function e(t){for(var i=arguments.length,n=Array(1<i?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];var s,o;if(l.default.trace.apply(l.default,["log: sendExtraCommand",t].concat(n)),l.default.notNull(t)&&l.default.notNull(t.selfInstance)&&l.default.notNull(t.selfInstance.lib)&&l.default.notNull(t.selfInstance.lib.extraSendChannelFunc))(s=t.selfInstance.lib).extraSendChannelFunc.apply(s,[t].concat(n));else if(l.default.notNull(window)){if(window.sendFromChild)(o=window).sendFromChild.apply(o,[t].concat(n));else if(l.default.notNull(window.parent)&&window.parent.sendFromIFrameChild){var r;(r=window.parent).sendFromIFrameChild.apply(r,[t].concat(n))}}else l.default.trace("warning: window is not exist.")},getHtmlhrefValue:function e(t){if(l.default.notNull(window)){var i,n=decodeURI(window.location.href).split("?");if(n.length<=1)return;var a,s=n[1].split("&"),o=void 0,r=void 0;for(r=0;r<s.length;r++){var u=s[r].split("=");if(u[0]==t){o=u[1];break}}return void 0!==o&&(o=unescape(o)).replace(/\+/g," "),o}},canvasResume:function e(t,i){l.default.trace("canvas resume"),t.Ticker.paused=!1,t.Ticker.addEventListener("tick",i)},canvasPause:function e(t,i){l.default.trace("canvas pause"),t.Ticker.paused=!0,t.Ticker.removeEventListener("tick",i)},supportPassive:function e(){if(s)return{passive:!0};if(l.default.isNull(window))return!1;try{var t=Object.defineProperty({},"passive",{get:function e(){s=!0}});window.addEventListener("test",null,t)}catch(e){}return!!s&&{passive:!0}},createNewEvent:function e(t){var i;return"function"==typeof Event?i=new Event(t,{bubbles:!0,cancelable:!1}):(i=document.createEvent("Event")).initEvent(t,!0,!0),i},isIOS:function e(t){var i;return 0<arguments.length&&void 0!==t&&t?(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform)&&!window.MSStream:(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints)&&!window.MSStream}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SoundPlayerBar=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,c=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["SoundPlayBar","MiniSoundPlayBar"],l=(n(d,[{key:"init",value:function e(){if(!this.isInited){var t;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup()}return this}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init(),c.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),this.closeSoundPlayBar();for(var t=this._pickList.length,i=void 0,n=void 0,a=0;a<t;a++)i=this._pickList[a],n=this._parent.getInstanceMirror(i),i.timeTF.text="",i.durationTF.text="",i.timeTF.updateCache(),i.durationTF.updateCache(),i.visible=!1}},{key:"openSoundPlayBar",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:{};this.isInited||this.init(),this.reset(),this._soundPlayBar&&(this._soundPlayBar.visible=!1),this._miniSoundPlayBar&&(this._miniSoundPlayBar.visible=!1),this._controlPlayBar="mini-close"===t||"mini-wait"===t?this._miniSoundPlayBar:this._soundPlayBar,this._soundObj=n,this.initControlSoundPlayBar(t)}},{key:"stopSoundPlayBar",value:function e(){this.isInited||this.init(),c.default.notNull(this._controlPlayBar)&&(this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0,this._parent.soundChannel.position=0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1)}},{key:"closeSoundPlayBar",value:function e(){this.isInited||this.init(),c.default.notNull(this._controlPlayBar)&&(c.default.notNull(this._parent.soundChannel)&&(this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0),this._controlPlayBar.visible=!1,this._parent.createjs.Ticker.removeEventListener("tick",this.watchPlaySoundTickBind),this._soundObj=null,this._controlPlayBar=null)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);-1!==u.indexOf(i.command)&&this._pickList.push(t)}},{key:"setup",value:function e(){this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.pressmoveScrollBind=this.pressmoveScrollBind||this.pressmoveScroll.bind(this),this.mousedownScrollBind=this.mousedownScrollBind||this.mousedownScroll.bind(this),this.pressupScrollBind=this.pressupScrollBind||this.pressupScroll.bind(this),this.pressmoveBarBaseBind=this.pressmoveBarBaseBind||this.pressmoveBarBase.bind(this),this.mousedownBarBaseBind=this.mousedownBarBaseBind||this.mousedownBarBase.bind(this),this.pressupBarBaseBind=this.pressupBarBaseBind||this.pressupBarBase.bind(this),this.watchPlaySoundTickBind=this.watchPlaySoundTickBind||this.watchPlaySoundTick.bind(this);for(var t=this._pickList.length,i=void 0,n=0;n<t;n++)(i=this._pickList[n])._isModuleInited||(i._isModuleInited=!0,this.build(i));this._miniSoundPlayBar||(this._miniSoundPlayBar=this._soundPlayBar),this._soundPlayBar||(this._soundPlayBar=this._miniSoundPlayBar)}},{key:"build",value:function e(t){var i=this._parent.getInstanceMirror(t);"SoundPlayBar"===i.command&&(this._soundPlayBar=t),"MiniSoundPlayBar"===i.command&&(this._miniSoundPlayBar=t),t.controlClose&&(t.controlClose.cursor="pointer",t.controlClose.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlStop&&(t.controlStop.cursor="pointer",t.controlStop.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlPlay&&(t.controlPlay.cursor="pointer",t.controlPlay.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlPause&&(t.controlPause.cursor="pointer",t.controlPause.visible=!1,t.controlPause.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.timeBar&&t.timeBar.pullBall&&(t.timeBar.pullBall.cursor="pointer",t.timeBar.pullBall.addEventListener("pressmove",this.pressmoveScrollBind,c.default.supportPassive()),t.timeBar.pullBall.addEventListener("mousedown",this.mousedownScrollBind,c.default.supportPassive()),t.timeBar.pullBall.addEventListener("pressup",this.pressupScrollBind,c.default.supportPassive())),t.baseMC&&(t.baseMC.addEventListener("pressmove",this.pressmoveBarBaseBind,c.default.supportPassive()),t.baseMC.addEventListener("mousedown",this.mousedownBarBaseBind,c.default.supportPassive()),t.baseMC.addEventListener("pressup",this.pressupBarBaseBind,c.default.supportPassive())),t.timeTF.mouseEnabled=!1,t.durationTF.mouseEnabled=!1,t.gapTF.mouseEnabled=!1,t.timeTF.text="  00:00  ",t.durationTF.text="  00:00  ",t.timeTF.cache(t.timeTF.getBounds().x,t.timeTF.getBounds().y,t.timeTF.getBounds().width,t.timeTF.getBounds().height,1),t.timeTF.updateCache(),t.durationTF.cache(t.durationTF.getBounds().x,t.durationTF.getBounds().y,t.durationTF.getBounds().width,t.durationTF.getBounds().height,1),t.durationTF.updateCache(),t.gapTF.cache(t.gapTF.getBounds().x,t.gapTF.getBounds().y,t.gapTF.getBounds().width,t.gapTF.getBounds().height,1),t.gapTF.updateCache(),t.visible=!1}},{key:"initControlSoundPlayBar",value:function e(t){if(!c.default.isNull(this._soundObj)&&!c.default.isNull(this._controlPlayBar))if(c.default.notNull(this._parent.owner)&&""!==this._parent.owner)c.default.notNull(this._parent.soundChannel)&&(this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),this._parent.soundChannel.stop()),c.default.isNull(this._soundObj.marqueeMode)?this._parent.sendCommand("SoundPlayBar","SoundPlayBar_"+t):this._parent.sendCommand("MarqueeSoundPlayBar","MarqueeSoundPlayBar_"+t);else{if(this._parent.createjs.Ticker.addEventListener("tick",this.watchPlaySoundTickBind),this._soundObj.autoPlay){var i=this._controlPlayBar.nominalBounds,n=this._parent.exportRoot.nominalBounds;"mini-close"===t||"mini-wait"===t?this._controlPlayBar.setTransform(this._soundObj.locX-i.width*this._controlPlayBar.scale/2,this._soundObj.locY-i.height*this._controlPlayBar.scale):this._controlPlayBar.setTransform((n.x+n.width)/2-i.width*this._controlPlayBar.scale/2,n.y+n.height-i.height*this._controlPlayBar.scale),this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!1:this._parent.soundChannel.paused=!1,this._controlPlayBar.controlPlay.visible=!1,this._controlPlayBar.controlPause.visible=!0}else this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1;this._controlPlayBar.visible=!0}}},{key:"triggerMousedown",value:function e(t){var i=t.currentTarget,n;switch(this._parent.getInstanceMirror(i).command){case"controlClose":this._parent.stop(null,!0);break;case"controlPlay":this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!1:this._parent.soundChannel.paused=!1,this._controlPlayBar.controlPlay.visible=!1,this._controlPlayBar.controlPause.visible=!0;break;case"controlPause":this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1;break;case"controlStop":this.stopSoundPlayBar()}this.refreshScroll(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"watchPlaySoundTick",value:function e(t){if(c.default.notNull(this._soundObj)&&this._parent.soundChannel){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(i*=1e3,n*=1e3),this.showBarTime(i,n),this.refreshScroll()}}},{key:"mousedownScroll",value:function e(t){this._parent.setPressEventIsOn(!0),c.default.notNull(this._soundObj)&&this._parent.soundChannel&&(this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressupScroll",value:function e(t){this._parent.setPressEventIsOn(!1),c.default.notNull(this._soundObj)&&this._parent.soundChannel&&(c.default.notNull(this._parent.soundChannel.debugReset)&&this._parent.soundChannel.debugReset(),this._controlPlayBar.controlPause.visible&&(this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!1:this._parent.soundChannel.paused=!1)),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressmoveScroll",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.lineBase.nominalBounds.width,a=i.parent.globalToLocal(t.stageX,t.stageY);a.x<0&&(a.x=0),a.x>n&&(a.x=n),i.x=a.x;var s=a.x/n;this._parent.soundChannel.position=this._parent.soundChannel.duration*s;var o=this._parent.soundChannel.position,r=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(o*=1e3,r*=1e3),this.showBarTime(r*s,r),this.setBarLineSize(i.parent.lineBase,i.x,i.parent.lineBase.nominalBounds.height,!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"setBarLineSize",value:function e(t,i,n,a){if(void 0!==i&&void 0!==n){var s=t.nominalBounds;a?t.setTransform(t.x-s.width/2,t.y-s.height/2,i/t.nominalBounds.width,n/t.nominalBounds.height):t.setTransform(t.x,t.y,i/t.nominalBounds.width,n/t.nominalBounds.height)}}},{key:"showBarTime",value:function e(t,i){var n=this._controlPlayBar.timeTF,a=this._controlPlayBar.durationTF,s=Math.round(i/1e3),o=Math.floor(s/3600),r=Math.floor((s-3600*o)/60),u=Math.floor(s-(3600*o+60*r));a.text=o<=0?c.default.prefixNumberStr(r,2)+"："+c.default.prefixNumberStr(u,2):c.default.prefixNumberStr(o,2)+"："+c.default.prefixNumberStr(r,2)+"："+c.default.prefixNumberStr(u,2),a.updateCache();var l=Math.round(t/1e3),d=Math.floor(l/3600),h=Math.floor((l-3600*d)/60),p=Math.floor(l-(3600*d+60*h));n.text=d<=0?c.default.prefixNumberStr(h,2)+"："+c.default.prefixNumberStr(p,2):c.default.prefixNumberStr(d,2)+"："+c.default.prefixNumberStr(h,2)+"："+c.default.prefixNumberStr(p,2),n.updateCache()}},{key:"refreshScroll",value:function e(){if(c.default.notNull(this._soundObj)&&this._parent.soundChannel){var t=this._controlPlayBar.timeBar.pullBall,i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration,a=this._parent.soundChannel.position,s=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(a*=1e3,s*=1e3);var o=this._controlPlayBar.timeBar.lineBase.nominalBounds.width;t.x=o*(a/s),this.setBarLineSize(t.parent.lineBase,t.x,t.parent.lineBase.nominalBounds.height,!1)}}},{key:"pressmoveBarBase",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget.parent;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+this._baseMoveFixedX,i.y=n.y+this._baseMoveFixedY;var a=i.nominalBounds.width*i.scale,s=i.nominalBounds.height*i.scale,o=0-i.nominalBounds.x*i.scale,r=this._parent.exportRoot.nominalBounds.width+this._parent.exportRoot.nominalBounds.x-a,u=0-i.nominalBounds.y*i.scale,l=this._parent.exportRoot.nominalBounds.height+this._parent.exportRoot.nominalBounds.y-s;i.x<o&&(i.x=o),i.x>r&&(i.x=r),i.y<u&&(i.y=u),i.y>l&&(i.y=l);var d=Math.abs(i.x-this._baseMoveStartX),h=Math.abs(i.y-this._baseMoveStartY),p=Math.sqrt(Math.pow(d,2)+Math.pow(h,2));t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressupBarBase",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget.parent;t.stopPropagation(),t.stopImmediatePropagation()}},{key:"mousedownBarBase",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget.parent;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);this._baseMoveFixedX=i.x-n.x,this._baseMoveFixedY=i.y-n.y,this._baseMoveStartX=i.x+this._baseMoveFixedX,this._baseMoveStartY=i.y+this._baseMoveFixedY,t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._soundPlayBar,this._miniSoundPlayBar,this._controlPlayBar,this._soundObj}t.SoundPlayerBar=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPlayerBar=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,c=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["VideoPlayBar","MiniVideoPlayBar"],l=(n(d,[{key:"init",value:function e(){if(!this.isInited){var t;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup()}return this}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init(),c.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),this.closeVideoPlayBar();for(var t=this._pickList.length,i=void 0,n=void 0,a=0;a<t;a++)i=this._pickList[a],n=this._parent.getInstanceMirror(i),i.timeTF.text="",i.durationTF.text="",i.timeTF.updateCache(),i.durationTF.updateCache(),i.visible=!1}},{key:"openVideoPlayBar",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:{};this.isInited||this.init(),this.reset(),this._videoPlayBar&&(this._videoPlayBar.visible=!1),this._miniVideoPlayBar&&(this._miniVideoPlayBar.visible=!1),this._controlPlayBar="mini-close"===t||"mini-wait"===t?this._miniVideoPlayBar:this._videoPlayBar,this._videoObj=n,this.initControlVideoPlayBar(t)}},{key:"stopVideoPlayBar",value:function e(){this.isInited||this.init(),c.default.notNull(this._controlPlayBar)&&(this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0,this._parent.videoChannel.position=0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1)}},{key:"closeVideoPlayBar",value:function e(){this.isInited||this.init(),c.default.notNull(this._controlPlayBar)&&(c.default.notNull(this._parent.videoChannel)&&(this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0),this._controlPlayBar.visible=!1,this._parent.createjs.Ticker.removeEventListener("tick",this.watchPlayVideoTickBind),this._videoObj=null,this._controlPlayBar=null)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);-1!==u.indexOf(i.command)&&this._pickList.push(t)}},{key:"setup",value:function e(){this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.pressmoveScrollBind=this.pressmoveScrollBind||this.pressmoveScroll.bind(this),this.mousedownScrollBind=this.mousedownScrollBind||this.mousedownScroll.bind(this),this.pressupScrollBind=this.pressupScrollBind||this.pressupScroll.bind(this),this.pressmoveBarBaseBind=this.pressmoveBarBaseBind||this.pressmoveBarBase.bind(this),this.mousedownBarBaseBind=this.mousedownBarBaseBind||this.mousedownBarBase.bind(this),this.pressupBarBaseBind=this.pressupBarBaseBind||this.pressupBarBase.bind(this),this.watchPlayVideoTickBind=this.watchPlayVideoTickBind||this.watchPlayVideoTick.bind(this);for(var t=this._pickList.length,i=void 0,n=0;n<t;n++)(i=this._pickList[n])._isModuleInited||(i._isModuleInited=!0,this.build(i));this._miniVideoPlayBar||(this._miniVideoPlayBar=this._videoPlayBar),this._videoPlayBar||(this._videoPlayBar=this._miniVideoPlayBar)}},{key:"build",value:function e(t){var i=this._parent.getInstanceMirror(t);"VideoPlayBar"===i.command&&(this._videoPlayBar=t),"MiniVideoPlayBar"===i.command&&(this._miniVideoPlayBar=t),t.controlClose&&(t.controlClose.cursor="pointer",t.controlClose.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlStop&&(t.controlStop.cursor="pointer",t.controlStop.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlPlay&&(t.controlPlay.cursor="pointer",t.controlPlay.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlPause&&(t.controlPause.cursor="pointer",t.controlPause.visible=!1,t.controlPause.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.timeBar&&t.timeBar.pullBall&&(t.timeBar.pullBall.cursor="pointer",t.timeBar.pullBall.addEventListener("pressmove",this.pressmoveScrollBind,c.default.supportPassive()),t.timeBar.pullBall.addEventListener("mousedown",this.mousedownScrollBind,c.default.supportPassive()),t.timeBar.pullBall.addEventListener("pressup",this.pressupScrollBind,c.default.supportPassive())),t.baseMC&&(t.baseMC.addEventListener("pressmove",this.pressmoveBarBaseBind,c.default.supportPassive()),t.baseMC.addEventListener("mousedown",this.mousedownBarBaseBind,c.default.supportPassive()),t.baseMC.addEventListener("pressup",this.pressupBarBaseBind,c.default.supportPassive())),t.timeTF.mouseEnabled=!1,t.durationTF.mouseEnabled=!1,t.gapTF.mouseEnabled=!1,t.timeTF.text="  00:00  ",t.durationTF.text="  00:00  ",t.timeTF.cache(t.timeTF.getBounds().x,t.timeTF.getBounds().y,t.timeTF.getBounds().width,t.timeTF.getBounds().height,1),t.timeTF.updateCache(),t.durationTF.cache(t.durationTF.getBounds().x,t.durationTF.getBounds().y,t.durationTF.getBounds().width,t.durationTF.getBounds().height,1),t.durationTF.updateCache(),t.gapTF.cache(t.gapTF.getBounds().x,t.gapTF.getBounds().y,t.gapTF.getBounds().width,t.gapTF.getBounds().height,1),t.gapTF.updateCache(),t.visible=!1}},{key:"initControlVideoPlayBar",value:function e(t){if(!c.default.isNull(this._videoObj)&&!c.default.isNull(this._controlPlayBar))if(c.default.notNull(this._parent.owner)&&""!==this._parent.owner)c.default.notNull(this._parent.videoChannel)&&(this._parent.videoChannel.removeEventListener("complete",this._parent.videoObj.completeFunc),this._parent.videoChannel.stop()),this._parent.sendCommand("VideoPlayBar","VideoPlayBar_"+t);else{if(this._parent.createjs.Ticker.addEventListener("tick",this.watchPlayVideoTickBind),this._videoObj.autoPlay){var i=this._controlPlayBar.nominalBounds,n=this._parent.exportRoot.nominalBounds;"mini-close"===t||"mini-wait"===t?this._controlPlayBar.setTransform(this._videoObj.locX-i.width*this._controlPlayBar.scale/2,this._videoObj.locY-i.height*this._controlPlayBar.scale):this._controlPlayBar.setTransform((n.x+n.width)/2-i.width*this._controlPlayBar.scale/2,n.y+n.height-i.height*this._controlPlayBar.scale),this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!1:this._parent.videoChannel.paused=!1,this._controlPlayBar.controlPlay.visible=!1,this._controlPlayBar.controlPause.visible=!0}else this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1;this._controlPlayBar.visible=!0}}},{key:"triggerMousedown",value:function e(t){var i=t.currentTarget,n;switch(this._parent.getInstanceMirror(i).command){case"controlClose":this._parent.stop(null,!0);break;case"controlPlay":this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!1:this._parent.videoChannel.paused=!1,this._controlPlayBar.controlPlay.visible=!1,this._controlPlayBar.controlPause.visible=!0;break;case"controlPause":this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1;break;case"controlStop":this.stopVideoPlayBar()}this.refreshScroll(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"watchPlayVideoTick",value:function e(t){if(c.default.notNull(this._videoObj)&&this._parent.videoChannel){var i=this._parent.videoChannel.position,n=this._parent.videoChannel.duration;this._parent.videoChannel.sec&&(i*=1e3,n*=1e3),this.showBarTime(i,n),this.refreshScroll()}}},{key:"mousedownScroll",value:function e(t){this._parent.setPressEventIsOn(!0),c.default.notNull(this._videoObj)&&this._parent.videoChannel&&(this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressupScroll",value:function e(t){this._parent.setPressEventIsOn(!1),c.default.notNull(this._videoObj)&&this._parent.videoChannel&&this._controlPlayBar.controlPause.visible&&(this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!1:this._parent.videoChannel.paused=!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressmoveScroll",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.lineBase.nominalBounds.width,a=i.parent.globalToLocal(t.stageX,t.stageY);a.x<0&&(a.x=0),a.x>n&&(a.x=n),i.x=a.x;var s=a.x/n;this._parent.videoChannel.position=this._parent.videoChannel.duration*s;var o=this._parent.videoChannel.position,r=this._parent.videoChannel.duration;this._parent.videoChannel.sec&&(o*=1e3,r*=1e3),this.showBarTime(r*s,r),this.setBarLineSize(i.parent.lineBase,i.x,i.parent.lineBase.nominalBounds.height,!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"setBarLineSize",value:function e(t,i,n,a){if(void 0!==i&&void 0!==n){var s=t.nominalBounds;a?t.setTransform(t.x-s.width/2,t.y-s.height/2,i/t.nominalBounds.width,n/t.nominalBounds.height):t.setTransform(t.x,t.y,i/t.nominalBounds.width,n/t.nominalBounds.height)}}},{key:"showBarTime",value:function e(t,i){var n=this._controlPlayBar.timeTF,a=this._controlPlayBar.durationTF,s=Math.round(i/1e3),o=Math.floor(s/3600),r=Math.floor((s-3600*o)/60),u=Math.floor(s-(3600*o+60*r));a.text=o<=0?c.default.prefixNumberStr(r,2)+"："+c.default.prefixNumberStr(u,2):c.default.prefixNumberStr(o,2)+"："+c.default.prefixNumberStr(r,2)+"："+c.default.prefixNumberStr(u,2),a.updateCache();var l=Math.round(t/1e3),d=Math.floor(l/3600),h=Math.floor((l-3600*d)/60),p=Math.floor(l-(3600*d+60*h));n.text=d<=0?c.default.prefixNumberStr(h,2)+"："+c.default.prefixNumberStr(p,2):c.default.prefixNumberStr(d,2)+"："+c.default.prefixNumberStr(h,2)+"："+c.default.prefixNumberStr(p,2),n.updateCache()}},{key:"refreshScroll",value:function e(){if(c.default.notNull(this._videoObj)&&this._parent.videoChannel){var t=this._controlPlayBar.timeBar.pullBall,i=this._parent.videoChannel.position,n=this._parent.videoChannel.duration,a=this._parent.videoChannel.position,s=this._parent.videoChannel.duration;this._parent.videoChannel.sec&&(a*=1e3,s*=1e3);var o=this._controlPlayBar.timeBar.lineBase.nominalBounds.width;t.x=o*(a/s),this.setBarLineSize(t.parent.lineBase,t.x,t.parent.lineBase.nominalBounds.height,!1)}}},{key:"pressmoveBarBase",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget.parent;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+this._baseMoveFixedX,i.y=n.y+this._baseMoveFixedY;var a=i.nominalBounds.width*i.scale,s=i.nominalBounds.height*i.scale,o=0-i.nominalBounds.x*i.scale,r=this._parent.exportRoot.nominalBounds.width+this._parent.exportRoot.nominalBounds.x-a,u=0-i.nominalBounds.y*i.scale,l=this._parent.exportRoot.nominalBounds.height+this._parent.exportRoot.nominalBounds.y-s;i.x<o&&(i.x=o),i.x>r&&(i.x=r),i.y<u&&(i.y=u),i.y>l&&(i.y=l);var d=Math.abs(i.x-this._baseMoveStartX),h=Math.abs(i.y-this._baseMoveStartY),p=Math.sqrt(Math.pow(d,2)+Math.pow(h,2));t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressupBarBase",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget.parent;t.stopPropagation(),t.stopImmediatePropagation()}},{key:"mousedownBarBase",value:function e(t){var i=t.currentTarget.parent;this._parent.setPressEventIsOn(!0),i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);this._baseMoveFixedX=i.x-n.x,this._baseMoveFixedY=i.y-n.y,this._baseMoveStartX=i.x+this._baseMoveFixedX,this._baseMoveStartY=i.y+this._baseMoveFixedY,t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._videoPlayBar,this._miniVideoPlayBar,this._controlPlayBar,this._videoObj}t.VideoPlayerBar=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleWordStroke=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,M=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["WordStrokeBar"],l={WordStrokeBar:"none"},d=["右斜豎","左斜豎","臥鉤","長頓點","挑","挑左弧","捺","斜鉤","頓點","撇","撇挑","撇頓點","撇橫","撇橫折鉤","撇橫撇","豎","豎下弧","豎曲鉤","豎折","豎挑","豎鉤","豎撇","豎橫折","豎橫折鉤","豎彎折","橫","橫曲鉤","橫折","橫折鉤","橫折橫","橫折橫豎","橫斜鉤","橫鉤","橫撇","橫撇橫折鉤","橫豎挑","橫彎鉤","點","彎鉤"],h=["str01","str02","str03","str04","str05","str06","str07","str08","str09","str10","str11","str12","str13","str14","str15","str16","str17","str18","str19","str20","str21","str22","str23","str24","str25","str26","str27","str28","str29","str30","str31","str32","str33","str34","str35","str36","str37","str38","str39"],p=["bsh01","bsh02","bsh03","bsh04","bsh05","bsh06","bsh07","bsh08","bsh09","bsh10","bsh11","bsh12","bsh13","bsh14","bsh15","bsh16","bsh17","bsh18","bsh19","bsh20","bsh21","bsh22","bsh23","bsh24","bsh25","bsh26","bsh27","bsh28","bsh29","bsh30","bsh31","bsh32","bsh33","bsh34","bsh35"],c={str01:[1042,2167],str02:[3334,4459],str03:[5500,6500],str04:[7542,8667],str05:[9709,10375],str06:[11459,12834],str07:[13918,14500],str08:[15500,16542],str09:[17500,18375],str10:[19542,20250],str11:[21209,22209],str12:[23292,24542],str13:[25584,26709],str14:[27667,29167],str15:[30167,31500],str16:[32584,33250],str17:[34250,35500],str18:[36542,37834],str19:[38876,39876],str20:[40918,41959],str21:[43042,44e3],str22:[45042,46167],str23:[47209,48417],str24:[49417,50959],str25:[52e3,53334],str26:[54334,54918],str27:[55959,57167],str28:[58250,59167],str29:[60125,61334],str30:[62375,63542],str31:[64584,65709],str32:[66709,67959],str33:[69042,69918],str34:[70959,71918],str35:[72834,74584],str36:[75709,76834],str37:[77792,78792],str38:[79959,80375],str39:[81417,82459],bsh01:[83500,83959],bsh02:[85042,85626],bsh03:[86667,87375],bsh04:[88417,89083],bsh05:[90125,90792],bsh06:[91792,92375],bsh07:[93459,94292],bsh08:[95292,95876],bsh09:[96959,97751],bsh10:[98792,99542],bsh11:[100584,101500],bsh12:[102542,103334],bsh13:[104375,105334],bsh14:[106375,107209],bsh15:[108250,109125],bsh16:[110125,111e3],bsh17:[112042,112959],bsh18:[114042,114959],bsh19:[116e3,116834],bsh20:[117834,118667],bsh21:[119751,120626],bsh22:[121709,122542],bsh23:[123584,124500],bsh24:[125584,126459],bsh25:[127500,128417],bsh26:[129459,130292],bsh27:[131334,132334],bsh28:[133375,134334],bsh29:[135375,136250],bsh30:[137292,138209],bsh31:[139292,140250],bsh32:[141250,142250],bsh33:[143292,144375],bsh34:[145417,146500],bsh35:[147542,148709],buso:[149075,151035]},_=[300,300,300,300,300],y=[.6,.8,1,1.1,1.3],S=[1200,800,500,300,140],g=!1,f=(n(v,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModulesByModule(),this.setupByModule(t))}},{key:"stop",value:function e(t){var i=0<arguments.length&&void 0!==t&&t;if(this.isInited||this.init(),M.default.notNull(this._mixSoundChannel)&&(this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundWatchBind),this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundBusoWatchBind),this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!0,clearTimeout(this._mixSoundInitSeq),M.default.notNull(this._mixSoundInitSeq)&&M.default.isNull(this._mixSoundInit)&&(this._mixSoundInit=!0,this._mixSoundInitSeq=void 0,this._mixSoundChannel.position=0,this._mixSoundChannel.paused=!0,this._mixSoundChannel.volume=1),this._mixSoundChannelBound=null),M.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),M.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc),clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,!i)for(var n=this._wordStrokeBarGroup.length,a=void 0,s=void 0,o=0;o<n;o++)a=this._wordStrokeBarGroup[o],s=this._parent.getInstanceMirror(a),a.configProps.marqueePlayIndex=-1,a.configProps.wordMarquee.gotoAndStop(0),a.configProps.wordMarquee.buso.gotoAndStop(0),a.configProps.wordMarquee.buso.visible=!1,a.toPlay.gotoAndStop(0),a.configProps.playStatus=!1,this.updatePageParam(a)}},{key:"reset",value:function e(){this.isInited||this.init(),M.default.notNull(this._mixSoundChannel)&&(this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundWatchBind),this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundBusoWatchBind),this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!0,clearTimeout(this._mixSoundInitSeq),M.default.notNull(this._mixSoundInitSeq)&&M.default.isNull(this._mixSoundInit)&&(this._mixSoundInit=!0,this._mixSoundInitSeq=void 0,this._mixSoundChannel.position=0,this._mixSoundChannel.paused=!0,this._mixSoundChannel.volume=1),this._mixSoundChannelBound=null),M.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),M.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc),clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0;for(var t=this._wordStrokeBarGroup.length,i=void 0,n=void 0,a=void 0,s=0;s<t;s++){((i=this._wordStrokeBarGroup[s]).parent.wordStrokeBase=i).configProps=i.configProps||{},i.configProps.wordIndex=1,i.configProps.marqueePlayIndex=-1,i.configProps.speed=3,i.configProps.playStatus=!1,i.configProps.mode=1,i.configProps.isContinue=!1,6<=i.configProps.speed&&(i.configProps.speed=1),i.speed.num_txt.text=i.configProps.speed,i.speed.num_txt.updateCache(),i.bishum.gotoAndStop(1),i.bihuw.gotoAndStop(0),i.allSound.gotoAndStop(0),i.toPlay.gotoAndStop(0),i.continuePlay.gotoAndStop(0),a=this.getCustomTag(i);var o=void 0;o=this._wordStrokeBarIndexGroupMirror[a].length;for(var r=0;r<o;r++){var u=this._wordStrokeBarIndexGroupMirror[a][r];u.cursor="pointer",u.addEventListener(this._mouseTriggerBehavior,this.triggerWordMousedownBind),M.default.notNull(i.continuePlay.EffectBase)&&M.default.applyMultiply(u.EffectBase)}o=this._wordStrokeBarMarqueeGroupMirror[a].length;for(var l=0;l<o;l++){var d=this._wordStrokeBarMarqueeGroupMirror[a][l];d.visible=!1,d.gotoAndStop(0),d.buso.visible=!1,d.buso.gotoAndStop(0),d.shumArrayS=[],d.arrayS=[];for(var h=d.shumArray.length,p=0;p<h;p++)d.shumArrayS[p]=this.checkShumSound(d.shumArray[p]),0===d.array.length?d.arrayS[p]=8*p:d.arrayS[p]=d.array[p]-1;var c=this._parent.getInstanceMirror(d);Number(c.args[0])===i.configProps.wordIndex&&(i.bihuwNum.num_txt.text=d.bihuw,i.outSidebihuwNum.num_txt.text=d.outSide,i.bihuwNum.num_txt.updateCache(),i.outSidebihuwNum.num_txt.updateCache(),(i.configProps.wordMarquee=d).visible=!0)}o=this._wordStrokeBarExtendGroupMirror[a].length;for(var _=0;_<o;_++){var g=this._wordStrokeBarExtendGroupMirror[a][_];g.visible=!1;var f=this._parent.getInstanceMirror(g);Number(f.args[0])===i.configProps.wordIndex&&(g.visible=!0)}}if(this.useJSON){0===this._parent.pageParam.length&&(this._parent.pageParam[0]=1),1===this._parent.pageParam.length&&(this._parent.pageParam[1]=1,this._parent.pageParam[2]=3,this._parent.pageParam[3]=0,this._parent.pageParam[4]=0),this._parent.pageParam[0]=Number(this._parent.pageParam[0]),this._parent.pageParam[1]=Number(this._parent.pageParam[1]),this._parent.pageParam[2]=Number(this._parent.pageParam[2]),this._parent.pageParam[3]=Number(this._parent.pageParam[3]),this._parent.pageParam[4]=Number(this._parent.pageParam[4]);for(var v=0;v<t;v++){switch(((i=this._wordStrokeBarGroup[v]).parent.wordStrokeBase=i).configProps=i.configProps||{},i.configProps.wordIndex=this._parent.pageParam[0],i.configProps.marqueePlayIndex=-1,i.configProps.speed=this._parent.pageParam[2],i.configProps.playStatus=0!==this._parent.pageParam[3],i.configProps.mode=this._parent.pageParam[1],i.configProps.isContinue=0!==this._parent.pageParam[4],6<=i.configProps.speed&&(i.configProps.speed=1),i.speed.num_txt.text=i.configProps.speed,i.speed.num_txt.updateCache(),i.bishum.gotoAndStop(0),i.bihuw.gotoAndStop(0),i.allSound.gotoAndStop(0),i.toPlay.gotoAndStop(0),i.continuePlay.gotoAndStop(0),this.refreshShowWord(i),i.configProps.mode){case 1:i.bishum.gotoAndStop(1);break;case 2:i.bihuw.gotoAndStop(1);break;case 3:i.allSound.gotoAndStop(1)}if(i.configProps.playStatus)i.toPlay.gotoAndStop(1),M.default.notNull(this._parent.soundChannel)?this._parent.soundChannel.paused=!1:(i.configProps.wordMarquee.gotoAndStop(0),i.configProps.marqueePlayIndex=0,this.playWordMarquee(i));else{i.toPlay.gotoAndStop(0),a=this.getCustomTag(i);for(var m=this._wordStrokeBarIndexGroupMirror[a].length,b=0;b<m;b++){var y=this._wordStrokeBarIndexGroupMirror[a][b],S=this._parent.getInstanceMirror(y);!0!==this._parent.pageParam[5]&&Number(S.args[0])===i.configProps.wordIndex?(this._parent.pageParam[5]=!0,this.playWordSound(i,y,!1,!0)):!0===this._parent.pageParam[5]&&Number(S.args[0])===i.configProps.wordIndex&&this.playWordSound(i,y,!1,!1)}}i.configProps.isContinue?i.continuePlay.gotoAndStop(1):i.continuePlay.gotoAndStop(0)}}else for(var P=0;P<t;P++)i=this._wordStrokeBarGroup[P],this.updatePageParam(i)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"initModulesByModule",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTargetByModule(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTargetByModule(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"WordStrokeBar":this._wordStrokeBarGroup.push(t),n=this.getCustomTag(t),this._wordStrokeBarIndexGroupMirror[n]=this.pickRelation(t.parent,"wordIndex"),this._wordStrokeBarMarqueeGroupMirror[n]=this.pickRelation(t.parent,"wordMarquee"),this._wordStrokeBarExtendGroupMirror[n]=this.pickRelation(t.parent,"extendProps"),this._wordStrokeBarIndexGroupMirror[n]=this._wordStrokeBarIndexGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1}),this._wordStrokeBarMarqueeGroupMirror[n]=this._wordStrokeBarMarqueeGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1}),this._wordStrokeBarExtendGroupMirror[n]=this._wordStrokeBarExtendGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1})}}}},{key:"pickTargetByModule",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command))switch(i.command){case"WordStrokeBar":n=this.getCustomTag(t),this._wordStrokeBarMarqueeGroupMirror[n]=this.pickRelation(t.parent,"wordMarquee"),this._wordStrokeBarExtendGroupMirror[n]=this.pickRelation(t.parent,"extendProps"),this._wordStrokeBarMarqueeGroupMirror[n]=this._wordStrokeBarMarqueeGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1}),this._wordStrokeBarExtendGroupMirror[n]=this._wordStrokeBarExtendGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1})}}},{key:"getCustomTag",value:function e(t){return M.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&(u.wordIndexSeq=Number(r.args[0])-1,n.push(u))}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerFuncMousedownBind=this.triggerFuncMousedownBind||this.triggerFuncMousedown.bind(this),this.triggerWordMousedownBind=this.triggerWordMousedownBind||this.triggerWordMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerSingleSoundWatchBind=this.triggerSingleSoundWatchBind||this.triggerSingleSoundWatch.bind(this),this.triggerSingleSoundCompleteBind=this.triggerSingleSoundCompleteBind||this.triggerSingleSoundComplete.bind(this),this.triggerBusoSoundWatchBind=this.triggerBusoSoundWatchBind||this.triggerBusoSoundWatch.bind(this),this.triggerBusoSoundCompleteBind=this.triggerBusoSoundCompleteBind||this.triggerBusoSoundComplete.bind(this),this.triggerOneSoundWatchBind=this.triggerOneSoundWatchBind||this.triggerOneSoundWatch.bind(this),this.triggerOneSoundCompleteBind=this.triggerOneSoundCompleteBind||this.triggerOneSoundComplete.bind(this),this.delaySpaceBind=this.delaySpaceBind||this.delaySpace.bind(this),this.checkMixSoundPlayStatusBind=this.checkMixSoundPlayStatusBind||this.checkMixSoundPlayStatus.bind(this),this.triggerMixSoundWatchBind=this.triggerMixSoundWatchBind||this.triggerMixSoundWatch.bind(this),this.triggerMixSoundBusoWatchBind=this.triggerMixSoundBusoWatchBind||this.triggerMixSoundBusoWatch.bind(this),this.triggerMixSingleSoundWatchBind=this.triggerMixSingleSoundWatchBind||this.triggerMixSingleSoundWatch.bind(this),this.delayBusoSpaceBind=this.delayBusoSpaceBind||this.delayBusoSpace.bind(this);for(var n=this._wordStrokeBarGroup.length,a=void 0,s=void 0,o=0;o<n;o++)if(!(a=this._wordStrokeBarGroup[o])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,(a.parent.wordStrokeBase=a).configProps=a.configProps||{},a.configProps.wordIndex=1,a.configProps.marqueePlayIndex=-1,a.configProps.speed=3,a.configProps.playStatus=!1,a.configProps.mode=1,a.configProps.isContinue=!1,6<=a.configProps.speed&&(a.configProps.speed=1),a.speed.num_txt.textBaseline=this._parent.textBaseline,a.speed.num_txt.text=a.configProps.speed,"alphabetic"===this._parent.textBaseline&&(a.speed.num_txt.y+=a.speed.num_txt.lineHeight*this._parent.textAlphabeticFixYScale/a.parent.parent.scaleY),a.speed.num_txt.cache(a.speed.num_txt.getBounds().x,a.speed.num_txt.getBounds().y,a.speed.num_txt.getBounds().width,a.speed.num_txt.getBounds().height,2),a.speed.num_txt.updateCache(),a.bishum.gotoAndStop(1),a.bihuw.gotoAndStop(0),a.allSound.gotoAndStop(0),a.toPlay.gotoAndStop(0),a.continuePlay.gotoAndStop(0),a.bishum.cursor="pointer",a.bihuw.cursor="pointer",a.allSound.cursor="pointer",a.speed.cursor="pointer",a.toPlay.cursor="pointer",a.prevPlay.cursor="pointer",a.nextPlay.cursor="pointer",a.continuePlay.cursor="pointer",a.bishum.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(a.bishum.EffectBase)&&M.default.applyMultiply(a.bishum.EffectBase),a.bihuw.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(a.bihuw.EffectBase)&&M.default.applyMultiply(a.bihuw.EffectBase),a.allSound.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(a.allSound.EffectBase)&&M.default.applyMultiply(a.allSound.EffectBase),a.speed.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(a.speed.EffectBase)&&M.default.applyMultiply(a.speed.EffectBase),a.toPlay.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(a.toPlay.EffectBase)&&M.default.applyMultiply(a.toPlay.EffectBase),a.prevPlay.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(a.prevPlay.EffectBase)&&M.default.applyMultiply(a.prevPlay.EffectBase),a.nextPlay.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(a.nextPlay.EffectBase)&&M.default.applyMultiply(a.nextPlay.EffectBase),a.continuePlay.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(a.continuePlay.EffectBase)&&M.default.applyMultiply(a.continuePlay.EffectBase),a.bihuwNum.num_txt.textBaseline=this._parent.textBaseline,"alphabetic"===this._parent.textBaseline&&(a.bihuwNum.num_txt.y+=a.bihuwNum.num_txt.lineHeight*this._parent.textAlphabeticFixYScale),a.outSidebihuwNum.num_txt.textBaseline=this._parent.textBaseline,"alphabetic"===this._parent.textBaseline&&(a.outSidebihuwNum.num_txt.y+=a.outSidebihuwNum.num_txt.lineHeight*this._parent.textAlphabeticFixYScale),a.bihuwNum.num_txt.text="99",a.outSidebihuwNum.num_txt.text="99",a.bihuwNum.num_txt.cache(a.bihuwNum.num_txt.getBounds().x,a.bihuwNum.num_txt.getBounds().y,a.bihuwNum.num_txt.getBounds().width,a.bihuwNum.num_txt.getBounds().height,2),a.outSidebihuwNum.num_txt.cache(a.outSidebihuwNum.num_txt.getBounds().x,a.outSidebihuwNum.num_txt.getBounds().y,a.outSidebihuwNum.num_txt.getBounds().width,a.outSidebihuwNum.num_txt.getBounds().height,2),a.bihuwNum.num_txt.updateCache(),a.outSidebihuwNum.num_txt.updateCache(),s=this.getCustomTag(a);var r=void 0;r=this._wordStrokeBarIndexGroupMirror[s].length;for(var u=0;u<r;u++){var l=this._wordStrokeBarIndexGroupMirror[s][u];l.cursor="pointer",l.addEventListener(this._mouseTriggerBehavior,this.triggerWordMousedownBind),M.default.notNull(a.continuePlay.EffectBase)&&M.default.applyMultiply(l.EffectBase)}r=this._wordStrokeBarMarqueeGroupMirror[s].length;for(var d=0;d<r;d++){var h=this._wordStrokeBarMarqueeGroupMirror[s][d];h._replacePath=i,h.visible=!1,h.gotoAndStop(0),h.buso.visible=!1,h.buso.gotoAndStop(0),h.shumArrayS=[],h.arrayS=[];for(var p=h.shumArray.length,c=0;c<p;c++)h.shumArrayS[c]=this.checkShumSound(h.shumArray[c]),0===h.array.length?h.arrayS[c]=8*c:h.arrayS[c]=h.array[c]-1;var _=this._parent.getInstanceMirror(h);Number(_.args[0])===a.configProps.wordIndex&&(a.bihuwNum.num_txt.text=h.bihuw,a.outSidebihuwNum.num_txt.text=h.outSide,a.bihuwNum.num_txt.updateCache(),a.outSidebihuwNum.num_txt.updateCache(),(a.configProps.wordMarquee=h).visible=!0)}r=this._wordStrokeBarExtendGroupMirror[s].length;for(var g=0;g<r;g++){var f=this._wordStrokeBarExtendGroupMirror[s][g];f.visible=!1;var v=this._parent.getInstanceMirror(f);Number(v.args[0])===a.configProps.wordIndex&&(f.visible=!0)}}this.createMixSoundChannel()}},{key:"setupByModule",value:function e(t){for(var i=0<arguments.length&&void 0!==t?t:"",n=this._wordStrokeBarGroup.length,a=void 0,s=void 0,o=0;o<n;o++){a=this._wordStrokeBarGroup[o],s=this.getCustomTag(a);var r=void 0;r=this._wordStrokeBarMarqueeGroupMirror[s].length;for(var u=0;u<r;u++){var l=this._wordStrokeBarMarqueeGroupMirror[s][u];l.visible=!1,l.gotoAndStop(0),l.buso.visible=!1,l.buso.gotoAndStop(0),l.shumArrayS=[],l.arrayS=[],void 0===l._replacePath&&(l._replacePath=i);for(var d=l.shumArray.length,h=0;h<d;h++)l.shumArrayS[h]=this.checkShumSound(l.shumArray[h]),0===l.array.length?l.arrayS[h]=8*h:l.arrayS[h]=l.array[h]-1;var p=this._parent.getInstanceMirror(l);Number(p.args[0])===a.configProps.wordIndex&&(a.bihuwNum.num_txt.text=l.bihuw,a.outSidebihuwNum.num_txt.text=l.outSide,a.bihuwNum.num_txt.updateCache(),a.outSidebihuwNum.num_txt.updateCache(),(a.configProps.wordMarquee=l).visible=!0)}r=this._wordStrokeBarExtendGroupMirror[s].length;for(var c=0;c<r;c++){var _=this._wordStrokeBarExtendGroupMirror[s][c];_.visible=!1;var g=this._parent.getInstanceMirror(_);Number(g.args[0])===a.configProps.wordIndex&&(_.visible=!0)}}}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"checkShumSound",value:function e(t){var i=d.indexOf(t);return-1!==i?h[i]:null}},{key:"updatePageParam",value:function e(t){this.useJSON&&(this._parent.pageParam=this._parent.pageParam||[],this._parent.pageParam[0]=t.configProps.wordIndex,this._parent.pageParam[1]=t.configProps.mode,this._parent.pageParam[2]=t.configProps.speed,this._parent.pageParam[3]=t.configProps.playStatus?1:0,this._parent.pageParam[4]=t.configProps.isContinue?1:0)}},{key:"triggerFuncMousedown",value:function e(t){var i=t.currentTarget,n=i.parent;switch(i.name){case"bishum":if(0===i.currentFrame){if(n.configProps.mode=1,n.bishum.gotoAndStop(1),n.bihuw.gotoAndStop(0),n.allSound.gotoAndStop(0),M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.target===n){var a=this._parent.soundObj.isBishum,s=this._parent.soundObj.isBuso;if(this.stop(!0),this._parent.clearSoundChannel(),1===n.toPlay.currentFrame)a||s?a&&!s?this.playSingleBishum(n):!a&&s&&this.playWordBuso(n):this.playWordMarquee(n);else if(M.default.notNull(n.toPlay)){var o=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(o)}}else if(M.default.notNull(n.toPlay)){var r=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(r)}}else if(0===n.toPlay.currentFrame&&M.default.notNull(n.toPlay)){var u=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(u)}break;case"bihuw":if(0===i.currentFrame){if(n.configProps.mode=2,n.bishum.gotoAndStop(0),n.bihuw.gotoAndStop(1),n.allSound.gotoAndStop(0),M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.target===n){var l=this._parent.soundObj.isBishum,d=this._parent.soundObj.isBuso;if(this.stop(!0),this._parent.clearSoundChannel(),1===n.toPlay.currentFrame)l||d?l&&!d?this.playSingleBishum(n):!l&&d&&this.playWordBuso(n):this.playWordMarquee(n);else if(M.default.notNull(n.toPlay)){var h=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(h)}}else if(M.default.notNull(n.toPlay)){var p=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(p)}}else if(0===n.toPlay.currentFrame&&M.default.notNull(n.toPlay)){var c=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(c)}break;case"allSound":if(0===i.currentFrame){if(n.configProps.mode=3,n.bishum.gotoAndStop(0),n.bihuw.gotoAndStop(0),n.allSound.gotoAndStop(1),M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.target===n){var _=this._parent.soundObj.isBishum,g=this._parent.soundObj.isBuso;if(this.stop(!0),this._parent.clearSoundChannel(),1===n.toPlay.currentFrame)_||g?_&&!g?this.playSingleBishum(n):!_&&g&&this.playWordBuso(n):this.playWordMarquee(n);else if(M.default.notNull(n.toPlay)){var f=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(f)}}else if(M.default.notNull(n.toPlay)){var v=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(v)}}else if(0===n.toPlay.currentFrame&&M.default.notNull(n.toPlay)){var m=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(m)}break;case"speed":n.configProps.speed++,6<=n.configProps.speed&&(n.configProps.speed=1),n.speed.num_txt.text=n.configProps.speed,n.speed.num_txt.updateCache(),M.default.notNull(this._parent.soundChannel)&&this._parent.soundObj.target===n&&(this._parent.soundChannel.playbackRate=y[n.configProps.speed-1]),M.default.notNull(this._mixSoundChannel)&&(this._mixSoundChannel.playbackRate=y[n.configProps.speed-1]);break;case"toPlay":if(M.default.trace("toPlay",n.configProps.marqueePlayIndex),0===i.currentFrame){if(i.gotoAndStop(1),!0===this._delayTimerS)return this._delayTimerS=void 0,void(this._delayTimer=setTimeout(this._delayTimerSBind,S[this._parent.soundObj.target.configProps.speed-1]));if((M.default.notNull(this._parent.soundObj)&&M.default.notNull(this._parent.soundChannel)&&this._parent.soundObj.target!==n||M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.isBishum)&&(this.stop(!0),this._parent.clearSoundChannel()),n.configProps.playStatus=!0,M.default.notNull(this._parent.soundChannel))this._parent.soundChannel.paused=!1;else if(M.default.notNull(this._mixSoundChannel)&&M.default.notNull(this._parent.soundObj))this._mixSoundChannel.paused=!1;else{if(-1===n.configProps.marqueePlayIndex||n.configProps.wordMarquee.buso.visible)n.configProps.wordMarquee.gotoAndStop(0),n.configProps.marqueePlayIndex=0;else if(n.configProps.marqueePlayIndex+1<=n.configProps.wordMarquee.arrayS.length-1);else if(n.configProps.marqueePlayIndex!==n.configProps.wordMarquee.arrayS.length-1)return n.configProps.wordMarquee.gotoAndStop(n.configProps.wordMarquee.totalFrames-1),void this.playWordBuso(n);this.playWordMarquee(n)}}else M.default.notNull(this._parent.soundChannel)?(i.gotoAndStop(0),n.configProps.playStatus=!1,this._parent.soundChannel.paused=!0,M.default.notNull(this._mixSoundChannel)&&(this._mixSoundChannel.paused=!0)):M.default.notNull(this._mixSoundChannel)&&M.default.notNull(this._parent.soundObj)?(i.gotoAndStop(0),n.configProps.playStatus=!1,this._mixSoundChannel.paused=!0):M.default.notNull(this._parent.soundObj)&&(i.gotoAndStop(0),n.configProps.playStatus=!1,this.triggerSoundIsPaused=!0),void 0!==this._delayTimer&&(clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=!0);break;case"prevPlay":if(M.default.trace("prevPlay",n.configProps.marqueePlayIndex,n.configProps.wordMarquee.arrayS.length),n.configProps.marqueePlayIndex>=n.configProps.wordMarquee.arrayS.length&&(n.configProps.marqueePlayIndex=n.configProps.wordMarquee.arrayS.length),-1<=n.configProps.marqueePlayIndex-1)if(n.configProps.marqueePlayIndex--,0<=n.configProps.marqueePlayIndex)n.configProps.wordMarquee.gotoAndStop(n.configProps.wordMarquee.arrayS[n.configProps.marqueePlayIndex]),this.stop(!0),this._parent.clearSoundChannel(),n.configProps.playStatus?this.playWordMarquee(n):this.playSingleBishum(n);else{if(n.configProps.playStatus&&M.default.notNull(n.toPlay)){var b=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(b)}this.stop(!0),this._parent.clearSoundChannel(),n.configProps.marqueePlayIndex=-1,n.configProps.wordMarquee.gotoAndStop(0)}else n.configProps.wordMarquee.gotoAndStop(0);break;case"nextPlay":M.default.trace("nextPlay",n.configProps.marqueePlayIndex),n.configProps.marqueePlayIndex+1<=n.configProps.wordMarquee.arrayS.length-1&&(n.configProps.marqueePlayIndex++,n.configProps.wordMarquee.gotoAndStop(n.configProps.wordMarquee.arrayS[n.configProps.marqueePlayIndex]),this.stop(!0),this._parent.clearSoundChannel(),n.configProps.playStatus?this.playWordMarquee(n):this.playSingleBishum(n));break;case"continuePlay":0===i.currentFrame?(this.stop(!0),this._parent.clearSoundChannel(),i.gotoAndStop(1),n.configProps.isContinue=!0,n.configProps.marqueePlayIndex=-1,this.playWordSound(n,n.parent["wordIndex_"+n.configProps.wordIndex],!0)):(i.gotoAndStop(0),n.configProps.isContinue=!1)}this.updatePageParam(n),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerWordMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n,a=i.parent.wordStrokeBase;this.playWordSound(a,i),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"refreshShowWord",value:function e(t){var i=this.getCustomTag(t),n=void 0;n=this._wordStrokeBarMarqueeGroupMirror[i].length;for(var a=0;a<n;a++){var s=this._wordStrokeBarMarqueeGroupMirror[i][a];s.gotoAndStop(0);var o=this._parent.getInstanceMirror(s);Number(o.args[0])!==t.configProps.wordIndex||s.visible||this._parent.sendPageFlipMessage(),s.visible=!1,s.buso.gotoAndStop(0),s.buso.visible=!1,Number(o.args[0])===t.configProps.wordIndex&&(s.visible=!0,t.bihuwNum.num_txt.text=s.bihuw,t.outSidebihuwNum.num_txt.text=s.outSide,t.bihuwNum.num_txt.updateCache(),t.outSidebihuwNum.num_txt.updateCache(),t.configProps.wordMarquee=s)}n=this._wordStrokeBarExtendGroupMirror[i].length;for(var r=0;r<n;r++){var u=this._wordStrokeBarExtendGroupMirror[i][r];u.visible=!1;var l=this._parent.getInstanceMirror(u);Number(l.args[0])===t.configProps.wordIndex&&(u.visible=!0)}}},{key:"playWordSound",value:function e(t,i,n,a){var s=2<arguments.length&&void 0!==n&&n,o=!(3<arguments.length&&void 0!==a)||a;this._parent.stop(["ModuleWordStroke"],!0);var r=this._parent.getInstanceMirror(i);if(t.configProps.wordIndex=Number(r.args[0]),t.configProps.marqueePlayIndex=-1,t.toPlay.gotoAndStop(0),t.configProps.playStatus=!1,this.refreshShowWord(t),this.updatePageParam(t),void 0===this._parent.exportRoot["wordMarquee_"+t.configProps.wordIndex])return t.bihuwNum.num_txt.text="",t.outSidebihuwNum.num_txt.text="",t.bihuwNum.num_txt.updateCache(),t.outSidebihuwNum.num_txt.updateCache(),this._parent.loadContentByModule(this._parent.moduleConfigData["wordMarquee_"+t.configProps.wordIndex],{wordStrokeBase:t,target:i,isContinue:s,isPlay:o,base:this,TYPE:"word-stroke-mix-canvas"}),void this._parent.sendPageFlipMessage();if(o){var u=this._parent.exportRoot["wordMarquee_"+t.configProps.wordIndex]._replacePath,l=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+u+"sounds/":u+"./sounds/";this._parent.soundObj={id:t.configProps.wordMarquee.word,path:l,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerOneSoundWatchBind,completeFunc:this.triggerOneSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:r.command,target:i,isContinue:s,wordStrokeBase:t},this._parent.iosMode?M.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}}},{key:"playSingleBishum",value:function e(t){this._parent.stop(["ModuleWordStroke"],!0);var i=this._parent.getInstanceMirror(t),n=void 0,a=null;switch(t.configProps.mode){case 1:n=p[t.configProps.marqueePlayIndex],a=null;break;case 2:n=t.configProps.wordMarquee.shumArrayS[t.configProps.marqueePlayIndex],a=null;break;case 3:n=p[t.configProps.marqueePlayIndex],a=t.configProps.wordMarquee.shumArrayS[t.configProps.marqueePlayIndex]}t.configProps.wordMarquee.buso.visible=!1;var s=t.configProps.wordMarquee.arrayS[t.configProps.marqueePlayIndex],o=t.configProps.wordMarquee.arrayS[t.configProps.marqueePlayIndex+1]||t.configProps.wordMarquee.totalFrames-1,r=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:n,path:r,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSingleSoundWatchBind,completeFunc:this.triggerSingleSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:i.command,target:t,id2:a,start:s,end:o,isBishum:!0},t.configProps.wordMarquee.gotoAndStop(s),M.default.notNull(this._mixSoundChannel)?(this._prevTime=-1,this._mixSoundChannelBound=c[n],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!1):M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"playWordMarquee",value:function e(t){this._parent.stop(["ModuleWordStroke"],!0);var i=this._parent.getInstanceMirror(t),n=void 0,a=null,s="space";switch(t.configProps.mode){case 1:n=p[t.configProps.marqueePlayIndex],a=null;break;case 2:n=t.configProps.wordMarquee.shumArrayS[t.configProps.marqueePlayIndex],a=null;break;case 3:n=p[t.configProps.marqueePlayIndex],a=t.configProps.wordMarquee.shumArrayS[t.configProps.marqueePlayIndex]}t.configProps.wordMarquee.buso.visible=!1;var o=t.configProps.wordMarquee.arrayS[t.configProps.marqueePlayIndex],r=t.configProps.wordMarquee.arrayS[t.configProps.marqueePlayIndex+1]||t.configProps.wordMarquee.totalFrames-1,u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";t.configProps.wordMarquee.gotoAndStop(o),this._parent.soundObj={id:n,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:i.command,target:t,id2:a,id3:s,start:o,end:r},M.default.notNull(this._mixSoundChannel)?(this._prevTime=-1,this._mixSoundChannelBound=c[n],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSoundWatchBind),this._mixSoundChannel.paused=!1):M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"playWordBuso",value:function e(t){this._parent.stop(["ModuleWordStroke"],!0);var i=this._parent.getInstanceMirror(t),n="buso",a=null,s="space";t.configProps.wordMarquee.buso.visible=!0,t.configProps.wordMarquee.buso.gotoAndStop(0);var o=0,r=t.configProps.wordMarquee.buso.totalFrames-1;t.configProps.marqueePlayIndex++;var u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:n,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerBusoSoundWatchBind,completeFunc:this.triggerBusoSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:i.command,target:t,id2:a,id3:s,start:0,end:r,isBuso:!0},M.default.notNull(this._mixSoundChannel)?(this._prevTime=-1,this._mixSoundChannelBound=c.buso,this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSoundBusoWatchBind),this._mixSoundChannel.paused=!1):M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:n.args[1],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i},M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(M.default.isNull(this._parent.soundObj)||M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)M.default.notNull(i)&&i.stop();else switch(n){case"fileload":M.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(!0),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundObj.target.configProps&&(this._parent.soundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this.triggerSoundIsPaused||(this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay),this.triggerSoundIsPaused=!1,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc)}}},{key:"createMixSoundChannel",value:function e(){if(M.default.isNull(this._mixSoundChannel)){var t=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";M.default.playWebAudioSound2(this._parent.createjs,t,"MIX",0,0,0,this.checkMixSoundPlayStatusBind)}}},{key:"checkMixSoundPlayStatus",value:function e(t,i,n){switch(n){case"fileerror":break;case"playSuccess":var a=this;this._mixSoundChannel=i,this._mixSoundChannel.position=0,this._mixSoundChannel.volume=1,this._mixSoundChannel.paused=!0,this._mixSoundInit=!0}}},{key:"triggerMixSoundWatch",value:function e(t){if(M.default.notNull(this._mixSoundChannel)&&M.default.notNull(this._mixSoundChannelBound)&&this._prevTime!==this._mixSoundChannel.position){var i=this._mixSoundChannel.position;if(this._prevTime=i,this._mixSoundChannel.sec&&(i*=1e3),i>=Number(this._mixSoundChannelBound[1]))return this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundWatchBind),this._mixSoundChannel.volume=0,void this.triggerMixSoundComplete();this._mixSoundChannel.volume=this._parent.soundObj.volume,i-=this._mixSoundChannelBound[0];var n=this._parent.soundObj,a,s=n.target.configProps.wordMarquee,o=n.start,r=n.end,u=this._parent.lib.properties.fps;i<0&&(i=0);var l=1e3/_[2]*1e3,d=Math.round(i/l*u);if(d<0&&(d=0),M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){var h=o+d;r<=h&&(h=r),s.gotoAndStop(h)}}}},{key:"triggerMixSoundComplete",value:function e(t){if(M.default.isNull(this._parent.soundObj.id2)&&M.default.isNull(this._parent.soundObj.id3)){this.stop(!0);var i=this._parent.soundObj,n=i.target,a=n.configProps.wordMarquee,s=i.end;a.gotoAndStop(s),n.configProps.marqueePlayIndex>=a.array.length-1?(this._parent.clearSoundChannel(),this.playWordBuso(n)):(this._parent.clearSoundChannel(),n.configProps.marqueePlayIndex++,this.playWordMarquee(n))}else if(M.default.notNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3))this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,this._prevTime=-1,this._mixSoundChannelBound=c[this._parent.soundObj.id],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSoundWatchBind),this._mixSoundChannel.paused=!1;else if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){this._parent.soundObj.id=this._parent.soundObj.id3,this._parent.soundObj.id3=null,clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,this._delayTimerSBind=this.delaySpaceBind,this._delayTimer=setTimeout(this.delaySpaceBind,S[this._parent.soundObj.target.configProps.speed-1]);var o=this._parent.soundObj,r,u=o.target.configProps.wordMarquee,l=o.end;u.gotoAndStop(l)}}},{key:"triggerMixSoundBusoWatch",value:function e(t){if(M.default.notNull(this._mixSoundChannel)&&this._prevTime!==this._mixSoundChannel.position){var i=this._mixSoundChannel.position;if(this._prevTime=i,this._mixSoundChannel.sec&&(i*=1e3),i>=Number(this._mixSoundChannelBound[1]))return this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundBusoWatchBind),this._mixSoundChannel.paused=!0,void this.triggerMixSoundBusoComplete();i-=this._mixSoundChannelBound[0];var n=this._parent.soundObj,a,s=n.target.configProps.wordMarquee,o=n.start,r=n.end;i<0&&(i=0);var u=this._parent.lib.properties.fps,l=1e3,d=Math.round(i/1e3*u);if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){var h=o+d;r<=h&&(h=r),s.buso.gotoAndStop(h)}}}},{key:"triggerMixSoundBusoComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)&&M.default.isNull(this._parent.soundObj.id3)){var i=this._parent.soundObj,n=i.target,a=n.configProps.wordMarquee,s=i.end;if(a.buso.gotoAndStop(s),n.toPlay.gotoAndStop(0),n.configProps.playStatus=!1,this._parent.clearSoundChannel(),n.configProps.isContinue){var o=this.getCustomTag(n);n.configProps.wordIndex+1<=this._wordStrokeBarIndexGroupMirror[o].length?(n.configProps.wordIndex++,this.refreshShowWord(n),n.configProps.marqueePlayIndex=-1,this.playWordSound(n,n.parent["wordIndex_"+n.configProps.wordIndex],!0)):(n.toPlay.gotoAndStop(0),n.continuePlay.gotoAndStop(0),n.configProps.playStatus=!1,n.configProps.isContinue=!1)}this.updatePageParam(n)}else if(M.default.notNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3))this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,this._prevTime=-1,this._mixSoundChannelBound=c[this._parent.soundObj.id],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSoundBusoWatchBind),this._mixSoundChannel.paused=!1;else if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){this._parent.soundObj.id=this._parent.soundObj.id3,this._parent.soundObj.id3=null,clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,this._delayTimerSBind=this.delayBusoSpaceBind,this._delayTimer=setTimeout(this.delayBusoSpaceBind,S[this._parent.soundObj.target.configProps.speed-1]);var r=this._parent.soundObj,u,l=r.target.configProps.wordMarquee,d=r.end;l.buso.gotoAndStop(d)}}},{key:"delayBusoSpace",value:function e(){clearTimeout(this._delayTimer),this._delayTimer=void 0;var t=this._parent.soundObj,i=t.target,n=i.configProps.wordMarquee,a=t.end;if(n.buso.gotoAndStop(t.start),i.toPlay.gotoAndStop(0),i.configProps.playStatus=!1,this._parent.clearSoundChannel(),i.configProps.isContinue){var s=this.getCustomTag(i);i.configProps.wordIndex+1<=this._wordStrokeBarIndexGroupMirror[s].length?(i.configProps.wordIndex++,this.refreshShowWord(i),i.configProps.marqueePlayIndex=-1,this.playWordSound(i,i.parent["wordIndex_"+i.configProps.wordIndex],!0)):(i.toPlay.gotoAndStop(0),i.continuePlay.gotoAndStop(0),i.configProps.playStatus=!1,i.configProps.isContinue=!1)}this.updatePageParam(i)}},{key:"triggerMixSingleSoundWatch",value:function e(t){if(M.default.notNull(this._mixSoundChannel)&&this._prevTime!==this._mixSoundChannel.position){var i=this._mixSoundChannel.position;if(this._prevTime=i,this._mixSoundChannel.sec&&(i*=1e3),i>=Number(this._mixSoundChannelBound[1]))return this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!0,void this.triggerMixSingleSoundComplete();i-=this._mixSoundChannelBound[0];var n=this._parent.soundObj,a,s=n.target.configProps.wordMarquee,o=n.start,r=n.end;i<0&&(i=0);var u=this._parent.lib.properties.fps,l=1e3/_[2]*1e3,d=Math.round(i/l*u);if(M.default.isNull(this._parent.soundObj.id2)){var h=o+d;r<=h&&(h=r),s.gotoAndStop(h)}}}},{key:"triggerMixSingleSoundComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)){var i=this._parent.soundObj,n,a=i.target.configProps.wordMarquee,s=i.end;a.gotoAndStop(s),this._parent.clearSoundChannel()}else this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,this._prevTime=-1,this._mixSoundChannelBound=c[this._parent.soundObj.id],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!1}},{key:"triggerOneSoundWatch",value:function e(t){}},{key:"triggerOneSoundComplete",value:function e(t){var i=!!this._parent.soundObj.isContinue&&this._parent.soundObj.isContinue,n=this._parent.soundObj.wordStrokeBase,a;this.stop(!0),this._parent.clearSoundChannel(),i&&(n.toPlay.gotoAndStop(1),M.default.notNull(this._parent.soundObj)&&M.default.notNull(this._parent.soundChannel)&&this._parent.soundObj.target!==n&&(this.stop(!0),this._parent.clearSoundChannel()),n.configProps.playStatus=!0,M.default.notNull(this._parent.soundChannel)?this._parent.soundChannel.paused=!1:(n.configProps.wordMarquee.gotoAndStop(0),n.configProps.marqueePlayIndex=0,this.playWordMarquee(n)))}},{key:"triggerSingleSoundWatch",value:function e(t){if(M.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.soundObj,s,o=a.target.configProps.wordMarquee,r=a.start,u=a.end,l=this._parent.lib.properties.fps;(i-=this._parent.wordStrokeOffsetMs)<0&&(i=0);var d=1e3/_[2]*1e3,h=Math.round(i/d*l);if(M.default.isNull(this._parent.soundObj.id2)){var p=r+h;u<=p&&(p=u),o.gotoAndStop(p)}}}},{key:"triggerSingleSoundComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)){var i=this._parent.soundObj,n,a=i.target.configProps.wordMarquee,s=i.end;a.gotoAndStop(s),this._parent.clearSoundChannel()}else this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerSoundWatch",value:function e(t){if(M.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.soundObj,s,o=a.target.configProps.wordMarquee,r=a.start,u=a.end,l=this._parent.lib.properties.fps;(i-=this._parent.wordStrokeOffsetMs)<0&&(i=0);var d=1e3/_[2]*1e3,h=Math.round(i/d*l);if(h<0&&(h=0),M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){var p=r+h;u<=p&&(p=u),o.gotoAndStop(p)}}}},{key:"triggerSoundComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)&&M.default.isNull(this._parent.soundObj.id3)){var i=this._parent.soundObj,n=i.target,a=n.configProps.wordMarquee,s=i.end;a.gotoAndStop(s),n.configProps.marqueePlayIndex>=a.array.length-1?(this._parent.clearSoundChannel(),this.playWordBuso(n)):(this._parent.clearSoundChannel(),n.configProps.marqueePlayIndex++,this.playWordMarquee(n))}else if(M.default.notNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3))this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);else if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){this._parent.soundObj.id=this._parent.soundObj.id3,this._parent.soundObj.id3=null,clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,this._delayTimerSBind=this.delaySpaceBind,this._delayTimer=setTimeout(this.delaySpaceBind,S[this._parent.soundObj.target.configProps.speed-1]);var o=this._parent.soundObj,r,u=o.target.configProps.wordMarquee,l=o.end,d,h,p,c;return void u.gotoAndStop(l)}}},{key:"delaySpace",value:function e(){clearTimeout(this._delayTimer),this._delayTimer=void 0;var t,i=this._parent.soundObj.target,n=i.configProps.wordMarquee;0!==i.toPlay.currentFrame&&(i.configProps.marqueePlayIndex>=n.array.length-1?(this._parent.clearSoundChannel(),this.playWordBuso(i)):(this._parent.clearSoundChannel(),i.configProps.marqueePlayIndex++,this.playWordMarquee(i)))}},{key:"triggerBusoSoundWatch",value:function e(t){if(M.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.soundObj,s,o=a.target.configProps.wordMarquee,r=a.start,u=a.end,l=this._parent.lib.properties.fps,d=1e3,h=Math.round(i/1e3*l);if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){var p=r+h;u<=p&&(p=u),o.buso.gotoAndStop(p)}}}},{key:"triggerBusoSoundComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)&&M.default.isNull(this._parent.soundObj.id3)){var i=this._parent.soundObj,n=i.target,a=n.configProps.wordMarquee,s=i.end;if(a.buso.gotoAndStop(s),n.toPlay.gotoAndStop(0),n.configProps.playStatus=!1,this._parent.clearSoundChannel(),n.configProps.isContinue){var o=this.getCustomTag(n);n.configProps.wordIndex+1<=this._wordStrokeBarIndexGroupMirror[o].length?(n.configProps.wordIndex++,this.refreshShowWord(n),n.configProps.marqueePlayIndex=-1,this.playWordSound(n,n.parent["wordIndex_"+n.configProps.wordIndex],!0)):(n.toPlay.gotoAndStop(0),n.continuePlay.gotoAndStop(0),n.configProps.playStatus=!1,n.configProps.isContinue=!1)}this.updatePageParam(n)}else if(M.default.notNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3))this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);else if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){this._parent.soundObj.id=this._parent.soundObj.id3,this._parent.soundObj.id3=null,clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,this._delayTimerSBind=this.delayBusoSpaceBind,this._delayTimer=setTimeout(this.delayBusoSpaceBind,S[this._parent.soundObj.target.configProps.speed-1]);var r=this._parent.soundObj,u,l=r.target.configProps.wordMarquee,d=r.end,h,p,c,_;return void l.buso.gotoAndStop(d)}}}]),v);function v(e){var t;r(this,v),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._wordStrokeBarGroup=[],this._wordStrokeBarIndexGroupMirror={},this._wordStrokeBarMarqueeGroupMirror={},this._wordStrokeBarExtendGroupMirror={},this._prevTime=-1,this._seq=999,this.triggerSoundIsPaused=!1,15==(navigator.platform.match(/iPhone|iPod|iPad|Mac/)?15:0)&&(S[0]-=140,S[1]-=140,S[2]-=140,S[3]-=140,S[4]-=140)}t.ModuleWordStroke=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleWordsMarqueeSound=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,c=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=i(33),u=["ReadSound","MarqueeS","MarqueeD"],l={ReadSound:"none",MarqueeS:"ex-normal-wait",MarqueeD:"ex-normal-wait"},d=!1,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"debugReset",value:function e(){this._parent.getParentIsNoDefinition()&&(this.isInited||this.init(),this._playSubPrev=-1,this._marqueeSPlayCount.length=0,this._marqueeDPlayCount.length=0)}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init(),this.debugReset();var t=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0;for(t=this._readSoundGroup.length,n=0;n<t;n++)s=this._readSoundGroup[n],c.default.notNull(s)&&(s.bitmapCache||s._buttonHelper&&!1===s._buttonHelper.enabled)&&(c.default.notNull(s.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,s.EffectBase),c.default.notNull(s.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,s.EffectBaseShadow),this.applyReverseCache(s),s.gotoAndStop(0));for(t=this._marqueeSGroup.length,n=0;n<t;n++){s=this._marqueeSGroup[n];var r=this.getCustomTag(s);for(i=this._marqueeSControlMirror[r].length,a=0;a<i;a++)o=this._marqueeSControlMirror[r][a],c.default.notNull(o)&&(o.bitmapCache||o._buttonHelper&&!1===o._buttonHelper.enabled)&&(c.default.notNull(o.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,o.EffectBase),c.default.notNull(o.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,o.EffectBaseShadow),this.applyReverseCache(o),o.gotoAndStop(0))}for(t=this._marqueeDGroup.length,n=0;n<t;n++){s=this._marqueeDGroup[n];var u=this.getCustomTag(s);for(i=this._marqueeDControlMirror[u].length,a=0;a<i;a++)o=this._marqueeDControlMirror[u][a],c.default.notNull(o)&&(o.bitmapCache||o._buttonHelper&&!1===o._buttonHelper.enabled)&&(c.default.notNull(o.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,o.EffectBase),c.default.notNull(o.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,o.EffectBaseShadow),this.applyReverseCache(o),o.gotoAndStop(0))}c.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),c.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"syncMarqueeSound",value:function e(t,i){if(this.isInited||this.init(),"marqueeS"===i.marqueeMode){for(var n=this._marqueeSGroup.length,a=null,s=0;s<n;s++){var o=this._marqueeSGroup[s],r;if(this._parent.getInstanceMirror(o).args[0]===i.id){a=o;break}}c.default.notNull(a)&&(this.stop(),this._parent.soundObj=_.cloneDeep(i),this._parent.soundObj.callback=this.checkSoundPlayStatusBind,this._parent.soundObj.watchFunc=this.triggerSoundWatchSyncBind,this._parent.soundObj.completeFunc=this.triggerSoundCompleteBind,this._parent.soundObj.target=a,this._parent.soundChannel=t,this._prevTime=-1,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc))}else if("marqueeD"===i.marqueeMode){for(var u=this._marqueeDGroup.length,l=null,d=0;d<u;d++){var h=this._marqueeDGroup[d],p;if(this._parent.getInstanceMirror(h).args[0]===i.id){l=h;break}}c.default.notNull(l)&&(this.stop(),this._parent.soundObj=_.cloneDeep(i),this._parent.soundObj.callback=this.checkSoundPlayStatusBind,this._parent.soundObj.watchFunc=this.triggerSoundWatchSyncBind,this._parent.soundObj.completeFunc=this.triggerSoundCompleteBind,this._parent.soundObj.target=l,this._parent.soundChannel=t,this._prevTime=-1,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc))}}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ReadSound":this._readSoundGroup.push(t);break;case"MarqueeS":n=this.getCustomTag(t),void 0!==this._parent.marqueeSData&&(this._marqueeSGroup.push(t),this._marqueeSControlMirror[n]=this.pickRelation(i.parent,this._parent.marqueeSData[i.args[0]]));break;case"MarqueeD":n=this.getCustomTag(t),void 0!==this._parent.marqueeDData&&(this._marqueeDGroup.push(t),this._marqueeDControlMirror[n]=this.pickRelation(i.parent,this._parent.marqueeDData[i.args[0]]))}}}},{key:"getCustomTag",value:function e(t){return c.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){var n=[];if(c.default.isNull(i))return n;for(var a=this._parent.getInstanceMirror(t),s=i.mc.length,o=0;o<s;o++){var r=t[i.mc[o]];r?n.push(r):n.push(null)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerReadSoundMousedownBind=this.triggerReadSoundMousedownBind||this.triggerReadSoundMousedown.bind(this),this.triggerMarqueeSMousedownBind=this.triggerMarqueeSMousedownBind||this.triggerMarqueeSMousedown.bind(this),this.triggerMarqueeDMousedownBind=this.triggerMarqueeDMousedownBind||this.triggerMarqueeDMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundWatch2Bind=this.triggerSoundWatch2Bind||this.triggerSoundWatch2.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerSoundWatchSyncBind=this.triggerSoundWatchSyncBind||this.triggerSoundWatchSync.bind(this),this.debugResetBind=this.debugResetBind||this.debugReset.bind(this);var n=void 0;n=this._readSoundGroup.length;for(var a=void 0,s=0;s<n;s++)(a=this._readSoundGroup[s])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerReadSoundMousedownBind),c.default.notNull(a.EffectBase)&&c.default.applyMultiply(a.EffectBase));n=this._marqueeSGroup.length;for(var o=0;o<n;o++)(a=this._marqueeSGroup[o])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerMarqueeSMousedownBind),c.default.notNull(a.EffectBase)&&c.default.applyMultiply(a.EffectBase));n=this._marqueeDGroup.length;for(var r=0;r<n;r++)(a=this._marqueeDGroup[r])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerMarqueeDMousedownBind),c.default.notNull(a.EffectBase)&&c.default.applyMultiply(a.EffectBase))}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"applyNormalCache",value:function e(t){c.default.isNull(t)||(c.default.isNull(t._buttonHelper)?(c.default.notNull(t.nominalBounds)&&t.cache(t.nominalBounds.x,t.nominalBounds.y,t.nominalBounds.width,t.nominalBounds.height),c.default.notNull(t.EffectBase)&&c.default.applyMultiply(t)):(t._buttonHelper.enabled=!1,t.cursor="pointer",t.gotoAndStop(1)))}},{key:"applyReverseCache",value:function e(t){c.default.isNull(t)||(c.default.isNull(t._buttonHelper)?(t.uncache(),c.default.notNull(t.EffectBase)&&c.default.unapplyMultiply(t)):(t._buttonHelper.enabled=!0,t._buttonHelper._isPressed=!1,t.gotoAndStop(0)))}},{key:"triggerReadSoundMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i);i.gotoAndStop(1),this.applyNormalCache(i);var a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i};var l=this.checkCommandMode(n.command);this._parent.iosMode&&"none"===l?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerMarqueeSMousedown",value:function e(t){this._parent.stop(null,!0),this.debugReset();var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatch2Bind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i,marqueeMode:"marqueeS",marqueeData:this._parent.marqueeSData[n.args[0]]},void 0!==this._parent.marqueeSData[n.args[0]].sub&&0<this._parent.marqueeSData[n.args[0]].sub.length&&1===this._parent.marqueeSData[n.args[0]].sub[0]&&(this._parent.marqueeSData[n.args[0]].sub[0]=100);var l=this.checkCommandMode(n.command);this._parent.iosMode&&"none"===l||this._parent.getParentIsNoDefinition()?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerMarqueeDMousedown",value:function e(t){this._parent.stop(null,!0),this.debugReset();var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatch2Bind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i,marqueeMode:"marqueeD",marqueeData:this._parent.marqueeDData[n.args[0]]},void 0!==this._parent.marqueeDData[n.args[0]].sub&&0<this._parent.marqueeDData[n.args[0]].sub.length&&1===this._parent.marqueeDData[n.args[0]].sub[0]&&(this._parent.marqueeDData[n.args[0]].sub[0]=100);var l=this.checkCommandMode(n.command);this._parent.iosMode&&"none"===l||this._parent.getParentIsNoDefinition()?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(c.default.isNull(this._parent.soundObj)||c.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)c.default.notNull(i)&&i.stop();else switch(this._delayChangeMS=void 0,n){case"fileload":c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);this._parent.getParentIsNoDefinition()&&(this._parent.soundChannel.debugReset=this.debugResetBind),"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){}},{key:"triggerSoundComplete",value:function e(t){this._parent.soundObj.target.gotoAndStop(0),this.stop();var i=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===i||"normal-close"===i||"ex-normal-close"===i||"none"===i?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===i?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"triggerSoundWatch2",value:function e(t){if(c.default.notNull(this._parent.soundChannel)){var i=void 0!==this._parent.soundChannel.position?this._parent.soundChannel.position:this._parent.soundChannel.currentTime;if(this._prevTime!==i){c.default.notNull(this._parent.pairInstance)&&this._parent.pairInstance.syncMarqueeSound(this._parent.soundChannel,this._parent.soundObj),this._prevTime=i;var n=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.lib.properties.fps,s=this._parent.soundObj.marqueeData;switch(this._parent.soundObj.marqueeMode){case"marqueeS":this.updateMarqueeSStatus(i);break;case"marqueeD":this.updateMarqueeDStatus(i)}}}}},{key:"triggerSoundWatchSync",value:function e(t){if(c.default.notNull(this._parent.soundChannel)){var i=void 0!==this._parent.soundChannel.position?this._parent.soundChannel.position:this._parent.soundChannel.currentTime;if(this._prevTime!==i){this._prevTime=i;var n=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.lib.properties.fps,s=this._parent.soundObj.marqueeData;switch(this._parent.soundObj.marqueeMode){case"marqueeS":this.updateMarqueeSStatus(i);break;case"marqueeD":this.updateMarqueeDStatus(i)}}}}},{key:"updateMarqueeSStatus",value:function e(t){var i=this._parent.soundObj.marqueeData,n=void 0,a=void 0,s=void 0,o=void 0,r=void 0;if(this._parent.soundChannel.soundrepeat&&!this._parent.soundChannel.paused&&(this._parent.soundChannel.soundrepeat=void 0),this._parent.soundChannel.paused&&this._parent.soundChannel.soundrepeat&&0!==t&&void 0===this._delayChangeMS)this._delayChangeMS=t;else{if(this._parent.soundChannel.paused&&void 0===this._parent.soundChannel.soundrepeat&&(this._delayChangeMS=void 0),void 0!==this._delayChangeMS){if(this._delayChangeMS>t)return;this._delayChangeMS=void 0}var u=this._parent.soundObj.target,l=this.getCustomTag(u);o=i.sub.length;var d=-1;for(a=0;a<o-1;a++)if(t>=i.sub[a]&&t<i.sub[a+1]){d=a;break}if(-1===d&&i.sub[a]<=t&&(d=a),this._parent.getParentIsNoDefinition()&&-1!==d&&!this._parent.soundChannel.paused&&(void 0===this._marqueeSPlayCount[d]?this._marqueeSPlayCount[d]=1:this._marqueeSPlayCount[d]=2,this._marqueeSPlayCount[d]<2))return-1===this._playSubPrev?(this._marqueeSPlayCount[d-1]=2,void(this._playSubPrev=0)):void(void 0===i.sub[d-1]?this._parent.soundChannel.position=0:this._parent.soundChannel.position=i.sub[d-1]);for(o=this._marqueeSControlMirror[l].length,a=0;a<o;a++)n=this._marqueeSControlMirror[l][a],c.default.notNull(n)&&(n.bitmapCache||n._buttonHelper&&!1===n._buttonHelper.enabled)&&(c.default.notNull(n.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,n.EffectBase),c.default.notNull(n.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,n.EffectBaseShadow),this.applyReverseCache(n),n.gotoAndStop(0));-1!==d&&(n=this._marqueeSControlMirror[l][d],c.default.notNull(n)&&(n.gotoAndStop(1),this.applyNormalCache(n)))}}},{key:"updateMarqueeDStatus",value:function e(t){var i=this._parent.soundObj.marqueeData,n=void 0,a=void 0,s=void 0,o=void 0,r=void 0;if(this._parent.soundChannel.soundrepeat&&!this._parent.soundChannel.paused&&(this._parent.soundChannel.soundrepeat=void 0),this._parent.soundChannel.paused&&this._parent.soundChannel.soundrepeat&&0!==t&&void 0===this._delayChangeMS)this._delayChangeMS=t;else{if(this._parent.soundChannel.paused&&void 0===this._parent.soundChannel.soundrepeat&&(this._delayChangeMS=void 0),void 0!==this._delayChangeMS){if(this._delayChangeMS>t)return;this._delayChangeMS=void 0}var u=this._parent.soundObj.target,l=this.getCustomTag(u);o=i.sub.length;var d=-1;for(a=0;a<o-1;a++)if(t>=i.sub[a]&&t<i.sub[a+1]){d=a;break}if(-1===d&&i.sub[a]<=t&&(d=a),this._parent.getParentIsNoDefinition()&&-1!==d&&!this._parent.soundChannel.paused&&(void 0===this._marqueeDPlayCount[d]?this._marqueeDPlayCount[d]=1:this._marqueeDPlayCount[d]=2,this._marqueeDPlayCount[d]<2))return-1===this._playSubPrev?(this._marqueeDPlayCount[d-1]=2,void(this._playSubPrev=0)):void(void 0===i.sub[d-1]?this._parent.soundChannel.position=0:this._parent.soundChannel.position=i.sub[d-1]);for(o=this._marqueeDControlMirror[l].length,a=0;a<o;a++)n=this._marqueeDControlMirror[l][a],c.default.notNull(n)&&(n.bitmapCache||n._buttonHelper&&!1===n._buttonHelper.enabled)&&(c.default.notNull(n.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,n.EffectBase),c.default.notNull(n.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,n.EffectBaseShadow),this.applyReverseCache(n),n.gotoAndStop(0));-1!==d&&(n=this._marqueeDControlMirror[l][d],c.default.notNull(n)&&(n.gotoAndStop(1),d%2!=0&&(c.default.applyColorFilter(this._parent.createjs,n.EffectBase,255,153,255),c.default.notNull(n.EffectBaseShadow)&&c.default.applyColorFilter(this._parent.createjs,n.EffectBaseShadow,255,153,255)),this.applyNormalCache(n)))}}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._readSoundGroup=[],this._marqueeSGroup=[],this._marqueeDGroup=[],this._marqueeSControlMirror={},this._marqueeDControlMirror={},this._marqueeSPlayCount=[],this._marqueeDPlayCount=[],this._playSubPrev=-1,this._prevTime=-1,this._seq=999}t.ModuleWordsMarqueeSound=h},function(e,Ee,Ge){(function(Ne,je){var Ae;(function(){var dd,hd="4.17.15",e=200,pd="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",cd="Expected a function",_d="__lodash_hash_undefined__",t=500,gd="__lodash_placeholder__",i=1,n=2,a=4,s=1,o=2,r=1,u=2,l=4,d=8,h=16,p=32,c=64,_=128,g=256,f=512,v=30,fd="...",m=800,b=16,y=1,S=2,P=3,M=1/0,vd=9007199254740991,md=17976931348623157e292,bd=NaN,yd=4294967295,Sd=yd-1,Pd=yd>>>1,Md=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],kd="[object Arguments]",Od="[object Array]",Bd="[object AsyncFunction]",xd="[object Boolean]",Cd="[object Date]",Td="[object DOMException]",wd="[object Error]",Ld="[object Function]",Id="[object GeneratorFunction]",Nd="[object Map]",jd="[object Number]",Ad="[object Null]",Ed="[object Object]",Gd="[object Promise]",qd="[object Proxy]",Rd="[object RegExp]",zd="[object Set]",Wd="[object String]",Dd="[object Symbol]",Fd="[object Undefined]",Qd="[object WeakMap]",Xd="[object WeakSet]",Vd="[object ArrayBuffer]",Ud="[object DataView]",Zd="[object Float32Array]",Yd="[object Float64Array]",Hd="[object Int8Array]",Jd="[object Int16Array]",$d="[object Int32Array]",Kd="[object Uint8Array]",eh="[object Uint8ClampedArray]",th="[object Uint16Array]",ih="[object Uint32Array]",nh=/\b__p \+= '';/g,ah=/\b(__p \+=) '' \+/g,sh=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oh=/&(?:amp|lt|gt|quot|#39);/g,rh=/[&<>"']/g,uh=RegExp(oh.source),lh=RegExp(rh.source),dh=/<%-([\s\S]+?)%>/g,hh=/<%([\s\S]+?)%>/g,ph=/<%=([\s\S]+?)%>/g,ch=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_h=/^\w*$/,gh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fh=/[\\^$.*+?()[\]{}|]/g,vh=RegExp(fh.source),mh=/^\s+|\s+$/g,bh=/^\s+/,yh=/\s+$/,Sh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ph=/\{\n\/\* \[wrapped with (.+)\] \*/,Mh=/,? & /,k=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kh=/\\(\\)?/g,Oh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bh=/\w*$/,xh=/^[-+]0x[0-9a-f]+$/i,Ch=/^0b[01]+$/i,Th=/^\[object .+?Constructor\]$/,wh=/^0o[0-7]+$/i,Lh=/^(?:0|[1-9]\d*)$/,Ih=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Nh=/($^)/,jh=/['\n\r\u2028\u2029\\]/g,O="\\ud800-\\udfff",B,x,C,T="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff",w="\\u2700-\\u27bf",L="a-z\\xdf-\\xf6\\xf8-\\xff",I,N,j,A,E="A-Z\\xc0-\\xd6\\xd8-\\xde",G="\\ufe0e\\ufe0f",q="\\xac\\xb1\\xd7\\xf7"+"\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf"+"\\u2000-\\u206f"+" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",R="['’]",z="["+O+"]",W="["+q+"]",D="["+T+"]",F="\\d+",Q="["+w+"]",X="["+L+"]",V="[^"+O+q+F+w+L+E+"]",U="\\ud83c[\\udffb-\\udfff]",Z,Y="[^"+O+"]",H="(?:\\ud83c[\\udde6-\\uddff]){2}",J="[\\ud800-\\udbff][\\udc00-\\udfff]",$="["+E+"]",K="\\u200d",ee="(?:"+X+"|"+V+")",te="(?:"+$+"|"+V+")",ie="(?:['’](?:d|ll|m|re|s|t|ve))?",ne="(?:['’](?:D|LL|M|RE|S|T|VE))?",ae="(?:"+D+"|"+U+")"+"?",se="["+G+"]?",oe,re="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ue="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",le=se+ae+("(?:\\u200d(?:"+[Y,H,J].join("|")+")"+se+ae+")*"),de="(?:"+[Q,H,J].join("|")+")"+le,he="(?:"+[Y+D+"?",D,H,J,z].join("|")+")",Ah=RegExp(R,"g"),Eh=RegExp(D,"g"),pe=RegExp(U+"(?="+U+")|"+he+le,"g"),ce=RegExp([$+"?"+X+"+"+ie+"(?="+[W,$,"$"].join("|")+")",te+"+"+ne+"(?="+[W,$+ee,"$"].join("|")+")",$+"?"+ee+"+"+ie,$+"+"+ne,ue,re,F,de].join("|"),"g"),_e=RegExp("["+K+O+T+G+"]"),ge=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qh=-1,Rh={};Rh[Zd]=Rh[Yd]=Rh[Hd]=Rh[Jd]=Rh[$d]=Rh[Kd]=Rh[eh]=Rh[th]=Rh[ih]=!0,Rh[kd]=Rh[Od]=Rh[Vd]=Rh[xd]=Rh[Ud]=Rh[Cd]=Rh[wd]=Rh[Ld]=Rh[Nd]=Rh[jd]=Rh[Ed]=Rh[Rd]=Rh[zd]=Rh[Wd]=Rh[Qd]=!1;var zh={};zh[kd]=zh[Od]=zh[Vd]=zh[Ud]=zh[xd]=zh[Cd]=zh[Zd]=zh[Yd]=zh[Hd]=zh[Jd]=zh[$d]=zh[Nd]=zh[jd]=zh[Ed]=zh[Rd]=zh[zd]=zh[Wd]=zh[Dd]=zh[Kd]=zh[eh]=zh[th]=zh[ih]=!0,zh[wd]=zh[Ld]=zh[Qd]=!1;var fe={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},me={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wh=parseFloat,Dh=parseInt,ye="object"==typeof Ne&&Ne&&Ne.Object===Object&&Ne,Se="object"==typeof self&&self&&self.Object===Object&&self,Fh=ye||Se||Function("return this")(),Pe=Ee&&!Ee.nodeType&&Ee,Me=Pe&&"object"==typeof je&&je&&!je.nodeType&&je,Qh=Me&&Me.exports===Pe,ke=Qh&&ye.process,Oe=function(){try{var e=Me&&Me.require&&Me.require("util").types;return e||ke&&ke.binding&&ke.binding("util")}catch(e){}}(),Xh=Oe&&Oe.isArrayBuffer,Vh=Oe&&Oe.isDate,Uh=Oe&&Oe.isMap,Zh=Oe&&Oe.isRegExp,Yh=Oe&&Oe.isSet,Hh=Oe&&Oe.isTypedArray;function Jh(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function $h(e,t,i,n){for(var a=-1,s=null==e?0:e.length;++a<s;){var o=e[a];t(n,o,i(o),e)}return n}function Kh(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function ep(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function tp(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function ip(e,t){for(var i=-1,n=null==e?0:e.length,a=0,s=[];++i<n;){var o=e[i];t(o,i,e)&&(s[a++]=o)}return s}function np(e,t){var i;return!!(null==e?0:e.length)&&-1<cp(e,t,0)}function ap(e,t,i){for(var n=-1,a=null==e?0:e.length;++n<a;)if(i(t,e[n]))return!0;return!1}function sp(e,t){for(var i=-1,n=null==e?0:e.length,a=Array(n);++i<n;)a[i]=t(e[i],i,e);return a}function op(e,t){for(var i=-1,n=t.length,a=e.length;++i<n;)e[a+i]=t[i];return e}function rp(e,t,i,n){var a=-1,s=null==e?0:e.length;for(n&&s&&(i=e[++a]);++a<s;)i=t(i,e[a],a,e);return i}function up(e,t,i,n){var a=null==e?0:e.length;for(n&&a&&(i=e[--a]);a--;)i=t(i,e[a],a,e);return i}function lp(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var Be=vp("length");function xe(e){return e.split("")}function dp(e){return e.match(k)||[]}function hp(e,n,t){var a;return t(e,function(e,t,i){if(n(e,t,i))return a=t,!1}),a}function pp(e,t,i,n){for(var a=e.length,s=i+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1}function cp(e,t,i){return t==t?Te(e,t,i):pp(e,gp,i)}function _p(e,t,i,n){for(var a=i-1,s=e.length;++a<s;)if(n(e[a],t))return a;return-1}function gp(e){return e!=e}function fp(e,t){var i=null==e?0:e.length;return i?yp(e,t)/i:bd}function vp(t){return function(e){return null==e?dd:e[t]}}function Ce(t){return function(e){return null==t?dd:t[e]}}function mp(e,n,a,s,t){return t(e,function(e,t,i){a=s?(s=!1,e):n(a,e,t,i)}),a}function bp(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}function yp(e,t){for(var i,n=-1,a=e.length;++n<a;){var s=t(e[n]);s!==dd&&(i=i===dd?s:i+s)}return i}function Sp(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function Pp(t,e){return sp(e,function(e){return[e,t[e]]})}function Mp(t){return function(e){return t(e)}}function kp(t,e){return sp(e,function(e){return t[e]})}function Op(e,t){return e.has(t)}function Bp(e,t){for(var i=-1,n=e.length;++i<n&&-1<cp(t,e[i],0););return i}function xp(e,t){for(var i=e.length;i--&&-1<cp(t,e[i],0););return i}function Cp(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}var Tp=Ce(fe),wp=Ce(ve);function Lp(e){return"\\"+be[e]}function Ip(e,t){return null==e?dd:e[t]}function Np(e){return _e.test(e)}function jp(e){return ge.test(e)}function Ap(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}function Ep(e){var i=-1,n=Array(e.size);return e.forEach(function(e,t){n[++i]=[t,e]}),n}function Gp(t,i){return function(e){return t(i(e))}}function qp(e,t){for(var i=-1,n=e.length,a=0,s=[];++i<n;){var o=e[i];o!==t&&o!==gd||(e[i]=gd,s[a++]=i)}return s}function Rp(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function zp(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=[e,e]}),i}function Te(e,t,i){for(var n=i-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}function Wp(e,t,i){for(var n=i+1;n--;)if(e[n]===t)return n;return n}function Dp(e){return Np(e)?we(e):Be(e)}function Fp(e){return Np(e)?Le(e):xe(e)}var Qp=Ce(me);function we(e){for(var t=pe.lastIndex=0;pe.test(e);)++t;return t}function Le(e){return e.match(pe)||[]}function Xp(e){return e.match(ce)||[]}var Ie,Vp=function e(t){var O=(t=null==t?Fh:Vp.defaults(Fh.Object(),t,Vp.pick(Fh,Gh))).Array,i=t.Date,n=t.Error,f=t.Function,s=t.Math,c=t.Object,v=t.RegExp,d=t.String,P=t.TypeError,o=O.prototype,a=f.prototype,h=c.prototype,r=t["__core-js_shared__"],u=a.toString,S=h.hasOwnProperty,l=0,p=(_=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",_,g=h.toString,m=u.call(c),b=Fh._,y=v("^"+u.call(S).replace(fh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=Qh?t.Buffer:dd,k=t.Symbol,B=t.Uint8Array,x=M?M.allocUnsafe:dd,C=Gp(c.getPrototypeOf,c),T=c.create,w=h.propertyIsEnumerable,L=o.splice,I=k?k.isConcatSpreadable:dd,N=k?k.iterator:dd,j=k?k.toStringTag:dd,A=function(){try{var e=Rn(c,"defineProperty");return e({},"",{}),e}catch(e){}}(),E=t.clearTimeout!==Fh.clearTimeout&&t.clearTimeout,G=i&&i.now!==Fh.Date.now&&i.now,q=t.setTimeout!==Fh.setTimeout&&t.setTimeout,R=s.ceil,z=s.floor,W=c.getOwnPropertySymbols,D=M?M.isBuffer:dd,F=t.isFinite,Q=o.join,X=Gp(c.keys,c),V=s.max,U=s.min,Z=i.now,Y=t.parseInt,H=s.random,J=o.reverse,$=Rn(t,"DataView"),K=Rn(t,"Map"),ee=Rn(t,"Promise"),te=Rn(t,"Set"),ie=Rn(t,"WeakMap"),ne=Rn(c,"create"),ae=ie&&new ie,se={},oe=ka($),re=ka(K),ue=ka(ee),le=ka(te),de=ka(ie),he=k?k.prototype:dd,pe=he?he.valueOf:dd,ce=he?he.toString:dd;function _e(e){if(mr(e)&&!tr(e)&&!(e instanceof be)){if(e instanceof me)return e;if(S.call(e,"__wrapped__"))return Ba(e)}return new me(e)}var ge=function(e){if(!vr(e))return{};if(T)return T(e);fe.prototype=e;var t=new fe;return fe.prototype=dd,t};function fe(){}function ve(){}function me(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=dd}function be(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=yd,this.__views__=[]}function ye(){var e=new be(this.__wrapped__);return e.__actions__=Yi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Yi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Yi(this.__views__),e}function Se(){if(this.__filtered__){var e=new be(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e}function Pe(){var e=this.__wrapped__.value(),t=this.__dir__,i=tr(e),n=t<0,a=i?e.length:0,s=Qn(0,a,this.__views__),o=s.start,r=s.end,u=r-o,l=n?r:o-1,d=this.__iteratees__,h=d.length,p=0,c=U(u,this.__takeCount__);if(!i||!n&&a==u&&c==u)return wi(e,this.__actions__);var _=[];e:for(;u--&&p<c;){for(var g=-1,f=e[l+=t];++g<h;){var v=d[g],m=v.iteratee,b=v.type,y=m(f);if(2==b)f=y;else if(!y){if(1==b)continue e;break e}}_[p++]=f}return _}function Me(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function ke(){this.__data__=ne?ne(null):{},this.size=0}function Oe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Be(e){var t=this.__data__;if(ne){var i=t[e];return i===_d?dd:i}return S.call(t,e)?t[e]:dd}function xe(e){var t=this.__data__;return ne?t[e]!==dd:S.call(t,e)}function Ce(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=ne&&t===dd?_d:t,this}function Te(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function we(){this.__data__=[],this.size=0}function Le(e){var t=this.__data__,i=it(t,e),n;return!(i<0)&&(i==t.length-1?t.pop():L.call(t,i,1),--this.size,!0)}function Ie(e){var t=this.__data__,i=it(t,e);return i<0?dd:t[i][1]}function Ne(e){return-1<it(this.__data__,e)}function je(e,t){var i=this.__data__,n=it(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this}function Ae(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ee(){this.size=0,this.__data__={hash:new Me,map:new(K||Te),string:new Me}}function Ge(e){var t=Gn(this,e).delete(e);return this.size-=t?1:0,t}function qe(e){return Gn(this,e).get(e)}function Re(e){return Gn(this,e).has(e)}function ze(e,t){var i=Gn(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this}function We(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ae;++t<i;)this.add(e[t])}function De(e){return this.__data__.set(e,_d),this}function Fe(e){return this.__data__.has(e)}function Qe(e){var t=this.__data__=new Te(e);this.size=t.size}function Xe(){this.__data__=new Te,this.size=0}function Ve(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function Ue(e){return this.__data__.get(e)}function Ze(e){return this.__data__.has(e)}function Ye(e,t){var i=this.__data__;if(i instanceof Te){var n=i.__data__;if(!K||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ae(n)}return i.set(e,t),this.size=i.size,this}function He(e,t){var i=tr(e),n=!i&&er(e),a=!i&&!n&&or(e),s=!i&&!n&&!a&&Nr(e),o=i||n||a||s,r=o?Sp(e.length,d):[],u=r.length;for(var l in e)!t&&!S.call(e,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||$n(l,u))||r.push(l);return r}function Je(e){var t=e.length;return t?e[li(0,t-1)]:dd}function $e(e,t){return Sa(Yi(e),ut(t,0,e.length))}function Ke(e){return Sa(Yi(e))}function et(e,t,i){(i===dd||Jo(e[t],i))&&(i!==dd||t in e)||ot(e,t,i)}function tt(e,t,i){var n=e[t];S.call(e,t)&&Jo(n,i)&&(i!==dd||t in e)||ot(e,t,i)}function it(e,t){for(var i=e.length;i--;)if(Jo(e[i][0],t))return i;return-1}function nt(e,n,a,s){return _t(e,function(e,t,i){n(s,e,a(e),i)}),s}function at(e,t){return e&&Hi(t,gu(t),e)}function st(e,t){return e&&Hi(t,fu(t),e)}function ot(e,t,i){"__proto__"==t&&A?A(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function rt(e,t){for(var i=-1,n=t.length,a=O(n),s=null==e;++i<n;)a[i]=s?dd:lu(e,t[i]);return a}function ut(e,t,i){return e==e&&(i!==dd&&(e=e<=i?e:i),t!==dd&&(e=t<=e?e:t)),e}function lt(i,n,a,e,t,s){var o,r=1&n,u=2&n,l=4&n;if(a&&(o=t?a(i,e,t,s):a(i)),o!==dd)return o;if(!vr(i))return i;var d=tr(i);if(d){if(o=Un(i),!r)return Yi(i,o)}else{var h=Fn(i),p=h==Ld||h==Id;if(or(i))return Ri(i,r);if(h==Ed||h==kd||p&&!t){if(o=u||p?{}:Zn(i),!r)return u?$i(i,st(o,i)):Ji(i,at(o,i))}else{if(!zh[h])return t?i:{};o=Yn(i,h,r)}}var c=(s=s||new Qe).get(i);if(c)return c;s.set(i,o),wr(i)?i.forEach(function(e){o.add(lt(e,n,a,e,i,s))}):br(i)&&i.forEach(function(e,t){o.set(t,lt(e,n,a,t,i,s))});var _,g=d?dd:(l?u?In:Ln:u?fu:gu)(i);return Kh(g||i,function(e,t){g&&(e=i[t=e]),tt(o,t,lt(e,n,a,t,i,s))}),o}function dt(t){var i=gu(t);return function(e){return ht(e,t,i)}}function ht(e,t,i){var n=i.length;if(null==e)return!n;for(e=c(e);n--;){var a=i[n],s=t[a],o=e[a];if(o===dd&&!(a in e)||!s(o))return!1}return!0}function pt(e,t,i){if("function"!=typeof e)throw new P(cd);return va(function(){e.apply(dd,i)},t)}function ct(e,t,i,n){var a=-1,s=np,o=!0,r=e.length,u=[],l=t.length;if(!r)return u;i&&(t=sp(t,Mp(i))),n?(s=ap,o=!1):200<=t.length&&(s=Op,o=!1,t=new We(t));e:for(;++a<r;){var d=e[a],h=null==i?d:i(d);if(d=n||0!==d?d:0,o&&h==h){for(var p=l;p--;)if(t[p]===h)continue e;u.push(d)}else s(t,h,n)||u.push(d)}return u}_e.templateSettings={escape:dh,evaluate:hh,interpolate:ph,variable:"",imports:{_:_e}},(_e.prototype=ve.prototype).constructor=_e,(me.prototype=ge(ve.prototype)).constructor=me,(be.prototype=ge(ve.prototype)).constructor=be,Me.prototype.clear=ke,Me.prototype.delete=Oe,Me.prototype.get=Be,Me.prototype.has=xe,Me.prototype.set=Ce,Te.prototype.clear=we,Te.prototype.delete=Le,Te.prototype.get=Ie,Te.prototype.has=Ne,Te.prototype.set=je,Ae.prototype.clear=Ee,Ae.prototype.delete=Ge,Ae.prototype.get=qe,Ae.prototype.has=Re,Ae.prototype.set=ze,We.prototype.add=We.prototype.push=De,We.prototype.has=Fe,Qe.prototype.clear=Xe,Qe.prototype.delete=Ve,Qe.prototype.get=Ue,Qe.prototype.has=Ze,Qe.prototype.set=Ye;var _t=tn(Mt),gt=tn(kt,!0);function ft(e,n){var a=!0;return _t(e,function(e,t,i){return a=!!n(e,t,i)}),a}function vt(e,t,i){for(var n=-1,a=e.length;++n<a;){var s=e[n],o=t(s);if(null!=o&&(r===dd?o==o&&!Ir(o):i(o,r)))var r=o,u=s}return u}function mt(e,t,i,n){var a=e.length;for((i=Wr(i))<0&&(i=a<-i?0:a+i),(n=n===dd||a<n?a:Wr(n))<0&&(n+=a),n=n<i?0:Dr(n);i<n;)e[i++]=t;return e}function bt(e,n){var a=[];return _t(e,function(e,t,i){n(e,t,i)&&a.push(e)}),a}function yt(e,t,i,n,a){var s=-1,o=e.length;for(i=i||Jn,a=a||[];++s<o;){var r=e[s];0<t&&i(r)?1<t?yt(r,t-1,i,n,a):op(a,r):n||(a[a.length]=r)}return a}var St=nn(),Pt=nn(!0);function Mt(e,t){return e&&St(e,t,gu)}function kt(e,t){return e&&Pt(e,t,gu)}function Ot(t,e){return ip(e,function(e){return _r(t[e])})}function Bt(e,t){for(var i=0,n=(t=Ai(t,e)).length;null!=e&&i<n;)e=e[Ma(t[i++])];return i&&i==n?e:dd}function xt(e,t,i){var n=t(e);return tr(e)?n:op(n,i(e))}function Ct(e){return null==e?e===dd?Fd:Ad:j&&j in c(e)?zn(e):ha(e)}function Tt(e,t){return t<e}function wt(e,t){return null!=e&&S.call(e,t)}function Lt(e,t){return null!=e&&t in c(e)}function It(e,t,i){return e>=U(t,i)&&e<V(t,i)}function Nt(e,t,i){for(var n=i?ap:np,a=e[0].length,s=e.length,o=s,r=O(s),u=1/0,l=[];o--;){var d=e[o];o&&t&&(d=sp(d,Mp(t))),u=U(d.length,u),r[o]=!i&&(t||120<=a&&120<=d.length)?new We(o&&d):dd}d=e[0];var h=-1,p=r[0];e:for(;++h<a&&l.length<u;){var c=d[h],_=t?t(c):c;if(c=i||0!==c?c:0,!(p?Op(p,_):n(l,_,i))){for(o=s;--o;){var g=r[o];if(!(g?Op(g,_):n(e[o],_,i)))continue e}p&&p.push(_),l.push(c)}}return l}function jt(e,n,a,s){return Mt(e,function(e,t,i){n(s,a(e),t,i)}),s}function At(e,t,i){var n=null==(e=ca(e,t=Ai(t,e)))?e:e[Ma(Ja(t))];return null==n?dd:Jh(n,e,i)}function Et(e){return mr(e)&&Ct(e)==kd}function Gt(e){return mr(e)&&Ct(e)==Vd}function qt(e){return mr(e)&&Ct(e)==Cd}function Rt(e,t,i,n,a){return e===t||(null==e||null==t||!mr(e)&&!mr(t)?e!=e&&t!=t:zt(e,t,i,n,Rt,a))}function zt(e,t,i,n,a,s){var o=tr(e),r=tr(t),u=o?Od:Fn(e),l=r?Od:Fn(t),d=(u=u==kd?Ed:u)==Ed,h=(l=l==kd?Ed:l)==Ed,p=u==l;if(p&&or(e)){if(!or(t))return!1;d=!(o=!0)}if(p&&!d)return s=s||new Qe,o||Nr(e)?xn(e,t,i,n,a,s):Cn(e,t,u,i,n,a,s);if(!(1&i)){var c=d&&S.call(e,"__wrapped__"),_=h&&S.call(t,"__wrapped__"),g,f;if(c||_)return a(c?e.value():e,_?t.value():t,i,n,s=s||new Qe)}return p&&Tn(e,t,i,n,a,s=s||new Qe)}function Wt(e){return mr(e)&&Fn(e)==Nd}function Dt(e,t,i,n){var a=i.length,s=a,o=!n;if(null==e)return!s;for(e=c(e);a--;){var r=i[a];if(o&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++a<s;){var u=(r=i[a])[0],l=e[u],d=r[1];if(o&&r[2]){if(l===dd&&!(u in e))return!1}else{var h=new Qe;if(n)var p=n(l,d,u,e,t,h);if(!(p===dd?Rt(d,l,3,n,h):p))return!1}}return!0}function Ft(e){return!(!vr(e)||na(e))&&(_r(e)?y:Th).test(ka(e));var t}function Qt(e){return mr(e)&&Ct(e)==Rd}function Xt(e){return mr(e)&&Fn(e)==zd}function Vt(e){return mr(e)&&fr(e.length)&&!!Rh[Ct(e)]}function Ut(e){return"function"==typeof e?e:null==e?Ml:"object"==typeof e?tr(e)?Kt(e[0],e[1]):$t(e):El(e)}function Zt(e){if(!sa(e))return X(e);var t=[];for(var i in c(e))S.call(e,i)&&"constructor"!=i&&t.push(i);return t}function Yt(e){if(!vr(e))return da(e);var t=sa(e),i=[];for(var n in e)("constructor"!=n||!t&&S.call(e,n))&&i.push(n);return i}function Ht(e,t){return e<t}function Jt(e,n){var a=-1,s=nr(e)?O(e.length):[];return _t(e,function(e,t,i){s[++a]=n(e,t,i)}),s}function $t(t){var i=qn(t);return 1==i.length&&i[0][2]?ra(i[0][0],i[0][1]):function(e){return e===t||Dt(e,t,i)}}function Kt(i,n){return ea(i)&&oa(n)?ra(Ma(i),n):function(e){var t=lu(e,i);return t===dd&&t===n?hu(e,i):Rt(n,t,3)}}function ei(n,a,s,o,r){n!==a&&St(a,function(e,t){if(r=r||new Qe,vr(e))ti(n,a,t,s,ei,o,r);else{var i=o?o(ga(n,t),e,t+"",n,a,r):dd;i===dd&&(i=e),et(n,t,i)}},fu)}function ti(e,t,i,n,a,s,o){var r=ga(e,i),u=ga(t,i),l=o.get(u);if(l)et(e,i,l);else{var d=s?s(r,u,i+"",e,t,o):dd,h=d===dd;if(h){var p=tr(u),c=!p&&or(u),_=!p&&!c&&Nr(u);d=u,p||c||_?d=tr(r)?r:ar(r)?Yi(r):c?Ri(u,!(h=!1)):_?Qi(u,!(h=!1)):[]:xr(u)||er(u)?er(d=r)?d=Qr(r):vr(r)&&!_r(r)||(d=Zn(u)):h=!1}h&&(o.set(u,d),a(d,u,n,s,o),o.delete(u)),et(e,i,d)}}function ii(e,t){var i=e.length;if(i)return $n(t+=t<0?i:0,i)?e[t]:dd}function ni(e,a,i){var s=-1,t;return a=sp(a.length?a:[Ml],Mp(En())),bp(Jt(e,function(t,e,i){var n;return{criteria:sp(a,function(e){return e(t)}),index:++s,value:t}}),function(e,t){return Vi(e,t,i)})}function ai(i,e){return si(i,e,function(e,t){return hu(i,t)})}function si(e,t,i){for(var n=-1,a=t.length,s={};++n<a;){var o=t[n],r=Bt(e,o);i(r,o)&&gi(s,Ai(o,e),r)}return s}function oi(t){return function(e){return Bt(e,t)}}function ri(e,t,i,n){var a=n?_p:cp,s=-1,o=t.length,r=e;for(e===t&&(t=Yi(t)),i&&(r=sp(e,Mp(i)));++s<o;)for(var u=0,l=t[s],d=i?i(l):l;-1<(u=a(r,d,u,n));)r!==e&&L.call(r,u,1),L.call(e,u,1);return e}function ui(e,t){for(var i=e?t.length:0,n=i-1;i--;){var a=t[i];if(i==n||a!==s){var s=a;$n(a)?L.call(e,a,1):xi(e,a)}}return e}function li(e,t){return e+z(H()*(t-e+1))}function di(e,t,i,n){for(var a=-1,s=V(R((t-e)/(i||1)),0),o=O(s);s--;)o[n?s:++a]=e,e+=i;return o}function hi(e,t){var i="";if(!e||t<1||vd<t)return i;for(;t%2&&(i+=e),(t=z(t/2))&&(e+=e),t;);return i}function pi(e,t){return ma(pa(e,t,Ml),e+"")}function ci(e){return Je(ju(e))}function _i(e,t){var i=ju(e);return Sa(i,ut(t,0,i.length))}function gi(e,t,i,n){if(!vr(e))return e;for(var a=-1,s=(t=Ai(t,e)).length,o=s-1,r=e;null!=r&&++a<s;){var u=Ma(t[a]),l=i;if(a!=o){var d=r[u];(l=n?n(d,u,r):dd)===dd&&(l=vr(d)?d:$n(t[a+1])?[]:{})}tt(r,u,l),r=r[u]}return e}var fi=ae?function(e,t){return ae.set(e,t),e}:Ml,vi=A?function(e,t){return A(e,"toString",{configurable:!0,enumerable:!1,value:bl(t),writable:!0})}:Ml;function mi(e){return Sa(ju(e))}function bi(e,t,i){var n=-1,a=e.length;t<0&&(t=a<-t?0:a+t),(i=a<i?a:i)<0&&(i+=a),a=i<t?0:i-t>>>0,t>>>=0;for(var s=O(a);++n<a;)s[n]=e[n+t];return s}function yi(e,n){var a;return _t(e,function(e,t,i){return!(a=n(e,t,i))}),!!a}function Si(e,t,i){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t==t&&a<=Pd){for(;n<a;){var s=n+a>>>1,o=e[s];null!==o&&!Ir(o)&&(i?o<=t:o<t)?n=1+s:a=s}return a}return Pi(e,t,Ml,i)}function Pi(e,t,i,n){t=i(t);for(var a=0,s=null==e?0:e.length,o=t!=t,r=null===t,u=Ir(t),l=t===dd;a<s;){var d=z((a+s)/2),h=i(e[d]),p=h!==dd,c=null===h,_=h==h,g=Ir(h);if(o)var f=n||_;else f=l?_&&(n||p):r?_&&p&&(n||!c):u?_&&p&&!c&&(n||!g):!c&&!g&&(n?h<=t:h<t);f?a=d+1:s=d}return U(s,Sd)}function Mi(e,t){for(var i=-1,n=e.length,a=0,s=[];++i<n;){var o=e[i],r=t?t(o):o;if(!i||!Jo(r,u)){var u=r;s[a++]=0===o?0:o}}return s}function ki(e){return"number"==typeof e?e:Ir(e)?bd:+e}function Oi(e){if("string"==typeof e)return e;if(tr(e))return sp(e,Oi)+"";if(Ir(e))return ce?ce.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bi(e,t,i){var n=-1,a=np,s=e.length,o=!0,r=[],u=r;if(i)o=!1,a=ap;else if(200<=s){var l=t?null:Sn(e);if(l)return Rp(l);o=!1,a=Op,u=new We}else u=t?[]:r;e:for(;++n<s;){var d=e[n],h=t?t(d):d;if(d=i||0!==d?d:0,o&&h==h){for(var p=u.length;p--;)if(u[p]===h)continue e;t&&u.push(h),r.push(d)}else a(u,h,i)||(u!==r&&u.push(h),r.push(d))}return r}function xi(e,t){return null==(e=ca(e,t=Ai(t,e)))||delete e[Ma(Ja(t))]}function Ci(e,t,i,n){return gi(e,t,i(Bt(e,t)),n)}function Ti(e,t,i,n){for(var a=e.length,s=n?a:-1;(n?s--:++s<a)&&t(e[s],s,e););return i?bi(e,n?0:s,n?s+1:a):bi(e,n?s+1:0,n?a:s)}function wi(e,t){var i=e;return i instanceof be&&(i=i.value()),rp(t,function(e,t){return t.func.apply(t.thisArg,op([e],t.args))},i)}function Li(e,t,i){var n=e.length;if(n<2)return n?Bi(e[0]):[];for(var a=-1,s=O(n);++a<n;)for(var o=e[a],r=-1;++r<n;)r!=a&&(s[a]=ct(s[a]||o,e[r],t,i));return Bi(yt(s,1),t,i)}function Ii(e,t,i){for(var n=-1,a=e.length,s=t.length,o={};++n<a;){var r=n<s?t[n]:dd;i(o,e[n],r)}return o}function Ni(e){return ar(e)?e:[]}function ji(e){return"function"==typeof e?e:Ml}function Ai(e,t){return tr(e)?e:ea(e,t)?[e]:Pa(Vr(e))}var Ei=pi;function Gi(e,t,i){var n=e.length;return i=i===dd?n:i,!t&&n<=i?e:bi(e,t,i)}var qi=E||function(e){return Fh.clearTimeout(e)};function Ri(e,t){if(t)return e.slice();var i=e.length,n=x?x(i):new e.constructor(i);return e.copy(n),n}function zi(e){var t=new e.constructor(e.byteLength);return new B(t).set(new B(e)),t}function Wi(e,t){var i=t?zi(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Di(e){var t=new e.constructor(e.source,Bh.exec(e));return t.lastIndex=e.lastIndex,t}function Fi(e){return pe?c(pe.call(e)):{}}function Qi(e,t){var i=t?zi(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Xi(e,t){if(e!==t){var i=e!==dd,n=null===e,a=e==e,s=Ir(e),o=t!==dd,r=null===t,u=t==t,l=Ir(t);if(!r&&!l&&!s&&t<e||s&&o&&u&&!r&&!l||n&&o&&u||!i&&u||!a)return 1;if(!n&&!s&&!l&&e<t||l&&i&&a&&!n&&!s||r&&i&&a||!o&&a||!u)return-1}return 0}function Vi(e,t,i){for(var n=-1,a=e.criteria,s=t.criteria,o=a.length,r=i.length;++n<o;){var u=Xi(a[n],s[n]),l;if(u)return r<=n?u:u*("desc"==i[n]?-1:1)}return e.index-t.index}function Ui(e,t,i,n){for(var a=-1,s=e.length,o=i.length,r=-1,u=t.length,l=V(s-o,0),d=O(u+l),h=!n;++r<u;)d[r]=t[r];for(;++a<o;)(h||a<s)&&(d[i[a]]=e[a]);for(;l--;)d[r++]=e[a++];return d}function Zi(e,t,i,n){for(var a=-1,s=e.length,o=-1,r=i.length,u=-1,l=t.length,d=V(s-r,0),h=O(d+l),p=!n;++a<d;)h[a]=e[a];for(var c=a;++u<l;)h[c+u]=t[u];for(;++o<r;)(p||a<s)&&(h[c+i[o]]=e[a++]);return h}function Yi(e,t){var i=-1,n=e.length;for(t=t||O(n);++i<n;)t[i]=e[i];return t}function Hi(e,t,i,n){var a=!i;i=i||{};for(var s=-1,o=t.length;++s<o;){var r=t[s],u=n?n(i[r],e[r],r,i,e):dd;u===dd&&(u=e[r]),a?ot(i,r,u):tt(i,r,u)}return i}function Ji(e,t){return Hi(e,Wn(e),t)}function $i(e,t){return Hi(e,Dn(e),t)}function Ki(a,s){return function(e,t){var i=tr(e)?$h:nt,n=s?s():{};return i(e,a,En(t,2),n)}}function en(r){return pi(function(e,t){var i=-1,n=t.length,a=1<n?t[n-1]:dd,s=2<n?t[2]:dd;for(a=3<r.length&&"function"==typeof a?(n--,a):dd,s&&Kn(t[0],t[1],s)&&(a=n<3?dd:a,n=1),e=c(e);++i<n;){var o=t[i];o&&r(e,o,i,a)}return e})}function tn(s,o){return function(e,t){if(null==e)return e;if(!nr(e))return s(e,t);for(var i=e.length,n=o?i:-1,a=c(e);(o?n--:++n<i)&&!1!==t(a[n],n,a););return e}}function nn(u){return function(e,t,i){for(var n=-1,a=c(e),s=i(e),o=s.length;o--;){var r=s[u?o:++n];if(!1===t(a[r],r,a))break}return e}}function an(t,e,i){var n=1&e,a=rn(t);function s(){var e;return(this&&this!==Fh&&this instanceof s?a:t).apply(n?i:this,arguments)}return s}function sn(a){return function(e){var t=Np(e=Vr(e))?Fp(e):dd,i=t?t[0]:e.charAt(0),n=t?Gi(t,1).join(""):e.slice(1);return i[a]()+n}}function on(t){return function(e){return rp(_l(Wu(e).replace(Ah,"")),t,"")}}function rn(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=ge(n.prototype),i=n.apply(t,e);return vr(i)?i:t}}function un(o,r,u){var l=rn(o);function d(){for(var e=arguments.length,t=O(e),i=e,n=An(d);i--;)t[i]=arguments[i];var a=e<3&&t[0]!==n&&t[e-1]!==n?[]:qp(t,n),s;return(e-=a.length)<u?bn(o,r,hn,d.placeholder,dd,t,a,dd,dd,u-e):Jh(this&&this!==Fh&&this instanceof d?l:o,this,t)}return d}function ln(o){return function(e,t,i){var n=c(e);if(!nr(e)){var a=En(t,3);e=gu(e),t=function(e){return a(n[e],e,n)}}var s=o(e,t,i);return-1<s?n[a?e[s]:s]:dd}}function dn(u){return wn(function(a){var s=a.length,e=s,t=me.prototype.thru;for(u&&a.reverse();e--;){var i=a[e];if("function"!=typeof i)throw new P(cd);if(t&&!o&&"wrapper"==jn(i))var o=new me([],!0)}for(e=o?e:s;++e<s;){var n=jn(i=a[e]),r="wrapper"==n?Nn(i):dd;o=r&&ia(r[0])&&424==r[1]&&!r[4].length&&1==r[9]?o[jn(r[0])].apply(o,r[3]):1==i.length&&ia(i)?o[n]():o.thru(i)}return function(){var e=arguments,t=e[0];if(o&&1==e.length&&tr(t))return o.plant(t).value();for(var i=0,n=s?a[i].apply(this,e):t;++i<s;)n=a[i].call(this,n);return n}})}function hn(u,l,d,h,p,c,_,g,f,v){var m=128&l,b=1&l,y=2&l,S=24&l,P=512&l,M=y?dd:rn(u);function k(){for(var e=arguments.length,t=O(e),i=e;i--;)t[i]=arguments[i];if(S)var n=An(k),a=Cp(t,n);if(h&&(t=Ui(t,h,p,S)),c&&(t=Zi(t,c,_,S)),e-=a,S&&e<v){var s=qp(t,n);return bn(u,l,hn,k.placeholder,d,t,s,g,f,v-e)}var o=b?d:this,r=y?o[u]:u;return e=t.length,g?t=_a(t,g):P&&1<e&&t.reverse(),m&&f<e&&(t.length=f),this&&this!==Fh&&this instanceof k&&(r=M||rn(r)),r.apply(o,t)}return k}function pn(i,n){return function(e,t){return jt(e,i,n(t),{})}}function cn(n,a){return function(e,t){var i;if(e===dd&&t===dd)return a;if(e!==dd&&(i=e),t!==dd){if(i===dd)return t;t="string"==typeof e||"string"==typeof t?(e=Oi(e),Oi(t)):(e=ki(e),ki(t)),i=n(e,t)}return i}}function _n(n){return wn(function(e){return e=sp(e,Mp(En())),pi(function(t){var i=this;return n(e,function(e){return Jh(e,i,t)})})})}function gn(e,t){var i=(t=t===dd?" ":Oi(t)).length;if(i<2)return i?hi(t,e):t;var n=hi(t,R(e/Dp(t)));return Np(t)?Gi(Fp(n),0,e).join(""):n.slice(0,e)}function fn(o,e,r,u){var l=1&e,d=rn(o);function h(){for(var e=-1,t=arguments.length,i=-1,n=u.length,a=O(n+t),s=this&&this!==Fh&&this instanceof h?d:o;++i<n;)a[i]=u[i];for(;t--;)a[i++]=arguments[++e];return Jh(s,l?r:this,a)}return h}function vn(n){return function(e,t,i){return i&&"number"!=typeof i&&Kn(e,t,i)&&(t=i=dd),e=zr(e),t===dd?(t=e,e=0):t=zr(t),di(e,t,i=i===dd?e<t?1:-1:zr(i),n)}}function mn(i){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=Fr(e),t=Fr(t)),i(e,t)}}function bn(e,t,i,n,a,s,o,r,u,l){var d=8&t,h,p,c,_;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var g=[e,t,a,d?s:dd,d?o:dd,d?dd:s,d?dd:o,r,u,l],f=i.apply(dd,g);return ia(e)&&fa(f,g),f.placeholder=n,ba(f,e,t)}function yn(e){var a=s[e];return function(e,t){if(e=Fr(e),(t=null==t?0:U(Wr(t),292))&&F(e)){var i=(Vr(e)+"e").split("e"),n;return+((i=(Vr(a(i[0]+"e"+(+i[1]+t)))+"e").split("e"))[0]+"e"+(+i[1]-t))}return a(e)}}var Sn=te&&1/Rp(new te([,-0]))[1]==1/0?function(e){return new te(e)}:Ll;function Pn(i){return function(e){var t=Fn(e);return t==Nd?Ep(e):t==zd?zp(e):Pp(e,i(e))}}function Mn(e,t,i,n,a,s,o,r){var u=2&t;if(!u&&"function"!=typeof e)throw new P(cd);var l=n?n.length:0;if(l||(t&=-97,n=a=dd),o=o===dd?o:V(Wr(o),0),r=r===dd?r:Wr(r),l-=a?a.length:0,64&t){var d=n,h=a;n=a=dd}var p=u?dd:Nn(e),c=[e,t,i,n,a,d,h,s,o,r],_;if(p&&la(c,p),e=c[0],t=c[1],i=c[2],n=c[3],a=c[4],!(r=c[9]=c[9]===dd?u?0:e.length:V(c[9]-l,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?un(e,t,r):32!=t&&33!=t||a.length?hn.apply(dd,c):fn(e,t,i,n);else var g=an(e,t,i);return ba((p?fi:fa)(g,c),e,t)}function kn(e,t,i,n){return e===dd||Jo(e,h[i])&&!S.call(n,i)?t:e}function On(e,t,i,n,a,s){return vr(e)&&vr(t)&&(s.set(t,e),ei(e,t,dd,On,s),s.delete(t)),e}function Bn(e){return xr(e)?dd:e}function xn(e,t,i,n,a,s){var o=1&i,r=e.length,u=t.length;if(r!=u&&!(o&&r<u))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var d=-1,h=!0,p=2&i?new We:dd;for(s.set(e,t),s.set(t,e);++d<r;){var c=e[d],_=t[d];if(n)var g=o?n(_,c,d,t,e,s):n(c,_,d,e,t,s);if(g!==dd){if(g)continue;h=!1;break}if(p){if(!lp(t,function(e,t){if(!Op(p,t)&&(c===e||a(c,e,i,n,s)))return p.push(t)})){h=!1;break}}else if(c!==_&&!a(c,_,i,n,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Cn(e,t,i,n,a,s,o){switch(i){case Ud:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Vd:return!(e.byteLength!=t.byteLength||!s(new B(e),new B(t)));case xd:case Cd:case jd:return Jo(+e,+t);case wd:return e.name==t.name&&e.message==t.message;case Rd:case Wd:return e==t+"";case Nd:var r=Ep;case zd:var u=1&n;if(r=r||Rp,e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;n|=2,o.set(e,t);var d=xn(r(e),r(t),n,a,s,o);return o.delete(e),d;case Dd:if(pe)return pe.call(e)==pe.call(t)}return!1}function Tn(e,t,i,n,a,s){var o=1&i,r=Ln(e),u=r.length,l,d;if(u!=Ln(t).length&&!o)return!1;for(var h=u;h--;){var p=r[h];if(!(o?p in t:S.call(t,p)))return!1}var c=s.get(e);if(c&&s.get(t))return c==t;var _=!0;s.set(e,t),s.set(t,e);for(var g=o;++h<u;){var f=e[p=r[h]],v=t[p];if(n)var m=o?n(v,f,p,t,e,s):n(f,v,p,e,t,s);if(!(m===dd?f===v||a(f,v,i,n,s):m)){_=!1;break}g=g||"constructor"==p}if(_&&!g){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(_=!1)}return s.delete(e),s.delete(t),_}function wn(e){return ma(pa(e,dd,za),e+"")}function Ln(e){return xt(e,gu,Wn)}function In(e){return xt(e,fu,Dn)}var Nn=ae?function(e){return ae.get(e)}:Ll;function jn(e){for(var t=e.name+"",i=se[t],n=S.call(se,t)?i.length:0;n--;){var a=i[n],s=a.func;if(null==s||s==e)return a.name}return t}function An(e){var t;return(S.call(_e,"placeholder")?_e:e).placeholder}function En(){var e=_e.iteratee||kl;return e=e===kl?Ut:e,arguments.length?e(arguments[0],arguments[1]):e}function Gn(e,t){var i=e.__data__;return ta(t)?i["string"==typeof t?"string":"hash"]:i.map}function qn(e){for(var t=gu(e),i=t.length;i--;){var n=t[i],a=e[n];t[i]=[n,a,oa(a)]}return t}function Rn(e,t){var i=Ip(e,t);return Ft(i)?i:dd}function zn(e){var t=S.call(e,j),i=e[j];try{e[j]=dd;var n=!0}catch(e){}var a=g.call(e);return n&&(t?e[j]=i:delete e[j]),a}var Wn=W?function(t){return null==t?[]:(t=c(t),ip(W(t),function(e){return w.call(t,e)}))}:zl,Dn=W?function(e){for(var t=[];e;)op(t,Wn(e)),e=C(e);return t}:zl,Fn=Ct;function Qn(e,t,i){for(var n=-1,a=i.length;++n<a;){var s=i[n],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=U(t,e+o);break;case"takeRight":e=V(e,t-o)}}return{start:e,end:t}}function Xn(e){var t=e.match(Ph);return t?t[1].split(Mh):[]}function Vn(e,t,i){for(var n=-1,a=(t=Ai(t,e)).length,s=!1;++n<a;){var o=Ma(t[n]);if(!(s=null!=e&&i(e,o)))break;e=e[o]}return s||++n!=a?s:!!(a=null==e?0:e.length)&&fr(a)&&$n(o,a)&&(tr(e)||er(e))}function Un(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&S.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Zn(e){return"function"!=typeof e.constructor||sa(e)?{}:ge(C(e))}function Yn(e,t,i){var n=e.constructor;switch(t){case Vd:return zi(e);case xd:case Cd:return new n(+e);case Ud:return Wi(e,i);case Zd:case Yd:case Hd:case Jd:case $d:case Kd:case eh:case th:case ih:return Qi(e,i);case Nd:return new n;case jd:case Wd:return new n(e);case Rd:return Di(e);case zd:return new n;case Dd:return Fi(e)}}function Hn(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(1<i?"& ":"")+t[n],t=t.join(2<i?", ":" "),e.replace(Sh,"{\n/* [wrapped with "+t+"] */\n")}function Jn(e){return tr(e)||er(e)||!!(I&&e&&e[I])}function $n(e,t){var i=typeof e;return!!(t=null==t?vd:t)&&("number"==i||"symbol"!=i&&Lh.test(e))&&-1<e&&e%1==0&&e<t}function Kn(e,t,i){if(!vr(i))return!1;var n=typeof t;return!!("number"==n?nr(i)&&$n(t,i.length):"string"==n&&t in i)&&Jo(i[t],e)}function ea(e,t){if(tr(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Ir(e))||(_h.test(e)||!ch.test(e)||null!=t&&e in c(t))}function ta(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function ia(e){var t=jn(e),i=_e[t];if("function"!=typeof i||!(t in be.prototype))return!1;if(e===i)return!0;var n=Nn(i);return!!n&&e===n[0]}function na(e){return!!p&&p in e}($&&Fn(new $(new ArrayBuffer(1)))!=Ud||K&&Fn(new K)!=Nd||ee&&Fn(ee.resolve())!=Gd||te&&Fn(new te)!=zd||ie&&Fn(new ie)!=Qd)&&(Fn=function(e){var t=Ct(e),i=t==Ed?e.constructor:dd,n=i?ka(i):"";if(n)switch(n){case oe:return Ud;case re:return Nd;case ue:return Gd;case le:return zd;case de:return Qd}return t});var aa=r?_r:Wl;function sa(e){var t=e&&e.constructor,i;return e===("function"==typeof t&&t.prototype||h)}function oa(e){return e==e&&!vr(e)}function ra(t,i){return function(e){return null!=e&&(e[t]===i&&(i!==dd||t in c(e)))}}function ua(e){var t=No(e,function(e){return 500===i.size&&i.clear(),e}),i=t.cache;return t}function la(e,t){var i=e[1],n=t[1],a=i|n,s=a<131,o=128==n&&8==i||128==n&&256==i&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i;if(!s&&!o)return e;1&n&&(e[2]=t[2],a|=1&i?0:4);var r=t[3];if(r){var u=e[3];e[3]=u?Ui(u,r,t[4]):r,e[4]=u?qp(e[3],gd):t[4]}return(r=t[5])&&(u=e[5],e[5]=u?Zi(u,r,t[6]):r,e[6]=u?qp(e[5],gd):t[6]),(r=t[7])&&(e[7]=r),128&n&&(e[8]=null==e[8]?t[8]:U(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a,e}function da(e){var t=[];if(null!=e)for(var i in c(e))t.push(i);return t}function ha(e){return g.call(e)}function pa(s,o,r){return o=V(o===dd?s.length-1:o,0),function(){for(var e=arguments,t=-1,i=V(e.length-o,0),n=O(i);++t<i;)n[t]=e[o+t];t=-1;for(var a=O(o+1);++t<o;)a[t]=e[t];return a[o]=r(n),Jh(s,this,a)}}function ca(e,t){return t.length<2?e:Bt(e,bi(t,0,-1))}function _a(e,t){for(var i=e.length,n=U(t.length,i),a=Yi(e);n--;){var s=t[n];e[n]=$n(s,i)?a[s]:dd}return e}function ga(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var fa=ya(fi),va=q||function(e,t){return Fh.setTimeout(e,t)},ma=ya(vi);function ba(e,t,i){var n=t+"";return ma(e,Hn(n,Oa(Xn(n),i)))}function ya(i){var n=0,a=0;return function(){var e=Z(),t=16-(e-a);if(a=e,0<t){if(800<=++n)return arguments[0]}else n=0;return i.apply(dd,arguments)}}function Sa(e,t){var i=-1,n=e.length,a=n-1;for(t=t===dd?n:t;++i<t;){var s=li(i,a),o=e[s];e[s]=e[i],e[i]=o}return e.length=t,e}var Pa=ua(function(e){var a=[];return 46===e.charCodeAt(0)&&a.push(""),e.replace(gh,function(e,t,i,n){a.push(i?n.replace(kh,"$1"):t||e)}),a});function Ma(e){if("string"==typeof e||Ir(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ka(e){if(null!=e){try{return u.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Oa(i,n){return Kh(Md,function(e){var t="_."+e[0];n&e[1]&&!np(i,t)&&i.push(t)}),i.sort()}function Ba(e){if(e instanceof be)return e.clone();var t=new me(e.__wrapped__,e.__chain__);return t.__actions__=Yi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function xa(e,t,i){t=(i?Kn(e,t,i):t===dd)?1:V(Wr(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var a=0,s=0,o=O(R(n/t));a<n;)o[s++]=bi(e,a,a+=t);return o}function Ca(e){for(var t=-1,i=null==e?0:e.length,n=0,a=[];++t<i;){var s=e[t];s&&(a[n++]=s)}return a}function Ta(){var e=arguments.length;if(!e)return[];for(var t=O(e-1),i=arguments[0],n=e;n--;)t[n-1]=arguments[n];return op(tr(i)?Yi(i):[i],yt(t,1))}var wa=pi(function(e,t){return ar(e)?ct(e,yt(t,1,ar,!0)):[]}),La=pi(function(e,t){var i=Ja(t);return ar(i)&&(i=dd),ar(e)?ct(e,yt(t,1,ar,!0),En(i,2)):[]}),Ia=pi(function(e,t){var i=Ja(t);return ar(i)&&(i=dd),ar(e)?ct(e,yt(t,1,ar,!0),dd,i):[]});function Na(e,t,i){var n=null==e?0:e.length;return n?bi(e,(t=i||t===dd?1:Wr(t))<0?0:t,n):[]}function ja(e,t,i){var n=null==e?0:e.length;return n?bi(e,0,(t=n-(t=i||t===dd?1:Wr(t)))<0?0:t):[]}function Aa(e,t){return e&&e.length?Ti(e,En(t,3),!0,!0):[]}function Ea(e,t){return e&&e.length?Ti(e,En(t,3),!0):[]}function Ga(e,t,i,n){var a=null==e?0:e.length;return a?(i&&"number"!=typeof i&&Kn(e,t,i)&&(i=0,n=a),mt(e,t,i,n)):[]}function qa(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var a=null==i?0:Wr(i);return a<0&&(a=V(n+a,0)),pp(e,En(t,3),a)}function Ra(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var a=n-1;return i!==dd&&(a=Wr(i),a=i<0?V(n+a,0):U(a,n-1)),pp(e,En(t,3),a,!0)}function za(e){var t;return(null==e?0:e.length)?yt(e,1):[]}function Wa(e){var t;return(null==e?0:e.length)?yt(e,1/0):[]}function Da(e,t){var i;return(null==e?0:e.length)?yt(e,t=t===dd?1:Wr(t)):[]}function Fa(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var a=e[t];n[a[0]]=a[1]}return n}function Qa(e){return e&&e.length?e[0]:dd}function Xa(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var a=null==i?0:Wr(i);return a<0&&(a=V(n+a,0)),cp(e,t,a)}function Va(e){var t;return(null==e?0:e.length)?bi(e,0,-1):[]}var Ua=pi(function(e){var t=sp(e,Ni);return t.length&&t[0]===e[0]?Nt(t):[]}),Za=pi(function(e){var t=Ja(e),i=sp(e,Ni);return t===Ja(i)?t=dd:i.pop(),i.length&&i[0]===e[0]?Nt(i,En(t,2)):[]}),Ya=pi(function(e){var t=Ja(e),i=sp(e,Ni);return(t="function"==typeof t?t:dd)&&i.pop(),i.length&&i[0]===e[0]?Nt(i,dd,t):[]});function Ha(e,t){return null==e?"":Q.call(e,t)}function Ja(e){var t=null==e?0:e.length;return t?e[t-1]:dd}function $a(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var a=n;return i!==dd&&(a=(a=Wr(i))<0?V(n+a,0):U(a,n-1)),t==t?Wp(e,t,a):pp(e,gp,a,!0)}function Ka(e,t){return e&&e.length?ii(e,Wr(t)):dd}var es=pi(ts);function ts(e,t){return e&&e.length&&t&&t.length?ri(e,t):e}function is(e,t,i){return e&&e.length&&t&&t.length?ri(e,t,En(i,2)):e}function ns(e,t,i){return e&&e.length&&t&&t.length?ri(e,t,dd,i):e}var as=wn(function(e,t){var i=null==e?0:e.length,n=rt(e,t);return ui(e,sp(t,function(e){return $n(e,i)?+e:e}).sort(Xi)),n});function ss(e,t){var i=[];if(!e||!e.length)return i;var n=-1,a=[],s=e.length;for(t=En(t,3);++n<s;){var o=e[n];t(o,n,e)&&(i.push(o),a.push(n))}return ui(e,a),i}function os(e){return null==e?e:J.call(e)}function rs(e,t,i){var n=null==e?0:e.length;return n?(i=i&&"number"!=typeof i&&Kn(e,t,i)?(t=0,n):(t=null==t?0:Wr(t),i===dd?n:Wr(i)),bi(e,t,i)):[]}function us(e,t){return Si(e,t)}function ls(e,t,i){return Pi(e,t,En(i,2))}function ds(e,t){var i=null==e?0:e.length;if(i){var n=Si(e,t);if(n<i&&Jo(e[n],t))return n}return-1}function hs(e,t){return Si(e,t,!0)}function ps(e,t,i){return Pi(e,t,En(i,2),!0)}function cs(e,t){var i;if(null==e?0:e.length){var n=Si(e,t,!0)-1;if(Jo(e[n],t))return n}return-1}function _s(e){return e&&e.length?Mi(e):[]}function gs(e,t){return e&&e.length?Mi(e,En(t,2)):[]}function fs(e){var t=null==e?0:e.length;return t?bi(e,1,t):[]}function vs(e,t,i){return e&&e.length?bi(e,0,(t=i||t===dd?1:Wr(t))<0?0:t):[]}function ms(e,t,i){var n=null==e?0:e.length;return n?bi(e,(t=n-(t=i||t===dd?1:Wr(t)))<0?0:t,n):[]}function bs(e,t){return e&&e.length?Ti(e,En(t,3),!1,!0):[]}function ys(e,t){return e&&e.length?Ti(e,En(t,3)):[]}var Ss=pi(function(e){return Bi(yt(e,1,ar,!0))}),Ps=pi(function(e){var t=Ja(e);return ar(t)&&(t=dd),Bi(yt(e,1,ar,!0),En(t,2))}),Ms=pi(function(e){var t=Ja(e);return t="function"==typeof t?t:dd,Bi(yt(e,1,ar,!0),dd,t)});function ks(e){return e&&e.length?Bi(e):[]}function Os(e,t){return e&&e.length?Bi(e,En(t,2)):[]}function Bs(e,t){return t="function"==typeof t?t:dd,e&&e.length?Bi(e,dd,t):[]}function xs(t){if(!t||!t.length)return[];var i=0;return t=ip(t,function(e){if(ar(e))return i=V(e.length,i),!0}),Sp(i,function(e){return sp(t,vp(e))})}function Cs(e,t){if(!e||!e.length)return[];var i=xs(e);return null==t?i:sp(i,function(e){return Jh(t,dd,e)})}var Ts=pi(function(e,t){return ar(e)?ct(e,t):[]}),ws=pi(function(e){return Li(ip(e,ar))}),Ls=pi(function(e){var t=Ja(e);return ar(t)&&(t=dd),Li(ip(e,ar),En(t,2))}),Is=pi(function(e){var t=Ja(e);return t="function"==typeof t?t:dd,Li(ip(e,ar),dd,t)}),Ns=pi(xs);function js(e,t){return Ii(e||[],t||[],tt)}function As(e,t){return Ii(e||[],t||[],gi)}var Es=pi(function(e){var t=e.length,i=1<t?e[t-1]:dd;return i="function"==typeof i?(e.pop(),i):dd,Cs(e,i)});function Gs(e){var t=_e(e);return t.__chain__=!0,t}function qs(e,t){return t(e),e}function Rs(e,t){return t(e)}var zs=wn(function(t){var i=t.length,e=i?t[0]:0,n=this.__wrapped__,a=function(e){return rt(e,t)};return!(1<i||this.__actions__.length)&&n instanceof be&&$n(e)?((n=n.slice(e,+e+(i?1:0))).__actions__.push({func:Rs,args:[a],thisArg:dd}),new me(n,this.__chain__).thru(function(e){return i&&!e.length&&e.push(dd),e})):this.thru(a)});function Ws(){return Gs(this)}function Ds(){return new me(this.value(),this.__chain__)}function Fs(){this.__values__===dd&&(this.__values__=Rr(this.value()));var e=this.__index__>=this.__values__.length,t;return{done:e,value:e?dd:this.__values__[this.__index__++]}}function Qs(){return this}function Xs(e){for(var t,i=this;i instanceof ve;){var n=Ba(i);n.__index__=0,n.__values__=dd,t?a.__wrapped__=n:t=n;var a=n;i=i.__wrapped__}return a.__wrapped__=e,t}function Vs(){var e=this.__wrapped__;if(e instanceof be){var t=e;return this.__actions__.length&&(t=new be(this)),(t=t.reverse()).__actions__.push({func:Rs,args:[os],thisArg:dd}),new me(t,this.__chain__)}return this.thru(os)}function Us(){return wi(this.__wrapped__,this.__actions__)}var Zs=Ki(function(e,t,i){S.call(e,i)?++e[i]:ot(e,i,1)});function Ys(e,t,i){var n=tr(e)?tp:ft;return i&&Kn(e,t,i)&&(t=dd),n(e,En(t,3))}function Hs(e,t){var i;return(tr(e)?ip:bt)(e,En(t,3))}var Js=ln(qa),$s=ln(Ra);function Ks(e,t){return yt(uo(e,t),1)}function eo(e,t){return yt(uo(e,t),1/0)}function to(e,t,i){return i=i===dd?1:Wr(i),yt(uo(e,t),i)}function io(e,t){var i;return(tr(e)?Kh:_t)(e,En(t,3))}function no(e,t){var i;return(tr(e)?ep:gt)(e,En(t,3))}var ao=Ki(function(e,t,i){S.call(e,i)?e[i].push(t):ot(e,i,[t])});function so(e,t,i,n){e=nr(e)?e:ju(e),i=i&&!n?Wr(i):0;var a=e.length;return i<0&&(i=V(a+i,0)),Lr(e)?i<=a&&-1<e.indexOf(t,i):!!a&&-1<cp(e,t,i)}var oo=pi(function(e,t,i){var n=-1,a="function"==typeof t,s=nr(e)?O(e.length):[];return _t(e,function(e){s[++n]=a?Jh(t,e,i):At(e,t,i)}),s}),ro=Ki(function(e,t,i){ot(e,i,t)});function uo(e,t){var i;return(tr(e)?sp:Jt)(e,En(t,3))}function lo(e,t,i,n){return null==e?[]:(tr(t)||(t=null==t?[]:[t]),tr(i=n?dd:i)||(i=null==i?[]:[i]),ni(e,t,i))}var ho=Ki(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function po(e,t,i){var n=tr(e)?rp:mp,a=arguments.length<3;return n(e,En(t,4),i,a,_t)}function co(e,t,i){var n=tr(e)?up:mp,a=arguments.length<3;return n(e,En(t,4),i,a,gt)}function _o(e,t){var i;return(tr(e)?ip:bt)(e,jo(En(t,3)))}function go(e){var t;return(tr(e)?Je:ci)(e)}function fo(e,t,i){var n;return t=(i?Kn(e,t,i):t===dd)?1:Wr(t),(tr(e)?$e:_i)(e,t)}function vo(e){var t;return(tr(e)?Ke:mi)(e)}function mo(e){if(null==e)return 0;if(nr(e))return Lr(e)?Dp(e):e.length;var t=Fn(e);return t==Nd||t==zd?e.size:Zt(e).length}function bo(e,t,i){var n=tr(e)?lp:yi;return i&&Kn(e,t,i)&&(t=dd),n(e,En(t,3))}var yo=pi(function(e,t){if(null==e)return[];var i=t.length;return 1<i&&Kn(e,t[0],t[1])?t=[]:2<i&&Kn(t[0],t[1],t[2])&&(t=[t[0]]),ni(e,yt(t,1),[])}),So=G||function(){return Fh.Date.now()};function Po(e,t){if("function"!=typeof t)throw new P(cd);return e=Wr(e),function(){if(--e<1)return t.apply(this,arguments)}}function Mo(e,t,i){return t=i?dd:t,t=e&&null==t?e.length:t,Mn(e,128,dd,dd,dd,dd,t)}function ko(e,t){var i;if("function"!=typeof t)throw new P(cd);return e=Wr(e),function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=dd),i}}var Oo=pi(function(e,t,i){var n=1;if(i.length){var a=qp(i,An(Oo));n|=32}return Mn(e,n,t,i,a)}),Bo=pi(function(e,t,i){var n=3;if(i.length){var a=qp(i,An(Bo));n|=32}return Mn(t,n,e,i,a)});function xo(e,t,i){var n=Mn(e,8,dd,dd,dd,dd,dd,t=i?dd:t);return n.placeholder=xo.placeholder,n}function Co(e,t,i){var n=Mn(e,16,dd,dd,dd,dd,dd,t=i?dd:t);return n.placeholder=Co.placeholder,n}function To(n,a,e){var s,o,r,u,i,l,d=0,t=!1,h=!1,p=!0;if("function"!=typeof n)throw new P(cd);function c(e){var t=s,i=o;return s=o=dd,d=e,u=n.apply(i,t)}function _(e){return d=e,i=va(v,a),t?c(e):u}function g(e){var t,i,n=a-(e-l);return h?U(n,r-(e-d)):n}function f(e){var t=e-l,i;return l===dd||a<=t||t<0||h&&r<=e-d}function v(){var e=So();if(f(e))return m(e);i=va(v,g(e))}function m(e){return i=dd,p&&s?c(e):(s=o=dd,u)}function b(){i!==dd&&qi(i),d=0,s=l=o=i=dd}function y(){return i===dd?u:m(So())}function S(){var e=So(),t=f(e);if(s=arguments,o=this,l=e,t){if(i===dd)return _(l);if(h)return qi(i),i=va(v,a),c(l)}return i===dd&&(i=va(v,a)),u}return a=Fr(a)||0,vr(e)&&(t=!!e.leading,r=(h="maxWait"in e)?V(Fr(e.maxWait)||0,a):r,p="trailing"in e?!!e.trailing:p),S.cancel=b,S.flush=y,S}var wo=pi(function(e,t){return pt(e,1,t)}),Lo=pi(function(e,t,i){return pt(e,Fr(t)||0,i)});function Io(e){return Mn(e,512)}function No(a,s){if("function"!=typeof a||null!=s&&"function"!=typeof s)throw new P(cd);var o=function(){var e=arguments,t=s?s.apply(this,e):e[0],i=o.cache;if(i.has(t))return i.get(t);var n=a.apply(this,e);return o.cache=i.set(t,n)||i,n};return o.cache=new(No.Cache||Ae),o}function jo(t){if("function"!=typeof t)throw new P(cd);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ao(e){return ko(2,e)}No.Cache=Ae;var Eo=Ei(function(n,a){var s=(a=1==a.length&&tr(a[0])?sp(a[0],Mp(En())):sp(yt(a,1),Mp(En()))).length;return pi(function(e){for(var t=-1,i=U(e.length,s);++t<i;)e[t]=a[t].call(this,e[t]);return Jh(n,this,e)})}),Go=pi(function(e,t){var i=qp(t,An(Go));return Mn(e,32,dd,t,i)}),qo=pi(function(e,t){var i=qp(t,An(qo));return Mn(e,64,dd,t,i)}),Ro=wn(function(e,t){return Mn(e,256,dd,dd,dd,t)});function zo(e,t){if("function"!=typeof e)throw new P(cd);return pi(e,t=t===dd?t:Wr(t))}function Wo(n,a){if("function"!=typeof n)throw new P(cd);return a=null==a?0:V(Wr(a),0),pi(function(e){var t=e[a],i=Gi(e,0,a);return t&&op(i,t),Jh(n,this,i)})}function Do(e,t,i){var n=!0,a=!0;if("function"!=typeof e)throw new P(cd);return vr(i)&&(n="leading"in i?!!i.leading:n,a="trailing"in i?!!i.trailing:a),To(e,t,{leading:n,maxWait:t,trailing:a})}function Fo(e){return Mo(e,1)}function Qo(e,t){return Go(ji(t),e)}function Xo(){if(!arguments.length)return[];var e=arguments[0];return tr(e)?e:[e]}function Vo(e){return lt(e,4)}function Uo(e,t){return lt(e,4,t="function"==typeof t?t:dd)}function Zo(e){return lt(e,5)}function Yo(e,t){return lt(e,5,t="function"==typeof t?t:dd)}function Ho(e,t){return null==t||ht(e,t,gu(t))}function Jo(e,t){return e===t||e!=e&&t!=t}var $o=mn(Tt),Ko=mn(function(e,t){return t<=e}),er=Et(function(){return arguments}())?Et:function(e){return mr(e)&&S.call(e,"callee")&&!w.call(e,"callee")},tr=O.isArray,ir=Xh?Mp(Xh):Gt;function nr(e){return null!=e&&fr(e.length)&&!_r(e)}function ar(e){return mr(e)&&nr(e)}function sr(e){return!0===e||!1===e||mr(e)&&Ct(e)==xd}var or=D||Wl,rr=Vh?Mp(Vh):qt;function ur(e){return mr(e)&&1===e.nodeType&&!xr(e)}function lr(e){if(null==e)return!0;if(nr(e)&&(tr(e)||"string"==typeof e||"function"==typeof e.splice||or(e)||Nr(e)||er(e)))return!e.length;var t=Fn(e);if(t==Nd||t==zd)return!e.size;if(sa(e))return!Zt(e).length;for(var i in e)if(S.call(e,i))return!1;return!0}function dr(e,t){return Rt(e,t)}function hr(e,t,i){var n=(i="function"==typeof i?i:dd)?i(e,t):dd;return n===dd?Rt(e,t,dd,i):!!n}function pr(e){if(!mr(e))return!1;var t=Ct(e);return t==wd||t==Td||"string"==typeof e.message&&"string"==typeof e.name&&!xr(e)}function cr(e){return"number"==typeof e&&F(e)}function _r(e){if(!vr(e))return!1;var t=Ct(e);return t==Ld||t==Id||t==Bd||t==qd}function gr(e){return"number"==typeof e&&e==Wr(e)}function fr(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=vd}function vr(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function mr(e){return null!=e&&"object"==typeof e}var br=Uh?Mp(Uh):Wt;function yr(e,t){return e===t||Dt(e,t,qn(t))}function Sr(e,t,i){return i="function"==typeof i?i:dd,Dt(e,t,qn(t),i)}function Pr(e){return Br(e)&&e!=+e}function Mr(e){if(aa(e))throw new n(pd);return Ft(e)}function kr(e){return null===e}function Or(e){return null==e}function Br(e){return"number"==typeof e||mr(e)&&Ct(e)==jd}function xr(e){if(!mr(e)||Ct(e)!=Ed)return!1;var t=C(e);if(null===t)return!0;var i=S.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&u.call(i)==m}var Cr=Zh?Mp(Zh):Qt;function Tr(e){return gr(e)&&-vd<=e&&e<=vd}var wr=Yh?Mp(Yh):Xt;function Lr(e){return"string"==typeof e||!tr(e)&&mr(e)&&Ct(e)==Wd}function Ir(e){return"symbol"==typeof e||mr(e)&&Ct(e)==Dd}var Nr=Hh?Mp(Hh):Vt;function jr(e){return e===dd}function Ar(e){return mr(e)&&Fn(e)==Qd}function Er(e){return mr(e)&&Ct(e)==Xd}var Gr=mn(Ht),qr=mn(function(e,t){return e<=t});function Rr(e){if(!e)return[];if(nr(e))return Lr(e)?Fp(e):Yi(e);if(N&&e[N])return Ap(e[N]());var t=Fn(e),i;return(t==Nd?Ep:t==zd?Rp:ju)(e)}function zr(e){return e?(e=Fr(e))!==1/0&&e!==-1/0?e==e?e:0:(e<0?-1:1)*md:0===e?e:0;var t}function Wr(e){var t=zr(e),i=t%1;return t==t?i?t-i:t:0}function Dr(e){return e?ut(Wr(e),0,yd):0}function Fr(e){if("number"==typeof e)return e;if(Ir(e))return bd;if(vr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=vr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(mh,"");var i=Ch.test(e);return i||wh.test(e)?Dh(e.slice(2),i?2:8):xh.test(e)?bd:+e}function Qr(e){return Hi(e,fu(e))}function Xr(e){return e?ut(Wr(e),-vd,vd):0===e?e:0}function Vr(e){return null==e?"":Oi(e)}var Ur=en(function(e,t){if(sa(t)||nr(t))Hi(t,gu(t),e);else for(var i in t)S.call(t,i)&&tt(e,i,t[i])}),Zr=en(function(e,t){Hi(t,fu(t),e)}),Yr=en(function(e,t,i,n){Hi(t,fu(t),e,n)}),Hr=en(function(e,t,i,n){Hi(t,gu(t),e,n)}),Jr=wn(rt);function $r(e,t){var i=ge(e);return null==t?i:at(i,t)}var Kr=pi(function(e,t){e=c(e);var i=-1,n=t.length,a=2<n?t[2]:dd;for(a&&Kn(t[0],t[1],a)&&(n=1);++i<n;)for(var s=t[i],o=fu(s),r=-1,u=o.length;++r<u;){var l=o[r],d=e[l];(d===dd||Jo(d,h[l])&&!S.call(e,l))&&(e[l]=s[l])}return e}),eu=pi(function(e){return e.push(dd,On),Jh(yu,dd,e)});function tu(e,t){return hp(e,En(t,3),Mt)}function iu(e,t){return hp(e,En(t,3),kt)}function nu(e,t){return null==e?e:St(e,En(t,3),fu)}function au(e,t){return null==e?e:Pt(e,En(t,3),fu)}function su(e,t){return e&&Mt(e,En(t,3))}function ou(e,t){return e&&kt(e,En(t,3))}function ru(e){return null==e?[]:Ot(e,gu(e))}function uu(e){return null==e?[]:Ot(e,fu(e))}function lu(e,t,i){var n=null==e?dd:Bt(e,t);return n===dd?i:n}function du(e,t){return null!=e&&Vn(e,t,wt)}function hu(e,t){return null!=e&&Vn(e,t,Lt)}var pu=pn(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=g.call(t)),e[t]=i},bl(Ml)),cu=pn(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=g.call(t)),S.call(e,t)?e[t].push(i):e[t]=[i]},En),_u=pi(At);function gu(e){return nr(e)?He(e):Zt(e)}function fu(e){return nr(e)?He(e,!0):Yt(e)}function vu(e,n){var a={};return n=En(n,3),Mt(e,function(e,t,i){ot(a,n(e,t,i),e)}),a}function mu(e,n){var a={};return n=En(n,3),Mt(e,function(e,t,i){ot(a,t,n(e,t,i))}),a}var bu=en(function(e,t,i){ei(e,t,i)}),yu=en(function(e,t,i,n){ei(e,t,i,n)}),Su=wn(function(t,e){var i={};if(null==t)return i;var n=!1;e=sp(e,function(e){return e=Ai(e,t),n=n||1<e.length,e}),Hi(t,In(t),i),n&&(i=lt(i,7,Bn));for(var a=e.length;a--;)xi(i,e[a]);return i});function Pu(e,t){return ku(e,jo(En(t)))}var Mu=wn(function(e,t){return null==e?{}:ai(e,t)});function ku(e,i){if(null==e)return{};var t=sp(In(e),function(e){return[e]});return i=En(i),si(e,t,function(e,t){return i(e,t[0])})}function Ou(e,t,i){var n=-1,a=(t=Ai(t,e)).length;for(a||(a=1,e=dd);++n<a;){var s=null==e?dd:e[Ma(t[n])];s===dd&&(n=a,s=i),e=_r(s)?s.call(e):s}return e}function Bu(e,t,i){return null==e?e:gi(e,t,i)}function xu(e,t,i,n){return n="function"==typeof n?n:dd,null==e?e:gi(e,t,i,n)}var Cu=Pn(gu),Tu=Pn(fu);function wu(e,n,a){var t=tr(e),i=t||or(e)||Nr(e);if(n=En(n,4),null==a){var s=e&&e.constructor;a=i?t?new s:[]:vr(e)&&_r(s)?ge(C(e)):{}}return(i?Kh:Mt)(e,function(e,t,i){return n(a,e,t,i)}),a}function Lu(e,t){return null==e||xi(e,t)}function Iu(e,t,i){return null==e?e:Ci(e,t,ji(i))}function Nu(e,t,i,n){return n="function"==typeof n?n:dd,null==e?e:Ci(e,t,ji(i),n)}function ju(e){return null==e?[]:kp(e,gu(e))}function Au(e){return null==e?[]:kp(e,fu(e))}function Eu(e,t,i){return i===dd&&(i=t,t=dd),i!==dd&&(i=(i=Fr(i))==i?i:0),t!==dd&&(t=(t=Fr(t))==t?t:0),ut(Fr(e),t,i)}function Gu(e,t,i){return t=zr(t),i===dd?(i=t,t=0):i=zr(i),It(e=Fr(e),t,i)}function qu(e,t,i){if(i&&"boolean"!=typeof i&&Kn(e,t,i)&&(t=i=dd),i===dd&&("boolean"==typeof t?(i=t,t=dd):"boolean"==typeof e&&(i=e,e=dd)),e===dd&&t===dd?(e=0,t=1):(e=zr(e),t===dd?(t=e,e=0):t=zr(t)),t<e){var n=e;e=t,t=n}if(i||e%1||t%1){var a=H();return U(e+a*(t-e+Wh("1e-"+((a+"").length-1))),t)}return li(e,t)}var Ru=on(function(e,t,i){return t=t.toLowerCase(),e+(i?zu(t):t)});function zu(e){return cl(Vr(e).toLowerCase())}function Wu(e){return(e=Vr(e))&&e.replace(Ih,Tp).replace(Eh,"")}function Du(e,t,i){e=Vr(e),t=Oi(t);var n=e.length,a=i=i===dd?n:ut(Wr(i),0,n);return 0<=(i-=t.length)&&e.slice(i,a)==t}function Fu(e){return(e=Vr(e))&&lh.test(e)?e.replace(rh,wp):e}function Qu(e){return(e=Vr(e))&&vh.test(e)?e.replace(fh,"\\$&"):e}var Xu=on(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Vu=on(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Uu=sn("toLowerCase");function Zu(e,t,i){e=Vr(e);var n=(t=Wr(t))?Dp(e):0;if(!t||t<=n)return e;var a=(t-n)/2;return gn(z(a),i)+e+gn(R(a),i)}function Yu(e,t,i){e=Vr(e);var n=(t=Wr(t))?Dp(e):0;return t&&n<t?e+gn(t-n,i):e}function Hu(e,t,i){e=Vr(e);var n=(t=Wr(t))?Dp(e):0;return t&&n<t?gn(t-n,i)+e:e}function Ju(e,t,i){return t=i||null==t?0:t&&+t,Y(Vr(e).replace(bh,""),t||0)}function $u(e,t,i){return t=(i?Kn(e,t,i):t===dd)?1:Wr(t),hi(Vr(e),t)}function Ku(){var e=arguments,t=Vr(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var el=on(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function tl(e,t,i){return i&&"number"!=typeof i&&Kn(e,t,i)&&(t=i=dd),(i=i===dd?yd:i>>>0)?(e=Vr(e))&&("string"==typeof t||null!=t&&!Cr(t))&&!(t=Oi(t))&&Np(e)?Gi(Fp(e),0,i):e.split(t,i):[]}var il=on(function(e,t,i){return e+(i?" ":"")+cl(t)});function nl(e,t,i){return e=Vr(e),i=null==i?0:ut(Wr(i),0,e.length),t=Oi(t),e.slice(i,i+t.length)==t}function al(o,e,t){var i=_e.templateSettings;t&&Kn(o,e,t)&&(e=dd),o=Vr(o),e=Yr({},e,i,kn);var n=Yr({},e.imports,i.imports,kn),a=gu(n),s=kp(n,a),r,u,l=0,d=e.interpolate||Nh,h="__p += '",p=v((e.escape||Nh).source+"|"+d.source+"|"+(d===ph?Oh:Nh).source+"|"+(e.evaluate||Nh).source+"|$","g"),c="//# sourceURL="+(S.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++qh+"]")+"\n";o.replace(p,function(e,t,i,n,a,s){return i=i||n,h+=o.slice(l,s).replace(jh,Lp),t&&(r=!0,h+="' +\n__e("+t+") +\n'"),a&&(u=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),h+="';\n";var _=S.call(e,"variable")&&e.variable;_||(h="with (obj) {\n"+h+"\n}\n"),h=(u?h.replace(nh,""):h).replace(ah,"$1").replace(sh,"$1;"),h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=gl(function(){return f(a,c+"return "+h).apply(dd,s)});if(g.source=h,pr(g))throw g;return g}function sl(e){return Vr(e).toLowerCase()}function ol(e){return Vr(e).toUpperCase()}function rl(e,t,i){if((e=Vr(e))&&(i||t===dd))return e.replace(mh,"");if(!e||!(t=Oi(t)))return e;var n=Fp(e),a=Fp(t),s,o;return Gi(n,Bp(n,a),xp(n,a)+1).join("")}function ul(e,t,i){if((e=Vr(e))&&(i||t===dd))return e.replace(yh,"");if(!e||!(t=Oi(t)))return e;var n=Fp(e),a;return Gi(n,0,xp(n,Fp(t))+1).join("")}function ll(e,t,i){if((e=Vr(e))&&(i||t===dd))return e.replace(bh,"");if(!e||!(t=Oi(t)))return e;var n=Fp(e),a;return Gi(n,Bp(n,Fp(t))).join("")}function dl(e,t){var i=30,n=fd;if(vr(t)){var a="separator"in t?t.separator:a;i="length"in t?Wr(t.length):i,n="omission"in t?Oi(t.omission):n}var s=(e=Vr(e)).length;if(Np(e)){var o=Fp(e);s=o.length}if(s<=i)return e;var r=i-Dp(n);if(r<1)return n;var u=o?Gi(o,0,r).join(""):e.slice(0,r);if(a===dd)return u+n;if(o&&(r+=u.length-r),Cr(a)){if(e.slice(r).search(a)){var l,d=u;for(a.global||(a=v(a.source,Vr(Bh.exec(a))+"g")),a.lastIndex=0;l=a.exec(d);)var h=l.index;u=u.slice(0,h===dd?r:h)}}else if(e.indexOf(Oi(a),r)!=r){var p=u.lastIndexOf(a);-1<p&&(u=u.slice(0,p))}return u+n}function hl(e){return(e=Vr(e))&&uh.test(e)?e.replace(oh,Qp):e}var pl=on(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),cl=sn("toUpperCase");function _l(e,t,i){return e=Vr(e),(t=i?dd:t)===dd?jp(e)?Xp(e):dp(e):e.match(t)||[]}var gl=pi(function(e,t){try{return Jh(e,dd,t)}catch(e){return pr(e)?e:new n(e)}}),fl=wn(function(t,e){return Kh(e,function(e){e=Ma(e),ot(t,e,Oo(t[e],t))}),t});function vl(n){var a=null==n?0:n.length,t=En();return n=a?sp(n,function(e){if("function"!=typeof e[1])throw new P(cd);return[t(e[0]),e[1]]}):[],pi(function(e){for(var t=-1;++t<a;){var i=n[t];if(Jh(i[0],this,e))return Jh(i[1],this,e)}})}function ml(e){return dt(lt(e,1))}function bl(e){return function(){return e}}function yl(e,t){return null==e||e!=e?t:e}var Sl=dn(),Pl=dn(!0);function Ml(e){return e}function kl(e){return Ut("function"==typeof e?e:lt(e,1))}function Ol(e){return $t(lt(e,1))}function Bl(e,t){return Kt(e,lt(t,1))}var xl=pi(function(t,i){return function(e){return At(e,t,i)}}),Cl=pi(function(t,i){return function(e){return At(t,e,i)}});function Tl(a,t,e){var i=gu(t),n=Ot(t,i);null!=e||vr(t)&&(n.length||!i.length)||(e=t,t=a,a=this,n=Ot(t,gu(t)));var s=!(vr(e)&&"chain"in e&&!e.chain),o=_r(a);return Kh(n,function(e){var n=t[e];a[e]=n,o&&(a.prototype[e]=function(){var e=this.__chain__;if(s||e){var t=a(this.__wrapped__),i;return(t.__actions__=Yi(this.__actions__)).push({func:n,args:arguments,thisArg:a}),t.__chain__=e,t}return n.apply(a,op([this.value()],arguments))})}),a}function wl(){return Fh._===this&&(Fh._=b),this}function Ll(){}function Il(t){return t=Wr(t),pi(function(e){return ii(e,t)})}var Nl=_n(sp),jl=_n(tp),Al=_n(lp);function El(e){return ea(e)?vp(Ma(e)):oi(e)}function Gl(t){return function(e){return null==t?dd:Bt(t,e)}}var ql=vn(),Rl=vn(!0);function zl(){return[]}function Wl(){return!1}function Dl(){return{}}function Fl(){return""}function Ql(){return!0}function Xl(e,t){if((e=Wr(e))<1||vd<e)return[];var i=yd,n=U(e,yd);t=En(t),e-=yd;for(var a=Sp(n,t);++i<e;)t(i);return a}function Vl(e){return tr(e)?sp(e,Ma):Ir(e)?[e]:Yi(Pa(Vr(e)))}function Ul(e){var t=++l;return Vr(e)+t}var Zl=cn(function(e,t){return e+t},0),Yl=yn("ceil"),Hl=cn(function(e,t){return e/t},1),Jl=yn("floor");function $l(e){return e&&e.length?vt(e,Ml,Tt):dd}function Kl(e,t){return e&&e.length?vt(e,En(t,2),Tt):dd}function ed(e){return fp(e,Ml)}function td(e,t){return fp(e,En(t,2))}function id(e){return e&&e.length?vt(e,Ml,Ht):dd}function nd(e,t){return e&&e.length?vt(e,En(t,2),Ht):dd}var ad=cn(function(e,t){return e*t},1),sd=yn("round"),od=cn(function(e,t){return e-t},0),rd;function ud(e){return e&&e.length?yp(e,Ml):0}function ld(e,t){return e&&e.length?yp(e,En(t,2)):0}return _e.after=Po,_e.ary=Mo,_e.assign=Ur,_e.assignIn=Zr,_e.assignInWith=Yr,_e.assignWith=Hr,_e.at=Jr,_e.before=ko,_e.bind=Oo,_e.bindAll=fl,_e.bindKey=Bo,_e.castArray=Xo,_e.chain=Gs,_e.chunk=xa,_e.compact=Ca,_e.concat=Ta,_e.cond=vl,_e.conforms=ml,_e.constant=bl,_e.countBy=Zs,_e.create=$r,_e.curry=xo,_e.curryRight=Co,_e.debounce=To,_e.defaults=Kr,_e.defaultsDeep=eu,_e.defer=wo,_e.delay=Lo,_e.difference=wa,_e.differenceBy=La,_e.differenceWith=Ia,_e.drop=Na,_e.dropRight=ja,_e.dropRightWhile=Aa,_e.dropWhile=Ea,_e.fill=Ga,_e.filter=Hs,_e.flatMap=Ks,_e.flatMapDeep=eo,_e.flatMapDepth=to,_e.flatten=za,_e.flattenDeep=Wa,_e.flattenDepth=Da,_e.flip=Io,_e.flow=Sl,_e.flowRight=Pl,_e.fromPairs=Fa,_e.functions=ru,_e.functionsIn=uu,_e.groupBy=ao,_e.initial=Va,_e.intersection=Ua,_e.intersectionBy=Za,_e.intersectionWith=Ya,_e.invert=pu,_e.invertBy=cu,_e.invokeMap=oo,_e.iteratee=kl,_e.keyBy=ro,_e.keys=gu,_e.keysIn=fu,_e.map=uo,_e.mapKeys=vu,_e.mapValues=mu,_e.matches=Ol,_e.matchesProperty=Bl,_e.memoize=No,_e.merge=bu,_e.mergeWith=yu,_e.method=xl,_e.methodOf=Cl,_e.mixin=Tl,_e.negate=jo,_e.nthArg=Il,_e.omit=Su,_e.omitBy=Pu,_e.once=Ao,_e.orderBy=lo,_e.over=Nl,_e.overArgs=Eo,_e.overEvery=jl,_e.overSome=Al,_e.partial=Go,_e.partialRight=qo,_e.partition=ho,_e.pick=Mu,_e.pickBy=ku,_e.property=El,_e.propertyOf=Gl,_e.pull=es,_e.pullAll=ts,_e.pullAllBy=is,_e.pullAllWith=ns,_e.pullAt=as,_e.range=ql,_e.rangeRight=Rl,_e.rearg=Ro,_e.reject=_o,_e.remove=ss,_e.rest=zo,_e.reverse=os,_e.sampleSize=fo,_e.set=Bu,_e.setWith=xu,_e.shuffle=vo,_e.slice=rs,_e.sortBy=yo,_e.sortedUniq=_s,_e.sortedUniqBy=gs,_e.split=tl,_e.spread=Wo,_e.tail=fs,_e.take=vs,_e.takeRight=ms,_e.takeRightWhile=bs,_e.takeWhile=ys,_e.tap=qs,_e.throttle=Do,_e.thru=Rs,_e.toArray=Rr,_e.toPairs=Cu,_e.toPairsIn=Tu,_e.toPath=Vl,_e.toPlainObject=Qr,_e.transform=wu,_e.unary=Fo,_e.union=Ss,_e.unionBy=Ps,_e.unionWith=Ms,_e.uniq=ks,_e.uniqBy=Os,_e.uniqWith=Bs,_e.unset=Lu,_e.unzip=xs,_e.unzipWith=Cs,_e.update=Iu,_e.updateWith=Nu,_e.values=ju,_e.valuesIn=Au,_e.without=Ts,_e.words=_l,_e.wrap=Qo,_e.xor=ws,_e.xorBy=Ls,_e.xorWith=Is,_e.zip=Ns,_e.zipObject=js,_e.zipObjectDeep=As,_e.zipWith=Es,_e.entries=Cu,_e.entriesIn=Tu,_e.extend=Zr,_e.extendWith=Yr,Tl(_e,_e),_e.add=Zl,_e.attempt=gl,_e.camelCase=Ru,_e.capitalize=zu,_e.ceil=Yl,_e.clamp=Eu,_e.clone=Vo,_e.cloneDeep=Zo,_e.cloneDeepWith=Yo,_e.cloneWith=Uo,_e.conformsTo=Ho,_e.deburr=Wu,_e.defaultTo=yl,_e.divide=Hl,_e.endsWith=Du,_e.eq=Jo,_e.escape=Fu,_e.escapeRegExp=Qu,_e.every=Ys,_e.find=Js,_e.findIndex=qa,_e.findKey=tu,_e.findLast=$s,_e.findLastIndex=Ra,_e.findLastKey=iu,_e.floor=Jl,_e.forEach=io,_e.forEachRight=no,_e.forIn=nu,_e.forInRight=au,_e.forOwn=su,_e.forOwnRight=ou,_e.get=lu,_e.gt=$o,_e.gte=Ko,_e.has=du,_e.hasIn=hu,_e.head=Qa,_e.identity=Ml,_e.includes=so,_e.indexOf=Xa,_e.inRange=Gu,_e.invoke=_u,_e.isArguments=er,_e.isArray=tr,_e.isArrayBuffer=ir,_e.isArrayLike=nr,_e.isArrayLikeObject=ar,_e.isBoolean=sr,_e.isBuffer=or,_e.isDate=rr,_e.isElement=ur,_e.isEmpty=lr,_e.isEqual=dr,_e.isEqualWith=hr,_e.isError=pr,_e.isFinite=cr,_e.isFunction=_r,_e.isInteger=gr,_e.isLength=fr,_e.isMap=br,_e.isMatch=yr,_e.isMatchWith=Sr,_e.isNaN=Pr,_e.isNative=Mr,_e.isNil=Or,_e.isNull=kr,_e.isNumber=Br,_e.isObject=vr,_e.isObjectLike=mr,_e.isPlainObject=xr,_e.isRegExp=Cr,_e.isSafeInteger=Tr,_e.isSet=wr,_e.isString=Lr,_e.isSymbol=Ir,_e.isTypedArray=Nr,_e.isUndefined=jr,_e.isWeakMap=Ar,_e.isWeakSet=Er,_e.join=Ha,_e.kebabCase=Xu,_e.last=Ja,_e.lastIndexOf=$a,_e.lowerCase=Vu,_e.lowerFirst=Uu,_e.lt=Gr,_e.lte=qr,_e.max=$l,_e.maxBy=Kl,_e.mean=ed,_e.meanBy=td,_e.min=id,_e.minBy=nd,_e.stubArray=zl,_e.stubFalse=Wl,_e.stubObject=Dl,_e.stubString=Fl,_e.stubTrue=Ql,_e.multiply=ad,_e.nth=Ka,_e.noConflict=wl,_e.noop=Ll,_e.now=So,_e.pad=Zu,_e.padEnd=Yu,_e.padStart=Hu,_e.parseInt=Ju,_e.random=qu,_e.reduce=po,_e.reduceRight=co,_e.repeat=$u,_e.replace=Ku,_e.result=Ou,_e.round=sd,_e.runInContext=e,_e.sample=go,_e.size=mo,_e.snakeCase=el,_e.some=bo,_e.sortedIndex=us,_e.sortedIndexBy=ls,_e.sortedIndexOf=ds,_e.sortedLastIndex=hs,_e.sortedLastIndexBy=ps,_e.sortedLastIndexOf=cs,_e.startCase=il,_e.startsWith=nl,_e.subtract=od,_e.sum=ud,_e.sumBy=ld,_e.template=al,_e.times=Xl,_e.toFinite=zr,_e.toInteger=Wr,_e.toLength=Dr,_e.toLower=sl,_e.toNumber=Fr,_e.toSafeInteger=Xr,_e.toString=Vr,_e.toUpper=ol,_e.trim=rl,_e.trimEnd=ul,_e.trimStart=ll,_e.truncate=dl,_e.unescape=hl,_e.uniqueId=Ul,_e.upperCase=pl,_e.upperFirst=cl,_e.each=io,_e.eachRight=no,_e.first=Qa,Tl(_e,(rd={},Mt(_e,function(e,t){S.call(_e.prototype,t)||(rd[t]=e)}),rd),{chain:!1}),_e.VERSION=hd,Kh(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){_e[e].placeholder=_e}),Kh(["drop","take"],function(i,n){be.prototype[i]=function(e){e=e===dd?1:V(Wr(e),0);var t=this.__filtered__&&!n?new be(this):this.clone();return t.__filtered__?t.__takeCount__=U(e,t.__takeCount__):t.__views__.push({size:U(e,yd),type:i+(t.__dir__<0?"Right":"")}),t},be.prototype[i+"Right"]=function(e){return this.reverse()[i](e).reverse()}}),Kh(["filter","map","takeWhile"],function(e,t){var i=t+1,n=1==i||3==i;be.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:En(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}}),Kh(["head","last"],function(e,t){var i="take"+(t?"Right":"");be.prototype[e]=function(){return this[i](1).value()[0]}}),Kh(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");be.prototype[e]=function(){return this.__filtered__?new be(this):this[i](1)}}),be.prototype.compact=function(){return this.filter(Ml)},be.prototype.find=function(e){return this.filter(e).head()},be.prototype.findLast=function(e){return this.reverse().find(e)},be.prototype.invokeMap=pi(function(t,i){return"function"==typeof t?new be(this):this.map(function(e){return At(e,t,i)})}),be.prototype.reject=function(e){return this.filter(jo(En(e)))},be.prototype.slice=function(e,t){e=Wr(e);var i=this;return i.__filtered__&&(0<e||t<0)?new be(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==dd&&(i=(t=Wr(t))<0?i.dropRight(-t):i.take(t-e)),i)},be.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},be.prototype.toArray=function(){return this.take(yd)},Mt(be.prototype,function(h,e){var p=/^(?:filter|find|map|reject)|While$/.test(e),c=/^(?:head|last)$/.test(e),_=_e[c?"take"+("last"==e?"Right":""):e],g=c||/^find/.test(e);_&&(_e.prototype[e]=function(){var e=this.__wrapped__,i=c?[1]:arguments,t=e instanceof be,n=i[0],a=t||tr(e),s=function(e){var t=_.apply(_e,op([e],i));return c&&o?t[0]:t};a&&p&&"function"==typeof n&&1!=n.length&&(t=a=!1);var o=this.__chain__,r=!!this.__actions__.length,u=g&&!o,l=t&&!r;if(g||!a)return u&&l?h.apply(this,i):(d=this.thru(s),u?c?d.value()[0]:d.value():d);e=l?e:new be(this);var d=h.apply(e,i);return d.__actions__.push({func:Rs,args:[s],thisArg:dd}),new me(d,o)})}),Kh(["pop","push","shift","sort","splice","unshift"],function(e){var i=o[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);_e.prototype[e]=function(){var t=arguments;if(!a||this.__chain__)return this[n](function(e){return i.apply(tr(e)?e:[],t)});var e=this.value();return i.apply(tr(e)?e:[],t)}}),Mt(be.prototype,function(e,t){var i=_e[t];if(i){var n=i.name+"";S.call(se,n)||(se[n]=[]),se[n].push({name:t,func:i})}}),se[hn(dd,2).name]=[{name:"wrapper",func:dd}],be.prototype.clone=ye,be.prototype.reverse=Se,be.prototype.value=Pe,_e.prototype.at=zs,_e.prototype.chain=Ws,_e.prototype.commit=Ds,_e.prototype.next=Fs,_e.prototype.plant=Xs,_e.prototype.reverse=Vs,_e.prototype.toJSON=_e.prototype.valueOf=_e.prototype.value=Us,_e.prototype.first=_e.prototype.head,N&&(_e.prototype[N]=Qs),_e}();Fh._=Vp,(Ae=function(){return Vp}.call(Ee,Ge,Ee,je))===dd||(je.exports=Ae)}).call(this)}).call(this,Ge(34),Ge(35)(e))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleDragQA=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,g=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["DragQA"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),g.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=void 0;for(n=this._dragQAGroup.length,i=0;i<n;i++)t=this._dragQAGroup[i];for(n=this._dragContainerGroup.length,i=0;i<n;i++){t=this._dragContainerGroup[i];var a=this._parent.getInstanceMirror(t);t.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,g.default.supportPassive())}}},{key:"reset",value:function e(){this.isInited||this.init(),g.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=void 0;for(n=this._dragQAGroup.length,i=0;i<n;i++){(t=this._dragQAGroup[i]).cursor="pointer";var a=this._parent.getInstanceMirror(t),s=this.pickLink(t.parent,a);g.default.notNull(s)&&(s.visible=!1)}for(n=this._dragContainerGroup.length,i=0;i<n;i++){t=this._dragContainerGroup[i];var o=this._parent.getInstanceMirror(t);g.default.notNull(o.target.orgX)&&(o.target.x=o.target.orgX),g.default.notNull(o.target.orgY)&&(o.target.y=o.target.orgY);var r=this.pickAnsBtnLink(t,o,"showhide");if(g.default.notNull(r)){var u=this._parent.getInstanceMirror(r),l=o.target[u.args[0]];g.default.notNull(l)&&(l.visible=!1)}t.removeEventListener("pressmove",triggerDragContainerPressmove,g.default.supportPassive())}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"DragQA":n=this.getCustomTag(t),this._dragQAGroup.push(t),this._dragQAGroupMirror[n]=this.pickRelation(t.parent,i.args[0]),this._dragContainerGroup.push(this.pickLink(t.parent,i))}}}},{key:"getCustomTag",value:function e(t){return g.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"pickLink",value:function e(t,i){var n=t[i.args[0]+"_"+i.args[1]];return n||null}},{key:"pickAnsBtnLink",value:function e(t,i,n){var a=void 0,s=i.subset.length;for(a=0;a<s;a++){var o=t[i.subset[a]],r;if(this._parent.getInstanceMirror(o).command===n)return o}return null}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=void 0;for(this.triggerDragQAMousedownBind=this.triggerDragQAMousedownBind||this.triggerDragQAMousedown.bind(this),this.triggerSubAnsMousedownBind=this.triggerSubAnsMousedownBind||this.triggerSubAnsMousedown.bind(this),this.triggerDragContainerMousedownBind=this.triggerDragContainerMousedownBind||this.triggerDragContainerMousedown.bind(this),this.triggerDragContainerPressupBind=this.triggerDragContainerPressupBind||this.triggerDragContainerPressup.bind(this),this.triggerDragContainerPressmoveBind=this.triggerDragContainerPressmoveBind||this.triggerDragContainerPressmove.bind(this),s=this._dragQAGroup.length,a=0;a<s;a++)if(!(n=this._dragQAGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var o=this._parent.getInstanceMirror(n),r=this.pickLink(n.parent,o);g.default.notNull(r)&&(r.visible=!1),n.addEventListener(this._mouseTriggerBehavior,this.triggerDragQAMousedownBind)}for(s=this._dragContainerGroup.length,a=0;a<s;a++)if(!(n=this._dragContainerGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0;var u=this._parent.getInstanceMirror(n);u.target.orgX=u.target.x,u.target.orgY=u.target.y;var l=this.pickAnsBtnLink(n,u,"showhide");if(g.default.notNull(l)){l.cursor="pointer",l.addEventListener(this._mouseTriggerBehavior,this.triggerSubAnsMousedownBind);var d=this._parent.getInstanceMirror(l),h=u.target[d.args[0]];g.default.notNull(h)&&(h.visible=!1)}n.addEventListener("mousedown",this.triggerDragContainerMousedownBind),n.addEventListener("pressup",this.triggerDragContainerPressupBind)}}},{key:"triggerDragQAMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=this.getCustomTag(i),s=void 0,o=void 0,r=this._dragQAGroupMirror[a].length,u=!1;for(o=0;o<r;o++)if(this._dragQAGroupMirror[a][o].visible){s=this._dragQAGroupMirror[a][o],u=!0;break}for(o=0;o<r;o++){this._dragQAGroupMirror[a][o].visible=!1;var l=this._dragQAGroupMirror[a][o],d=this._parent.getInstanceMirror(l),h=this.pickAnsBtnLink(l,d,"showhide");if(g.default.notNull(h)){var p=this._parent.getInstanceMirror(h),c=d.target[p.args[0]];g.default.notNull(c)&&(c.visible=!1)}}var _=this.pickLink(i.parent,n);s===_?g.default.notNull(_)&&(_.visible=!u):g.default.notNull(_)&&(_.visible=!0),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSubAnsMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]];g.default.notNull(a)&&(a.visible=!a.visible),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY);i.fixX=i.x-n.x,i.fixY=i.y-n.y,i.startX=i.x+i.fixX,i.startY=i.y+i.fixY,i.addEventListener("pressmove",this.triggerDragContainerPressmoveBind,g.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+i.fixX,i.y=n.y+i.fixY,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressup",value:function e(t){var i;this._parent.setPressEventIsOn(!1),t.currentTarget.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,g.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._dragQAGroup=[],this._dragContainerGroup=[],this._dragQAGroupMirror={},this._seq=999}t.ModuleDragQA=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleEnCnTranslate=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,d=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["EnCnTrans"],l=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._encnTransGroup.length;for(i=0;i<n;i++)t=this._encnTransGroup[i],d.default.notNull(t.selfReset)&&t.selfReset(t)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"EnCnTrans":n=this.getCustomTag(t),this._encnTransGroup.push(t),this._enBtnGroup[n]=this.pickEnCnRelation(t,"showLangEnOn"),this._cnBtnGroup[n]=this.pickEnCnRelation(t,"showLangCnOn")}}}},{key:"getCustomTag",value:function e(t){return d.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickEnCnRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];if(r.command===i){"showLangEnOn"===i?t.enTag=r.args[0]:"showLangCnOn"===i&&(t.cnTag=r.args[0]);var l=this.pickRelation(t,r.args[0])||[];n=n.concat(l)}}return n}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0;this.selfResetBind=this.selfResetBind||this.selfReset.bind(this),this.triggerEnCnMousedownBind=this.triggerEnCnMousedownBind||this.triggerEnCnMousedown.bind(this),this.triggerEnCnSubMousedownBind=this.triggerEnCnSubMousedownBind||this.triggerEnCnSubMousedown.bind(this);var s=this._encnTransGroup.length;for(a=0;a<s;a++)if(!(n=this._encnTransGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.selfReset=this.selfResetBind,n.btnCnOn=n["showLangCnOn_"+n.cnTag],n.btnCnOff=n["showLangCnOff_"+n.cnTag],n.btnEnOn=n["showLangEnOn_"+n.enTag],n.btnEnOff=n["showLangEnOff_"+n.enTag],n.btnAllOn=n.showLangAllOn,n.btnAllOff=n.showLangAllOff,n.isBtnPass=n.btnCnOn&&n.btnCnOff&&n.btnEnOn&&n.btnEnOff&&n.btnAllOn&&n.btnAllOff,d.default.notNull(n.btnEnOn)&&(n.btnEnOn.cursor="pointer",n.btnEnOn.visible=!0,n.btnEnOn.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnEnOff)&&(n.btnEnOff.cursor="pointer",n.btnEnOff.visible=!1,n.btnEnOff.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnCnOn)&&(n.btnCnOn.cursor="pointer",n.btnCnOn.visible=!1,n.btnCnOn.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnCnOff)&&(n.btnCnOff.cursor="pointer",n.btnCnOff.visible=!0,n.btnCnOff.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnAllOn)&&(n.btnAllOn.cursor="pointer",n.btnAllOn.visible=!1,n.btnAllOn.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnAllOff)&&(n.btnAllOff.cursor="pointer",n.btnAllOff.visible=!0,n.btnAllOff.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind));var o=void 0,r=void 0,u=this.getCustomTag(n);r=this._enBtnGroup[u].length;var l=void 0;for(o=0;o<r;o++)(l=this._enBtnGroup[u][o]).cursor="pointer",l.encnTag="en",l.bigTag=u,l.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnSubMousedownBind);for(r=this._cnBtnGroup[u].length,o=0;o<r;o++)(l=this._cnBtnGroup[u][o]).cursor="pointer",l.encnTag="cn",l.bigTag=u,l.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnSubMousedownBind);this.updateTransStatus(n)}}},{key:"selfReset",value:function e(t){d.default.notNull(t.btnEnOn)&&(t.btnEnOn.visible=!0),d.default.notNull(t.btnEnOff)&&(t.btnEnOff.visible=!1),d.default.notNull(t.btnCnOn)&&(t.btnCnOn.visible=!1),d.default.notNull(t.btnCnOff)&&(t.btnCnOff.visible=!0),d.default.notNull(t.btnAllOn)&&(t.btnAllOn.visible=!1),d.default.notNull(t.btnAllOff)&&(t.btnAllOff.visible=!0),this.updateTransStatus(t)}},{key:"updateTransStatus",value:function e(t){var i=void 0,n=void 0,a=this.getCustomTag(t);for(n=this._enBtnGroup[a].length,i=0;i<n;i++)t.btnEnOn.visible?this._enBtnGroup[a][i].gotoAndStop(0):this._enBtnGroup[a][i].gotoAndStop(1);for(n=this._cnBtnGroup[a].length,i=0;i<n;i++)t.btnCnOn.visible?this._cnBtnGroup[a][i].gotoAndStop(0):this._cnBtnGroup[a][i].gotoAndStop(1)}},{key:"triggerEnCnMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=this.getCustomTag(i),s=i.parent;if(d.default.trace(s.isBtnPass),!s.isBtnPass)return t.stopPropagation(),void t.stopImmediatePropagation();switch(i){case s.btnEnOn:s.btnEnOn.visible=!1,s.btnEnOff.visible=!0,s.btnAllOff.visible=!0,s.btnAllOn.visible=!1,s.btnEnOff.gotoAndStop(0);break;case s.btnEnOff:s.btnEnOn.visible=!0,s.btnEnOff.visible=!1,s.btnCnOn.visible?(s.btnAllOn.visible=!0,s.btnAllOff.visible=!1):(s.btnAllOn.visible=!1,s.btnAllOff.visible=!0),s.btnEnOn.gotoAndStop(0);break;case s.btnCnOn:s.btnCnOn.visible=!1,s.btnCnOff.visible=!0,s.btnAllOff.visible=!0,s.btnAllOn.visible=!1,s.btnCnOff.gotoAndStop(0);break;case s.btnCnOff:s.btnCnOn.visible=!0,s.btnCnOff.visible=!1,s.btnEnOn.visible?(s.btnAllOn.visible=!0,s.btnAllOff.visible=!1):(s.btnAllOn.visible=!1,s.btnAllOff.visible=!0),s.btnCnOn.gotoAndStop(0);break;case s.btnAllOn:s.btnAllOn.visible=!1,s.btnAllOff.visible=!0,s.btnEnOn.visible=!1,s.btnEnOff.visible=!0,s.btnCnOn.visible=!1,s.btnCnOff.visible=!0,s.btnAllOff.gotoAndStop(0);break;case s.btnAllOff:s.btnAllOn.visible=!0,s.btnAllOff.visible=!1,s.btnEnOn.visible=!0,s.btnEnOff.visible=!1,s.btnCnOn.visible=!0,s.btnCnOff.visible=!1,s.btnAllOn.gotoAndStop(0)}this.updateTransStatus(s),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerEnCnSubMousedown",value:function e(t){var i=t.currentTarget,n=i.bigTag,a=i.parent;if(!a.isBtnPass)return t.stopPropagation(),void t.stopImmediatePropagation();0===i.currentFrame?i.gotoAndStop(1):i.gotoAndStop(0);var s=void 0,o=void 0,r=!1;if("cn"===i.encnTag){if(a.btnCnOn.visible){for(r=!1,o=this._cnBtnGroup[n].length,s=0;s<o;s++)if(0===this._cnBtnGroup[n][s].currentFrame){r=!0;break}}else if(a.btnCnOff.visible)for(r=!0,o=this._cnBtnGroup[n].length,s=0;s<o;s++)if(0!==this._cnBtnGroup[n][s].currentFrame){r=!1;break}r?(a.btnCnOn.visible=!0,a.btnCnOff.visible=!1,a.btnEnOn.visible&&(a.btnAllOn.visible=!0,a.btnAllOff.visible=!1)):(a.btnCnOn.visible=!1,a.btnCnOff.visible=!0,a.btnAllOn.visible&&(a.btnAllOn.visible=!1,a.btnAllOff.visible=!0))}else if("en"===i.encnTag){if(a.btnEnOn.visible){for(r=!1,o=this._enBtnGroup[n].length,s=0;s<o;s++)if(0===this._enBtnGroup[n][s].currentFrame){r=!0;break}}else if(a.btnEnOff.visible)for(r=!0,o=this._enBtnGroup[n].length,s=0;s<o;s++)if(0!==this._enBtnGroup[n][s].currentFrame){r=!1;break}r?(a.btnEnOn.visible=!0,a.btnEnOff.visible=!1,a.btnCnOn.visible&&(a.btnAllOn.visible=!0,a.btnAllOff.visible=!1)):(a.btnEnOn.visible=!1,a.btnEnOff.visible=!0,a.btnAllOn.visible&&(a.btnAllOn.visible=!1,a.btnAllOff.visible=!0))}t.stopPropagation(),t.stopImmediatePropagation()}}]),h);function h(e){r(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._encnTransGroup=[],this._enBtnGroup={},this._cnBtnGroup={},this._seq=999}t.ModuleEnCnTranslate=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleAnimateAnsRightWrong=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,h=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["AnimateAnsRight","AnimateAnsWrong"],l={AnimateAnsRight:"none",AnimateAnsWrong:"none"},d=!1,p=(n(c,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0;t=this._ansRightGroup.length;for(var a=0;a<t;a++)0!==(i=this._ansRightGroup[a]).currentFrame&&i.gotoAndStop(i.totalFrames-1);t=this._ansWrongGroup.length;for(var s=0;s<t;s++)0!==(i=this._ansWrongGroup[s]).currentFrame&&i.gotoAndStop(0);h.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),h.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0;t=this._ansRightGroup.length;for(var a=0;a<t;a++)(i=this._ansRightGroup[a]).gotoAndStop(0);t=this._ansWrongGroup.length;for(var s=0;s<t;s++)(i=this._ansWrongGroup[s]).gotoAndStop(0);h.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),h.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"AnimateAnsRight":this._ansRightGroup.push(t);break;case"AnimateAnsWrong":this._ansWrongGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this);var n=void 0;n=this._ansRightGroup.length;for(var a=void 0,s=0;s<n;s++)(a=this._ansRightGroup[s])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),h.default.notNull(a.EffectBase)&&h.default.applyMultiply(a.EffectBase));n=this._ansWrongGroup.length;for(var o=0;o<n;o++)(a=this._ansWrongGroup[o])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),h.default.notNull(a.EffectBase)&&h.default.applyMultiply(a.EffectBase))}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=void 0;if("AnimateAnsRight"===n.command){if(a=n.args[0],0!==i.currentFrame)return i.gotoAndStop(0),t.stopPropagation(),void t.stopImmediatePropagation()}else"AnimateAnsWrong"===n.command&&(a=n.args[0]);var s=i.nominalBounds,o={x:i.x+s.x*i.scale,y:i.y+s.y*i.scale},r=i.parent.localToGlobal(o.x,o.y),u=this._parent.exportRoot.globalToLocal(r.x,r.y),l=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:a,path:l,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:u.x,locY:u.y,excludeTags:null,command:n.command,target:i};var d=this.checkCommandMode(n.command);h.default.isIOS(!1)&&"none"===d?h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):h.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(h.default.isNull(this._parent.soundObj)||h.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)h.default.notNull(i)&&i.stop();else switch(n){case"fileload":h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){if(h.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.lib.properties.fps,s=Math.round(i/1e3*a),o=this._parent.soundObj.target;s>o.totalFrames-1&&(s=o.totalFrames-1),h.default.notNull(o)&&o.gotoAndStop(s)}}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.getInstanceMirror(i);"right"===this._parent.soundObj.id?i.gotoAndStop(i.totalFrames-1):"wrong"===this._parent.soundObj.id&&i.gotoAndStop(0),this.stop();var a=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===a||"normal-close"===a||"ex-normal-close"===a||"none"===a?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,h.default.isIOS(!1)&&"none"===a?h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):h.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}}]),c);function c(e){r(this,c),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._ansRightGroup=[],this._ansWrongGroup=[],this._prevTime=-1,this._seq=999}t.ModuleAnimateAnsRightWrong=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleSpotlight=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,f=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["Spotlight"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),f.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1)}},{key:"reset",value:function e(){this.isInited||this.init(),f.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),f.default.notNull(this._lockSpotlight)&&(this._lockSpotlight._rectSpot.x=this._lockSpotlight._rectSpot.orgX,this._lockSpotlight._rectSpot.y=this._lockSpotlight._rectSpot.orgY,this._lockSpotlight._maskRef.updateCache(),this._lockSpotlight.updateCache(),this._lockSpotlight._useStageMouseMove?this._parent.stage.removeEventListener("stagemousemove",this.triggerSpotlightPressmoveBind):(this._lockSpotlight.removeEventListener("mousedown",this.triggerSpotlightPressmoveBind),this._lockSpotlight.removeEventListener("pressmove",this.triggerSpotlightPressmoveBind,f.default.supportPassive()),this._lockSpotlight.removeEventListener("pressup",this.triggerSpotlightPressupBind)),this._lockSpotlight._useAnimateMC&&this._lockSpotlight.removeEventListener("tick",this.triggerSpotlightUpdateBind),this._lockSpotlight.visible=this._lockSpotlight._maskLayer.visible=!1),this._lockSpotlight=null}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,t._pageUI=!0,this._seq++,i.command){case"Spotlight":n=this.getCustomTag(t),this._spotlightGroup.push(t),this._spotlightMirror[n]=this.pickRelation(t,i.args[0])}}}},{key:"getCustomTag",value:function e(t){return f.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=void 0,a=this._parent.getInstanceMirror(t.parent),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&(n=u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0;this.triggerSpotlightMousedownBind=this.triggerSpotlightMousedownBind||this.triggerSpotlightMousedown.bind(this),this.triggerSpotlightPressmoveBind=this.triggerSpotlightPressmoveBind||this.triggerSpotlightPressmove.bind(this),this.triggerSpotlightPressupBind=this.triggerSpotlightPressupBind||this.triggerSpotlightPressup.bind(this),this.triggerSpotlightUpdateBind=this.triggerSpotlightUpdateBind||this.triggerSpotlightUpdate.bind(this);for(var a=this._spotlightGroup.length,s=0;s<a;s++)if(!(n=this._spotlightGroup[s])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer",f.default.notNull(n.EffectBase)&&f.default.applyMultiply(n.EffectBase),n.addEventListener(this._mouseTriggerBehavior,this.triggerSpotlightMousedownBind);var o=this.getCustomTag(n),r=this._spotlightMirror[o];r.visible=!1;var u=r.parent,l=this._parent.lib.properties.width,d=this._parent.lib.properties.height;r.Spot.orgX=r.Spot.x,r.Spot.orgY=r.Spot.y;var h=new this._parent.createjs.Shape;h.graphics.beginFill(r._maskColor).drawRect(0,0,l,d),h.visible=!1,r._maskLayer=h,u.addChildAt(h,u.getChildIndex(r)),h.cache(0,0,l,d);var p=new this._parent.createjs.Shape;p.graphics.beginFill(r._bgColor).drawRect(0,0,l,d),r._baseLayer=p,r.addChildAt(p,0);var c=new this._parent.createjs.Container,_=new this._parent.createjs.Shape;_.graphics.beginFill("DeepSkyBlue").drawRect(0,0,l,d);var g=r.Spot;g.compositeOperation="destination-in",c.addChild(_),c.addChild(g),c.cache(0,0,l,d),r._maskRef=c,r._rectBase=_,r._rectSpot=g,r.filters=[new this._parent.createjs.AlphaMaskFilter(c.cacheCanvas)],r.cache(0,0,l,d)}}},{key:"triggerSpotlightMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=this.getCustomTag(i);this._lockSpotlight=this._spotlightMirror[a],this._lockSpotlight._rectSpot.x=this._lockSpotlight._rectSpot.orgX,this._lockSpotlight._rectSpot.y=this._lockSpotlight._rectSpot.orgY,this._lockSpotlight._maskRef.updateCache(),this._lockSpotlight.updateCache(),this._lockSpotlight.visible?(this._parent.setPressEventIsOn(!1),this._lockSpotlight._useStageMouseMove?this._parent.stage.removeEventListener("stagemousemove",this.triggerSpotlightPressmoveBind):(this._lockSpotlight.removeEventListener("mousedown",this.triggerSpotlightPressmoveBind),this._lockSpotlight.removeEventListener("pressmove",this.triggerSpotlightPressmoveBind,f.default.supportPassive()),this._lockSpotlight.removeEventListener("pressup",this.triggerSpotlightPressupBind)),this._lockSpotlight._useAnimateMC&&this._lockSpotlight.removeEventListener("tick",this.triggerSpotlightUpdateBind)):(this._parent.setPressEventIsOn(!0),this._lockSpotlight._useStageMouseMove?this._parent.stage.addEventListener("stagemousemove",this.triggerSpotlightPressmoveBind):(this._lockSpotlight.addEventListener("mousedown",this.triggerSpotlightPressmoveBind),this._lockSpotlight.addEventListener("pressmove",this.triggerSpotlightPressmoveBind,f.default.supportPassive()),this._lockSpotlight.addEventListener("pressup",this.triggerSpotlightPressupBind)),this._lockSpotlight._useAnimateMC&&this._lockSpotlight.addEventListener("tick",this.triggerSpotlightUpdateBind)),this._lockSpotlight.visible=this._lockSpotlight._maskLayer.visible=!this._lockSpotlight.visible,this._lockSpotlight.visible||(this._lockSpotlight=null),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSpotlightPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=this._lockSpotlight.globalToLocal(t.stageX,t.stageY);this._lockSpotlight._rectSpot.x=i.x,this._lockSpotlight._rectSpot.y=i.y,this._lockSpotlight._maskRef.updateCache(),this._lockSpotlight._useAnimateMC||this._lockSpotlight.updateCache(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSpotlightPressup",value:function e(t){this._parent.setPressEventIsOn(!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSpotlightUpdate",value:function e(t){this._lockSpotlight.updateCache(),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._spotlightGroup=[],this._spotlightMirror={},this._lockSpotlight,this._seq=999}t.ModuleSpotlight=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleLetterStroke=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,v=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["LetterStrokeBar"],l={LetterStrokeBar:"none"},d=!1,h=!0,p=.5,c=.7,_=1,g=1.4,f=(n(m,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModulesByModule(),this.setupByModule(t))}},{key:"stop",value:function e(t){var i=0<arguments.length&&void 0!==t&&t;if(this.isInited||this.init(),i)return v.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),void(v.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc));v.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),v.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc),v.default.notNull(this._parent.videoChannel)&&(this._parent.videoChannel.paused||(this._parent.videoChannel.position=0,this._parent.videoChannel.paused=!0,this._parent.pageParam[4].status="idle"));for(var n=void 0,a=void 0,s=this._letterStrokeBarGroup.length,o=0;o<s;o++)n=this._letterStrokeBarGroup[o],this.refreshButton(n)}},{key:"reset",value:function e(){this.isInited||this.init(),this.stop(),v.default.notNull(this._parent.videoChannel)&&(v.default.notNull(this._parent.videoChannel.videoBitmap)&&(v.default.notNull(this._parent.videoChannel.videoBitmap.parent)&&this._parent.videoChannel.videoBitmap.parent.removeChild(this._parent.videoChannel.videoBitmap),this._parent.videoChannel.videoBitmap=null,this._parent.videoChannel.videoBuffer=null),this._parent.videoChannel.removeEventListener("complete",this._parent.videoObj.completeFunc)),v.default.notNull(this._parent.videoObj)&&(v.default.notNull(this._parent.videoObj.videoBase)&&(this._parent.videoObj.videoBase.visible=!1,this._parent.videoObj.videoBase._abortZeroFrame&&(this._parent.videoObj.videoBase.visible=!1),this._parent.videoObj.videoBase.bitmapCache&&(this._parent.videoObj.videoBase.uncache(),this._parent.stage.update())),this._parent.createjs.Ticker.removeEventListener("tick",this._parent.videoObj.watchFunc));for(var t=void 0,i=void 0,n=!this._parent.stage.contains(this._parent.exportRoot),a=this._letterStrokeBarGroup.length,s=0;s<a;s++)t=this._letterStrokeBarGroup[s],v.default.notNull(t.defaultPickTarget)&&this.setupVideoParms(t,t.defaultPickTarget,"letterStrokeOrderSrc","playNormal","idle");var o=this;this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),n||(this._timeout=setTimeout(function(){o._parent.stage.contains(o._parent.exportRoot)||o.stop()},100))}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"initModulesByModule",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTargetByModule(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTargetByModule(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"LetterStrokeBar":this._letterStrokeBarGroup.push(t),t.firstClick=!0,n=this.getCustomTag(t),this._letterStrokeBarExtendGroupMirror[n]=this.pickRelation(t.parent,"extendProps"),this._letterStrokeBarExtendGroupMirror[n]=this._letterStrokeBarExtendGroupMirror[n].sort(function(e,t){return e.letterIndexSeq>t.letterIndexSeq?1:-1}),this._letterStrokeBarMarqueeGroupMirror[n]=this.pickRelation(t.parent,"letterMarquee"),this._letterStrokeBarMarqueeGroupMirror[n]=this._letterStrokeBarMarqueeGroupMirror[n].sort(function(e,t){return e.letterIndexSeq>t.letterIndexSeq?1:-1})}}}},{key:"pickTargetByModule",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command))switch(i.command){case"LetterStrokeBar":n=this.getCustomTag(t),this._letterStrokeBarExtendGroupMirror[n]=this.pickRelation(t.parent,"extendProps"),this._letterStrokeBarExtendGroupMirror[n]=this._letterStrokeBarExtendGroupMirror[n].sort(function(e,t){return e.letterIndexSeq>t.letterIndexSeq?1:-1}),this._letterStrokeBarMarqueeGroupMirror[n]=this.pickRelation(t.parent,"letterMarquee"),this._letterStrokeBarMarqueeGroupMirror[n]=this._letterStrokeBarMarqueeGroupMirror[n].sort(function(e,t){return e.letterIndexSeq>t.letterIndexSeq?1:-1})}}},{key:"getCustomTag",value:function e(t){return v.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&(u.letterIndexSeq=Number(r.args[0])-1,n.push(u))}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerVideoWatchBind=this.triggerVideoWatchBind||this.triggerVideoWatch.bind(this),this.triggerVideoCompleteBind=this.triggerVideoCompleteBind||this.triggerVideoComplete.bind(this),this.checkVideoPlayStatusBind=this.checkVideoPlayStatusBind||this.checkVideoPlayStatus.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerNavigatorClickActionBind=this.triggerNavigatorClickActionBind||this.callBackNavigatorClickAction.bind(this),this.triggerNavigatorClearActionBind=this.triggerNavigatorClearActionBind||this.callBackNavigatorClearAction.bind(this),this.triggerNavigatorCompleteActionBind=this.triggerNavigatorCompleteActionBind||this.callBackNavigatorCompleteAction.bind(this),this.triggerVideoFunctionMousedownBind=this.triggerVideoFunctionMousedownBind||this.triggerVideoFunctionMousedown.bind(this);for(var n=void 0,a=void 0,s=this._letterStrokeBarGroup.length,o=0;o<s;o++)if(!(n=this._letterStrokeBarGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.videoPaneRef=n.parent.videoPane,n.extendPropsRef=n.parent.extendProps;for(var r=this._parent.getInstanceMirror(n.parent),u=r.subset.length,l=0;l<u;l++)if(-1!==r.subset[l].indexOf("WordsNav")){n.lettersNavControl=n.wordsNavControl=n.parent[r.subset[l]],(n.parent[r.subset[l]].lettersModuleControl=n).lettersNavControl.callSpecClickFunc=this.triggerNavigatorClickActionBind,n.lettersNavControl.callSpecClearFunc=this.triggerNavigatorClearActionBind,n.lettersNavControl.callSpecCompleteFunc=this.triggerNavigatorCompleteActionBind;break}a=this.getCustomTag(n);for(var d=this._letterStrokeBarMarqueeGroupMirror[a].length,h=0;h<d;h++){var p=this._letterStrokeBarMarqueeGroupMirror[a][h];p._isModuleInited||(p._replacePath=i,p._isModuleInited=!0)}(((((((n.playSlow.letterStrokeBar=n).playNormal.letterStrokeBar=n).playFast.letterStrokeBar=n).extendPropsRef.playUppercase.letterStrokeBar=n).extendPropsRef.playLowercase.letterStrokeBar=n).extendPropsRef.playLetterName.letterStrokeBar=n).extendPropsRef.playLetterPronounce.letterStrokeBar=n).playSlow.gotoAndStop(0),n.playSlow.cursor="pointer",n.playSlow.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.playSlow.EffectBase)&&v.default.applyMultiply(n.playSlow.EffectBase),n.playNormal.gotoAndStop(0),n.playNormal.cursor="pointer",n.playNormal.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.playNormal.EffectBase)&&v.default.applyMultiply(n.playNormal.EffectBase),n.playFast.gotoAndStop(0),n.playFast.cursor="pointer",n.playFast.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.playFast.EffectBase)&&v.default.applyMultiply(n.playFast.EffectBase),n.extendPropsRef.playUppercase.gotoAndStop(0),n.extendPropsRef.playUppercase.cursor="pointer",n.extendPropsRef.playUppercase.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.extendPropsRef.playUppercase.EffectBase)&&v.default.applyMultiply(n.extendPropsRef.playUppercase.EffectBase),n.extendPropsRef.playLowercase.gotoAndStop(0),n.extendPropsRef.playLowercase.cursor="pointer",n.extendPropsRef.playLowercase.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.extendPropsRef.playLowercase.EffectBase)&&v.default.applyMultiply(n.extendPropsRef.playLowercase.EffectBase),n.extendPropsRef.playLetterName.gotoAndStop(0),n.extendPropsRef.playLetterName.cursor="pointer",n.extendPropsRef.playLetterName.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.extendPropsRef.playLetterName.EffectBase)&&v.default.applyMultiply(n.extendPropsRef.playLetterName.EffectBase),n.extendPropsRef.playLetterPronounce.gotoAndStop(0),n.extendPropsRef.playLetterPronounce.cursor="pointer",n.extendPropsRef.playLetterPronounce.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.extendPropsRef.playLetterPronounce.EffectBase)&&v.default.applyMultiply(n.extendPropsRef.playLetterPronounce.EffectBase)}}},{key:"setupByModule",value:function e(t){for(var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=this._letterStrokeBarGroup.length,o=0;o<s;o++){n=this._letterStrokeBarGroup[o],a=this.getCustomTag(n);for(var r=this._letterStrokeBarMarqueeGroupMirror[a].length,u=0;u<r;u++){var l=this._letterStrokeBarMarqueeGroupMirror[a][u];l._isModuleInited||(l._replacePath=i,l._isModuleInited=!0)}}}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerVideoFunctionMousedown",value:function e(t){var i=t.currentTarget,n=i.letterStrokeBar,a=void 0,s=void 0,o=n.playSlow,r=n.playNormal,u=n.playFast,l=n.extendPropsRef.playUppercase,d=n.extendPropsRef.playLowercase,h=n.extendPropsRef.playLetterName,p=n.extendPropsRef.playLetterPronounce,c=void 0;switch(this._parent.pageParam[4].lastTouch){case"playSlow":c=o;break;case"playNormal":c=r;break;case"playFast":c=u;break;case"playUppercase":c=l;break;case"playLowercase":c=d;break;case"playLetterName":c=h;break;case"playLetterPronounce":c=p}switch(i.name){case"playSlow":case"playNormal":case"playFast":a="letterStrokeOrderSrc";break;case"playUppercase":a="letterUppercaseSrc";break;case"playLowercase":a="letterLowercaseSrc";break;case"playLetterName":a="letterNameSrc";break;case"playLetterPronounce":a="letterPronounceSrc"}var _=i.name;0===i.currentFrame||3===i.currentFrame?s="play":1===i.currentFrame?s="pause":2===i.currentFrame&&(s="play"),this.setupVideoParms(n,n.currentLetterMarquee,a,_,s),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"callBackNavigatorClickAction",value:function e(t){var i,n=t.self.lettersModuleControl;v.default.isNull(n._callAction)&&(n._callAction="click")}},{key:"callBackNavigatorClearAction",value:function e(t){var i,n=t.self.lettersModuleControl;v.default.isNull(n._callAction)&&(n._callAction="clear")}},{key:"callBackNavigatorCompleteAction",value:function e(t){var i,n=t.self.lettersModuleControl,a=t.pickTarget,s=this._parent.getInstanceMirror(a),o=n.parent[s.args[0]+"_"+s.args[1]];this.setupVideoParms(n,o,"letterStrokeOrderSrc","playNormal","idle"),v.default.isNull(n.defaultPickTarget)&&(n.defaultPickTarget=o),n.firstClick&&v.default.notNull(this._parent.pageParam[5])&&!0===this._parent.pageParam[5]||this.playLetterSound(n,o),n._callAction=null,this._parent.pageParam[5]=!0,n.firstClick=!1}},{key:"setupVideoParms",value:function e(t,i,n,a,s){t.currentLetterMarquee=i,this._parent.pageParam[3]=i.name;var o="";v.default.notNull(this._parent.pageParam)&&v.default.notNull(this._parent.pageParam[4])&&v.default.notNull(this._parent.pageParam[4].lastTouch)&&(o=this._parent.pageParam[4].lastTouch),this._parent.pageParam[4]={srcType:n,lastTouch:a,status:s};var r=!(o===this._parent.pageParam[4].lastTouch);"idle"===s?this.refreshShowLetter(t,i,!0,r):this.refreshShowLetter(t,i,!1,r),this.refreshButton(t)}},{key:"refreshButton",value:function e(t){t.playSlow.gotoAndStop(0),t.playNormal.gotoAndStop(0),t.playFast.gotoAndStop(0),t.extendPropsRef.playUppercase.gotoAndStop(0),t.extendPropsRef.playLowercase.gotoAndStop(0),t.extendPropsRef.playLetterName.gotoAndStop(0),t.extendPropsRef.playLetterPronounce.gotoAndStop(0);var i=t.playSlow,n=t.playNormal,a=t.playFast,s=t.extendPropsRef.playUppercase,o=t.extendPropsRef.playLowercase,r=t.extendPropsRef.playLetterName,u=t.extendPropsRef.playLetterPronounce,l=void 0;switch(this._parent.pageParam[4].lastTouch){case"playSlow":l=i;break;case"playNormal":l=n;break;case"playFast":l=a;break;case"playUppercase":l=s;break;case"playLowercase":l=o;break;case"playLetterName":l=r;break;case"playLetterPronounce":l=u}switch(this._parent.pageParam[4].status){case"idle":l.gotoAndStop(3);break;case"play":l.gotoAndStop(1);break;case"pause":l.gotoAndStop(2);break;case"stop":l.gotoAndStop(0)}}},{key:"refreshShowLetter",value:function e(t,i,n,a){var s=!(2<arguments.length&&void 0!==n)||n,o=!(3<arguments.length&&void 0!==a)||a;if(t.currentLetterMarquee=i,v.default.notNull(this._parent.videoObj)&&v.default.notNull(this._parent.videoChannel)){var r=this._parent.pageParam[4].srcType,u=this._parent.pageParam[4].status;if(this._parent.videoObj.id===i[r]){switch(this._parent.pageParam[4].lastTouch){case"playSlow":this._parent.videoChannel.playbackRate=.7;break;case"playNormal":this._parent.videoChannel.playbackRate=1;break;case"playFast":this._parent.videoChannel.playbackRate=1.4;break;default:this._parent.videoChannel.playbackRate=1}if(s)this._parent.stop(["VideoChannel"],!0),this._parent.videoChannel.position=0,this._parent.videoChannel.paused=!0;else switch(o&&(this._parent.videoChannel.paused=!0,this._parent.videoChannel.position=0),this._parent.videoChannel.video.muted=!1,u){case"play":this._parent.videoChannel.paused=!1;break;case"pause":this._parent.videoChannel.paused=!0;break;case"resume":this._parent.videoChannel.paused=!1}return}}this._parent.stop(null,!0);var l=this._parent.pageParam[4].srcType;null!==this._parent.assetVideoPath&&""!==this._parent.assetVideoPath||(this._parent.assetVideoPath=this._parent.assetSoundPath),null!==this._parent.pageVideoPath&&""!==this._parent.pageVideoPath||(this._parent.pageVideoPath=this._parent.pageSoundPath);var d=this._parent.getInstanceMirror(i),h=i.nominalBounds,p={x:i.x+h.x*i.scale,y:i.y+h.y*i.scale},c=i.parent.localToGlobal(p.x,p.y),_=this._parent.exportRoot.globalToLocal(c.x,c.y),g=this._parent.assetVideoPath?this._parent.assetVideoPath:this._parent.pageVideoPath?this._parent.pageVideoPath+i._replacePath+"videos/":i._replacePath+"./videos/",f=navigator.platform.match(/iPhone|iPod|iPad|Mac/)?15:0;this._parent.videoObj={id:i[l],path:g,loop:0,offset:f,volume:this._parent.volume,callback:this.checkVideoPlayStatusBind,watchFunc:this.triggerVideoWatchBind,completeFunc:this.triggerVideoCompleteBind,autoPlay:!0,locX:_.x,locY:_.y,excludeTags:null,command:d.command,target:i,videoBase:t.videoPaneRef,letterStrokeBase:t,idle:s},v.default.playWebVideo(this._parent.createjs,this._parent.videoObj.path,this._parent.videoObj.id,this._parent.videoObj.loop,this._parent.videoObj.offset,this._parent.videoObj.volume,this._parent.videoObj.callback)}},{key:"checkVideoPlayStatus",value:function e(t,i,n){if(v.default.isNull(this._parent.videoObj)||v.default.notNull(this._parent.videoObj)&&this._parent.videoObj.id!==t)v.default.notNull(i)&&i.stop();else switch(n){case"fileload":break;case"fileerror":this.stop(),this._parent.videoObj=null;break;case"playSuccess":switch(this._prevTime=-1,this._parent.videoChannel=i,this._parent.videoChannel.video.muted=!0,this._parent.videoChannel.paused=!this._parent.videoObj.autoPlay,this._parent.pageParam[4].lastTouch){case"playSlow":this._parent.videoChannel.playbackRate=.7;break;case"playNormal":this._parent.videoChannel.playbackRate=1;break;case"playFast":this._parent.videoChannel.playbackRate=1.4;break;default:this._parent.videoChannel.playbackRate=1}this._parent.createjs.Ticker.addEventListener("tick",this._parent.videoObj.watchFunc),this._parent.videoChannel.addEventListener("complete",this._parent.videoObj.completeFunc)}}},{key:"triggerVideoWatch",value:function e(t){if(v.default.notNull(this._parent.videoChannel)&&v.default.notNull(this._parent.videoObj))if(v.default.isNull(this._parent.videoChannel.videoBitmap))if(this._parent.stage.isWebGL){var i=function e(){a._video.currentTime!==u||a._video.currentTime===u&&3===l?(a._video.currentTime!==u?l=0:l<Number.MAX_VALUE&&l++,u=a._video.currentTime,s.image._invalid=!0,s.parent&&(!n._parent.videoObj.videoBase.visible&&0<=a._video.currentTime&&(n._parent.videoObj.videoBase.visible=!0,a._video.muted=!1),s.parent.bitmapCache&&s.parent.updateCache())):l<Number.MAX_VALUE&&l++,s.parent&&(n._parent.videoObj.idle&&.2<a._video.currentTime?(n._parent.videoObj.idle=!1,n._parent.videoChannel.position=0,n._parent.videoChannel.paused=!0):n._parent.videoObj.idle||(n._parent.videoChannel.video.muted=!1),requestAnimationFrame(e))};this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),v.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&v.default.notNull(this._parent.videoObj.videoBase)&&this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap);var n=this,a=this._parent.videoChannel.videoBuffer,s=this._parent.videoChannel.videoBitmap,o=this._parent.videoObj.offset,r=this._parent.videoChannel,u=-1,l=0;requestAnimationFrame(i)}else this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),v.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&(v.default.notNull(this._parent.videoObj.videoBase)&&this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap),this._parent.videoObj.videoBase.visible=!0);else!this._parent.stage.isWebGL&&this._parent.videoChannel&&(this._parent.videoChannel.paused&&this._parent.videoChannel.position===this._parent.videoObj.offset?v.default.notNull(this._parent.videoChannel.videoBuffer)&&(this._parent.videoChannel.videoBuffer._lastTime=-1,this._parent.videoObj.idle&&.2<this._parent.videoChannel.videoBuffer._video.currentTime?(this._parent.videoObj.idle=!1,this._parent.videoChannel.position=0,this._parent.videoChannel.paused=!0):this._parent.videoObj.idle||(this._parent.videoChannel.video.muted=!1)):this._parent.videoChannel.paused||v.default.notNull(this._parent.videoChannel.videoBuffer)&&(this._parent.videoObj.idle?(this._parent.videoObj.idle=!1,this._parent.videoChannel.position=0,this._parent.videoChannel.paused=!0):this._parent.videoChannel.video.muted=!1))}},{key:"triggerVideoComplete",value:function e(t){var i=this._parent.videoObj.videoBase;this._parent.pageParam[4].status="idle",this.refreshButton(this._parent.videoObj.letterStrokeBase)}},{key:"playLetterSound",value:function e(t,i,n,a){var s=2<arguments.length&&void 0!==n&&n,o=!(3<arguments.length&&void 0!==a)||a,r=this._parent.getInstanceMirror(i),u=i._replacePath,l=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+u+"sounds/":u+"./sounds/";this._parent.soundObj={id:i.letterSoundSrc,path:l,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:r.command,target:i,isContinue:s,letterStrokeBase:t},this._parent.iosMode?v.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):v.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(v.default.isNull(this._parent.soundObj)||v.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)v.default.notNull(i)&&i.stop();else switch(n){case"fileload":v.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc)}}},{key:"triggerSoundWatch",value:function e(t){}},{key:"triggerSoundComplete",value:function e(t){var i=!!this._parent.soundObj.isContinue&&this._parent.soundObj.isContinue,n=this._parent.soundObj.letterStrokeBase;this.stop(!0),this._parent.clearSoundChannel()}}]),m);function m(e){r(this,m),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._letterStrokeBarGroup=[],this._letterStrokeBarMarqueeGroupMirror={},this._letterStrokeBarExtendGroupMirror={},this._actMVGroup=[],this._actVideoGroup=[],this._abortActMVGroup=[],this._onceActVideoGroup=[],this._prevTime=-1,this._seq=999,this._timeout}t.ModuleLetterStroke=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathBookPage=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,k=i(15).ModuleOnAndOff,O=i(16).ModuleCalculator,B=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(42).ModuleMathGameEchoControl,T=i(43).ModuleMathGameDragNumberCard,w=i(44).ModuleMathGameSplitAndMath,L=i(45).ModuleTwoStepAnimate,I=(h(j,N=p),n(j,[{key:"init",value:function e(){s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.stop(n,a,!0)}},{key:"stop",value:function e(t,i,n){var a=0<arguments.length&&void 0!==t?t:null,s=1<arguments.length&&void 0!==i&&i,o=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(a=this.soundObj.excludeTags),r.default.isNull(a)&&(a=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(a=a.concat(this.videoObj.excludeTags)),-1===a.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!o&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!o&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleGoOutCommand&&-1===a.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===a.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===a.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===a.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===a.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===a.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===a.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===a.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===a.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===a.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===a.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===a.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===a.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleGameEchoControl&&-1===a.indexOf("ModuleGameEchoControl")&&-1===this._resetExclude.indexOf("ModuleGameEchoControl")&&this._moduleGameEchoControl.stop(),this._moduleGameDragNumberCard&&-1===a.indexOf("ModuleGameDragNumberCard")&&-1===this._resetExclude.indexOf("ModuleGameDragNumberCard")&&this._moduleGameDragNumberCard.stop(),this._moduleGameSplitAndMatch&&-1===a.indexOf("ModuleGameSpritAndMatch")&&-1===this._resetExclude.indexOf("ModuleGameSpritAndMatch")&&this._moduleGameSplitAndMatch.stop(),this._moduleTwoStepAnimate&&-1===a.indexOf("ModuleTwoStepAnimate")&&-1===this._resetExclude.indexOf("ModuleTwoStepAnimate")&&this._moduleTwoStepAnimate.stop(),this._moduleAnsZone&&-1===a.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===a.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===a.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),s&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleGameEchoControl&&-1===n.indexOf("ModuleGameEchoControl")&&-1===this._resetExclude.indexOf("ModuleGameEchoControl")&&this._moduleGameEchoControl.reset(),this._moduleGameDragNumberCard&&-1===n.indexOf("ModuleGameDragNumberCard")&&-1===this._resetExclude.indexOf("ModuleGameDragNumberCard")&&this._moduleGameDragNumberCard.reset(),this._moduleGameSplitAndMatch&&-1===n.indexOf("ModuleGameSpritAndMatch")&&-1===this._resetExclude.indexOf("ModuleGameSpritAndMatch")&&this._moduleGameSplitAndMatch.reset(),this._moduleTwoStepAnimate&&-1===n.indexOf("ModuleTwoStepAnimate")&&-1===this._resetExclude.indexOf("ModuleTwoStepAnimate")&&this._moduleTwoStepAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleGameDragNumberCard&&-1===n.indexOf("ModuleGameDragNumberCard")&&-1===this._resetExclude.indexOf("ModuleGameDragNumberCard")&&this._moduleGameDragNumberCard.reset(),this._moduleGameSplitAndMatch&&-1===n.indexOf("ModuleGameSpritAndMatch")&&-1===this._resetExclude.indexOf("ModuleGameSpritAndMatch")&&this._moduleGameSplitAndMatch.reset(),this._moduleTwoStepAnimate&&-1===n.indexOf("ModuleTwoStepAnimate")&&-1===this._resetExclude.indexOf("ModuleTwoStepAnimate")&&this._moduleTwoStepAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),a&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var a=1<arguments.length&&void 0!==i?i:.2,s=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,a,s)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new k(this).init(),this._moduleCalculator=new O(this).init(),this._modulePureAnimate=new B(this).init(),this._moduleZoom=new x(this).init(),this._moduleGameEchoControl=new C(this).init(),this._moduleGameDragNumberCard=new T(this).init(),this._moduleGameSplitAndMatch=new w(this).init(),this._moduleTwoStepAnimate=new L(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new k(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new O(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new B(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleZoom)?this._moduleZoom=new x(this).init(t):this._moduleZoom.reinit(t),r.default.isNull(this._moduleGameEchoControl)?this._moduleGameEchoControl=new C(this).init(t):this._moduleGameEchoControl.reinit(t),r.default.isNull(this._moduleGameDragNumberCard)?this._moduleGameDragNumberCard=new T(this).init(t):this._moduleGameDragNumberCard.reinit(t),r.default.isNull(this._moduleGameSplitAndMatch)?this._moduleGameSplitAndMatch=new w(this).init(t):this._moduleGameSplitAndMatch.reinit(t),r.default.isNull(this._moduleTwoStepAnimate)?this._moduleTwoStepAnimate=new L(this).init(t):this._moduleTwoStepAnimate.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),j),N;function j(e,t,i,n){l(this,j);var a=d(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,e,t,i,n));return(a._this=a)._resetExclude=[],a}t.MathBookPage=I},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleMathGameEchoControl=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,p=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["MathGameEchoAnimate","MathGameEchoSound"],l={MathGameEchoAnimate:"none",MathGameEchoSound:"none"},d=!1,h=(n(c,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0;t=this._echoAnimateGroup.length;for(var i=void 0,n=0;n<t;n++){i=this._echoAnimateGroup[n];var a=this._parent.getInstanceMirror(i),s=a.parent[a.args[0]];p.default.notNull(s)&&(s.gotoAndStop(0),s.visible=!1)}t=this._echoSoundGroup.length;for(var o=0;o<t;o++)i=this._echoSoundGroup[o];p.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),p.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"MathGameEchoAnimate":this._echoAnimateGroup.push(t);break;case"MathGameEchoSound":this._echoSoundGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this);var n=void 0;n=this._echoAnimateGroup.length;for(var a=void 0,s=0;s<n;s++)if(!(a=this._echoAnimateGroup[s])._isModuleInited){a._isModuleInited=!0,a._replacePath=i,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind);var o=this._parent.getInstanceMirror(a),r=o.parent[o.args[0]];p.default.notNull(r)&&(r.gotoAndStop(0),r.visible=!1),p.default.notNull(a.EffectBase)&&p.default.applyMultiply(a.EffectBase)}n=this._echoSoundGroup.length;for(var u=0;u<n;u++)(a=this._echoSoundGroup[u])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),p.default.notNull(a.EffectBase)&&p.default.applyMultiply(a.EffectBase))}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=void 0,s=null;"MathGameEchoAnimate"===n.command?(a=n.args[1],s=n.parent[n.args[0]],p.default.notNull(s)&&(s.gotoAndStop(0),s.visible=!0)):"MathGameEchoSound"===n.command&&(a=n.args[0]);var o=i.nominalBounds,r={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},u=i.parent.localToGlobal(r.x,r.y),l=this._parent.exportRoot.globalToLocal(u.x,u.y),d=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:a,path:d,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:l.x,locY:l.y,excludeTags:null,command:n.command,target:i,target2:s};var h=this.checkCommandMode(n.command);p.default.isIOS(!1)&&"none"===h?p.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):p.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(p.default.isNull(this._parent.soundObj)||p.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)p.default.notNull(i)&&i.stop();else switch(n){case"fileload":p.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){if(p.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.lib.properties.fps,s=Math.round(i/1e3*a),o=this._parent.soundObj.target,r=this._parent.soundObj.target2;p.default.notNull(this._parent.soundObj.target2)&&(s>r.totalFrames-1&&(s=r.totalFrames-1),p.default.notNull(r)&&r.gotoAndStop(s))}}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.soundObj.target2,a=this._parent.getInstanceMirror(i);p.default.notNull(n)&&(n.gotoAndStop(0),n.visible=!1),this.stop();var s=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===s||"normal-close"===s||"ex-normal-close"===s||"none"===s?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,p.default.isIOS(!1)&&"none"===s?p.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):p.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}}]),c);function c(e){r(this,c),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._echoAnimateGroup=[],this._echoSoundGroup=[],this._prevTime=-1,this._seq=999}t.ModuleMathGameEchoControl=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleMathGameDragNumberCard=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,l=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["MathGameDragNumberCard"],d={MathGameDragNumberCard:"none"},h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),l.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);for(var t=this._dragNumberCardGroup.length,i=void 0,n=0;n<t;n++){i=this._dragNumberCardGroup[n];for(var a=this._parent.getInstanceMirror(i),s=a.subset.length,o=void 0,r=0;r<s;r++){var u;o=i[a.subset[r]],"drag"===this._parent.getInstanceMirror(o).command&&o.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,l.default.supportPassive())}}l.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),l.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),l.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);for(var t=this._dragNumberCardGroup.length,i=void 0,n=0;n<t;n++){i=this._dragNumberCardGroup[n];for(var a=this._parent.getInstanceMirror(i),s=a.subset.length,o=void 0,r=0;r<s;r++){var u;o=i[a.subset[r]],"drag"===this._parent.getInstanceMirror(o).command&&(o.x=o.orgX,o.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,l.default.supportPassive()))}}l.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),l.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"MathGameDragNumberCard":this._dragNumberCardGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerResetMousedownBind=this.triggerResetMousedownBind||this.triggerResetMousedown.bind(this),this.triggerDragContainerMousedownBind=this.triggerDragContainerMousedownBind||this.triggerDragContainerMousedown.bind(this),this.triggerDragContainerPressupBind=this.triggerDragContainerPressupBind||this.triggerDragContainerPressup.bind(this),this.triggerDragContainerPressmoveBind=this.triggerDragContainerPressmoveBind||this.triggerDragContainerPressmove.bind(this);for(var n=this._dragNumberCardGroup.length,a=void 0,s=0;s<n;s++)if(!(a=this._dragNumberCardGroup[s])._isModuleInited){a._replacePath=i,a._isModuleInited=!0;for(var o=this._parent.getInstanceMirror(a),r=o.subset.length,u=void 0,l=0;l<r;l++){var d;if(u=a[o.subset[l]],"drag"===this._parent.getInstanceMirror(u).command){var h=this._parent.getInstanceMirror(u);u.cursor="pointer",u.orgX=u.x,u.minX=Number(h.args[0]),u.maxX=Number(h.args[1]),(a.drag=u).addEventListener("mousedown",this.triggerDragContainerMousedownBind),u.addEventListener("pressup",this.triggerDragContainerPressupBind)}}a.reset.cursor="pointer",a.reset.addEventListener("mousedown",this.triggerResetMousedownBind)}}},{key:"checkCommandMode",value:function e(t){var i;return d[t]}},{key:"triggerResetMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.parent;a.drag.x=a.drag.orgX,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY);i.fixX=i.x-n.x,i.fixY=i.y-n.y,i.startX=i.x+i.fixX,i.startY=i.y+i.fixY,i.addEventListener("pressmove",this.triggerDragContainerPressmoveBind,l.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY),a=n.x+i.fixX;a>=i.minX&&a<=i.maxX&&(i.x=n.x+i.fixX),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressup",value:function e(t){var i;this._parent.setPressEventIsOn(!1),t.currentTarget.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,l.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}}]),p);function p(e){r(this,p),this._parent=e,this._dragNumberCardGroup=[],this._prevTime=-1,this._seq=999}t.ModuleMathGameDragNumberCard=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleMathGameSplitAndMath=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,b=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["MathGameSplitAndMatch"],l={MathGameSplitAndMatch:"none"},d=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),b.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1)}},{key:"reset",value:function e(){this.isInited||this.init(),b.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);for(var t=this._splitAndMatchGroup.length,i=void 0,n=0;n<t;n++){(i=this._splitAndMatchGroup[n]).mode="random",i.questionBaseIndex=0;var a=this._parent.getInstanceMirror(i),s=void 0;if(s=i.numberSelect,b.default.notNull(s)){for(var o=this._parent.getInstanceMirror(s),r=o.subset.length,u=0;u<r;u++){var l=o.target[o.subset[u]],d=this._parent.getInstanceMirror(l);"zone"===d.command?l.visible=!1:"Calculator"===d.command?l.visible=!1:"num"===d.command&&(l.text="")}var h=s.num;b.default.notNull(h)&&(h.text="")}s=i.clearCan,b.default.notNull(s),s=i.randBtn,b.default.notNull(s),s=i.freeBtn,b.default.notNull(s),s=i.clearBtn,b.default.notNull(s)&&(s.visible=!1),s=i.freeTip,b.default.notNull(s)&&(s.visible=!1),s=i.questionBase,b.default.notNull(s)&&0===i.questionBaseIndex&&(s.visible=!1);var p=void 0;p=a.subset.length;for(var c=0;c<p;c++){var _;if(s=i[a.subset[c]],"infinity"===this._parent.getInstanceMirror(s).command){var g=this._parent.getInstanceMirror(s);s.x=s.orgX,s.y=s.orgY,s.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive())}}p=i.infinityList.length;for(var f=0;f<p;f++)s=i.infinityList[f],i.removeChild(s),s.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),s.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),s.removeEventListener("pressup",this.triggerDragContainerPressupBind);i.infinityList.length=0,this.openDefault(i)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"MathGameSplitAndMatch":this._splitAndMatchGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerCreateMousedownBind=this.triggerCreateMousedownBind||this.triggerCreateMousedown.bind(this),this.triggerFuncMousedownBind=this.triggerFuncMousedownBind||this.triggerFuncMousedown.bind(this),this.triggerDragContainerMousedownBind=this.triggerDragContainerMousedownBind||this.triggerDragContainerMousedown.bind(this),this.triggerDragContainerPressupBind=this.triggerDragContainerPressupBind||this.triggerDragContainerPressup.bind(this),this.triggerDragBasePressupBind=this.triggerDragBasePressupBind||this.triggerDragBasePressup.bind(this),this.triggerDragContainerPressmoveBind=this.triggerDragContainerPressmoveBind||this.triggerDragContainerPressmove.bind(this),this.calcCallUpdateFuncBind=this.calcCallUpdateFuncBind||this.calcCallUpdateFunc.bind(this);for(var n=this._splitAndMatchGroup.length,a=void 0,s=0;s<n;s++)if(!(a=this._splitAndMatchGroup[s])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.questionBaseMin=1,a.questionBaseMax=1,a.infinityList=[],a.mode="random",a.questionBaseIndex=0;var o=this._parent.getInstanceMirror(a),r=void 0;if(r=a.numberSelect,b.default.notNull(r)){for(var u=this._parent.getInstanceMirror(r),l=u.subset.length,d=0;d<l;d++){var h=u.target[u.subset[d]],p=this._parent.getInstanceMirror(h);"zone"===p.command?(h.cursor="pointer",h.addEventListener("mousedown",this.triggerFuncMousedownBind),h.visible=!1):"Calculator"===p.command?(h.callUpdateFunc=this.calcCallUpdateFuncBind,(r.calc=h).visible=!1):"num"===p.command&&(h.textBaseline=this._parent.textBaseline,h.text="9","alphabetic"===this._parent.textBaseline&&(h.y+=h.lineHeight*this._parent.textAlphabeticFixYScale),h.cache(h.getBounds().x,h.getBounds().y,h.getBounds().width,h.getBounds().height,2),h.text="",h.updateCache())}var c=r.num;b.default.notNull(c)&&(c.textBaseline=this._parent.textBaseline,c.font="bold 26px Arial",c.text="9","alphabetic"===this._parent.textBaseline&&(c.y+=c.lineHeight*this._parent.textAlphabeticFixYScale),c.cache(c.getBounds().x,c.getBounds().y,c.getBounds().width,c.getBounds().height,2),c.text="",c.updateCache())}r=a.clearCan,b.default.notNull(r)&&(r.cursor="pointer",r.addEventListener("mousedown",this.triggerFuncMousedownBind)),r=a.randBtn,b.default.notNull(r)&&(r.cursor="pointer",r.addEventListener("mousedown",this.triggerFuncMousedownBind)),r=a.freeBtn,b.default.notNull(r)&&(r.cursor="pointer",r.addEventListener("mousedown",this.triggerFuncMousedownBind)),r=a.clearBtn,b.default.notNull(r)&&(r.cursor="pointer",r.visible=!1,r.addEventListener("mousedown",this.triggerFuncMousedownBind)),r=a.freeTip,b.default.notNull(r)&&(r.visible=!1),r=a.questionBase,b.default.notNull(r)&&(a.questionBaseMax=r.totalFrames,0===a.questionBaseIndex&&(r.visible=!1));var _=void 0;_=o.subset.length;for(var g=0;g<_;g++){var f;if(r=a[o.subset[g]],"infinity"===this._parent.getInstanceMirror(r).command){var v=this._parent.getInstanceMirror(r);r.cursor="pointer",r.orgX=r.x,r.orgY=r.y,r.addEventListener("mousedown",this.triggerCreateMousedownBind),r.addEventListener("pressup",this.triggerDragBasePressupBind)}}_=a.infinityList.length;for(var m=0;m<_;m++)r=a.infinityList[m],a.removeChild(r),r.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),r.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),r.removeEventListener("pressup",this.triggerDragContainerPressupBind);a.infinityList.length=0,this.openDefault(a)}}},{key:"calcCallUpdateFunc",value:function e(t){var i=t.parent,n=t.parent.parent;b.default.notNull(i.num)&&(""!==i.num.text&&"+"!==i.num.text&&"-"!==i.num.text&&"x"!==i.num.text&&"÷"!==i.num.text&&"."!==i.num.text&&">"!==i.num.text&&"<"!==i.num.text&&"="!==i.num.text?n.questionBaseIndex=Number(i.num.text):n.questionBaseIndex=0),this.refreshQuestionBase(n)}},{key:"refreshQuestionBase",value:function e(t){var i=t.questionBase;b.default.notNull(i)&&(0!==t.questionBaseIndex?(i.gotoAndStop(t.questionBaseIndex-1),i.visible=!0):(i.gotoAndStop(0),i.visible=!1))}},{key:"clearInfinityList",value:function e(t){if(b.default.notNull(t.infinityList)){for(var i=t.infinityList.length,n=0;n<i;n++){var a=t.infinityList[n];t.removeChild(a),a.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),a.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),a.removeEventListener("pressup",this.triggerDragContainerPressupBind)}t.infinityList.length=0}}},{key:"openDefault",value:function e(t){if(this.clearInfinityList(t),"random"===t.mode){t.questionBaseIndex=this.randomInt(t.questionBaseMin,t.questionBaseMax,t.questionBaseIndex);var i=void 0;if(i=t.numberSelect,b.default.notNull(i)){for(var n=this._parent.getInstanceMirror(i),a=n.subset.length,s=0;s<a;s++){var o=n.target[n.subset[s]],r=this._parent.getInstanceMirror(o);"zone"===r.command?o.visible=!1:"Calculator"===r.command?o.visible=!1:"num"===r.command&&(o.text="")}0!==t.questionBaseIndex?i.num.text=t.questionBaseIndex:i.num.text="",i.num.updateCache()}i=t.questionBase,b.default.notNull(i)&&(i.gotoAndStop(t.questionBaseIndex-1),i.visible=!0),i=t.freeBtn,b.default.notNull(i)&&(i.visible=!0),i=t.clearBtn,b.default.notNull(i)&&(i.visible=!1),i=t.freeTip,b.default.notNull(i)&&(i.visible=!1)}else if("free"===t.mode){var u=void(t.questionBaseIndex=0);if(u=t.numberSelect,b.default.notNull(u)){for(var l=this._parent.getInstanceMirror(u),d=l.subset.length,h=0;h<d;h++){var p=l.target[l.subset[h]],c=this._parent.getInstanceMirror(p);"zone"===c.command?p.visible=!0:"Calculator"===c.command?p.visible=!1:"num"===c.command&&(p.text="")}b.default.trace(u.num.text),0!==t.questionBaseIndex?u.num.text=t.questionBaseIndex:u.num.text="",u.num.updateCache(),b.default.trace(u.num.text)}u=t.questionBase,b.default.notNull(u)&&(0!==t.questionBaseIndex?(u.gotoAndStop(t.questionBaseIndex-1),u.visible=!0):(u.gotoAndStop(0),u.visible=!1)),u=t.freeBtn,b.default.notNull(u)&&(u.visible=!1),u=t.clearBtn,b.default.notNull(u)&&(u.visible=!0),u=t.freeTip,b.default.notNull(u)&&(u.visible=!0)}}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerCreateMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.parent,s=new this._parent.lib[n.args[0]];s.setTransform(i.x,i.y,i.scaleX,i.scaleY),s.cursor="pointer";var o=i.parent.globalToLocal(t.stageX,t.stageY);i.fixX=i.x-o.x,i.fixY=i.y-o.y,i.startX=i.x+i.fixX,i.startY=i.y+i.fixY,(a.waitChangePick=s).addEventListener("mousedown",this.triggerDragContainerMousedownBind),s.addEventListener("pressup",this.triggerDragContainerPressupBind),a.addChildAt(s,1),i.addEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerFuncMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.parent;switch(n.command){case"randBtn":a.mode="random",this.openDefault(a);break;case"freeBtn":a.mode="free",this.openDefault(a);break;case"clearBtn":this.openDefault(a);break;case"zone":a.calc.visible=!a.calc.visible;break;case"clearCan":this.clearInfinityList(a)}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY);i.fixX=i.x-n.x,i.fixY=i.y-n.y,i.startX=i.x+i.fixX,i.startY=i.y+i.fixY,i.addEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressmove",value:function e(t){if(this._parent.setPressEventIsOn(!0),b.default.isNull(t.stageX))return t.stopPropagation(),void t.stopImmediatePropagation();var i=t.currentTarget;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+i.fixX,i.y=n.y+i.fixY,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressup",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=i.parent;if(i.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),b.default.collisionTest(i,n.canHint)&&(i.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),i.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),i.removeEventListener("pressup",this.triggerDragContainerPressupBind),n.removeChild(i),b.default.notNull(n.infinityList))){var a=n.infinityList.indexOf(i);b.default.trace(n.infinityList,a),-1!==a&&n.infinityList.splice(a,1)}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragBasePressup",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=i.parent;i.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),b.default.notNull(n.waitChangePick)?(n.waitChangePick.x=i.x,n.waitChangePick.y=i.y,i.x=i.orgX,i.y=i.orgY,n.swapChildren(i,n.waitChangePick),b.default.collisionTest(n.waitChangePick,n.canHint)?(n.waitChangePick.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),n.waitChangePick.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),n.waitChangePick.removeEventListener("pressup",this.triggerDragContainerPressupBind),n.removeChild(n.waitChangePick)):n.infinityList.push(n.waitChangePick),n.waitChangePick=null):(i.x=i.orgX,i.y=i.orgY),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"collisionTest",value:function e(t,i){var n=t.getBounds().width*t.scale,a=t.getBounds().height*t.scale,s=i.getBounds().width*i.scale,o=i.getBounds().height*i.scale,r=t.x+t.getBounds().x*t.scale-n/2,u=t.x+t.getBounds().x*t.scale+n/2,l=t.y+t.getBounds().y*t.scale-a/2,d=t.y+t.getBounds().y*t.scale+a/2,h=i.x+i.getBounds().x*i.scale-s/2,p=i.x+i.getBounds().x*i.scale+s/2,c=i.y+i.getBounds().y*i.scale-o/2,_=i.y+i.getBounds().y*i.scale+a/2,g=void 0,f=void 0;return f=l<c&&c<d||l<_&&_<d,(g=r<h&&h<u||r<p&&p<u)&&f}},{key:"randomInt",value:function e(t,i,n){for(var a=void 0;a=Math.round(Math.random()*(i-t))+t,b.default.notNull(n)&&a===n;);return a}}]),h);function h(e){r(this,h),this._parent=e,this._splitAndMatchGroup=[],this._prevTime=-1,this._seq=999}t.ModuleMathGameSplitAndMath=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleTwoStepAnimate=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,I=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["TwoStepAnimateOn","TwoStepAnimateOff"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0,i=void 0;t=this._animateOnGroup.length;for(var n=0;n<t;n++){var a=void 0;i=this._animateOnGroup[n];for(var s=this._parent.getInstanceMirror(i),o=i.subControls.length,r=0;r<o;r++){a=s.target[i.subControls[r]];var u=this._parent.getInstanceMirror(a),l=u.parent[u.args[0]];I.default.notNull(l)&&I.default.notNull(l.timeout)&&clearTimeout(l.timeout)}}t=this._animateOffGroup.length;for(var d=0;d<t;d++){var h=void 0;i=this._animateOffGroup[d];for(var p=this._parent.getInstanceMirror(i),c=i.subControls.length,_=0;_<c;_++){h=p.target[i.subControls[_]];var g=this._parent.getInstanceMirror(h),f=g.parent[g.args[0]];I.default.notNull(f)&&I.default.notNull(f.timeout)&&clearTimeout(f.timeout)}}}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0;t=this._animateOnGroup.length;for(var n=0;n<t;n++){var a=void 0;(i=this._animateOnGroup[n]).isShow=!0;for(var s=this._parent.getInstanceMirror(i),o=i.subControls.length,r=0;r<o;r++){a=s.target[i.subControls[r]],i.mouseEnabled=!0;var u=this._parent.getInstanceMirror(a),l=u.parent[u.args[0]];I.default.notNull(l)&&I.default.notNull(l.timeout)&&clearTimeout(l.timeout)}this.refreshTwoStepAnimate(i)}t=this._animateOffGroup.length;for(var d=0;d<t;d++){var h=void 0;(i=this._animateOffGroup[d]).isShow=!1;for(var p=this._parent.getInstanceMirror(i),c=i.subControls.length,_=0;_<c;_++){h=p.target[i.subControls[_]],i.mouseEnabled=!0;var g=this._parent.getInstanceMirror(h),f=g.parent[g.args[0]];I.default.notNull(f)&&I.default.notNull(f.timeout)&&clearTimeout(f.timeout)}this.refreshTwoStepAnimate(i)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"TwoStepAnimateOn":this._animateOnGroup.push(t);break;case"TwoStepAnimateOff":this._animateOffGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return I.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"pickRelationControl",value:function e(t,i,n){for(var a=[],s=this._parent.getInstanceMirror(t),o=s.subset.length,r=0;r<o;r++){var u=this._parent.getInstanceMirror(s.target[s.subset[r]]);if(u.command===i)for(var l=u.subset.length,d=0;d<l;d++){var h=u.target[u.subset[d]],p;this._parent.getInstanceMirror(h).command===n&&a.push(h)}}return a}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0,s=void 0;this.triggerTwoStepFuncMousedownBind=this.triggerTwoStepFuncMousedownBind||this.triggerTwoStepFuncMousedown.bind(this),n=this._animateOnGroup.length;for(var o=0;o<n;o++){var r=void 0,u=void 0;if(!(a=this._animateOnGroup[o])._isModuleInited){a._replacePath=i,a._isModuleInited=!0;var l=this._parent.getInstanceMirror(a);a.isShow=!0,a.subControls=[],a.defaultControl=null,u=l.subset.length;for(var d=0;d<u;d++)"btnOn"!==l.subset[d]&&0===l.subset[d].indexOf("btn")&&(a.subControls.push(l.subset[d]),-1!==l.subset[d].indexOf("One")&&(a.defaultControl=l.subset[d]));r=a.btnOn,I.default.notNull(r)&&(r.isSubControl=!1,r.cursor="pointer",r.mouseChildren=!1,r.addEventListener(this._mouseTriggerBehavior,this.triggerTwoStepFuncMousedownBind),I.default.notNull(r.EffectBase)&&I.default.applyMultiply(r.EffectBase)),u=a.subControls.length;for(var h=0;h<u;h++){(r=l.target[a.subControls[h]]).isSubControl=!0,r.cursor="pointer",r.mouseChildren=!1,r.addEventListener(this._mouseTriggerBehavior,this.triggerTwoStepFuncMousedownBind),I.default.notNull(r.EffectBase)&&I.default.applyMultiply(r.EffectBase),r.gotoAndStop(0);var p=this._parent.getInstanceMirror(r),c=p.parent[p.args[0]];if(I.default.notNull(c)){c.gotoAndStop(0),c.visible=!1,c._this=this,c.animateRunningBind=c.animateRunningBind||this.animateRunning.bind(c),c.startStep=0,c.endStep=0;var _=r.labels.length;r.animateRange={};for(var g=0;g<_;g++){r.animateRange[r.labels[g].label]={};for(var f=c.labels.length,v=-1,m=0;m<f;m++)if(c.labels[m].label===r.labels[g].label){v=m;break}-1!==v&&(r.animateRange[r.labels[g].label].begin=c.labels[v].position,I.default.notNull(c.labels[v+1])?r.animateRange[r.labels[g].label].end=c.labels[v+1].position-1:r.animateRange[r.labels[g].label].end=c.totalFrames-1)}}}this.refreshTwoStepAnimate(a)}}n=this._animateOffGroup.length;for(var b=0;b<n;b++){var y=void 0,S=void 0;if(!(a=this._animateOffGroup[b])._isModuleInited){a._replacePath=i,a._isModuleInited=!0;var P=this._parent.getInstanceMirror(a);a.isShow=!1,a.subControls=[],a.defaultControl=null,S=P.subset.length;for(var M=0;M<S;M++)"btnOn"!==P.subset[M]&&0===P.subset[M].indexOf("btn")&&(a.subControls.push(P.subset[M]),-1!==P.subset[M].indexOf("One")&&(a.defaultControl=P.subset[M]));y=a.btnOn,I.default.notNull(y)&&(y.isSubControl=!1,y.cursor="pointer",y.mouseChildren=!1,y.addEventListener(this._mouseTriggerBehavior,this.triggerTwoStepFuncMousedownBind),I.default.notNull(y.EffectBase)&&I.default.applyMultiply(y.EffectBase)),S=a.subControls.length;for(var k=0;k<S;k++){(y=P.target[a.subControls[k]]).isSubControl=!0,y.cursor="pointer",y.mouseChildren=!1,y.addEventListener(this._mouseTriggerBehavior,this.triggerTwoStepFuncMousedownBind),I.default.notNull(y.EffectBase)&&I.default.applyMultiply(y.EffectBase),y.gotoAndStop(0);var O=this._parent.getInstanceMirror(y),B=O.parent[O.args[0]];if(I.default.notNull(B)){B.gotoAndStop(0),B.visible=!1,B._this=this,B.animateRunningBind=B.animateRunningBind||this.animateRunning.bind(B),B.startStep=0,B.endStep=0;var x=y.labels.length;y.animateRange={};for(var C=0;C<x;C++){y.animateRange[y.labels[C].label]={};for(var T=B.labels.length,w=-1,L=0;L<T;L++)if(B.labels[L].label===y.labels[C].label){w=L;break}-1!==w&&(y.animateRange[y.labels[C].label].begin=B.labels[w].position,I.default.notNull(B.labels[w+1])?y.animateRange[y.labels[C].label].end=B.labels[w+1].position-1:y.animateRange[y.labels[C].label].end=B.totalFrames-1)}}}this.refreshTwoStepAnimate(a)}}}},{key:"refreshTwoStepAnimate",value:function e(t){var i=void 0,n=this._parent.getInstanceMirror(t);if(t.isShow){if(i=t.btnOn,I.default.notNull(i)){i.gotoAndStop(1);for(var a=t.subControls.length,s=0;s<a;s++){(i=n.target[t.subControls[s]]).visible=!0,i.mouseEnabled=!0,i.gotoAndStop(0);var o=this._parent.getInstanceMirror(i),r=o.parent[o.args[0]];I.default.notNull(r)&&(I.default.notNull(r.timeout)&&clearTimeout(r.timeout),r.startStep=0,r.endStep=0,r.gotoAndStop(0),o.name===t.defaultControl?r.visible=!0:r.visible=!1)}}}else if(i=t.btnOn,I.default.notNull(i)){i.gotoAndStop(0);for(var u=t.subControls.length,l=0;l<u;l++){(i=n.target[t.subControls[l]]).visible=!1,i.gotoAndStop(0);var d=this._parent.getInstanceMirror(i),h=d.parent[d.args[0]];I.default.notNull(h)&&(I.default.notNull(h.timeout)&&clearTimeout(h.timeout),h.startStep=0,h.endStep=0,h.gotoAndStop(0),h.visible=!1)}}}},{key:"pickTargetLabel",value:function e(t,i){var n="";if(I.default.notNull(t.labels))for(var a=t.labels.length,s=0;s<a;s++)if(t.labels[s].position===i){n=t.labels[s].label;break}return n}},{key:"triggerTwoStepFuncMousedown",value:function e(t){this.stop();var i=t.currentTarget,n=i.parent,a=this._parent.getInstanceMirror(i),s=this._parent.getInstanceMirror(n);if(i.isSubControl){for(var o=n.subControls.length,r=void 0,u=!1,l=0;l<o;l++){var d=a.parent[n.subControls[l]],h=this._parent.getInstanceMirror(d);r=a.parent[h.args[0]],a.parent[a.args[0]]===r?(r.visible||(u=!0),r.visible=!0):r.visible=!1}if(u)for(var p=0;p<o;p++){var c=a.parent[n.subControls[p]];c.mouseEnabled=!0,c.gotoAndStop(0)}if(r=a.parent[a.args[0]],I.default.notNull(r)){var _=this.pickTargetLabel(i,i.currentFrame);if(""!==_){i.gotoAndStop(i.currentFrame+1),r.startStep=i.animateRange[_].begin,r.endStep=i.animateRange[_].end,r.gotoAndStop(r.startStep),r._target=i;var g=Math.floor(1e3/this._parent.lib.properties.fps);r.startStep<r.endStep?(i.mouseEnabled=!1,r.timeout=setTimeout(r.animateRunningBind,g)):(r.endStep=r.startStep,i.gotoAndStop(i.currentFrame+1))}}}else if(n.isShow)this.refreshTwoStepAnimate(n);else{n.isShow=!0;for(var f=this._pickList.length,v=0;v<f;v++){var m=this._pickList[v],b;this._parent.getInstanceMirror(m).args[0]===s.args[0]&&m!==n&&(m.isShow=!1,this.refreshTwoStepAnimate(m))}this.refreshTwoStepAnimate(n)}}},{key:"animateRunning",value:function e(){var t=this._target,i=this._this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!(n.currentFrame<n.endStep))return clearTimeout(n.timeout),t.gotoAndStop(t.currentFrame+1),void(t.mouseEnabled=!0);n.gotoAndStop(n.currentFrame+1);var a=Math.floor(1e3/this._this._parent.lib.properties.fps);n.timeout=setTimeout(n.animateRunningBind,a)}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._animateOnGroup=[],this._animateOffGroup=[],this._seq=999}t.ModuleTwoStepAnimate=l},,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(60).WaterEduPage,a=i(19).EnBookPage,s=i(61).QuizBookPage,o=i(2).CommonBookPage,r=i(41).MathBookPage,u=i(20).ChBookPage,l=i(19).EnBookPage,d=i(63).GameBookPage;e.exports={WaterEdu:n,QuizBook:s,JoyEdu:a,CommonBook:o,MathBook:r,ChineseBook:u,EnglishBook:l,GameBook:d}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaterEduPage=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o,r=l(i(0)),u=i(2);function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=(p(g,_=u.CommonBookPage),n(g,[{key:"init",value:function e(){s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam))}}]),g),_;function g(e,t,i,n){d(this,g);var a=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e,t,i,n));return(a._this=a)._resetExclude=[],a}t.WaterEduPage=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuizBookPage=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,k=i(15).ModuleOnAndOff,O=i(16).ModuleCalculator,B=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(62).ModuleNXQuiz,T=(h(L,w=p),n(L,[{key:"init",value:function e(){s(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.stop(n,a,!0)}},{key:"stop",value:function e(t,i,n){var a=0<arguments.length&&void 0!==t?t:null,s=1<arguments.length&&void 0!==i&&i,o=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(a=this.soundObj.excludeTags),r.default.isNull(a)&&(a=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(a=a.concat(this.videoObj.excludeTags)),-1===a.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!o&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!o&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleGoOutCommand&&-1===a.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===a.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===a.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===a.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===a.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===a.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===a.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===a.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===a.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===a.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===a.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===a.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===a.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleNXQuiz&&-1===a.indexOf("ModuleNXQuiz")&&-1===this._resetExclude.indexOf("ModuleNXQuiz")&&this._moduleNXQuiz.stop(),this._moduleAnsZone&&-1===a.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===a.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===a.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),s&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleNXQuiz&&-1===n.indexOf("ModuleNXQuiz")&&-1===this._resetExclude.indexOf("ModuleNXQuiz")&&this._moduleNXQuiz.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleNXQuiz&&-1===n.indexOf("ModuleNXQuiz")&&-1===this._resetExclude.indexOf("ModuleNXQuiz")&&this._moduleNXQuiz.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),a&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(s(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var a=1<arguments.length&&void 0!==i?i:.2,s=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,a,s)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(s(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new k(this).init(),this._moduleCalculator=new O(this).init(),this._modulePureAnimate=new B(this).init(),this._moduleZoom=new x(this).init(),this._moduleNXQuiz=new C(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new k(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new O(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new B(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleNXQuiz)?this._moduleNXQuiz=new C(this).init(t):this._moduleNXQuiz.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),L),w;function L(e,t,i,n){l(this,L);var a=d(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,e,t,i,n));return(a._this=a)._resetExclude=[],a}t.QuizBookPage=T},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleNXQuiz=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,q=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["NXQuizPanel"],l={NXQuizPanel:"none"},d=!1,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),q.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null),q.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),q.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),q.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),this._runningAutoHint=null;for(var t=this._pickList.length,i=void 0,n=void 0,a=0;a<t;a++){i=this._pickList[a],n=this._parent.getInstanceMirror(i);var s=this.getCustomTag(i),o=i.parent,r=o.mcRight,u=o.mcWrong,l=o.NXQuizToolBar,d=o.NXQuizContent,h=i;this.clearQuizAnsStatus(i),d.visible=!1,h.visible=!0}q.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),q.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;this._pickList.push(t),t._seq=this._seq,this._seq++}}},{key:"getCustomTag",value:function e(t){return q.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"setup",value:function e(t){var d=this,h=0<arguments.length&&void 0!==t?t:"",i=this._pickList.length,p=void 0,c=this;this._preloadManifestCount=0,this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.handleFileLoadBind=this.handleFileLoadBind||this.handleFileLoad.bind(this),this.handleCompleteBind=this.handleCompleteBind||this.handleComplete.bind(this),this.triggerIntroMouseDownBind=this.triggerIntroMouseDownBind||this.triggerIntroMouseDown.bind(this),this.triggerIntroMouseSwitchBind=this.triggerIntroMouseSwitchBind||this.triggerIntroMouseSwitch.bind(this),this.triggerToolbarMouseDownBind=this.triggerToolbarMouseDownBind||this.triggerToolbarMouseDown.bind(this),this.handleQuestionSoundClickBind=this.handleQuestionSoundClickBind||this.handleQuestionSoundClick.bind(this),this.triggerQuestionSoundWatchBind=this.triggerQuestionSoundWatchBind||this.triggerQuestionSoundWatch.bind(this),this.handleQuestionSoundCompleteBind=this.handleQuestionSoundCompleteBind||this.handleQuestionSoundComplete.bind(this),this.handleQuizUnitTouchIsOnlySoundBind=this.handleQuizUnitTouchIsOnlySoundBind||this.handleQuizUnitTouchIsOnlySound.bind(this),this.handleQuizUnitTouchIsCheckBind=this.handleQuizUnitTouchIsCheckBind||this.handleQuizUnitTouchIsCheck.bind(this),this.triggerResultAnimateSoundWatchBind=this.triggerResultAnimateSoundWatchBind||this.triggerResultAnimateSoundWatch.bind(this),this.triggerResultAnimateSoundCompleteBind=this.triggerResultAnimateSoundCompleteBind||this.triggerResultAnimateSoundComplete.bind(this),this.triggerAutoHintAnimateSoundCompleteBind=this.triggerAutoHintAnimateSoundCompleteBind||this.triggerAutoHintAnimateSoundComplete.bind(this),this.handleQuizUnitTouchMoveStartByType3Bind=this.handleQuizUnitTouchMoveStartByType3Bind||this.handleQuizUnitTouchMoveStartByType3.bind(this),this.handleQuizUnitTouchMoveMoveByType3Bind=this.handleQuizUnitTouchMoveMoveByType3Bind||this.handleQuizUnitTouchMoveMoveByType3.bind(this),this.handleQuizUnitTouchMoveEndByType3Bind=this.handleQuizUnitTouchMoveEndByType3Bind||this.handleQuizUnitTouchMoveEndByType3.bind(this),this.handleQuizUnitLineMoveStartBind=this.handleQuizUnitLineMoveStartBind||this.handleQuizUnitLineMoveStart.bind(this),this.handleQuizUnitLineMoveMoveBind=this.handleQuizUnitLineMoveMoveBind||this.handleQuizUnitLineMoveMove.bind(this),this.handleQuizUnitLineMoveEndBind=this.handleQuizUnitLineMoveEndBind||this.handleQuizUnitLineMoveEnd.bind(this),this.handleQuizUnitTouchMoveStartByType6Bind=this.handleQuizUnitTouchMoveStartByType6Bind||this.handleQuizUnitTouchMoveStartByType6.bind(this),this.handleQuizUnitTouchMoveMoveByType6Bind=this.handleQuizUnitTouchMoveMoveByType6Bind||this.handleQuizUnitTouchMoveMoveByType6.bind(this),this.handleQuizUnitTouchMoveEndByType6Bind=this.handleQuizUnitTouchMoveEndByType6Bind||this.handleQuizUnitTouchMoveEndByType6.bind(this),this.handleQuizUnitTouchMoveStartByType7Bind=this.handleQuizUnitTouchMoveStartByType7Bind||this.handleQuizUnitTouchMoveStartByType7.bind(this),this.handleQuizUnitTouchMoveMoveByType7Bind=this.handleQuizUnitTouchMoveMoveByType7Bind||this.handleQuizUnitTouchMoveMoveByType7.bind(this),this.handleQuizUnitTouchMoveEndByType7Bind=this.handleQuizUnitTouchMoveEndByType7Bind||this.handleQuizUnitTouchMoveEndByType7.bind(this),this.handleType7KeyboardBind=this.handleType7KeyboardBind||this.handleType7Keyboard.bind(this);for(var n=0;n<i;n++)(p=this._pickList[n])._isModuleInited||function(){p._replacePath=h,p._isModuleInited=!0;var e=d.getCustomTag(p),t=p.parent,i=t.mcRight,n=t.mcWrong,a=t.NXQuizToolBar,s=t.NXQuizContent,o=p;i.rawdata="right",n.rawdata="wrong",a.mcToolType.pageShowMC.pageTxt.textBaseline=d._parent.textBaseline,"alphabetic"===d._parent.textBaseline&&(a.mcToolType.pageShowMC.pageTxt.y+=a.mcToolType.pageShowMC.pageTxt.lineHeight*d._parent.textAlphabeticFixYScale),o.titleText.textBaseline=d._parent.textBaseline,o.titleText.text="　　　　　　　　　　　　　　　　　　　　　　　　　　　","alphabetic"===d._parent.textBaseline&&(o.titleText.y+=o.titleText.lineHeight*d._parent.textAlphabeticFixYScale),d._parent.stage.isWebGL&&(o.titleText.cache(o.titleText.getBounds().x,o.titleText.getBounds().y,o.titleText.getBounds().width,o.titleText.getBounds().height,2),o.titleText.updateCache()),a.mcToolType.pageShowMC.pageTxt.text="99/99",d._parent.stage.isWebGL&&(a.mcToolType.pageShowMC.pageTxt.cache(a.mcToolType.pageShowMC.pageTxt.getBounds().x,a.mcToolType.pageShowMC.pageTxt.getBounds().y,a.mcToolType.pageShowMC.pageTxt.getBounds().width,a.mcToolType.pageShowMC.pageTxt.getBounds().height,2),a.mcToolType.pageShowMC.pageTxt.updateCache()),i.visible=!1,n.visible=!1,a.visible=!1,s.visible=!1,o.visible=!0,o.sequenceBtn.cursor="pointer",o.randomBtn.cursor="pointer",o.autoSoundPlayBtn.cursor="pointer",o.sequenceBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerIntroMouseDownBind),o.randomBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerIntroMouseDownBind),o.autoSoundPlayBtn.addEventListener("mousedown",d.triggerIntroMouseSwitchBind),d.disableButtonHelper(o.sequenceBtn),d.disableButtonHelper(o.randomBtn),o.autoSoundPlayBtn.gotoAndStop(0),d.disableButtonHelper(o.autoSoundPlayBtn),a.checkButton.cursor="pointer",a.mcToolType.prevBtn.cursor="pointer",a.mcToolType.nextBtn.cursor="pointer",a.mcToolType.againBtn.cursor="pointer",a.mcToolType.backOne.cursor="pointer",a.checkButton.parentRef=o,a.mcToolType.prevBtn.parentRef=o,a.mcToolType.nextBtn.parentRef=o,a.mcToolType.againBtn.parentRef=o,a.mcToolType.backOne.parentRef=o,d.disableButtonHelper(a.mcToolType.prevBtn),d.disableButtonHelper(a.mcToolType.nextBtn),d.disableButtonHelper(a.mcToolType.againBtn),d.disableButtonHelper(a.mcToolType.backOne),d.disableButtonHelper(a.checkButton),a.mcToolType.prevBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),a.mcToolType.nextBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),a.mcToolType.againBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),a.mcToolType.backOne.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),a.checkButton.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),d._pickListLoader[e]=new d._parent.createjs.LoadQueue(!0,"./quiz/","Anonymous"),d._pickListLoader[e].id=e,d._pickListLoader[e].installPlugin(d._parent.createjs.Sound),d._pickListLoader[e].setMaxConnections(6),d._pickListXML[e]=null,d._pickListImages[e]={},d._pickListProp[e]={},d._pickListMP3Resource[e]={},d._parentListShapeTemp[e]=new d._parent.createjs.Shape,d._parentListShapeBase[e]=new d._parent.createjs.Shape,d._pickListProp[e].quiz_resource=[],d._pickListProp[e].quiz_resource_map=[],d._pickListProp[e].quiz_prop={},d._pickListProp[e].quiz_page_data=[],d._pickListProp[e].quiz_unit_data=[],d._pickListProp[e].unit_instance=[],d._pickListProp[e].unit_auto_type=[],d._pickListProp[e].quizPageIndex,d._pickListProp[e].questionSound,d._pickListProp[e].quizTouchSound,d._pickListProp[e].answerStatus=[],d._pickListProp[e].page_type2_ans=[],d._pickListProp[e].page_type3_ans={},d._pickListProp[e].page_type5_ans={},d._pickListProp[e].page_type7_ans={},d._pickListProp[e].page_type6_ans={},d._pickListProp[e].autoSoundPlay=!1;var r=document.getElementsByTagName("head")[0],u=document.createElement("script");u.id=e,u.type="text/javascript";var l=d._pickListManifest;u.onload=u.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(l[u.id]=JSON.parse(JSON.stringify(quiz_manifest)),u.onload=u.onreadystatechange=null,c._preloadManifestCount+=1,c.readJSONManifest(u.id))},u.src="./quiz/mapping.js?"+Math.ceil(5e3*Math.random()),r.appendChild(u)}()}},{key:"readJSONManifest",value:function e(t){var i=this,n=this._pickListJsonManifest;n[t]=null,i.checkPreloadManifest()}},{key:"readTextFile",value:function e(t,i){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&"200"==n.status?i(n.responseText):4===n.readyState&&"404"==n.status&&i("")},n.send(null)}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"checkPreloadManifest",value:function e(){if(this._preloadManifestCount===this._pickList.length)for(var t=this._pickList.length,i=this._preloadResourceCount=0;i<t;i++){for(var n=this._pickList[i],a=this.getCustomTag(n),s=this._pickListManifest[a].length,o=[],r=0;r<s;r++)if(-1===this._pickListManifest[a][r].src.indexOf(".mp3"))null===this._pickListJsonManifest[a]&&o.push(this._pickListManifest[a][r]);else{var u=this._pickListManifest[a][r].src.split(".mp3");u=u[0].split("asset/"),this._pickListMP3Resource[a][this._pickListManifest[a][r].id]=u[1]}if(null!==this._pickListJsonManifest[a])for(var l=this._pickListJsonManifest[a].images.length,d=0;d<l;d++)o.push({src:"asset2/"+this._pickListJsonManifest[a].images[d],id:this._pickListJsonManifest[a].images[d]});this._pickListManifest[a]=JSON.parse(JSON.stringify(o)),0===this._pickListManifest[a].length&&null===this._pickListJsonManifest[a]?this._preloadResourceCount+=1:(this._pickListLoader[a].addEventListener("fileload",this.handleFileLoadBind),this._pickListLoader[a].addEventListener("complete",this.handleCompleteBind),this._pickListLoader[a].loadFile({src:"data.xml?"+Math.ceil(5e3*Math.random()),type:"xml",id:"quiz_xml"},!1),this._pickListLoader[a].loadManifest(this._pickListManifest[a],!1),this._pickListLoader[a].load())}}},{key:"handleFileLoad",value:function e(t){var i=t.currentTarget;t&&"image"===t.item.type?this._pickListImages[i.id][t.item.id]=t.result:t&&"xml"===t.item.type&&"quiz_xml"===t.item.id&&(this._pickListXML[i.id]=t.result)}},{key:"handleComplete",value:function e(t){var i,n=t.currentTarget.id;if(null!==this._pickListJsonManifest[n]){for(var a=this._pickListJsonManifest[n].images.length,s=[],o=0;o<a;o++)s.push(this._pickListImages[n][this._pickListJsonManifest[n].images[o]]);this._pickListJsonSS[n]=new this._parent.createjs.SpriteSheet({images:s,frames:this._pickListJsonManifest[n].frames})}if(this._pickListLoader[n].removeEventListener("fileload",this.handleFileLoadBind),this._pickListLoader[n].removeEventListener("complete",this.handleCompleteBind),this._preloadResourceCount+=1,this._preloadResourceCount===this._pickList.length)for(var r=this._pickList.length,u=0;u<r;u++){var l=this.getCustomTag(this._pickList[u]);if(this.parseQuizData(l),this._pickList[u].titleText.text=this._pickListProp[l].quiz_prop.PageMenuTitle,this._parent.stage.isWebGL&&this._pickList[u].titleText.updateCache(),null!==this._pickListJsonManifest[l]){this._pickListJsonSSImage[l]={};var d=[];for(var h in this._pickListJsonManifest[n].animations)if(""!==h){var p=Number(this._pickListJsonManifest[n].animations[h].frames[0]);this._pickListJsonSSImage[l][h]=new this._parent.createjs.Sprite(this._pickListJsonSS[l]),this._pickListJsonSSImage[l][h].gotoAndStop(p),d.push(h)}for(var c=d.length,_=this._pickListProp[l].quiz_resource.length,g=0;g<c;g++)for(var f=0;f<_;f++){var v=this._pickListProp[l].quiz_resource[f].data.split(".");if("mp3"!==v[1]&&v[0]===d[g]){var m=this._pickListProp[l].quiz_resource[f].id;this._pickListImages[l][m]=this._pickListJsonSSImage[l][d[g]];break}}}if(0<this._pickListProp[l].quiz_page_data.length){this._pickListQuestionSeqIndex[l]=0,this._pickListQuestionSeq[l]=this.generateArrayNumber(0,this._pickListProp[n].quiz_page_data.length),this.enableButtonHelper(this._pickList[u].sequenceBtn),this.enableButtonHelper(this._pickList[u].randomBtn);var b=this._pickList[u].parent.NXQuizToolBar;this.enableButtonHelper(b.mcToolType.prevBtn),this.enableButtonHelper(b.mcToolType.nextBtn),this.enableButtonHelper(b.mcToolType.againBtn),this.enableButtonHelper(b.mcToolType.backOne),this.enableButtonHelper(b.checkButton);var y=this._pickList[u];switch(y.autoSoundPlayBtn.cursor="pointer",this._pickListProp[l].autoSoundPlay=!1,Number(this._pickListProp[l].quiz_prop.PageIntroSoundStatus)){case 0:this.disableButtonHelper(y.autoSoundPlayBtn);break;case 1:this._pickListProp[l].autoSoundPlay=!1,this.enableButtonHelper(y.autoSoundPlayBtn),y.autoSoundPlayBtn.gotoAndStop(0);break;case 2:this._pickListProp[l].autoSoundPlay=!0,this.enableButtonHelper(y.autoSoundPlayBtn),y.autoSoundPlayBtn.gotoAndStop(2)}this.initUnitInstance(this._pickList[u]),!1===b.mcToolType.backOne.visible&&this._pickList[u].sequenceBtn.dispatchEvent("click")}}}},{key:"parseQuizData",value:function e(t){var i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,r=void 0,u=this._pickListXML[t].documentElement;a=(i=u.getElementsByTagName("Resource"))[0].childNodes.length;for(var l=0;l<a;l++)l%2!=0&&this._pickListProp[t].quiz_resource.push({id:i[0].childNodes[l].id,data:i[0].childNodes[l].textContent});a=(i=u.getElementsByTagName("ResourceMap"))[0].childNodes.length;for(var d=0;d<a;d++)d%2!=0&&this._pickListProp[t].quiz_resource_map.push({id:i[0].childNodes[d].id,type:i[0].childNodes[d].textContent});a=(i=u.getElementsByTagName("Prop"))[0].childNodes.length;for(var h=0;h<a;h++)h%2!=0&&(this._pickListProp[t].quiz_prop[i[0].childNodes[h].nodeName]=i[0].childNodes[h].textContent);a=(i=u.getElementsByTagName("PageData")).length;for(var p=void 0,c=void 0,_=0;_<a;_++){r={},this._pickListProp[t].quiz_page_data[i[_].getAttribute("index")]=r,s=(n=i[_].childNodes).length;for(var g=0;g<s;g++)if(g%2!=0&&"unit"!=n[g].nodeName&&"activeRightSets"!=n[g].nodeName){r[n[g].nodeName]={},o=n[g].attributes.length;for(var f=0;f<o;f++)p=n[g].attributes[f].name,c=n[g].attributes[f].value,r[n[g].nodeName][p]=c;r[n[g].nodeName].rawdata=n[g].textContent}else if(g%2!=0&&"unit"==n[g].nodeName){void 0===this._pickListProp[t].quiz_unit_data&&(this._pickListProp[t].quiz_unit_data=[]),void 0===this._pickListProp[t].quiz_unit_data[_]&&(this._pickListProp[t].quiz_unit_data[_]={}),void 0===this._pickListProp[t].quiz_unit_data[_][n[g].textContent]&&(this._pickListProp[t].quiz_unit_data[_][n[g].textContent]=[]);var v={};o=n[g].attributes.length;for(var m=0;m<o;m++)p=n[g].attributes[m].name,c=n[g].attributes[m].value,v[p]=c;this._pickListProp[t].quiz_unit_data[_][n[g].textContent].push(v)}else if(g%2!=0&&"activeRightSets"==n[g].nodeName){var v;void 0===r[n[g].nodeName]&&(r[n[g].nodeName]=[]),(v={}).rawdata=n[g].textContent,r[n[g].nodeName].push(v)}}}},{key:"initUnitInstance",value:function e(t){for(var i=this.getCustomTag(t),n=this._parent.createjs,a=this._pickListImages[i],s=Number.MAX_VALUE,o=Number.MAX_VALUE,r=Number.MIN_VALUE,u=Number.MIN_VALUE,l=this._pickListProp[i].quiz_unit_data.length,d=0;d<l;d++)for(var h in void 0===this._pickListProp[i].unit_auto_type[d]&&(this._pickListProp[i].unit_auto_type[d]={}),void 0===this._pickListProp[i].unit_instance[d]&&(this._pickListProp[i].unit_instance[d]={}),this._pickListProp[i].quiz_unit_data[d])if(this._pickListProp[i].quiz_unit_data[d].hasOwnProperty(h)){var p=void 0,c=this._pickListProp[i].quiz_unit_data[d][h],_=0,g=0,f;if(!("HittingAuto"===c[0].autoType&&"undefined"===c[0].typeKind||void 0===c[0].autoType&&"NXFLEXTEXTFILED"!=c[0].id&&"KEYBOARDCLASS"!=c[0].id)){switch(c[0].autoType){case"HittingAuto":p=this.factoryAutoType(c[0].id,c[0]);break;default:"NXFLEXTEXTFILED"===c[0].id?(p=this.factoryAutoType(c[0].id,c[0]),c[0].autoType=""):"KEYBOARDCLASS"===c[0].id&&(p=this.factoryAutoType(c[0].id,c[0]),c[0].autoType="KEYBOARDCLASS")}this._pickListProp[i].unit_auto_type[d][h]=c[0].autoType,(this._pickListProp[i].unit_instance[d][h]=p).gotoAndStop(1),p.id=h,null!=c[0].sound?p.sound=c[0].sound:p.sound="",null!=c[0].group?p.group=Number(c[0].group):p.group=0;continue}var v=[];this._pickListProp[i].unit_auto_type[d][h]="",p=new n.MovieClip,this._pickListProp[i].unit_instance[d][h]=p;var m=c.length;s=Number.MAX_VALUE,o=Number.MAX_VALUE,r=Number.MIN_VALUE,u=Number.MIN_VALUE;for(var b=0;b<m;b++){s>c[b].originX&&(s=c[b].originX),o>c[b].originY&&(o=c[b].originY),r<c[b].textWidth&&(r=c[b].textWidth),u<c[b].textHeight&&(u=c[b].textHeight),0===b&&(_=Number(Number(c[b].originX)+Number(c[b].textWidth)/2)*Number(c[b].scaleX),g=Number(Number(c[b].originY)+Number(c[b].textHeight)/2)*Number(c[b].scaleY));var y=void 0;(y=null===this._pickListJsonManifest[i]?new n.Bitmap(a[c[b].id]):a[c[b].id].clone()).parent=p,y.setTransform(c[b].originX,c[b].originY),1===m?p.timeline.addTween(n.Tween.get({}).to({state:[{t:y}]}).wait(1)):v.push(y)}if(0<v.length)switch(v.length){case 2:p.timeline.addTween(n.Tween.get({}).to({state:[{t:v[0]}]}).to({state:[{t:v[1]}]},1).wait(1));break;case 3:p.timeline.addTween(n.Tween.get({}).to({state:[{t:v[0]}]}).to({state:[{t:v[1]}]},1).to({state:[{t:v[2]}]},2).wait(1));break;case 4:default:p.timeline.addTween(n.Tween.get({}).to({state:[{t:v[0]}]}).to({state:[{t:v[1]}]},1).to({state:[{t:v[2]}]},2).to({state:[{t:v[3]}]},3).wait(1))}p.nominalBounds=new n.Rectangle(s,o,r,u),c[0].x=Number(c[0].x)-_,c[0].y=Number(c[0].y)-g,p.setTransform(c[0].x,c[0].y,c[0].scaleX,c[0].scaleY),p.gotoAndStop(1),p.id=h,null!=c[0].sound?p.sound=c[0].sound:p.sound="",null!=c[0].group?p.group=Number(c[0].group):p.group=0}}},{key:"factoryAutoType",value:function e(t,i){var n=this._parent.createjs,a=this._parent.lib,s=void 0;switch(t){case"GMCLASSHITGAMEAUTOTYPEB01":(s=new a.AutoHit01).rawdata="thump",s.setTransform(i.x,i.y,i.scaleX,i.scaleY,0,0,0,-i.originX,-i.originY);break;case"NXFLEXTEXTFILED":s=new n.MovieClip;var o=(new n.Text).set({text:i.text,font:i.assetFontSize+"px "+i.fontName,color:"#"+i.fontColor,lineWidth:i.textWidth,textAlign:i.fontAlign});o.y=-i.textHeight/2+(i.textHeight-o.getMeasuredHeight())/2,s.addChild(o),s.text=o,s.setTransform(i.x,i.y,i.scaleX,i.scaleY,0,0,0),s.nominalBounds=new n.Rectangle(-i.textWidth/2,-i.textHeight/2,i.textWidth,i.textHeight),this._parent.stage.isWebGL&&(s.cache(s.nominalBounds.x,s.nominalBounds.y,s.nominalBounds.width,s.nominalBounds.height,2),s.updateCache());var r=new n.Shape;s.addChild(r),(s.shape=r).graphics.clear(),r.alpha=.01,r.graphics.beginFill("#FFFFFF").drawRect(-i.textWidth/2,-i.textHeight/2,i.textWidth,i.textHeight),s.optText=i.optText,s.chinaCode=i.chinaCode,s.passType=i.passType;break;case"KEYBOARDCLASS":(s=new a.QuizKeyBoard).setTransform(i.x,i.y,i.scaleX,i.scaleY,0,0,0,-i.originX,-i.originY);break;default:s=new n.MovieClip}return s}},{key:"stepQuizProcess",value:function e(t,i){this._parent.stop(null,!0);var n=this.getCustomTag(t),a=this._parent.createjs,s=this._parent.lib,o=this._pickListImages[n],r=t.parent.NXQuizContent,u=t.parent.NXQuizToolBar,l=t,d=this._pickListProp[n].quiz_page_data[i],h=this._parentListShapeTemp[n],p=this._parentListShapeBase[n],c=d.layout.rawdata.split(",");for(var _ in c)if(c.hasOwnProperty(_)&&q.default.notNull(c[_])&&""!==c[_]){var g=this._pickListProp[n].quiz_unit_data[i][c[_]];this._pickListProp[n].unit_instance[i][c[_]].gotoAndStop(0),this._pickListProp[n].unit_instance[i][c[_]].x=g[0].x,this._pickListProp[n].unit_instance[i][c[_]].y=g[0].y,this._pickListProp[n].unit_instance[i][c[_]].scaleX=g[0].scaleX,this._pickListProp[n].unit_instance[i][c[_]].scaleY=g[0].scaleY,this._pickListProp[n].unit_instance[i][c[_]].scale0X=g[0].scaleX,this._pickListProp[n].unit_instance[i][c[_]].scale0Y=g[0].scaleY,r.addChild(this._pickListProp[n].unit_instance[i][c[_]])}switch(r._btn_sound.rawdata=this._pickListMP3Resource[n][d.sound.rawdata],r._btn_sound.loopdata=Number(this._pickListProp[n].quiz_prop.SoundCount),0<r._btn_sound.loopdata&&(r._btn_sound.loopdata-=1),r._btn_sound.addEventListener("click",this.handleQuestionSoundClickBind),r._btn_sound.setTransform(d.sound.x,d.sound.y,d.sound.scaleX,d.sound.scaleY),r._btn_sound.cursor="pointer",""===d.sound.rawdata?r._btn_sound.visible=!1:(r._btn_sound.visible=!0,this._pickListProp[n].autoSoundPlay&&this.callQuestionSoundClick(r._btn_sound)),u.checkButton.visible=!0,""===d.activeMC.rawdata&&""===d.activeMCP.rawdata&&(u.checkButton.visible=!1),this._quizPageIndex=i,h.graphics.clear(),p.graphics.clear(),r.addChild(h),r.addChild(p),q.default.trace(d.type.rawdata),d.type.rawdata){case"Type2":this.injectQuizType2(t);break;case"Type3":this.injectQuizType3(t);break;case"Type5":this.injectQuizType5(t);break;case"Type6":this.injectQuizType6(t);break;case"Type7":this.injectQuizType7(t)}r._btn_sound.visible&&r.addChild(r._btn_sound)}},{key:"injectQuizType2",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];for(var g in c.page_type="type2",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_active_right="",0!=d.activeRightSets.length?(c.page_active_right=d.activeRightSets[0].rawdata.split(","),c.page_active_right=this.checkArrayData(c.page_active_right)):c.page_active_right="",c.page_type2_ans.length=0,c.page_base)if(""!==g){var f=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[g]][0].sound];q.default.notNull(f)&&(_[c.page_base[g]].cursor="pointer",_[c.page_base[g]].rawdata=f,_[c.page_base[g]].baseTarget=t,_[c.page_base[g]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var v in c.page_active_mc)if(""!==v){var m=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[v]][0].sound];_[c.page_active_mc[v]].rawdata=_[c.page_active_mc[v]].rawdata?_[c.page_active_mc[v]].rawdata:m,_[c.page_active_mc[v]].cursor="pointer",_[c.page_active_mc[v]].baseTarget=t,_[c.page_active_mc[v]].addEventListener("click",this.handleQuizUnitTouchIsCheckBind)}for(var b in c.page_active_mcp)if(""!==b){var y=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[b]][0].sound];q.default.notNull(y)&&(_[c.page_active_mcp[b]].cursor="pointer",_[c.page_active_mcp[b]].rawdata=y,_[c.page_active_mcp[b]].baseTarget=t,_[c.page_active_mcp[b]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}}},{key:"handleQuizUnitTouchIsCheck",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null),this._parent.stop(null,!0);var i=t.currentTarget,n=i.baseTarget,a=this.getCustomTag(n),s=this._pickListProp[a];if(!s.page_is_check_ans){switch(s.page_type){case"type2":if(-1!=s.page_type2_ans.indexOf(i.id))return}""===s.unit_auto_type[this._quizPageIndex][i.id]?(q.default.notNull(i.rawdata)&&this.callQuestionSoundClick(i),2<=i.totalFrames&&i.gotoAndStop(1),this.checkTouchIsQuizAns(n,i.id)):this.callAutoHintAnimate(i)}}},{key:"injectQuizType3",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];if(c.page_type="type3",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type3_ans={},c.page_active_right={},0!=d.activeRightSets.length)for(var g=c.page_active_mcp.length,f=0;f<g;f++)void 0===d.activeRightSets[f]?c.page_active_right[c.page_active_mcp[f]]=[]:(c.page_active_right[c.page_active_mcp[f]]=d.activeRightSets[f].rawdata.split(","),c.page_active_right[c.page_active_mcp[f]]=this.checkArrayData(c.page_active_right[c.page_active_mcp[f]])),c.page_type3_ans[c.page_active_mcp[f]]={};for(var v in c.page_base)if(""!==v){var m=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[v]][0].sound];q.default.notNull(m)&&(_[c.page_base[v]].cursor="pointer",_[c.page_base[v]].rawdata=m,_[c.page_base[v]].baseTarget=t,_[c.page_base[v]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var b in c.page_active_mc)if(""!==b){var y=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[b]][0].sound];_[c.page_active_mc[b]].cursor="pointer",_[c.page_active_mc[b]].rawdata=_[c.page_active_mc[b]].rawdata?_[c.page_active_mc[b]].rawdata:y,_[c.page_active_mc[b]].baseTarget=t,_[c.page_active_mc[b]].addEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType3Bind),_[c.page_active_mc[b]].addEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType3Bind,q.default.supportPassive()),_[c.page_active_mc[b]].addEventListener("pressup",this.handleQuizUnitTouchMoveEndByType3Bind)}for(var S in c.page_active_mcp)if(""!==S){switch(c.page_type3_ans[c.page_active_mcp[S]].passType=c.quiz_unit_data[l][c.page_active_mcp[S]][0].passType,c.page_type3_ans[c.page_active_mcp[S]].gainans=[],c.page_type3_ans[c.page_active_mcp[S]].gainright=0,c.page_type3_ans[c.page_active_mcp[S]].gainmax=0,c.page_type3_ans[c.page_active_mcp[S]].passType){case"ONE":case"ONEOF":c.page_type3_ans[c.page_active_mcp[S]].gainmax=1;break;case"ALL":c.page_type3_ans[c.page_active_mcp[S]].gainmax=c.page_active_right[c.page_active_mcp[S]].length}var P=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[S]][0].sound];q.default.notNull(P)&&(_[c.page_active_mcp[S]].cursor="pointer",_[c.page_active_mcp[S]].rawdata=P,_[c.page_active_mcp[S]].baseTarget=t,_[c.page_active_mcp[S]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}}},{key:"handleQuizUnitTouchMoveStartByType3",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),o=this._pickListProp[s],r=a.parent.NXQuizContent;if(!o.page_is_check_ans){var u=t.currentTarget;q.default.notNull(u.rawdata)&&this.callQuestionSoundClick(u),this.clearTouchPickerType3(a,u);var l=o.quiz_unit_data[this._quizPageIndex][u.id];u.scaleX=l[0].scaleX,u.scaleY=l[0].scaleY,r.setChildIndex(u,r.numChildren-1);var d=r.globalToLocal(t.stageX,t.stageY);u.offset={x:u.x-d.x,y:u.y-d.y}}}},{key:"handleQuizUnitTouchMoveMoveByType3",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),o=this._pickListProp[s],r,u=a.parent.NXQuizContent.globalToLocal(t.stageX,t.stageY),l=t.currentTarget;l.x=u.x+l.offset.x,l.y=u.y+l.offset.y}},{key:"handleQuizUnitTouchMoveEndByType3",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),o=this._pickListProp[s],r=a.parent.NXQuizContent,u=t.currentTarget,l=void 0,d=void 0,h=void 0;d=-1,h="",l=Number.MAX_VALUE;for(var p=o.page_active_mcp.length,c=0;c<p;c++)if(this.checkCollision(u,o.unit_instance[this._quizPageIndex][o.page_active_mcp[c]])){var _=this.getDistanceFromTwoPoint(u.x,u.y,o.unit_instance[this._quizPageIndex][o.page_active_mcp[c]].x,o.unit_instance[this._quizPageIndex][o.page_active_mcp[c]].y);_<l&&(l=_,d=c,h=o.page_active_mcp[c])}-1!=d&&("ONE"!==o.page_type3_ans[h].passType&&"ONEOF"!==o.page_type3_ans[h].passType||1<=o.page_type3_ans[h].gainans.length&&(d=-1)),-1!=d?(o.page_type3_ans[h].gainans.push(u.id),u.x=o.quiz_unit_data[this._quizPageIndex][h][0].x,u.y=o.quiz_unit_data[this._quizPageIndex][h][0].y,this.fixedLocTouchZone(a,h)):(u.x=o.quiz_unit_data[this._quizPageIndex][u.id][0].x,u.y=o.quiz_unit_data[this._quizPageIndex][u.id][0].y)}},{key:"clearTouchPickerType3",value:function e(t,i){var n=this.getCustomTag(t),a=this._pickListProp[n],s=t.parent.NXQuizContent,o=void 0;for(var r in a.page_type3_ans)""!==r&&-1!=(o=a.page_type3_ans[r].gainans.indexOf(i.id))&&(a.page_type3_ans[r].gainans.splice(o,1),this.fixedLocTouchZone(t,r))}},{key:"calcType3Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=!0;for(var s in n.page_type3_ans)if(""!==s&&(n.page_type3_ans[s].gainans.length<n.page_type3_ans[s].gainmax&&(a=!1),!1===a))break;return a}},{key:"calcType3Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=!0;for(var s in n.page_type3_ans)if(""!==s){n.page_type3_ans[s].gainans.length<n.page_type3_ans[s].gainmax&&(a=!1);for(var o=n.page_type3_ans[s].gainans.length,r=0;r<o;r++)-1===n.page_active_right[s].indexOf(n.page_type3_ans[s].gainans[r])&&(a=!1);if(!1===a)break}return a}},{key:"fixedLocTouchZone",value:function e(t,i){var n=this.getCustomTag(t),a=this._pickListProp[n],s=this._pickListProp[n].unit_instance[this._quizPageIndex],o;if("ALL"===a.page_type3_ans[i].passType&&0!==a.page_type3_ans[i].gainans.length){var r=[];this.calcSpaceRect(a.page_type3_ans[i].gainans.length,r),this.flexZoneTouch(t,s[i],a.page_type3_ans[i].gainans,r)}}},{key:"calcSpaceRect",value:function e(t,i){var n=t,a=1;if((i.length=0)!==t){for(i[i.length]={wSize:t,hSize:1};2<n;)t<=(n-1)*a?n--:(n--,a++),i[i.length]={wSize:n,hSize:a};1<t&&(i[i.length]={wSize:1,hSize:t})}}},{key:"flexZoneTouch",value:function e(t,i,n,a){var s=this.getCustomTag(t),o=this._pickListProp[s],r=i.nominalBounds.width*i.scaleX/i.nominalBounds.height*i.scaleY,u=Number.MIN_VALUE,l=0,d,h=a.length;if(0!==h){var p=o.unit_instance[this._quizPageIndex][n[0]],c=o.quiz_unit_data[this._quizPageIndex][p.id];p.scaleX=c[0].scaleX,p.scaleY=c[0].scaleY;for(var _=i.nominalBounds.width*i.scaleX,g=i.nominalBounds.height*i.scaleY,f=Number(p.nominalBounds.width)*c[0].scaleX,v=Number(p.nominalBounds.height)*c[0].scaleY,m=0;m<h;m++){var b=_/a[m].wSize/f,y=g/a[m].hSize/v;y<(d=b)&&(d=y),u<d&&(l=m,u=d)}var S=_/(a[l].wSize*f),P=g/(a[l].hSize*v);P<S&&(S=P),h=n.length;for(var M=0;M<h;M++)p=o.unit_instance[this._quizPageIndex][n[M]],c=o.quiz_unit_data[this._quizPageIndex][p.id],p.scaleX=S*p.scale0X,p.scaleY=S*p.scale0Y,f=Number(p.nominalBounds.width)*S*p.scale0X,v=Number(p.nominalBounds.height)*S*p.scale0Y;var k=1,O=1,B=a[l].wSize,x,C=(_-f*B)/2-_/2,T=(g-v*a[l].hSize)/2-g/2;h=n.length;for(var w=0;w<h;w++)p=o.unit_instance[this._quizPageIndex][n[w]],c=o.quiz_unit_data[this._quizPageIndex][p.id],f=Number(p.nominalBounds.width)*S*p.scale0X,v=Number(p.nominalBounds.height)*S*p.scale0Y,p.x=Number(i.x)+f/2+f*(k-1)+C,p.y=Number(i.y)+v/2+v*(O-1)+T,B<++k&&(k=1,O++)}}},{key:"checkCollision",value:function e(t,i){return!(!t.visible||!i.visible||(t.setBounds(Number(t.nominalBounds.x)*t.scaleX+Number(t.x),Number(t.nominalBounds.y)*t.scaleY+Number(t.y),Number(t.nominalBounds.width)*t.scaleX,Number(t.nominalBounds.height)*t.scaleY),i.setBounds(Number(i.nominalBounds.x)*i.scaleX+Number(i.x),Number(i.nominalBounds.y)*i.scaleY+Number(i.y),Number(i.nominalBounds.width)*i.scaleX,Number(i.nominalBounds.height)*i.scaleY),t=t.getBounds(),i=i.getBounds(),t.y+t.height<i.y||t.y>i.y+i.height||t.x+t.width<i.x||t.x>i.x+i.width))}},{key:"getDistanceFromTwoPoint",value:function e(t,i,n,a){return Math.sqrt(Math.pow(t-n,2)+Math.pow(i-a,2))}},{key:"injectQuizType5",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];if(c.page_type="type5",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(this.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type5_ans={},c.page_active_right={},0!=d.activeRightSets.length)for(var g=c.page_active_mcp.length,f=0;f<g;f++)void 0===d.activeRightSets[f]?c.page_active_right[c.page_active_mcp[f]]=[]:(c.page_active_right[c.page_active_mcp[f]]=d.activeRightSets[f].rawdata.split(","),c.page_active_right[c.page_active_mcp[f]]=this.checkArrayData(c.page_active_right[c.page_active_mcp[f]])),c.page_type5_ans[c.page_active_mcp[f]]={};for(var v in c.page_base)if(""!==v){var m=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[v]][0].sound];q.default.notNull(m)&&(_[c.page_base[v]].cursor="pointer",_[c.page_base[v]].rawdata=m,_[c.page_base[v]].baseTarget=t,_[c.page_base[v]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var b in c.page_active_mc)if(""!==b){var y=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[b]][0].sound];_[c.page_active_mc[b]].cursor="pointer",_[c.page_active_mc[b]].rawdata=_[c.page_active_mc[b]].rawdata?_[c.page_active_mc[b]].rawdata:y,_[c.page_active_mc[b]].baseTarget=t;var S=void 0;q.default.isNull(_[c.page_active_mc[b]].shape)?(S=new n.Shape,_[c.page_active_mc[b]].addChild(S),_[c.page_active_mc[b]].shape=S):S=_[c.page_active_mc[b]].shape,S.graphics.clear(),S.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6);var P=_[c.page_active_mc[b]];P.bitmapCache&&P.uncache(),P.cache(P.getBounds().x-8,P.getBounds().y,P.getBounds().width+16,P.getBounds().height,2),_[c.page_active_mc[b]].addEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_[c.page_active_mc[b]].addEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_[c.page_active_mc[b]].addEventListener("pressup",this.handleQuizUnitLineMoveEndBind)}for(var M in c.page_active_mcp)if(""!==M){switch(c.page_type5_ans[c.page_active_mcp[M]].passType=c.quiz_unit_data[l][c.page_active_mcp[M]][0].passType,c.page_type5_ans[c.page_active_mcp[M]].gainans=[],c.page_type5_ans[c.page_active_mcp[M]].gainright=0,c.page_type5_ans[c.page_active_mcp[M]].gainmax=0,c.page_type5_ans[c.page_active_mcp[M]].passType){case"ONE":case"ONEOF":c.page_type5_ans[c.page_active_mcp[M]].gainmax=1;break;case"ALL":c.page_type5_ans[c.page_active_mcp[M]].gainmax=c.page_active_right[c.page_active_mcp[M]].length}var k=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[M]][0].sound];_[c.page_active_mcp[M]].cursor="pointer",_[c.page_active_mcp[M]].rawdata=_[c.page_active_mcp[M]].rawdata?_[c.page_active_mcp[M]].rawdata:k,_[c.page_active_mcp[M]].baseTarget=t;var O=void 0;q.default.isNull(_[c.page_active_mcp[M]].shape)?(O=new n.Shape,_[c.page_active_mcp[M]].addChild(O),_[c.page_active_mcp[M]].shape=O):O=_[c.page_active_mcp[M]].shape,O.graphics.clear(),O.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6);var B=_[c.page_active_mcp[M]];B.bitmapCache&&B.uncache(),B.cache(B.getBounds().x-8,B.getBounds().y,B.getBounds().width+16,B.getBounds().height,2),_[c.page_active_mcp[M]].addEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_[c.page_active_mcp[M]].addEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_[c.page_active_mcp[M]].addEventListener("pressup",this.handleQuizUnitLineMoveEndBind)}}},{key:"handleQuizUnitLineMoveStart",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent;if(!r.page_is_check_ans){var l=t.currentTarget;q.default.notNull(l.rawdata)&&this.callQuestionSoundClick(l),r.line_pick_1=l,r.line_pick_2=null,l.shape.graphics.clear(),l.shape.graphics.beginStroke("green").beginFill("green").drawCircle(0,0,6),l.bitmapCache&&l.updateCache();var d=u.globalToLocal(t.stageX,t.stageY);r.line_point_1=new n.Point(l.x,l.y),r.line_point_2=d,this.drawTempLine(s,r.line_point_1,r.line_point_2)}}},{key:"handleQuizUnitLineMoveMove",value:function e(t){var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent,l=u.globalToLocal(t.stageX,t.stageY);r.line_point_2=l,this.drawTempLine(s,r.line_point_1,r.line_point_2),r.line_pick_2=this.changeLineHitColor(s,u.getObjectsUnderPoint(l.x,l.y),r.line_pick_1.id)}},{key:"handleQuizUnitLineMoveEnd",value:function e(t){var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent,l=this._parentListShapeTemp[o],d=this._parentListShapeBase[o],h=t.currentTarget,p=u.globalToLocal(t.stageX,t.stageY);l.graphics.clear(),l.bitmapCache?l.updateCache():l.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2),this.refreshType5LineStatus(s,r.line_pick_1,r.line_pick_2)}},{key:"refreshType5LineStatus",value:function e(t,i,n){var a=this.getCustomTag(t),s=this._pickListProp[a],o=this._pickListProp[a].unit_instance[this._quizPageIndex],r=this._parentListShapeTemp[a],u=this._parentListShapeBase[a],l=void 0,d=void 0;for(l in null!=n&&(l=i.id,d=n.id,-1!=s.page_active_mc.indexOf(l)?-1!=s.page_active_mcp.indexOf(d)&&o[l].group===o[d].group&&s.page_type5_ans[d].gainans.push(l):-1!=s.page_active_mcp.indexOf(l)&&-1!=s.page_active_mc.indexOf(d)&&o[l].group===o[d].group&&s.page_type5_ans[l].gainans.push(d)),s.page_active_mc)""!==l&&(o[l=s.page_active_mc[l]].shape.graphics.clear(),o[l].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6),o[l].bitmapCache&&o[l].updateCache());for(l in s.page_active_mcp)""!==l&&(o[l=s.page_active_mcp[l]].shape.graphics.clear(),o[l].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6),o[l].bitmapCache&&o[l].updateCache());for(l in r.graphics.clear(),s.page_type5_ans)if(""!==l)for(var h in s.page_type5_ans[l].gainans)""!==h&&(u.graphics.setStrokeStyle(3).beginStroke("red").moveTo(o[l].x,o[l].y).lineTo(o[s.page_type5_ans[l].gainans[h]].x,o[s.page_type5_ans[l].gainans[h]].y),u.bitmapCache?u.updateCache():u.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2))}},{key:"drawTempLine",value:function e(t,i,n){var a=this.getCustomTag(t),s=this._pickListProp[a],o=this._pickListProp[a].unit_instance[this._quizPageIndex],r=this._parentListShapeTemp[a],u=this._parentListShapeBase[a];r.graphics.clear(),r.graphics.setStrokeDash([20,10],0).setStrokeStyle(3).beginStroke("green").moveTo(i.x,i.y).lineTo(n.x,n.y),r.bitmapCache?r.updateCache():r.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2)}},{key:"changeLineHitColor",value:function e(t,i,n){var a=this.getCustomTag(t),s=this._pickListProp[a],o=this._pickListProp[a].unit_instance[this._quizPageIndex],r=this._parentListShapeTemp[a],u=this._parentListShapeBase[a],l=null;for(var d in s.page_active_mc)if(""!==d){if(n===(d=s.page_active_mc[d]))continue;o[d].shape.graphics.clear(),o[d].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6),o[d].bitmapCache&&o[d].updateCache()}for(var h in s.page_active_mcp)if(""!==h){if(n===(h=s.page_active_mcp[h]))continue;o[h].shape.graphics.clear(),o[h].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6),o[h].bitmapCache&&o[h].updateCache()}for(var p in i)if(""!==p){if(n===(p=i[p].parent.id)||void 0===p)continue;-1==s.page_active_mc.indexOf(p)&&-1==s.page_active_mcp.indexOf(p)||((l=o[p]).shape.graphics.clear(),l.shape.graphics.beginStroke("green").beginFill("green").drawCircle(0,0,6),l.bitmapCache&&l.updateCache())}return l}},{key:"calcType5Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type5_ans)if(""!==o&&(n.page_type5_ans[o].gainans.length<n.page_type5_ans[o].gainmax&&(s=!1),!1===s))break;return s}},{key:"calcType5Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type5_ans)if(""!==o){n.page_type5_ans[o].gainans.length<n.page_type5_ans[o].gainmax&&(s=!1);for(var r=n.page_type5_ans[o].gainans.length,u=0;u<r;u++)-1===n.page_active_right[o].indexOf(n.page_type5_ans[o].gainans[u])&&(s=!1);if(!1===s)break}return s}},{key:"clearType6Puzzle",value:function e(t,i){var n=this.getCustomTag(t),a=this._parent.createjs,s=this._parent.lib,o=this._pickListImages[n],r=t.parent.NXQuizContent,u=t.parent.NXQuizToolBar,l=t,d=this._pickListQuestionSeq[n][this._pickListQuestionSeqIndex[n]],h=this._pickListProp[n].quiz_page_data[d],p=this._parentListShapeTemp[n],c=this._parentListShapeBase[n],_=this._pickListProp[n],g=this._pickListProp[n].unit_instance[d];if(i){for(var f in _.puzzle_unit_instance)""!==f&&(r.removeChild(_.puzzle_unit_instance[f]),_.puzzle_unit_instance[f].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType6Bind),_.puzzle_unit_instance[f].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType6Bind,q.default.supportPassive()),_.puzzle_unit_instance[f].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType6Bind),_.puzzle_unit_instance[f].removeAllChildren(),_.puzzle_unit_instance[f].bmp=null);for(var v in _.puzzle_unit_instance)""!==v&&(r.removeChild(_.puzzle_alpha_instance[v]),_.puzzle_alpha_instance[v].removeAllChildren(),_.puzzle_alpha_instance[v].shape.graphics.clear(),_.puzzle_alpha_instance[v].shape=null);_.puzzle_unit_instance={},_.puzzle_alpha_instance={}}else for(var m in _.puzzle_unit_instance)""!==m&&(_.puzzle_unit_instance[m].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType6Bind),_.puzzle_unit_instance[m].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType6Bind,q.default.supportPassive()),_.puzzle_unit_instance[m].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType6Bind))}},{key:"injectQuizType6",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];this.clearType6Puzzle(t,!0);var g=void 0;for(var f in c.page_type="type6",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type6_ans={},c.page_active_right={},c.page_base)if(""!==f){var v=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[f]][0].sound];q.default.notNull(v)&&(_[c.page_base[f]].cursor="pointer",_[c.page_base[f]].rawdata=v,_[c.page_base[f]].baseTarget=t,_[c.page_base[f]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var m in c.page_active_mc)if(""!==m){_[c.page_active_mc[m]].visible=!1;for(var b=(g=c.quiz_unit_data[l][c.page_active_mc[m]])[0].passType.split(","),y=Number(b[1]),S=Number(b[2]),P=_[c.page_active_mc[m]].nominalBounds.width/Number(b[1]),M=_[c.page_active_mc[m]].nominalBounds.width/Number(b[2]),k=0,O=0,B=0;B<y;B++)for(var x=0;x<S;x++){var C=new n.MovieClip,T=new n.Bitmap(s[g[0].id]);T.sourceRect=new n.Rectangle(x*P,B*M,P,M),T.setTransform(-P/2,-M/2),C.timeline.addTween(n.Tween.get(T).wait(1).to({visible:!1},0).wait(1)),o.addChild(C),C.cursor="pointer",C.rawdata=null,C.baseTarget=t,C.addEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType6Bind),C.addEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType6Bind,q.default.supportPassive()),C.addEventListener("pressup",this.handleQuizUnitTouchMoveEndByType6Bind),C.setTransform(Number(b[3+k]),Number(b[4+k]),g[0].scaleX,g[0].scaleY),C.gotoAndStop(0),C.nominalBounds=new n.Rectangle(-P/2,-P/2,P,M),C.sound="",C.orgX=Number(b[3+k]),C.orgY=Number(b[4+k]),C.id=c.page_active_mc[m]+"_"+O,C.bmp=T,c.puzzle_unit_instance[c.page_active_mc[m]+"_"+O]=C,O++,k+=2}O=k=0;for(var w=Number(g[0].x)-P/2*g[0].scaleX,L=Number(g[0].y)-M/2*g[0].scaleY,I=P*g[0].scaleX,N=M*g[0].scaleY,j=0;j<y;j++)for(var A=0;A<S;A++){var E=new n.MovieClip,G=new n.Shape;G.graphics.clear(),G.graphics.beginFill("#ffffff").drawRect(0,0,P,M),G.setTransform(-P/2,-M/2),G.alpha=.01,E.timeline.addTween(n.Tween.get(G).wait(1).to({visible:!1},0).wait(1)),o.addChild(E),E.setTransform(w+A*I,L+j*N,g[0].scaleX,g[0].scaleY),E.gotoAndStop(0),E.nominalBounds=new n.Rectangle(-P/2,-P/2,P,M),E.sound="",E.orgX=w+A*I,E.orgY=L+j*N,E.id=c.page_active_mc[m]+"_"+O,E.shape=G,c.puzzle_alpha_instance[c.page_active_mc[m]+"_"+O]=E,c.page_type6_ans[c.page_active_mc[m]+"_"+O]="",O++,k+=2}}}},{key:"handleQuizUnitTouchMoveStartByType6",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent;if(!r.page_is_check_ans){var l=t.currentTarget;q.default.notNull(l.rawdata)&&this.callQuestionSoundClick(l),this.clearTouchPickerType6(s,l),u.setChildIndex(l,u.numChildren-1);var d=u.globalToLocal(t.stageX,t.stageY);l.offset={x:l.x-d.x,y:l.y-d.y}}}},{key:"handleQuizUnitTouchMoveMoveByType6",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u,l=s.parent.NXQuizContent.globalToLocal(t.stageX,t.stageY),d=t.currentTarget;d.x=l.x+d.offset.x,d.y=l.y+d.offset.y}},{key:"handleQuizUnitTouchMoveEndByType6",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent,l=t.currentTarget,d=u.globalToLocal(t.stageX,t.stageY),h="",p=Number.MAX_VALUE;for(var c in r.puzzle_alpha_instance)if(""!==c&&this.checkCollision(l,r.puzzle_alpha_instance[c])){var _=this.getDistanceFromTwoPoint(l.x,l.y,r.puzzle_alpha_instance[c].x,r.puzzle_alpha_instance[c].y);_<p&&""===r.page_type6_ans[c]&&(p=_,h=c)}""!==h?(r.page_type6_ans[h]=l.id,l.x=r.puzzle_alpha_instance[h].x,l.y=r.puzzle_alpha_instance[h].y):(l.x=l.orgX,l.y=l.orgY)}},{key:"clearTouchPickerType6",value:function e(t,i){var n=this.getCustomTag(t),a=this._pickListProp[n],s=this._pickListProp[n].unit_instance[this._quizPageIndex];for(var o in a.page_type6_ans)a.page_type6_ans[o]===i.id&&(a.page_type6_ans[o]="")}},{key:"calcType6Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type6_ans)if(""!==o&&(""===n.page_type6_ans[o]&&(s=!1),!1===s))break;return s}},{key:"calcType6Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type6_ans)if(""!==o&&(n.page_type6_ans[o]!=o&&(s=!1),!1===s))break;return s}},{key:"injectQuizType7",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];if(c.page_type="type7",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type7_ans={},c.page_active_right={},0!=d.activeRightSets.length)for(var g=c.page_active_mcp.length,f=0;f<g;f++)for(var v in void 0===d.activeRightSets[f]?c.page_active_right[c.page_active_mcp[f]]=[]:(c.page_active_right[c.page_active_mcp[f]]=d.activeRightSets[f].rawdata.split(","),c.page_active_right[c.page_active_mcp[f]]=this.checkArrayData(c.page_active_right[c.page_active_mcp[f]])),c.page_type7_ans[c.page_active_mcp[f]]={},c.page_active_right[c.page_active_mcp[f]])"KEYBOARDCLASS"===c.unit_auto_type[this._quizPageIndex][c.page_active_right[c.page_active_mcp[f]][v]]&&(c.unit_instance[l][c.page_active_right[c.page_active_mcp[f]][v]].relTag=c.page_active_mcp[f],c.unit_instance[l][c.page_active_right[c.page_active_mcp[f]][v]].relFunc=this.handleType7KeyboardBind,c.unit_instance[l][c.page_active_right[c.page_active_mcp[f]][v]].baseTarget=t);for(var m in c.page_base)if(""!==m){var b=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[m]][0].sound];q.default.notNull(b)&&(_[c.page_base[m]].cursor="pointer",_[c.page_base[m]].rawdata=b,_[c.page_base[m]].baseTarget=t,_[c.page_base[m]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var y in c.page_active_mc)if(""!==y){var S=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[y]][0].sound];_[c.page_active_mc[y]].cursor="pointer",_[c.page_active_mc[y]].rawdata=_[c.page_active_mc[y]].rawdata?_[c.page_active_mc[y]].rawdata:S,_[c.page_active_mc[y]].baseTarget=t,_[c.page_active_mc[y]].visible=!0,"KEYBOARDCLASS"!==c.unit_auto_type[this._quizPageIndex][c.page_active_mc[y]]?(_[c.page_active_mc[y]].addEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType7Bind),_[c.page_active_mc[y]].addEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType7Bind,q.default.supportPassive()),_[c.page_active_mc[y]].addEventListener("pressup",this.handleQuizUnitTouchMoveEndByType7Bind)):_[c.page_active_mc[y]].initRef(this._parent.stage.isWebGL)}for(var P in c.page_active_mcp)if(""!==P){c.page_type7_ans[c.page_active_mcp[P]].passType=c.quiz_unit_data[l][c.page_active_mcp[P]][0].passType,c.page_type7_ans[c.page_active_mcp[P]].gainans=[],c.page_type7_ans[c.page_active_mcp[P]].gainright="",c.page_type7_ans[c.page_active_mcp[P]].ans=_[c.page_active_mcp[P]].optText,_[c.page_active_mcp[P]].text.text="",this._parent.stage.isWebGL&&_[c.page_active_mcp[P]].updateCache();var M=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[P]][0].sound];q.default.notNull(M)&&(_[c.page_active_mcp[P]].cursor="pointer",_[c.page_active_mcp[P]].rawdata=M,_[c.page_active_mcp[P]].baseTarget=t,_[c.page_active_mcp[P]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}}},{key:"handleType7Keyboard",value:function e(t,i,n){this.displayType7TextByKeyBoard(t,i,n)}},{key:"handleQuizUnitTouchMoveStartByType7",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent;if(!r.page_is_check_ans){var l=t.currentTarget;q.default.notNull(l.rawdata)&&this.callQuestionSoundClick(l),u.setChildIndex(l,u.numChildren-1);var d=u.globalToLocal(t.stageX,t.stageY);l.offset={x:l.x-d.x,y:l.y-d.y}}}},{key:"handleQuizUnitTouchMoveMoveByType7",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u,l=s.parent.NXQuizContent.globalToLocal(t.stageX,t.stageY),d=t.currentTarget;void 0===d.nominalBounds&&(d=t.currentTarget.parent),d.x=l.x+d.offset.x,d.y=l.y+d.offset.y}},{key:"handleQuizUnitTouchMoveEndByType7",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent,l=this._pickListProp[o].unit_instance[this._quizPageIndex],d=t.currentTarget,h=u.globalToLocal(t.stageX,t.stageY),p=void 0,c=-1,_="";p=Number.MAX_VALUE;for(var g=r.page_active_mcp.length,f=0;f<g;f++)if(-1!=r.page_active_right[r.page_active_mcp[f]].indexOf(d.id)&&this.checkCollision(d,l[r.page_active_mcp[f]])){var v=this.getDistanceFromTwoPoint(d.x,d.y,l[r.page_active_mcp[f]].x,l[r.page_active_mcp[f]].y);v<p&&(p=v,c=f,_=r.page_active_mcp[f])}-1!=c&&(r.page_type7_ans[_].gainans.push(d.id),this.displayType7Text(s,_),"ONE"===d.passType&&(d.visible=!1)),d.x=r.quiz_unit_data[this._quizPageIndex][d.id][0].x,d.y=r.quiz_unit_data[this._quizPageIndex][d.id][0].y}},{key:"displayType7TextByKeyBoard",value:function e(t,i,n){var a=this.getCustomTag(t),s=this._pickListProp[a],o=this._pickListProp[a].unit_instance[this._quizPageIndex],r=s.page_type7_ans[n].gainans,u="";for(var l in"back"===i?0<r.length&&(r.length=r.length-1):r.push(i),r)""!==l&&(u+=r[l]);s.page_type7_ans[n].gainright=u,o[n].text.text=s.page_type7_ans[n].gainright.trim(),this._parent.stage.isWebGL&&o[n].updateCache()}},{key:"displayType7Text",value:function e(t,i){var n=this.getCustomTag(t),a=this._pickListProp[n],s=this._pickListProp[n].unit_instance[this._quizPageIndex],o=void 0,r="",u="",l=a.page_type7_ans[i].gainans;for(var d in l)if(""!==d){var h=s[l[d]],p=0===d?h:s[l[d-1]];if("false"!==h.chinaCode||0!==Number(d)&&","!==h.optText&&"."!==h.optText&&";"!==h.optText&&"!"!==p.optText&&"?"!==p.optText){if(","===p.optText||"."===p.optText||";"===p.optText||"!"===p.optText||"?"===p.optText)for(var c in r+=" ",o=h.optText.split(""))""!==c&&(0===Number(c)&&(o[c]=o[c].toUpperCase()),r+=o[c]);else r+=" "+h.optText;u+=" "+h.optText}else for(var _ in o=h.optText.split(""))""!==_&&(u+=o[_],0===Number(_)&&(o[_]=o[_].toUpperCase()),r+=o[_])}s[i].text.text=r.trim(),this._parent.stage.isWebGL&&s[i].updateCache(),a.page_type7_ans[i].gainright=u.trim()}},{key:"calcType7Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type7_ans)if(""!==i&&(n.page_type7_ans[o].ans.split("").length>n.page_type7_ans[o].gainright.split("").length&&(s=!1),!1===s))break;return s}},{key:"calcType7Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type7_ans)if(""!==o&&(n.page_type7_ans[o].ans.toUpperCase()!=n.page_type7_ans[o].gainright.toUpperCase()&&(s=!1),!1===s))break;return s}},{key:"checkTouchIsQuizAns",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:"",a=this.getCustomTag(t),s=this._parent.createjs,o=this._parent.lib,r=this._pickListImages[a],u=t.parent.NXQuizContent,l=t.parent.NXQuizToolBar,d=t,h=this._pickListQuestionSeq[a][this._pickListQuestionSeqIndex[a]],p=this._pickListProp[a].quiz_page_data[h],c=this._parentListShapeTemp[a],_=this._parentListShapeBase[a],g=this._pickListProp[a],f=this._pickListProp[a].unit_instance[h];switch(g.page_type){case"type2":""===n&&!q.default.isNull(n)||g.page_type2_ans.push(n),g.page_type2_ans=g.page_type2_ans.filter(q.default.getArrayUnique);var v=0;for(var m in g.page_type2_ans)-1!=g.page_active_right.indexOf(g.page_type2_ans[m])&&v++;""===n&&(v===g.page_active_right.length&&g.page_active_right.length===g.page_type2_ans.length?this.checkAnsIsRight(t):this.checkAnsIsWrong(t));break;case"type3":this.calcType3Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t);break;case"type5":this.calcType5Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t);break;case"type6":this.calcType6Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t);break;case"type7":this.calcType7Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t)}}},{key:"clearQuizAnsStatus",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];h.graphics.clear(),p.graphics.clear(),h.bitmapCache&&h.updateCache(),p.bitmapCache&&p.updateCache(),this.clearContent(t,!0)}},{key:"resetQuizAnsStatus",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];h.graphics.clear(),p.graphics.clear(),h.bitmapCache&&h.updateCache(),p.bitmapCache&&p.updateCache(),this.clearContent(t,!0),this.stepQuizProcess(t,l)}},{key:"clearContent",value:function e(t,i){this._parent.stop(null,!0);var n=this.getCustomTag(t),a=this._parent.createjs,s=this._parent.lib,o=this._pickListImages[n],r=t.parent.NXQuizContent,u=t.parent.NXQuizToolBar,l=t,d=this._pickListQuestionSeq[n][this._pickListQuestionSeqIndex[n]],h=this._pickListProp[n].quiz_page_data[d],p=this._parentListShapeTemp[n],c=this._parentListShapeBase[n],_=this._pickListProp[n],g=this._pickListProp[n].unit_instance[d],f=t.parent.mcRight,v=t.parent.mcWrong;for(var m in f.visible=!1,v.visible=!1,f.gotoAndStop(0),v.gotoAndStop(0),_.page_base)""!=m&&(_.unit_instance[d][_.page_base[m]].removeEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind),_.unit_instance[d][_.page_base[m]].cursor="null");for(var b in _.page_active_mc)""!=b&&(_.unit_instance[d][_.page_active_mc[b]].removeEventListener("click",this.handleQuizUnitTouchIsCheckBind),_.unit_instance[d][_.page_active_mc[b]].cursor="null",_.unit_instance[d][_.page_active_mc[b]].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType3Bind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType3Bind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType3Bind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressup",this.handleQuizUnitLineMoveEndBind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType7Bind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType7Bind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType7Bind));for(var y in _.page_active_mcp)""!=y&&(_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind),_.unit_instance[d][_.page_active_mcp[y]].cursor="null",_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("pressup",this.handleQuizUnitLineMoveEndBind));if(this.clearType6Puzzle(t,i),i){r._btn_sound.removeEventListener("click",this.handleQuestionSoundClickBind),r._btn_sound.cursor="null";var S=h.layout.rawdata.split(",");for(var P in S)S.hasOwnProperty(P)&&q.default.notNull(S[P])&&""!==S[P]&&(_.unit_instance[d][S[P]].gotoAndStop(0),r.removeChild(_.unit_instance[d][S[P]]));r._btn_sound.visible=!1}}},{key:"callAutoHintAnimate",value:function e(t){this._parent.stop(null,!0);var i=(this._runningAutoHint=t).nominalBounds,n={x:t.x+i.x*t.scale,y:t.y+i.y*t.scale},a=t.parent.localToGlobal(n.x,n.y),s=this._parent.exportRoot.globalToLocal(a.x,a.y),o=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:t.rawdata,path:o,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerResultAnimateSoundWatchBind,completeFunc:this.triggerAutoHintAnimateSoundCompleteBind,autoPlay:!0,locX:s.x,locY:s.y,excludeTags:null,command:"NXQuizPanel",target:t};var r=this.checkCommandMode("NXQuizPanel");this._parent.iosMode&&"none"===r?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerAutoHintAnimateSoundComplete",value:function e(t){var i=this._parent.soundObj.target;this._runningAutoHint=null;var n=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===n?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)),this.checkTouchIsQuizAns(i.baseTarget,i.id)}},{key:"checkAnsIsRight",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l],g=t.parent.mcRight,f=t.parent.mcWrong;this.clearContent(t,!1),g.visible=!0,this.callResultAnimate(g)}},{key:"checkAnsIsWrong",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l],g=t.parent.mcRight,f=t.parent.mcWrong;this.clearContent(t,!1),f.visible=!0,this.callResultAnimate(f)}},{key:"callResultAnimate",value:function e(t){this._parent.stop(null,!0);var i=t.nominalBounds,n={x:t.x+i.x*t.scale,y:t.y+i.y*t.scale},a=t.parent.localToGlobal(n.x,n.y),s=this._parent.exportRoot.globalToLocal(a.x,a.y),o=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:t.rawdata,path:o,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerResultAnimateSoundWatchBind,completeFunc:this.triggerResultAnimateSoundCompleteBind,autoPlay:!0,locX:s.x,locY:s.y,excludeTags:null,command:"NXQuizPanel",target:t};var r=this.checkCommandMode("NXQuizPanel");this._parent.iosMode&&"none"===r?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerResultAnimateSoundWatch",value:function e(t){if(q.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration,a=this._prevTime;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var s=this._parent.lib.properties.fps,o=Math.round(i/1e3*s),r=this._parent.soundObj.target;o<r.totalFrames&&r.gotoAndStop(o)}}},{key:"triggerResultAnimateSoundComplete",value:function e(t){var i;this._parent.soundObj.target.visible=!1;var n=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===n?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"handleQuizUnitTouchIsOnlySound",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);var i=t.currentTarget,n=i.baseTarget,a=this.getCustomTag(n),s;this._pickListProp[a].page_is_check_ans||q.default.notNull(i.rawdata)&&this.callQuestionSoundClick(i)}},{key:"callQuestionSoundClick",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);var i=this._parent.getInstanceMirror(t);this._parent.stop(null,!0);var n=t.nominalBounds,a={x:t.x+n.x*t.scale,y:t.y+n.y*t.scale},s=t.parent.localToGlobal(a.x,a.y),o=this._parent.exportRoot.globalToLocal(s.x,s.y),r=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"quiz/asset/":"./quiz/asset/";this._parent.soundObj={id:t.rawdata,path:r,loop:t.loopdata,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerQuestionSoundWatchBind,completeFunc:this.handleQuestionSoundCompleteBind,autoPlay:!0,locX:o.x,locY:o.y,excludeTags:null,command:"NXQuizPanel",target:t,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null};var u=this.checkCommandMode("NXQuizPanel");this._parent.iosMode&&"none"===u?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"handleQuestionSoundClick",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);var i=t.currentTarget,n=this._parent.getInstanceMirror(i);this._parent.stop(null,!0);var a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"quiz/asset/":"./quiz/asset/";this._parent.soundObj={id:i.rawdata,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerQuestionSoundWatchBind,completeFunc:this.handleQuestionSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:"NXQuizPanel",target:i,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null};var l=this.checkCommandMode("NXQuizPanel");this._parent.iosMode&&"none"===l?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(q.default.isNull(this._parent.soundObj)||q.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)q.default.notNull(i)&&i.stop();else switch(n){case"fileload":q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerQuestionSoundWatch",value:function e(t){}},{key:"handleQuestionSoundComplete",value:function e(t){q.default.trace("SoundComplete");var i=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===i||"normal-close"===i||"ex-normal-close"===i||"none"===i?(this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===i?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"generateArrayNumber",value:function e(t,i){if(i<t){var n=i;i=t,t=n}for(var a=[],s=t;s<i;s++)a.push(s);return a}},{key:"disableButtonHelper",value:function e(t){t._buttonHelper&&(t._buttonHelper.enabled=!1),t.mouseEnabled=!1,t.gotoAndStop(0),q.default.applyColorGrayFilter(this._parent.createjs,t,1)}},{key:"enableButtonHelper",value:function e(t){t._buttonHelper&&(t._buttonHelper.enabled=!0),t.mouseEnabled=!0,t.gotoAndStop(0),q.default.unapplyColorFilter(this._parent.createjs,t)}},{key:"checkArrayData",value:function e(t){return null!=t&&1===t.length&&""===t[0]&&(t.length=0),t}},{key:"triggerIntroMouseDown",value:function e(t){var i=t.currentTarget,n=i.parent,a=this.getCustomTag(n);"sequenceBtn"===i.name?(this._pickListQuestionSeq[a].sort(),this._pickListQuestionSeqIndex[a]=0):"randomBtn"===i.name&&(q.default.shuffleArray(this._pickListQuestionSeq[a]),this._pickListQuestionSeqIndex[a]=0),this.stepQuizProcess(n,this._pickListQuestionSeq[a][this._pickListQuestionSeqIndex[a]]);var s=n.parent.NXQuizToolBar,o=n,r;n.parent.NXQuizContent.visible=!0,o.visible=!1,s.visible=!0,this.refreshToolbar(n)}},{key:"triggerIntroMouseSwitch",value:function e(t){var i=t.currentTarget,n=i.parent,a=this.getCustomTag(n);this._pickListProp[a].autoSoundPlay?(this._pickListProp[a].autoSoundPlay=!1,i.gotoAndStop(0)):(this._pickListProp[a].autoSoundPlay=!0,i.gotoAndStop(2))}},{key:"triggerToolbarMouseDown",value:function e(t){var i=t.currentTarget,n=i.parentRef,a=this.getCustomTag(n),s=n.parent.NXQuizContent;switch(i.name){case"checkButton":null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null),this.checkTouchIsQuizAns(n);break;case"againBtn":this._runningAutoHint=null,this.resetQuizAnsStatus(n);break;case"backOne":var o;this._runningAutoHint=null,this.clearQuizAnsStatus(n),n.parent.NXQuizContent.visible=!1,n.visible=!0;break;case"prevBtn":this._runningAutoHint=null,this.clearQuizAnsStatus(n),this._pickListQuestionSeqIndex[a]--,this.stepQuizProcess(n,this._pickListQuestionSeq[a][this._pickListQuestionSeqIndex[a]]),this.refreshToolbar(n);break;case"nextBtn":this._runningAutoHint=null,this.clearQuizAnsStatus(n),this._pickListQuestionSeqIndex[a]++,this.stepQuizProcess(n,this._pickListQuestionSeq[a][this._pickListQuestionSeqIndex[a]]),this.refreshToolbar(n)}}},{key:"refreshToolbar",value:function e(t){var i=this.getCustomTag(t),n,a=t.parent.NXQuizToolBar,s=this._pickListQuestionSeqIndex[i],o=this._pickListQuestionSeq[i].length;a.mcToolType.pageShowMC.pageTxt.text=this.padLeft(s+1,2)+"/"+this.padLeft(o,2),this._parent.stage.isWebGL&&a.mcToolType.pageShowMC.pageTxt.updateCache(),this.enableButtonHelper(a.mcToolType.prevBtn),this.enableButtonHelper(a.mcToolType.nextBtn),0===s&&this.disableButtonHelper(a.mcToolType.prevBtn),o<=s+1&&this.disableButtonHelper(a.mcToolType.nextBtn)}},{key:"padLeft",value:function e(t,i){return(t=""+t).length>=i?t:new Array(i-t.length+1).join("0")+t}},{key:"padRight",value:function e(t,i){return(t=""+t).length>=i?t:t+new Array(i-t.length+1).join("0")}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._pickListLoader={},this._pickListXML={},this._pickListManifest={},this._pickListJsonManifest={},this._pickListImages={},this._pickListProp={},this._pickListQuestionSeq={},this._pickListQuestionSeqIndex={},this._pickListMP3Resource={},this._parentListShapeTemp={},this._parentListShapeBase={},this._pickListJsonSS={},this._pickListJsonSSImage={},this._seq=999,this._prevTime=-1,this._preloadManifestCount=0,this._preloadResourceCount=0,this._runningAutoHint=null}t.ModuleNXQuiz=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameBookPage=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(void 0===a){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},o,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,k=i(15).ModuleOnAndOff,O=i(16).ModuleCalculator,B=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(64).ModuleGameDragDrop,T=i(65).ModuleGameGuideSeqConnect,w=i(66).ModuleGameMultipleChoice,L=i(67).ModuleGameQuiz,I=(h(j,N=p),n(j,[{key:"init",value:function e(){s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.stop(n,a,!0)}},{key:"stop",value:function e(t,i,n){var a=0<arguments.length&&void 0!==t?t:null,s=1<arguments.length&&void 0!==i&&i,o=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(a=this.soundObj.excludeTags),r.default.isNull(a)&&(a=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(a=a.concat(this.videoObj.excludeTags)),-1===a.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!o&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!o&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleGoOutCommand&&-1===a.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===a.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===a.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===a.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===a.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===a.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===a.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===a.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===a.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===a.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===a.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===a.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===a.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleGameDragDrop&&-1===a.indexOf("ModuleGameDragDrop")&&-1===this._resetExclude.indexOf("ModuleGameDragDrop")&&this._moduleGameDragDrop.stop(),this._moduleGameGuideSeqConnect&&-1===a.indexOf("ModuleGameGuideSeqConnect")&&-1===this._resetExclude.indexOf("ModuleGameGuideSeqConnect")&&this._moduleGameGuideSeqConnect.stop(),this._moduleGameMultipleChoice&&-1===a.indexOf("ModuleGameMultipleChoice")&&-1===this._resetExclude.indexOf("ModuleGameMultipleChoice")&&this._moduleGameMultipleChoice.stop(),this._moduleGameQuiz&&-1===a.indexOf("ModuleGameQuiz")&&-1===this._resetExclude.indexOf("ModuleGameQuiz")&&this._moduleGameQuiz.stop(),this._moduleAnsZone&&-1===a.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===a.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===a.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),s&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleGameDragDrop&&-1===n.indexOf("ModuleGameDragDrop")&&-1===this._resetExclude.indexOf("ModuleGameDragDrop")&&this._moduleGameDragDrop.reset(),this._moduleGameGuideSeqConnect&&-1===n.indexOf("ModuleGameGuideSeqConnect")&&-1===this._resetExclude.indexOf("ModuleGameGuideSeqConnect")&&this._moduleGameGuideSeqConnect.reset(),this._moduleGameMultipleChoice&&-1===n.indexOf("ModuleGameMultipleChoice")&&-1===this._resetExclude.indexOf("ModuleGameMultipleChoice")&&this._moduleGameMultipleChoice.reset(),this._moduleGameQuiz&&-1===n.indexOf("ModuleGameQuiz")&&-1===this._resetExclude.indexOf("ModuleGameQuiz")&&this._moduleGameQuiz.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleGameDragDrop&&-1===n.indexOf("ModuleGameDragDrop")&&-1===this._resetExclude.indexOf("ModuleGameDragDrop")&&this._moduleGameDragDrop.reset(),this._moduleGameGuideSeqConnect&&-1===n.indexOf("ModuleGameGuideSeqConnect")&&-1===this._resetExclude.indexOf("ModuleGameGuideSeqConnect")&&this._moduleGameGuideSeqConnect.reset(),this._moduleGameMultipleChoice&&-1===n.indexOf("ModuleGameMultipleChoice")&&-1===this._resetExclude.indexOf("ModuleGameMultipleChoice")&&this._moduleGameMultipleChoice.reset(),this._moduleGameQuiz&&-1===n.indexOf("ModuleGameQuiz")&&-1===this._resetExclude.indexOf("ModuleGameQuiz")&&this._moduleGameQuiz.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),a&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var a=1<arguments.length&&void 0!==i?i:.2,s=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,a,s)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new k(this).init(),this._moduleCalculator=new O(this).init(),this._modulePureAnimate=new B(this).init(),this._moduleZoom=new x(this).init(),this._moduleGameDragDrop=new C(this).init(),this._moduleGameGuideSeqConnect=new T(this).init(),this._moduleGameMultipleChoice=new w(this).init(),this._moduleGameQuiz=new L(this).init(),r.default.notNull(this._modulePlaySwitchSound)&&this._modulePlaySwitchSound.isForceUseCreateJSAudio(!0))}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new k(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new O(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new B(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleGameDragDrop)?this._moduleGameDragDrop=new C(this).init(t):this._moduleGameDragDrop.reinit(t),r.default.isNull(this._moduleGameGuideSeqConnect)?this._moduleGameGuideSeqConnect=new T(this).init(t):this._moduleGameGuideSeqConnect.reinit(t),r.default.isNull(this._moduleGameMultipleChoice)?this._moduleGameMultipleChoice=new w(this).init(t):this._moduleGameMultipleChoice.reinit(t),r.default.isNull(this._moduleGameQuiz)?this._moduleGameQuiz=new L(this).init(t):this._moduleGameQuiz.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),j),N;function j(e,t,i,n){l(this,j);var a=d(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,e,t,i,n));return(a._this=a)._resetExclude=[],a}t.GameBookPage=I},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleGameDragDrop=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,h=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["GameDragDrop"],l={Echo:"none"},d=!0,p=(n(c,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),h.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),h.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),h.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),h.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=this._gameDragDropGroup.length;for(i=0;i<n;i++){t=this._gameDragDropGroup[i];var a=this._parent.getInstanceMirror(t),s=this.getCustomTag(t);this._gameDropListCount[s]=0;for(var o=this._gameDragList[s].length,r=0;r<o;r++){var u=this._gameDragList[s][r];u.cursor="pointer",u.x=u.orgX,u.y=u.orgY,u.addEventListener("mousedown",this.triggerBtnDragMousedownBind),u.addEventListener("pressmove",this.triggerBtnDragPressmoveBind,h.default.supportPassive()),u.addEventListener("pressup",this.triggerBtnDragPressupBind)}}h.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),h.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"GameDragDrop":n=this.getCustomTag(t),this._gameDragDropGroup.push(t),this._gameDragList[n]=this.pickRelation(t,"Drag"),this._gameDropListMax[n]=this._gameDragList[n].length,this._gameDropListCount[n]=0}}}},{key:"getCustomTag",value:function e(t){return h.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0;this.triggerBtnDragMousedownBind=this.triggerBtnDragMousedownBind||this.triggerBtnDragMousedown.bind(this),this.triggerBtnDragClickBind=this.triggerBtnDragClickBind||this.triggerBtnDragListClick.bind(this),this.triggerBtnDragPressmoveBind=this.triggerBtnDragPressmoveBind||this.triggerBtnDragPressmove.bind(this),this.triggerBtnDragPressupBind=this.triggerBtnDragPressupBind||this.triggerBtnDragPressup.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this);var s=this._gameDragDropGroup.length;for(a=0;a<s;a++)if(!(n=this._gameDragDropGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0;for(var o=this._parent.getInstanceMirror(n),r=this.getCustomTag(n),u=this._gameDragList[r].length,l=0;l<u;l++){var d=this._gameDragList[r][l];d.cursor="pointer",d.orgX=d.x,d.orgY=d.y,d.addEventListener("mousedown",this.triggerBtnDragMousedownBind),d.addEventListener("pressmove",this.triggerBtnDragPressmoveBind,h.default.supportPassive()),d.addEventListener("pressup",this.triggerBtnDragPressupBind),h.default.notNull(d.EffectBase)&&h.default.applyMultiply(d.EffectBase)}}}},{key:"triggerBtnDragListClick",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]];t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY);this.isCheckMove=!1,i.fixX=i.x-n.x,i.fixY=i.y-n.y,i.startX=i.x,i.startY=i.y,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+i.fixX,i.y=n.y+i.fixY;var a=Math.abs(i.x-i.startX),s=Math.abs(i.y-i.startY),o;60<Math.sqrt(Math.pow(a,2)+Math.pow(s,2))&&(this.isCheckMove=!0),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"findCanHint",value:function e(t){for(var i=this._parent.getInstanceMirror(t),n=t.parent,a=this._parent.getInstanceMirror(n),s=a.subset.length,o=null,r=0;r<s;r++){var u=n[a.subset[r]],l=this._parent.getInstanceMirror(u);if("Drop"===l.command&&l.args[0]===i.args[0]){o=u;break}}return o}},{key:"triggerBtnDragPressup",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.parent,s=this.getCustomTag(a),o=this._gameDragList[s].indexOf(i),r=this.findCanHint(i),u=!0;1<n.args.length&&this._gameDropListCount[s]+1!==Number(n.args[1])&&(u=!1),h.default.notNull(r)&&u&&h.default.collisionTest(i,r)?(i.cursor="auto",i.x=r.x+i.regX*i.scaleX-r.regX*r.scaleX,i.y=r.y+i.regY*i.scaleY-r.regY*r.scaleY,i.removeEventListener("mousedown",this.triggerBtnDragMousedownBind),i.removeEventListener("pressmove",this.triggerBtnDragPressmoveBind,h.default.supportPassive()),i.removeEventListener("pressup",this.triggerBtnDragPressupBind),this._gameDropListCount[s]+=1,this.playEchoSound(a,"RIGHT")):(i.x=i.orgX,i.y=i.orgY,this.isCheckMove&&this.playEchoSound(a,"WRONG")),this.checkAnsStatus(a,!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"playEchoSound",value:function e(t,i){this._parent.stop(null,!0);var n=this._parent.getInstanceMirror(t),a=t.nominalBounds,s={x:t.x+a.x*t.scale,y:t.y+a.y*t.scale},o=t.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+t._replacePath+"sounds/":t._replacePath+"./sounds/";this._parent.soundObj={id:i,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:"Echo",target:t,target2:null};var l=this.checkCommandMode("Echo");h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"checkAnsStatus",value:function e(t,i){var n=!(1<arguments.length&&void 0!==i)||i,a=this.getCustomTag(t);this._gameDropListCount[a]===this._gameDropListMax[a]&&n&&(this._parent.sendCommand("Game","Game_Finish"),t.parent.mouseEnabled=!1)}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(h.default.isNull(this._parent.soundObj)||h.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)h.default.notNull(i)&&i.stop();else switch(n){case"fileload":h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){h.default.notNull(this._parent.soundChannel)}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.soundObj.target2,a=this._parent.getInstanceMirror(i);h.default.notNull(n)&&(n.gotoAndStop(0),n.visible=!1),this.stop();var s=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===s||"normal-close"===s||"ex-normal-close"===s||"none"===s?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)),this.checkAnsStatus(i)}},{key:"fixRegXY",value:function e(t){t._fixX=t.x+t.regX*t.scaleX,t._fixY=t.y+t.regY*t.scaleY}}]),c);function c(e){r(this,c),this._parent=e,this._pickList,this._gameDragDropGroup=[],this._gameDragList={},this._gameDropListCount={},this._gameDropListMax={},this._seq=999}t.ModuleGameDragDrop=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleGameGuideSeqConnect=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,_=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["GameGuideSeqConnect"],l={Echo:"none"},d=!0,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),_.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),_.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),_.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),this.cleanTween(),_.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=this._gameGuideSeqConnectGroup.length;for(i=0;i<n;i++){t=this._gameGuideSeqConnectGroup[i];var a=this._parent.getInstanceMirror(t),s=this.getCustomTag(t);this._gameSeqClickLineListCount[s]=0;for(var o=this._gameSeqClickStartTouchList[s].length,r=0;r<o;r++){var u=this._gameSeqClickStartTouchList[s][r],l=this._parent.getInstanceMirror(u),d=t["End_"+l.args[0]],h=t["Line_"+l.args[0]];u.cursor="pointer",d.cursor="pointer",h.cursor="auto",this._gameSeqClickLineListCount[s]+1===Number(l.args[0])?(u.visible=!0,d.visible=!0,h.visible=!0):(u.visible=!1,d.visible=!1,h.visible=!1),u.gotoAndStop(0),d.gotoAndStop(0),h.gotoAndStop(0)}}_.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),_.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"GameGuideSeqConnect":n=this.getCustomTag(t),this._gameGuideSeqConnectGroup.push(t),this._gameSeqClickStartTouchList[n]=this.pickRelation(t,"Start"),this._gameSeqClickLineListMax[n]=this._gameSeqClickStartTouchList[n].length,this._gameSeqClickLineListCount[n]=0,this._gameSeqClickStartTouchList[n].sort(_.default.sortByNameACS)}}}},{key:"getCustomTag",value:function e(t){return _.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0;this.triggerBtnClickListBind=this.triggerBtnClickListBind||this.triggerBtnListClick.bind(this),this.checkEndStatusBind=this.checkEndStatusBind||this.checkEndStatus.bind(this),this.finishLineStatusBind=this.finishLineStatusBind||this.finishLineStatus.bind(this),this.checkAnsStatusBind=this.checkAnsStatusBind||this.checkAnsStatus.bind(this),this.tweenCompleteBind=this.tweenCompleteBind||this.triggerTweenComplete.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this);var s=this._gameGuideSeqConnectGroup.length;for(a=0;a<s;a++)if(!(n=this._gameGuideSeqConnectGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0;for(var o=this._parent.getInstanceMirror(n),r=this.getCustomTag(n),u=this._gameSeqClickStartTouchList[r].length,l=0;l<u;l++){var d=this._gameSeqClickStartTouchList[r][l],h=this._parent.getInstanceMirror(d),p=n["End_"+h.args[0]],c=n["Line_"+h.args[0]];c.relTarget=n,d._replacePath=i,p._replacePath=i,c._replacePath=i,((d.relEnd=p).relStart=d).relLine=c,p.relLine=c,d.cursor="pointer",p.cursor="pointer",c.cursor="auto",d.addEventListener(this._mouseTriggerBehavior,this.triggerBtnClickListBind),p.addEventListener(this._mouseTriggerBehavior,this.triggerBtnClickListBind),_.default.notNull(d.EffectBase)&&_.default.applyMultiply(d.EffectBase),_.default.notNull(p.EffectBase)&&_.default.applyMultiply(p.EffectBase),this._gameSeqClickLineListCount[r]+1===Number(h.args[0])?(d.visible=!0,p.visible=!0,c.visible=!0):(d.visible=!1,p.visible=!1,c.visible=!1),d.gotoAndStop(0),p.gotoAndStop(0),c.gotoAndStop(0)}}}},{key:"triggerBtnListClick",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=n.parent[n.args[0]];switch(n.command){case"Start":i.cursor="auto",i.gotoAndStop(1),this.playEchoSound(i,"SWITCH");break;case"End":i.cursor="auto",i.gotoAndStop(1),i.callNextFunc=this.checkEndStatusBind,this.playEchoSound(i,"SWITCH")}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkEndStatus",value:function e(t){1===t.relStart.currentFrame?(t.relLine.callNextFunc=this.finishLineStatusBind,t.relStart.visible=!1,t.visible=!1,t.relLine.visible=!0,t.relLine.alpha=0,this.cleanTween(),this._tweenObj=t.relLine,this._parent.createjs.Tween.get(t.relLine).to({alpha:1},700).call(this.tweenCompleteBind),t.relLine.gotoAndStop(1),this.playEchoSound(t.relLine,"RIGHT")):(t.cursor="pointer",t.gotoAndStop(0))}},{key:"finishLineStatus",value:function e(t){var i=this.getCustomTag(t.relTarget);if(this._gameSeqClickLineListCount[i]+=1,this._gameSeqClickLineListCount[i]<this._gameSeqClickLineListMax[i]){var n=this._gameSeqClickLineListCount[i],a=this._gameSeqClickStartTouchList[i][n],s=a.relEnd,o=a.relLine;a.cursor="pointer",s.cursor="pointer",o.cursor="auto",a.visible=!0,s.visible=!0,o.visible=!0,a.gotoAndStop(0),s.gotoAndStop(0),o.gotoAndStop(0)}else{var r=this._parent.getInstanceMirror(t.relTarget),u;t.relTarget.callNextFunc=this.checkAnsStatusBind,this.playEchoSound(t.relTarget,r.args[0]),this.cleanTween(),this._tweenObj=t.relTarget,this._parent.createjs.Tween.get(t.relTarget).to({alpha:0},300).to({alpha:1},300).to({alpha:0},300).to({alpha:1},300).call(this.tweenCompleteBind).stop}}},{key:"cleanTween",value:function e(){this._tweenObj&&(this._parent.createjs.Tween.removeTweens(this._tweenObj),this._tweenObj=null)}},{key:"triggerTweenComplete",value:function e(){this._tweenObj=null}},{key:"playEchoSound",value:function e(t,i){this._parent.stop(null,!0);var n=this._parent.getInstanceMirror(t),a=t.nominalBounds,s={x:t.x+a.x*t.scale,y:t.y+a.y*t.scale},o=t.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+t._replacePath+"sounds/":t._replacePath+"./sounds/";this._parent.soundObj={id:i,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:"Echo",target:t,target2:null};var l=this.checkCommandMode("Echo");_.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"checkAnsStatus",value:function e(t,i){var n=!(1<arguments.length&&void 0!==i)||i,a=this.getCustomTag(t);this._gameSeqClickLineListCount[a]===this._gameSeqClickLineListMax[a]&&n&&(this._parent.sendCommand("Game","Game_Finish"),t.parent.mouseEnabled=!1)}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(_.default.isNull(this._parent.soundObj)||_.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)_.default.notNull(i)&&i.stop();else switch(n){case"fileload":_.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){_.default.notNull(this._parent.soundChannel)}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.soundObj.target2,a=this._parent.getInstanceMirror(i);this.stop();var s=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===s||"normal-close"===s||"ex-normal-close"===s||"none"===s?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,_.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)),i.callNextFunc&&i.callNextFunc(i)}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._gameGuideSeqConnectGroup=[],this._gameSeqClickStartTouchList={},this._gameSeqClickLineListCount={},this._gameSeqClickLineListMax={},this._tweenObj=null,this._seq=999}t.ModuleGameGuideSeqConnect=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleGameMultipleChoice=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,_=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["GameMultipleChoice"],l={Echo:"none"},d=!0,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),_.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),_.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),_.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),_.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=this._gameMultipleChoiceGroup.length;for(i=0;i<n;i++){t=this._gameMultipleChoiceGroup[i];var a=this._parent.getInstanceMirror(t),s=this.getCustomTag(t);this._gameChoiceRListCount[s]=0;for(var o=this._gameChoiceRList[s].length,r=0;r<o;r++){var u=this._gameChoiceRList[s][r];u.cursor="pointer",u.mouseEnabled=!0,u.gotoAndStop(0)}for(var l=this._gameChoiceWList[s].length,d=0;d<l;d++){var h=this._gameChoiceWList[s][d];h.cursor="pointer",h.mouseEnabled=!0,h.gotoAndStop(0)}}_.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),_.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"GameMultipleChoice":n=this.getCustomTag(t),this._gameMultipleChoiceGroup.push(t),this._gameChoiceRList[n]=this.pickRelation(t,"ChoiceR"),this._gameChoiceWList[n]=this.pickRelation(t,"ChoiceW"),this._gameChoiceRListMax[n]=this._gameChoiceRList[n].length,this._gameChoiceRListCount[n]=0}}}},{key:"getCustomTag",value:function e(t){return _.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,o=0;o<s;o++){var r=this._parent.getInstanceMirror(a.target[a.subset[o]]),u=a.target[a.subset[o]];r.command===i&&n.push(u)}return n}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,a=void 0;this.triggerBtnChoiceClickBind=this.triggerBtnChoiceClickBind||this.triggerBtnChoiceListClick.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this);var s=this._gameMultipleChoiceGroup.length;for(a=0;a<s;a++)if(!(n=this._gameMultipleChoiceGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0;for(var o=this._parent.getInstanceMirror(n),r=this.getCustomTag(n),u=this._gameChoiceRList[r].length,l=0;l<u;l++){var d=this._gameChoiceRList[r][l];d._replacePath=i,d.cursor="pointer",d.addEventListener(this._mouseTriggerBehavior,this.triggerBtnChoiceClickBind),_.default.notNull(d.EffectBase)&&_.default.applyMultiply(d.EffectBase)}for(var h=this._gameChoiceWList[r].length,p=0;p<h;p++){var c=this._gameChoiceWList[r][p];c._replacePath=i,c.cursor="pointer",c.addEventListener(this._mouseTriggerBehavior,this.triggerBtnChoiceClickBind),_.default.notNull(c.EffectBase)&&_.default.applyMultiply(c.EffectBase)}}}},{key:"triggerBtnChoiceListClick",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.parent,s=this.getCustomTag(a);0===i.currentFrame&&(i.cursor="auto",i.gotoAndStop(1),i.mouseEnabled=!1,"ChoiceR"===n.command?(this._gameChoiceRListCount[s]+=1,this.playEchoSound(a,i,"RIGHT")):this.playEchoSound(a,i,"WRONG")),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"playEchoSound",value:function e(t,i,n){this._parent.stop(null,!0);var a=this._parent.getInstanceMirror(t),s=t.nominalBounds,o={x:t.x+s.x*t.scale,y:t.y+s.y*t.scale},r=t.parent.localToGlobal(o.x,o.y),u=this._parent.exportRoot.globalToLocal(r.x,r.y),l=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+t._replacePath+"sounds/":t._replacePath+"./sounds/";this._parent.soundObj={id:n,path:l,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:u.x,locY:u.y,excludeTags:null,command:"Echo",target:t,target2:i};var d=this.checkCommandMode("Echo");_.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"checkAnsStatus",value:function e(t,i){var n=!(1<arguments.length&&void 0!==i)||i,a=this.getCustomTag(t);this._gameChoiceRListCount[a]===this._gameChoiceRListMax[a]&&n&&(this._parent.sendCommand("Game","Game_Finish"),t.parent.mouseEnabled=!1)}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(_.default.isNull(this._parent.soundObj)||_.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)_.default.notNull(i)&&i.stop();else switch(n){case"fileload":_.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){_.default.notNull(this._parent.soundChannel)}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.soundObj.target2,a=this._parent.getInstanceMirror(i),s;_.default.notNull(n)&&"ChoiceR"!==this._parent.getInstanceMirror(n).command&&(n.cursor="pointer",n.mouseEnabled=!0,n.gotoAndStop(0)),this.stop();var o=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===o||"normal-close"===o||"ex-normal-close"===o||"none"===o?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,_.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)),this.checkAnsStatus(i)}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._gameMultipleChoiceGroup=[],this._gameChoiceRList={},this._gameChoiceWList={},this._gameChoiceRListCount={},this._gameChoiceRListMax={},this._seq=999}t.ModuleGameMultipleChoice=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleGameQuiz=void 0;var n=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,q=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["GameQuizPanel"],l={GameQuizPanel:"none",Echo:"none"},d=!0,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),q.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);for(var t=this._pickList.length,i=void 0,n=void 0,a=0;a<t;a++){i=this._pickList[a],n=this._parent.getInstanceMirror(i);var s=this.getCustomTag(i),o=i.parent,r=o.mcRight,u=o.mcWrong,l=o.NXQuizToolBar,d;o.NXQuizContent._btn_sound.gotoAndStop(0)}q.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),q.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),q.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),this._runningAutoHint=null;for(var t=this._pickList.length,i=void 0,n=void 0,a=0;a<t;a++){i=this._pickList[a],n=this._parent.getInstanceMirror(i);var s=this.getCustomTag(i),o=i.parent,r=o.mcRight,u=o.mcWrong,l=o.NXQuizToolBar,d=o.NXQuizContent;d._btn_sound.gotoAndStop(0);var h=i;this.clearQuizAnsStatus(i),d.visible=!1,h.visible=!0}q.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),q.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var o=this,t=function e(t){for(var i=o._parent.getInstanceMirror(t),n=i.subset.length,a=void 0,s=0;s<n;s++)a=i.subset[s],o.pickTarget(i.target[a]),e(i.target[a])},i=this._parent.levelOneInstanceNames.length,n=void 0,a=void 0,s=0;s<i;s++)n=this._parent.levelOneInstanceNames[s],this.pickTarget(this._parent.exportRoot[n]),t((a=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;this._pickList.push(t),t._seq=this._seq,this._seq++}}},{key:"getCustomTag",value:function e(t){return q.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"setup",value:function e(t){var d=this,h=0<arguments.length&&void 0!==t?t:"",i=this._pickList.length,p=void 0,c=this;this._preloadManifestCount=0,this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.checkAnsStatusBind=this.checkAnsStatusBind||this.checkAnsStatus.bind(this),this.handleFileLoadBind=this.handleFileLoadBind||this.handleFileLoad.bind(this),this.handleCompleteBind=this.handleCompleteBind||this.handleComplete.bind(this),this.triggerIntroMouseDownBind=this.triggerIntroMouseDownBind||this.triggerIntroMouseDown.bind(this),this.triggerIntroMouseSwitchBind=this.triggerIntroMouseSwitchBind||this.triggerIntroMouseSwitch.bind(this),this.triggerToolbarMouseDownBind=this.triggerToolbarMouseDownBind||this.triggerToolbarMouseDown.bind(this),this.handleQuestionSoundClickBind=this.handleQuestionSoundClickBind||this.handleQuestionSoundClick.bind(this),this.triggerQuestionSoundWatchBind=this.triggerQuestionSoundWatchBind||this.triggerQuestionSoundWatch.bind(this),this.handleQuestionSoundCompleteBind=this.handleQuestionSoundCompleteBind||this.handleQuestionSoundComplete.bind(this),this.handleQuizUnitTouchIsOnlySoundBind=this.handleQuizUnitTouchIsOnlySoundBind||this.handleQuizUnitTouchIsOnlySound.bind(this),this.handleQuizUnitTouchIsCheckBind=this.handleQuizUnitTouchIsCheckBind||this.handleQuizUnitTouchIsCheck.bind(this),this.triggerResultAnimateSoundWatchBind=this.triggerResultAnimateSoundWatchBind||this.triggerResultAnimateSoundWatch.bind(this),this.triggerResultAnimateSoundCompleteBind=this.triggerResultAnimateSoundCompleteBind||this.triggerResultAnimateSoundComplete.bind(this),this.triggerAutoHintAnimateSoundCompleteBind=this.triggerAutoHintAnimateSoundCompleteBind||this.triggerAutoHintAnimateSoundComplete.bind(this),this.handleQuizUnitTouchMoveStartByType3Bind=this.handleQuizUnitTouchMoveStartByType3Bind||this.handleQuizUnitTouchMoveStartByType3.bind(this),this.handleQuizUnitTouchMoveMoveByType3Bind=this.handleQuizUnitTouchMoveMoveByType3Bind||this.handleQuizUnitTouchMoveMoveByType3.bind(this),this.handleQuizUnitTouchMoveEndByType3Bind=this.handleQuizUnitTouchMoveEndByType3Bind||this.handleQuizUnitTouchMoveEndByType3.bind(this),this.handleQuizUnitLineMoveStartBind=this.handleQuizUnitLineMoveStartBind||this.handleQuizUnitLineMoveStart.bind(this),this.handleQuizUnitLineMoveMoveBind=this.handleQuizUnitLineMoveMoveBind||this.handleQuizUnitLineMoveMove.bind(this),this.handleQuizUnitLineMoveEndBind=this.handleQuizUnitLineMoveEndBind||this.handleQuizUnitLineMoveEnd.bind(this),this.handleQuizUnitTouchMoveStartByType6Bind=this.handleQuizUnitTouchMoveStartByType6Bind||this.handleQuizUnitTouchMoveStartByType6.bind(this),this.handleQuizUnitTouchMoveMoveByType6Bind=this.handleQuizUnitTouchMoveMoveByType6Bind||this.handleQuizUnitTouchMoveMoveByType6.bind(this),this.handleQuizUnitTouchMoveEndByType6Bind=this.handleQuizUnitTouchMoveEndByType6Bind||this.handleQuizUnitTouchMoveEndByType6.bind(this),this.handleQuizUnitTouchMoveStartByType7Bind=this.handleQuizUnitTouchMoveStartByType7Bind||this.handleQuizUnitTouchMoveStartByType7.bind(this),this.handleQuizUnitTouchMoveMoveByType7Bind=this.handleQuizUnitTouchMoveMoveByType7Bind||this.handleQuizUnitTouchMoveMoveByType7.bind(this),this.handleQuizUnitTouchMoveEndByType7Bind=this.handleQuizUnitTouchMoveEndByType7Bind||this.handleQuizUnitTouchMoveEndByType7.bind(this),this.handleType7KeyboardBind=this.handleType7KeyboardBind||this.handleType7Keyboard.bind(this);for(var n=0;n<i;n++)(p=this._pickList[n])._isModuleInited||function(){p._replacePath=h,p._isModuleInited=!0;var e=d.getCustomTag(p),t=p.parent,i=t.mcRight,n=t.mcWrong,a=t.NXQuizToolBar,s=t.NXQuizContent,o=p;i.rawdata="right",n.rawdata="wrong",a.mcToolType.pageShowMC.pageTxt.textBaseline=d._parent.textBaseline,"alphabetic"===d._parent.textBaseline&&(a.mcToolType.pageShowMC.pageTxt.y+=a.mcToolType.pageShowMC.pageTxt.lineHeight*d._parent.textAlphabeticFixYScale),o.titleText.textBaseline=d._parent.textBaseline,o.titleText.text="　　　　　　　　　　　　　　　　　　　　　　　　　　　","alphabetic"===d._parent.textBaseline&&(o.titleText.y+=o.titleText.lineHeight*d._parent.textAlphabeticFixYScale),d._parent.stage.isWebGL&&(o.titleText.cache(o.titleText.getBounds().x,o.titleText.getBounds().y,o.titleText.getBounds().width,o.titleText.getBounds().height,2),o.titleText.updateCache()),a.mcToolType.pageShowMC.pageTxt.text="99/99",d._parent.stage.isWebGL&&(a.mcToolType.pageShowMC.pageTxt.cache(a.mcToolType.pageShowMC.pageTxt.getBounds().x,a.mcToolType.pageShowMC.pageTxt.getBounds().y,a.mcToolType.pageShowMC.pageTxt.getBounds().width,a.mcToolType.pageShowMC.pageTxt.getBounds().height,2),a.mcToolType.pageShowMC.pageTxt.updateCache()),i.visible=!1,n.visible=!1,a.visible=!1,s.visible=!1,o.visible=!0,o.sequenceBtn.cursor="pointer",o.randomBtn.cursor="pointer",o.autoSoundPlayBtn.cursor="pointer",o.sequenceBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerIntroMouseDownBind),o.randomBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerIntroMouseDownBind),o.autoSoundPlayBtn.addEventListener("mousedown",d.triggerIntroMouseSwitchBind),d.disableButtonHelper(o.sequenceBtn),d.disableButtonHelper(o.randomBtn),o.autoSoundPlayBtn.gotoAndStop(0),d.disableButtonHelper(o.autoSoundPlayBtn),a.checkButton.cursor="pointer",a.mcToolType.prevBtn.cursor="pointer",a.mcToolType.nextBtn.cursor="pointer",a.mcToolType.againBtn.cursor="pointer",a.mcToolType.backOne.cursor="pointer",a.checkButton.parentRef=o,a.mcToolType.prevBtn.parentRef=o,a.mcToolType.nextBtn.parentRef=o,a.mcToolType.againBtn.parentRef=o,a.mcToolType.backOne.parentRef=o,d.disableButtonHelper(a.mcToolType.prevBtn),d.disableButtonHelper(a.mcToolType.nextBtn),d.disableButtonHelper(a.mcToolType.againBtn),d.disableButtonHelper(a.mcToolType.backOne),d.disableButtonHelper(a.checkButton),a.mcToolType.prevBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),a.mcToolType.nextBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),a.mcToolType.againBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),a.mcToolType.backOne.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),a.checkButton.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),d._pickListLoader[e]=new d._parent.createjs.LoadQueue(!0,"./quiz/","Anonymous"),d._pickListLoader[e].id=e,d._pickListLoader[e].installPlugin(d._parent.createjs.Sound),d._pickListLoader[e].setMaxConnections(6),d._pickListXML[e]=null,d._pickListImages[e]={},d._pickListProp[e]={},d._pickListMP3Resource[e]={},d._parentListShapeTemp[e]=new d._parent.createjs.Shape,d._parentListShapeBase[e]=new d._parent.createjs.Shape,d._pickListProp[e].quiz_resource=[],d._pickListProp[e].quiz_resource_map=[],d._pickListProp[e].quiz_prop={},d._pickListProp[e].quiz_page_data=[],d._pickListProp[e].quiz_unit_data=[],d._pickListProp[e].unit_instance=[],d._pickListProp[e].unit_auto_type=[],d._pickListProp[e].quizPageIndex,d._pickListProp[e].questionSound,d._pickListProp[e].quizTouchSound,d._pickListProp[e].answerStatus=[],d._pickListProp[e].page_type2_ans=[],d._pickListProp[e].page_type3_ans={},d._pickListProp[e].page_type5_ans={},d._pickListProp[e].page_type7_ans={},d._pickListProp[e].page_type6_ans={},d._pickListProp[e].autoSoundPlay=!1;var r=document.getElementsByTagName("head")[0],u=document.createElement("script");u.id=e,u.type="text/javascript";var l=d._pickListManifest;u.onload=u.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(l[u.id]=JSON.parse(JSON.stringify(quiz_manifest)),u.onload=u.onreadystatechange=null,c._preloadManifestCount+=1,c.readJSONManifest(u.id))},u.src="./quiz/mapping.js?"+Math.ceil(5e3*Math.random()),r.appendChild(u)}()}},{key:"readJSONManifest",value:function e(t){var i=this,n=this._pickListJsonManifest;n[t]=null,i.checkPreloadManifest()}},{key:"readTextFile",value:function e(t,i){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&"200"==n.status?i(n.responseText):4===n.readyState&&"404"==n.status&&i("")},n.send(null)}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"checkPreloadManifest",value:function e(){if(this._preloadManifestCount===this._pickList.length)for(var t=this._pickList.length,i=this._preloadResourceCount=0;i<t;i++){for(var n=this._pickList[i],a=this.getCustomTag(n),s=this._pickListManifest[a].length,o=[],r=0;r<s;r++)if(-1===this._pickListManifest[a][r].src.indexOf(".mp3"))null===this._pickListJsonManifest[a]&&o.push(this._pickListManifest[a][r]);else{var u=this._pickListManifest[a][r].src.split(".mp3");u=u[0].split("asset/"),this._pickListMP3Resource[a][this._pickListManifest[a][r].id]=u[1]}if(null!==this._pickListJsonManifest[a])for(var l=this._pickListJsonManifest[a].images.length,d=0;d<l;d++)o.push({src:"asset2/"+this._pickListJsonManifest[a].images[d],id:this._pickListJsonManifest[a].images[d]});this._pickListManifest[a]=JSON.parse(JSON.stringify(o)),0===this._pickListManifest[a].length&&null===this._pickListJsonManifest[a]?this._preloadResourceCount+=1:(this._pickListLoader[a].addEventListener("fileload",this.handleFileLoadBind),this._pickListLoader[a].addEventListener("complete",this.handleCompleteBind),this._pickListLoader[a].loadFile({src:"data.xml?"+Math.ceil(5e3*Math.random()),type:"xml",id:"quiz_xml"},!1),this._pickListLoader[a].loadManifest(this._pickListManifest[a],!1),this._pickListLoader[a].load())}}},{key:"handleFileLoad",value:function e(t){var i=t.currentTarget;t&&"image"===t.item.type?this._pickListImages[i.id][t.item.id]=t.result:t&&"xml"===t.item.type&&"quiz_xml"===t.item.id&&(this._pickListXML[i.id]=t.result)}},{key:"handleComplete",value:function e(t){var i,n=t.currentTarget.id;if(null!==this._pickListJsonManifest[n]){for(var a=this._pickListJsonManifest[n].images.length,s=[],o=0;o<a;o++)s.push(this._pickListImages[n][this._pickListJsonManifest[n].images[o]]);this._pickListJsonSS[n]=new this._parent.createjs.SpriteSheet({images:s,frames:this._pickListJsonManifest[n].frames})}if(this._pickListLoader[n].removeEventListener("fileload",this.handleFileLoadBind),this._pickListLoader[n].removeEventListener("complete",this.handleCompleteBind),this._preloadResourceCount+=1,this._preloadResourceCount===this._pickList.length)for(var r=this._pickList.length,u=0;u<r;u++){var l=this.getCustomTag(this._pickList[u]);if(this.parseQuizData(l),this._pickList[u].titleText.text=this._pickListProp[l].quiz_prop.PageMenuTitle,this._parent.stage.isWebGL&&this._pickList[u].titleText.updateCache(),null!==this._pickListJsonManifest[l]){this._pickListJsonSSImage[l]={};var d=[];for(var h in this._pickListJsonManifest[n].animations)if(""!==h){var p=Number(this._pickListJsonManifest[n].animations[h].frames[0]);this._pickListJsonSSImage[l][h]=new this._parent.createjs.Sprite(this._pickListJsonSS[l]),this._pickListJsonSSImage[l][h].gotoAndStop(p),d.push(h)}for(var c=d.length,_=this._pickListProp[l].quiz_resource.length,g=0;g<c;g++)for(var f=0;f<_;f++){var v=this._pickListProp[l].quiz_resource[f].data.split(".");if("mp3"!==v[1]&&v[0]===d[g]){var m=this._pickListProp[l].quiz_resource[f].id;this._pickListImages[l][m]=this._pickListJsonSSImage[l][d[g]];break}}}if(0<this._pickListProp[l].quiz_page_data.length){this._pickListQuestionSeqIndex[l]=0,this._pickListQuestionSeq[l]=this.generateArrayNumber(0,this._pickListProp[n].quiz_page_data.length),this.enableButtonHelper(this._pickList[u].sequenceBtn),this.enableButtonHelper(this._pickList[u].randomBtn);var b=this._pickList[u].parent.NXQuizToolBar;this.enableButtonHelper(b.mcToolType.prevBtn),this.enableButtonHelper(b.mcToolType.nextBtn),this.enableButtonHelper(b.mcToolType.againBtn),this.enableButtonHelper(b.mcToolType.backOne),this.enableButtonHelper(b.checkButton);var y=this._pickList[u];switch(y.autoSoundPlayBtn.cursor="pointer",this._pickListProp[l].autoSoundPlay=!1,this._pickListProp[l].quiz_prop.PageIntroSoundStatus="1",Number(this._pickListProp[l].quiz_prop.PageIntroSoundStatus)){case 0:this.disableButtonHelper(y.autoSoundPlayBtn);break;case 1:this._pickListProp[l].autoSoundPlay=!1,this.enableButtonHelper(y.autoSoundPlayBtn),y.autoSoundPlayBtn.gotoAndStop(0);break;case 2:this._pickListProp[l].autoSoundPlay=!0,this.enableButtonHelper(y.autoSoundPlayBtn),y.autoSoundPlayBtn.gotoAndStop(2)}this.initUnitInstance(this._pickList[u]),!1===b.mcToolType.backOne.visible&&this._pickList[u].sequenceBtn.dispatchEvent("click")}}}},{key:"parseQuizData",value:function e(t){var i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,r=void 0,u=this._pickListXML[t].documentElement;a=(i=u.getElementsByTagName("Resource"))[0].childNodes.length;for(var l=0;l<a;l++)l%2!=0&&this._pickListProp[t].quiz_resource.push({id:i[0].childNodes[l].id,data:i[0].childNodes[l].textContent});a=(i=u.getElementsByTagName("ResourceMap"))[0].childNodes.length;for(var d=0;d<a;d++)d%2!=0&&this._pickListProp[t].quiz_resource_map.push({id:i[0].childNodes[d].id,type:i[0].childNodes[d].textContent});a=(i=u.getElementsByTagName("Prop"))[0].childNodes.length;for(var h=0;h<a;h++)h%2!=0&&(this._pickListProp[t].quiz_prop[i[0].childNodes[h].nodeName]=i[0].childNodes[h].textContent);a=(i=u.getElementsByTagName("PageData")).length;for(var p=void 0,c=void 0,_=0;_<a;_++){r={},this._pickListProp[t].quiz_page_data[i[_].getAttribute("index")]=r,s=(n=i[_].childNodes).length;for(var g=0;g<s;g++)if(g%2!=0&&"unit"!=n[g].nodeName&&"activeRightSets"!=n[g].nodeName){r[n[g].nodeName]={},o=n[g].attributes.length;for(var f=0;f<o;f++)p=n[g].attributes[f].name,c=n[g].attributes[f].value,r[n[g].nodeName][p]=c;r[n[g].nodeName].rawdata=n[g].textContent}else if(g%2!=0&&"unit"==n[g].nodeName){void 0===this._pickListProp[t].quiz_unit_data&&(this._pickListProp[t].quiz_unit_data=[]),void 0===this._pickListProp[t].quiz_unit_data[_]&&(this._pickListProp[t].quiz_unit_data[_]={}),void 0===this._pickListProp[t].quiz_unit_data[_][n[g].textContent]&&(this._pickListProp[t].quiz_unit_data[_][n[g].textContent]=[]);var v={};o=n[g].attributes.length;for(var m=0;m<o;m++)p=n[g].attributes[m].name,c=n[g].attributes[m].value,v[p]=c;this._pickListProp[t].quiz_unit_data[_][n[g].textContent].push(v)}else if(g%2!=0&&"activeRightSets"==n[g].nodeName){var v;void 0===r[n[g].nodeName]&&(r[n[g].nodeName]=[]),(v={}).rawdata=n[g].textContent,r[n[g].nodeName].push(v)}}}},{key:"initUnitInstance",value:function e(t){for(var i=this.getCustomTag(t),n=this._parent.createjs,a=this._pickListImages[i],s=Number.MAX_VALUE,o=Number.MAX_VALUE,r=Number.MIN_VALUE,u=Number.MIN_VALUE,l=this._pickListProp[i].quiz_unit_data.length,d=0;d<l;d++)for(var h in void 0===this._pickListProp[i].unit_auto_type[d]&&(this._pickListProp[i].unit_auto_type[d]={}),void 0===this._pickListProp[i].unit_instance[d]&&(this._pickListProp[i].unit_instance[d]={}),this._pickListProp[i].quiz_unit_data[d])if(this._pickListProp[i].quiz_unit_data[d].hasOwnProperty(h)){var p=void 0,c=this._pickListProp[i].quiz_unit_data[d][h],_=0,g=0,f;if(!("HittingAuto"===c[0].autoType&&"undefined"===c[0].typeKind||void 0===c[0].autoType&&"NXFLEXTEXTFILED"!=c[0].id&&"KEYBOARDCLASS"!=c[0].id)){switch(c[0].autoType){case"HittingAuto":p=this.factoryAutoType(c[0].id,c[0]);break;default:"NXFLEXTEXTFILED"===c[0].id?(p=this.factoryAutoType(c[0].id,c[0]),c[0].autoType=""):"KEYBOARDCLASS"===c[0].id&&(p=this.factoryAutoType(c[0].id,c[0]),c[0].autoType="KEYBOARDCLASS")}this._pickListProp[i].unit_auto_type[d][h]=c[0].autoType,(this._pickListProp[i].unit_instance[d][h]=p).gotoAndStop(1),p.id=h,null!=c[0].sound?p.sound=c[0].sound:p.sound="",null!=c[0].group?p.group=Number(c[0].group):p.group=0;continue}var v=[];this._pickListProp[i].unit_auto_type[d][h]="",p=new n.MovieClip,this._pickListProp[i].unit_instance[d][h]=p;var m=c.length;s=Number.MAX_VALUE,o=Number.MAX_VALUE,r=Number.MIN_VALUE,u=Number.MIN_VALUE;for(var b=0;b<m;b++){s>c[b].originX&&(s=c[b].originX),o>c[b].originY&&(o=c[b].originY),r<c[b].textWidth&&(r=c[b].textWidth),u<c[b].textHeight&&(u=c[b].textHeight),0===b&&(_=Number(Number(c[b].originX)+Number(c[b].textWidth)/2)*Number(c[b].scaleX),g=Number(Number(c[b].originY)+Number(c[b].textHeight)/2)*Number(c[b].scaleY));var y=void 0;(y=null===this._pickListJsonManifest[i]?new n.Bitmap(a[c[b].id]):a[c[b].id].clone()).parent=p,y.setTransform(c[b].originX,c[b].originY),1===m?p.timeline.addTween(n.Tween.get({}).to({state:[{t:y}]}).wait(1)):v.push(y)}if(0<v.length)switch(v.length){case 2:p.timeline.addTween(n.Tween.get({}).to({state:[{t:v[0]}]}).to({state:[{t:v[1]}]},1).wait(1));break;case 3:p.timeline.addTween(n.Tween.get({}).to({state:[{t:v[0]}]}).to({state:[{t:v[1]}]},1).to({state:[{t:v[2]}]},2).wait(1));break;case 4:default:p.timeline.addTween(n.Tween.get({}).to({state:[{t:v[0]}]}).to({state:[{t:v[1]}]},1).to({state:[{t:v[2]}]},2).to({state:[{t:v[3]}]},3).wait(1))}p.nominalBounds=new n.Rectangle(s,o,r,u),c[0].x=Number(c[0].x)-_,c[0].y=Number(c[0].y)-g,p.setTransform(c[0].x,c[0].y,c[0].scaleX,c[0].scaleY),p.gotoAndStop(1),p.id=h,null!=c[0].sound?p.sound=c[0].sound:p.sound="",null!=c[0].group?p.group=Number(c[0].group):p.group=0}}},{key:"factoryAutoType",value:function e(t,i){var n=this._parent.createjs,a=this._parent.lib,s=void 0;switch(t){case"GMCLASSHITGAMEAUTOTYPEB01":(s=new a.AutoHit01).rawdata="thump",s.setTransform(i.x,i.y,i.scaleX,i.scaleY,0,0,0,-i.originX,-i.originY);break;case"NXFLEXTEXTFILED":s=new n.MovieClip;var o=(new n.Text).set({text:i.text,font:i.assetFontSize+"px "+i.fontName,color:"#"+i.fontColor,lineWidth:i.textWidth,textAlign:i.fontAlign});o.y=-i.textHeight/2+(i.textHeight-o.getMeasuredHeight())/2,s.addChild(o),s.text=o,s.setTransform(i.x,i.y,i.scaleX,i.scaleY,0,0,0),s.nominalBounds=new n.Rectangle(-i.textWidth/2,-i.textHeight/2,i.textWidth,i.textHeight),this._parent.stage.isWebGL&&(s.cache(s.nominalBounds.x,s.nominalBounds.y,s.nominalBounds.width,s.nominalBounds.height,2),s.updateCache());var r=new n.Shape;s.addChild(r),(s.shape=r).graphics.clear(),r.alpha=.01,r.graphics.beginFill("#FFFFFF").drawRect(-i.textWidth/2,-i.textHeight/2,i.textWidth,i.textHeight),s.optText=i.optText,s.chinaCode=i.chinaCode,s.passType=i.passType;break;case"KEYBOARDCLASS":(s=new a.QuizKeyBoard).setTransform(i.x,i.y,i.scaleX,i.scaleY,0,0,0,-i.originX,-i.originY);break;default:s=new n.MovieClip}return s}},{key:"stepQuizProcess",value:function e(t,i){this._parent.stop(null,!0);var n=this.getCustomTag(t),a=this._parent.createjs,s=this._parent.lib,o=this._pickListImages[n],r=t.parent.NXQuizContent,u=t.parent.NXQuizToolBar,l=t,d=this._pickListProp[n].quiz_page_data[i],h=this._parentListShapeTemp[n],p=this._parentListShapeBase[n],c=d.layout.rawdata.split(",");for(var _ in c)if(c.hasOwnProperty(_)&&q.default.notNull(c[_])&&""!==c[_]){var g=this._pickListProp[n].quiz_unit_data[i][c[_]];this._pickListProp[n].unit_instance[i][c[_]].gotoAndStop(0),this._pickListProp[n].unit_instance[i][c[_]].x=g[0].x,this._pickListProp[n].unit_instance[i][c[_]].y=g[0].y,this._pickListProp[n].unit_instance[i][c[_]].scaleX=g[0].scaleX,this._pickListProp[n].unit_instance[i][c[_]].scaleY=g[0].scaleY,this._pickListProp[n].unit_instance[i][c[_]].scale0X=g[0].scaleX,this._pickListProp[n].unit_instance[i][c[_]].scale0Y=g[0].scaleY,r.addChild(this._pickListProp[n].unit_instance[i][c[_]])}switch(this._pickListProp[n].quiz_prop.SoundCount="1",r._btn_sound.rawdata=this._pickListMP3Resource[n][d.sound.rawdata],r._btn_sound.loopdata=Number(this._pickListProp[n].quiz_prop.SoundCount),0<r._btn_sound.loopdata&&(r._btn_sound.loopdata-=1),r._btn_sound.addEventListener("click",this.handleQuestionSoundClickBind),r._btn_sound.setTransform(d.sound.x,d.sound.y,d.sound.scaleX,d.sound.scaleY),r._btn_sound.cursor="pointer",""===d.sound.rawdata?r._btn_sound.visible=!1:(r._btn_sound.visible=!0,this._pickListProp[n].autoSoundPlay&&this.callQuestionSoundClick(r._btn_sound)),u.checkButton.visible=!0,""===d.activeMC.rawdata&&""===d.activeMCP.rawdata&&(u.checkButton.visible=!1),this._quizPageIndex=i,h.graphics.clear(),p.graphics.clear(),r.addChild(h),r.addChild(p),q.default.trace(d.type.rawdata),d.type.rawdata){case"Type2":this.injectQuizType2(t);break;case"Type3":this.injectQuizType3(t);break;case"Type5":this.injectQuizType5(t);break;case"Type6":this.injectQuizType6(t);break;case"Type7":this.injectQuizType7(t)}r._btn_sound.visible&&r.addChild(r._btn_sound)}},{key:"injectQuizType2",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];for(var g in c.page_type="type2",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_active_right="",0!=d.activeRightSets.length?(c.page_active_right=d.activeRightSets[0].rawdata.split(","),c.page_active_right=this.checkArrayData(c.page_active_right)):c.page_active_right="",c.page_type2_ans.length=0,c.page_base)if(""!==g){var f=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[g]][0].sound];q.default.notNull(f)&&(_[c.page_base[g]].cursor="pointer",_[c.page_base[g]].rawdata=f,_[c.page_base[g]].baseTarget=t,_[c.page_base[g]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var v in c.page_active_mc)if(""!==v){var m=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[v]][0].sound];_[c.page_active_mc[v]].rawdata=_[c.page_active_mc[v]].rawdata?_[c.page_active_mc[v]].rawdata:m,_[c.page_active_mc[v]].cursor="pointer",_[c.page_active_mc[v]].baseTarget=t,_[c.page_active_mc[v]].addEventListener("click",this.handleQuizUnitTouchIsCheckBind)}for(var b in c.page_active_mcp)if(""!==b){var y=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[b]][0].sound];q.default.notNull(y)&&(_[c.page_active_mcp[b]].cursor="pointer",_[c.page_active_mcp[b]].rawdata=y,_[c.page_active_mcp[b]].baseTarget=t,_[c.page_active_mcp[b]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}}},{key:"handleQuizUnitTouchIsCheck",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null),this._parent.stop(null,!0);var i=t.currentTarget,n=i.baseTarget,a=this.getCustomTag(n),s=this._pickListProp[a];if(!s.page_is_check_ans){switch(s.page_type){case"type2":if(-1!=s.page_type2_ans.indexOf(i.id))return}""===s.unit_auto_type[this._quizPageIndex][i.id]?(q.default.notNull(i.rawdata)&&this.callQuestionSoundClick(i),2<=i.totalFrames&&i.gotoAndStop(1),this.checkTouchIsQuizAns(n,i.id)):this.callAutoHintAnimate(i)}}},{key:"injectQuizType3",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];if(c.page_type="type3",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type3_ans={},c.page_active_right={},0!=d.activeRightSets.length)for(var g=c.page_active_mcp.length,f=0;f<g;f++)void 0===d.activeRightSets[f]?c.page_active_right[c.page_active_mcp[f]]=[]:(c.page_active_right[c.page_active_mcp[f]]=d.activeRightSets[f].rawdata.split(","),c.page_active_right[c.page_active_mcp[f]]=this.checkArrayData(c.page_active_right[c.page_active_mcp[f]])),c.page_type3_ans[c.page_active_mcp[f]]={};for(var v in c.page_base)if(""!==v){var m=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[v]][0].sound];q.default.notNull(m)&&(_[c.page_base[v]].cursor="pointer",_[c.page_base[v]].rawdata=m,_[c.page_base[v]].baseTarget=t,_[c.page_base[v]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var b in c.page_active_mc)if(""!==b){var y=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[b]][0].sound];_[c.page_active_mc[b]].cursor="pointer",_[c.page_active_mc[b]].rawdata=_[c.page_active_mc[b]].rawdata?_[c.page_active_mc[b]].rawdata:y,_[c.page_active_mc[b]].baseTarget=t,_[c.page_active_mc[b]].addEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType3Bind),_[c.page_active_mc[b]].addEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType3Bind,q.default.supportPassive()),_[c.page_active_mc[b]].addEventListener("pressup",this.handleQuizUnitTouchMoveEndByType3Bind)}for(var S in c.page_active_mcp)if(""!==S){switch(c.page_type3_ans[c.page_active_mcp[S]].passType=c.quiz_unit_data[l][c.page_active_mcp[S]][0].passType,c.page_type3_ans[c.page_active_mcp[S]].gainans=[],c.page_type3_ans[c.page_active_mcp[S]].gainright=0,c.page_type3_ans[c.page_active_mcp[S]].gainmax=0,c.page_type3_ans[c.page_active_mcp[S]].passType){case"ONE":case"ONEOF":c.page_type3_ans[c.page_active_mcp[S]].gainmax=1;break;case"ALL":c.page_type3_ans[c.page_active_mcp[S]].gainmax=c.page_active_right[c.page_active_mcp[S]].length}var P=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[S]][0].sound];q.default.notNull(P)&&(_[c.page_active_mcp[S]].cursor="pointer",_[c.page_active_mcp[S]].rawdata=P,_[c.page_active_mcp[S]].baseTarget=t,_[c.page_active_mcp[S]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}}},{key:"handleQuizUnitTouchMoveStartByType3",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),o=this._pickListProp[s],r=a.parent.NXQuizContent;if(!o.page_is_check_ans){var u=t.currentTarget;q.default.notNull(u.rawdata)&&this.callQuestionSoundClick(u),this.clearTouchPickerType3(a,u);var l=o.quiz_unit_data[this._quizPageIndex][u.id];u.scaleX=l[0].scaleX,u.scaleY=l[0].scaleY,r.setChildIndex(u,r.numChildren-1);var d=r.globalToLocal(t.stageX,t.stageY);u.offset={x:u.x-d.x,y:u.y-d.y}}}},{key:"handleQuizUnitTouchMoveMoveByType3",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),o=this._pickListProp[s],r,u=a.parent.NXQuizContent.globalToLocal(t.stageX,t.stageY),l=t.currentTarget;l.x=u.x+l.offset.x,l.y=u.y+l.offset.y}},{key:"handleQuizUnitTouchMoveEndByType3",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),o=this._pickListProp[s],r=a.parent.NXQuizContent,u=t.currentTarget,l=void 0,d=void 0,h=void 0;d=-1,h="",l=Number.MAX_VALUE;for(var p=o.page_active_mcp.length,c=0;c<p;c++)if(this.checkCollision(u,o.unit_instance[this._quizPageIndex][o.page_active_mcp[c]])){var _=this.getDistanceFromTwoPoint(u.x,u.y,o.unit_instance[this._quizPageIndex][o.page_active_mcp[c]].x,o.unit_instance[this._quizPageIndex][o.page_active_mcp[c]].y);_<l&&(l=_,d=c,h=o.page_active_mcp[c])}-1!=d&&("ONE"!==o.page_type3_ans[h].passType&&"ONEOF"!==o.page_type3_ans[h].passType||1<=o.page_type3_ans[h].gainans.length&&(d=-1)),-1!=d?(o.page_type3_ans[h].gainans.push(u.id),u.x=o.quiz_unit_data[this._quizPageIndex][h][0].x,u.y=o.quiz_unit_data[this._quizPageIndex][h][0].y,this.fixedLocTouchZone(a,h)):(u.x=o.quiz_unit_data[this._quizPageIndex][u.id][0].x,u.y=o.quiz_unit_data[this._quizPageIndex][u.id][0].y)}},{key:"clearTouchPickerType3",value:function e(t,i){var n=this.getCustomTag(t),a=this._pickListProp[n],s=t.parent.NXQuizContent,o=void 0;for(var r in a.page_type3_ans)""!==r&&-1!=(o=a.page_type3_ans[r].gainans.indexOf(i.id))&&(a.page_type3_ans[r].gainans.splice(o,1),this.fixedLocTouchZone(t,r))}},{key:"calcType3Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=!0;for(var s in n.page_type3_ans)if(""!==s&&(n.page_type3_ans[s].gainans.length<n.page_type3_ans[s].gainmax&&(a=!1),!1===a))break;return a}},{key:"calcType3Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=!0;for(var s in n.page_type3_ans)if(""!==s){n.page_type3_ans[s].gainans.length<n.page_type3_ans[s].gainmax&&(a=!1);for(var o=n.page_type3_ans[s].gainans.length,r=0;r<o;r++)-1===n.page_active_right[s].indexOf(n.page_type3_ans[s].gainans[r])&&(a=!1);if(!1===a)break}return a}},{key:"fixedLocTouchZone",value:function e(t,i){var n=this.getCustomTag(t),a=this._pickListProp[n],s=this._pickListProp[n].unit_instance[this._quizPageIndex],o;if("ALL"===a.page_type3_ans[i].passType&&0!==a.page_type3_ans[i].gainans.length){var r=[];this.calcSpaceRect(a.page_type3_ans[i].gainans.length,r),this.flexZoneTouch(t,s[i],a.page_type3_ans[i].gainans,r)}}},{key:"calcSpaceRect",value:function e(t,i){var n=t,a=1;if((i.length=0)!==t){for(i[i.length]={wSize:t,hSize:1};2<n;)t<=(n-1)*a?n--:(n--,a++),i[i.length]={wSize:n,hSize:a};1<t&&(i[i.length]={wSize:1,hSize:t})}}},{key:"flexZoneTouch",value:function e(t,i,n,a){var s=this.getCustomTag(t),o=this._pickListProp[s],r=i.nominalBounds.width*i.scaleX/i.nominalBounds.height*i.scaleY,u=Number.MIN_VALUE,l=0,d,h=a.length;if(0!==h){var p=o.unit_instance[this._quizPageIndex][n[0]],c=o.quiz_unit_data[this._quizPageIndex][p.id];p.scaleX=c[0].scaleX,p.scaleY=c[0].scaleY;for(var _=i.nominalBounds.width*i.scaleX,g=i.nominalBounds.height*i.scaleY,f=Number(p.nominalBounds.width)*c[0].scaleX,v=Number(p.nominalBounds.height)*c[0].scaleY,m=0;m<h;m++){var b=_/a[m].wSize/f,y=g/a[m].hSize/v;y<(d=b)&&(d=y),u<d&&(l=m,u=d)}var S=_/(a[l].wSize*f),P=g/(a[l].hSize*v);P<S&&(S=P),h=n.length;for(var M=0;M<h;M++)p=o.unit_instance[this._quizPageIndex][n[M]],c=o.quiz_unit_data[this._quizPageIndex][p.id],p.scaleX=S*p.scale0X,p.scaleY=S*p.scale0Y,f=Number(p.nominalBounds.width)*S*p.scale0X,v=Number(p.nominalBounds.height)*S*p.scale0Y;var k=1,O=1,B=a[l].wSize,x,C=(_-f*B)/2-_/2,T=(g-v*a[l].hSize)/2-g/2;h=n.length;for(var w=0;w<h;w++)p=o.unit_instance[this._quizPageIndex][n[w]],c=o.quiz_unit_data[this._quizPageIndex][p.id],f=Number(p.nominalBounds.width)*S*p.scale0X,v=Number(p.nominalBounds.height)*S*p.scale0Y,p.x=Number(i.x)+f/2+f*(k-1)+C,p.y=Number(i.y)+v/2+v*(O-1)+T,B<++k&&(k=1,O++)}}},{key:"checkCollision",value:function e(t,i){return!(!t.visible||!i.visible||(t.setBounds(Number(t.nominalBounds.x)*t.scaleX+Number(t.x),Number(t.nominalBounds.y)*t.scaleY+Number(t.y),Number(t.nominalBounds.width)*t.scaleX,Number(t.nominalBounds.height)*t.scaleY),i.setBounds(Number(i.nominalBounds.x)*i.scaleX+Number(i.x),Number(i.nominalBounds.y)*i.scaleY+Number(i.y),Number(i.nominalBounds.width)*i.scaleX,Number(i.nominalBounds.height)*i.scaleY),t=t.getBounds(),i=i.getBounds(),t.y+t.height<i.y||t.y>i.y+i.height||t.x+t.width<i.x||t.x>i.x+i.width))}},{key:"getDistanceFromTwoPoint",value:function e(t,i,n,a){return Math.sqrt(Math.pow(t-n,2)+Math.pow(i-a,2))}},{key:"injectQuizType5",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];if(c.page_type="type5",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(this.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type5_ans={},c.page_active_right={},0!=d.activeRightSets.length)for(var g=c.page_active_mcp.length,f=0;f<g;f++)void 0===d.activeRightSets[f]?c.page_active_right[c.page_active_mcp[f]]=[]:(c.page_active_right[c.page_active_mcp[f]]=d.activeRightSets[f].rawdata.split(","),c.page_active_right[c.page_active_mcp[f]]=this.checkArrayData(c.page_active_right[c.page_active_mcp[f]])),c.page_type5_ans[c.page_active_mcp[f]]={};for(var v in c.page_base)if(""!==v){var m=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[v]][0].sound];q.default.notNull(m)&&(_[c.page_base[v]].cursor="pointer",_[c.page_base[v]].rawdata=m,_[c.page_base[v]].baseTarget=t,_[c.page_base[v]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}var b=u.type5RadiusScale?u.type5RadiusScale*this._type5RadiusBaseSize:this._type5RadiusBaseSize,y=u.type5LineScale?u.type5LineScale*this._type5LineBaseSize:this._type5LineBaseSize,S=2*b;for(var P in c.page_active_mc)if(""!==P){var M=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[P]][0].sound];_[c.page_active_mc[P]].cursor="pointer",_[c.page_active_mc[P]].rawdata=_[c.page_active_mc[P]].rawdata?_[c.page_active_mc[P]].rawdata:M,_[c.page_active_mc[P]].baseTarget=t;var k=void 0;q.default.isNull(_[c.page_active_mc[P]].shape)?(k=new n.Shape,_[c.page_active_mc[P]].addChild(k),_[c.page_active_mc[P]].shape=k):k=_[c.page_active_mc[P]].shape,k.graphics.clear(),k.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,b);var O=_[c.page_active_mc[P]];O.bitmapCache&&O.uncache(),O.cache(O.getBounds().x-b,O.getBounds().y-b,O.getBounds().width+S,O.getBounds().height+S,2),_[c.page_active_mc[P]].addEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_[c.page_active_mc[P]].addEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_[c.page_active_mc[P]].addEventListener("pressup",this.handleQuizUnitLineMoveEndBind)}for(var B in c.page_active_mcp)if(""!==B){switch(c.page_type5_ans[c.page_active_mcp[B]].passType=c.quiz_unit_data[l][c.page_active_mcp[B]][0].passType,c.page_type5_ans[c.page_active_mcp[B]].gainans=[],c.page_type5_ans[c.page_active_mcp[B]].gainright=0,c.page_type5_ans[c.page_active_mcp[B]].gainmax=0,c.page_type5_ans[c.page_active_mcp[B]].passType){case"ONE":case"ONEOF":c.page_type5_ans[c.page_active_mcp[B]].gainmax=1;break;case"ALL":c.page_type5_ans[c.page_active_mcp[B]].gainmax=c.page_active_right[c.page_active_mcp[B]].length}var x=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[B]][0].sound];_[c.page_active_mcp[B]].cursor="pointer",_[c.page_active_mcp[B]].rawdata=_[c.page_active_mcp[B]].rawdata?_[c.page_active_mcp[B]].rawdata:x,_[c.page_active_mcp[B]].baseTarget=t;var C=void 0;q.default.isNull(_[c.page_active_mcp[B]].shape)?(C=new n.Shape,_[c.page_active_mcp[B]].addChild(C),_[c.page_active_mcp[B]].shape=C):C=_[c.page_active_mcp[B]].shape,C.graphics.clear(),C.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,b);var T=_[c.page_active_mcp[B]];T.bitmapCache&&T.uncache(),T.cache(T.getBounds().x-b,T.getBounds().y-b,T.getBounds().width+S,T.getBounds().height+S,2),_[c.page_active_mcp[B]].addEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_[c.page_active_mcp[B]].addEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_[c.page_active_mcp[B]].addEventListener("pressup",this.handleQuizUnitLineMoveEndBind)}}},{key:"handleQuizUnitLineMoveStart",value:function e(t){var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent,l=s.parent.GameQuizPanel,d=l.type5RadiusScale?l.type5RadiusScale*this._type5RadiusBaseSize:this._type5RadiusBaseSize,h=l.type5LineScale?l.type5LineScale*this._type5LineBaseSize:this._type5LineBaseSize,p=2*d;if(!r.page_is_check_ans){var c=t.currentTarget;q.default.notNull(c.rawdata)&&this.callQuestionSoundClick(c),r.line_pick_1=c,r.line_pick_2=null,c.shape.graphics.clear(),c.shape.graphics.beginStroke("green").beginFill("green").drawCircle(0,0,d),c.bitmapCache&&c.updateCache();var _=u.globalToLocal(t.stageX,t.stageY);r.line_point_1=new n.Point(c.x,c.y),r.line_point_2=_,this.drawTempLine(s,r.line_point_1,r.line_point_2)}}},{key:"handleQuizUnitLineMoveMove",value:function e(t){var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent,l=u.globalToLocal(t.stageX,t.stageY);r.line_point_2=l,this.drawTempLine(s,r.line_point_1,r.line_point_2),r.line_pick_2=this.changeLineHitColor(s,u.getObjectsUnderPoint(l.x,l.y),r.line_pick_1.id)}},{key:"handleQuizUnitLineMoveEnd",value:function e(t){var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent,l=this._parentListShapeTemp[o],d=this._parentListShapeBase[o],h=s.parent.GameQuizPanel,p=t.currentTarget,c=u.globalToLocal(t.stageX,t.stageY);l.graphics.clear(),l.bitmapCache?l.updateCache():l.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2),this.refreshType5LineStatus(s,r.line_pick_1,r.line_pick_2),this.checkType5Pass(h,r.line_pick_2)}},{key:"refreshType5LineStatus",value:function e(t,i,n){var a=this.getCustomTag(t),s=this._pickListProp[a],o=this._pickListProp[a].unit_instance[this._quizPageIndex],r=this._parentListShapeTemp[a],u=this._parentListShapeBase[a],l=t.parent.GameQuizPanel,d=l.type5RadiusScale?l.type5RadiusScale*this._type5RadiusBaseSize:this._type5RadiusBaseSize,h=l.type5LineScale?l.type5LineScale*this._type5LineBaseSize:this._type5LineBaseSize,p=2*d,c=void 0,_=void 0;for(c in null!=n&&(c=i.id,_=n.id,-1!=s.page_active_mc.indexOf(c)?-1!=s.page_active_mcp.indexOf(_)&&o[c].group===o[_].group&&s.page_type5_ans[_].gainans.push(c):-1!=s.page_active_mcp.indexOf(c)&&-1!=s.page_active_mc.indexOf(_)&&o[c].group===o[_].group&&s.page_type5_ans[c].gainans.push(_)),s.page_active_mc)""!==c&&(o[c=s.page_active_mc[c]].shape.graphics.clear(),o[c].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,d),o[c].bitmapCache&&o[c].updateCache());for(c in s.page_active_mcp)""!==c&&(o[c=s.page_active_mcp[c]].shape.graphics.clear(),o[c].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,d),o[c].bitmapCache&&o[c].updateCache());r.graphics.clear(),r.bitmapCache?r.updateCache():r.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2)}},{key:"drawTempLine",value:function e(t,i,n){var a=this.getCustomTag(t),s=this._pickListProp[a],o=this._pickListProp[a].unit_instance[this._quizPageIndex],r=this._parentListShapeTemp[a],u=this._parentListShapeBase[a],l=t.parent.GameQuizPanel,d=l.type5RadiusScale?l.type5RadiusScale*this._type5RadiusBaseSize:this._type5RadiusBaseSize,h=l.type5LineScale?l.type5LineScale*this._type5LineBaseSize:this._type5LineBaseSize,p=2*d;r.graphics.clear(),r.graphics.setStrokeDash([20,10],0).setStrokeStyle(h).beginStroke("green").moveTo(i.x,i.y).lineTo(n.x,n.y),r.bitmapCache?r.updateCache():r.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2)}},{key:"changeLineHitColor",value:function e(t,i,n){var a=this.getCustomTag(t),s=this._pickListProp[a],o=this._pickListProp[a].unit_instance[this._quizPageIndex],r=this._parentListShapeTemp[a],u=this._parentListShapeBase[a],l=t.parent.GameQuizPanel,d=l.type5RadiusScale?l.type5RadiusScale*this._type5RadiusBaseSize:this._type5RadiusBaseSize,h=l.type5LineScale?l.type5LineScale*this._type5LineBaseSize:this._type5LineBaseSize,p=2*d,c=null;for(var _ in s.page_active_mc)if(""!==_){if(n===(_=s.page_active_mc[_]))continue;o[_].shape.graphics.clear(),o[_].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,d),o[_].bitmapCache&&o[_].updateCache()}for(var g in s.page_active_mcp)if(""!==g){if(n===(g=s.page_active_mcp[g]))continue;o[g].shape.graphics.clear(),o[g].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,d),o[g].bitmapCache&&o[g].updateCache()}for(var f in i)if(""!==f){if(n===(f=i[f].parent.id)||void 0===f)continue;-1==s.page_active_mc.indexOf(f)&&-1==s.page_active_mcp.indexOf(f)||((c=o[f]).shape.graphics.clear(),c.shape.graphics.beginStroke("green").beginFill("green").drawCircle(0,0,d),c.bitmapCache&&c.updateCache())}return c}},{key:"calcType5Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type5_ans)if(""!==o&&(n.page_type5_ans[o].gainans.length<n.page_type5_ans[o].gainmax&&(s=!1),!1===s))break;return s}},{key:"checkType5Pass",value:function e(t,i){var n=this.getCustomTag(t),a=this._pickListProp[n],s=this._pickListProp[n].unit_instance[this._quizPageIndex],o=this._parentListShapeTemp[n],r=this._parentListShapeBase[n],u=t.type5RadiusScale?t.type5RadiusScale*this._type5RadiusBaseSize:this._type5RadiusBaseSize,l=t.type5LineScale?t.type5LineScale*this._type5LineBaseSize:this._type5LineBaseSize,d=2*u,h=!0,p=!0,c={},_=!1,g=!1;for(var f in a.page_active_right)if(""!==f)for(var v=a.page_active_right[f].length,m=0;m<v;m++)c[a.page_active_right[f][m]]=c[a.page_active_right[f][m]]||[],c[a.page_active_right[f][m]].push(f),c[a.page_active_right[f][m]]=c[a.page_active_right[f][m]].filter(function(e,t,i){return i.indexOf(e)===t});var b=null;for(var y in a.page_type5_ans)if(""!==y){p=h=!0,a.page_type5_ans[y].gainans.length<a.page_type5_ans[y].gainmax&&(h=!1);for(var S=a.page_type5_ans[y].gainans.length,P=0;P<S;P++)-1===a.page_active_right[y].indexOf(a.page_type5_ans[y].gainans[P])&&(p=!1);if(h&&p&&s[y].visible){s[b=y].visible=!1;for(var M=a.page_active_right[y].length,k=0;k<M;k++){for(var O=c[a.page_active_right[y][k]].length,B=!1,x=0;x<O;x++)s[c[a.page_active_right[y][k]][x]].visible&&(B=!0);s[a.page_active_right[y][k]].visible=B}r.graphics.clear(),r.bitmapCache?r.updateCache():r.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2),_=!0}p?_=!0:(a.page_type5_ans[y].gainans.length=0,r.graphics.clear(),r.bitmapCache?r.updateCache():r.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2),g=!0)}for(var C in r.graphics.clear(),a.page_type5_ans)if(""!==C)for(var T in a.page_type5_ans[C].gainans)""!==T&&s[C].visible&&r.graphics.setStrokeStyle(l).beginStroke("red").moveTo(s[C].x,s[C].y).lineTo(s[a.page_type5_ans[C].gainans[T]].x,s[a.page_type5_ans[C].gainans[T]].y);r.bitmapCache?r.updateCache():r.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2);var w=this.calcType5Pass(t);if(i&&(t.callNextFunc=w?this.checkAnsStatusBind:null,g?this.playEchoSound(t,"WRONG"):_&&this.playEchoSound(t,"RIGHT")),b){this._parent.createjs.Tween.get(s[b]).to({alpha:1,visible:!0},0).to({alpha:0},300).to({alpha:1},300).to({alpha:0},300).to({alpha:1,visible:!1},0);for(var L=a.page_active_right[b].length,I=0;I<L;I++)for(var N=c[a.page_active_right[b][I]].length,j=0;j<N;j++)s[a.page_active_right[b][I]].visible||this._parent.createjs.Tween.get(s[a.page_active_right[b][I]]).to({alpha:1,visible:!0},0).to({alpha:0},300).to({alpha:1},300).to({alpha:0},300).to({alpha:1,visible:!1},0)}return w}},{key:"calcType5Pass",value:function e(t){q.default.trace(t);var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type5_ans)if(""!==o){n.page_type5_ans[o].gainans.length<n.page_type5_ans[o].gainmax&&(s=!1);for(var r=n.page_type5_ans[o].gainans.length,u=0;u<r;u++)-1===n.page_active_right[o].indexOf(n.page_type5_ans[o].gainans[u])&&(s=!1);if(!1===s)break}return s}},{key:"checkAnsStatus",value:function e(t,i){var n=!(1<arguments.length&&void 0!==i)||i,a=this.getCustomTag(t);n&&(this._parent.sendCommand("Game","Game_Finish"),t.parent.mouseEnabled=!1)}},{key:"clearType6Puzzle",value:function e(t,i){var n=this.getCustomTag(t),a=this._parent.createjs,s=this._parent.lib,o=this._pickListImages[n],r=t.parent.NXQuizContent,u=t.parent.NXQuizToolBar,l=t,d=this._pickListQuestionSeq[n][this._pickListQuestionSeqIndex[n]],h=this._pickListProp[n].quiz_page_data[d],p=this._parentListShapeTemp[n],c=this._parentListShapeBase[n],_=this._pickListProp[n],g=this._pickListProp[n].unit_instance[d];if(i){for(var f in _.puzzle_unit_instance)""!==f&&(r.removeChild(_.puzzle_unit_instance[f]),_.puzzle_unit_instance[f].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType6Bind),_.puzzle_unit_instance[f].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType6Bind,q.default.supportPassive()),_.puzzle_unit_instance[f].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType6Bind),_.puzzle_unit_instance[f].removeAllChildren(),_.puzzle_unit_instance[f].bmp=null);for(var v in _.puzzle_unit_instance)""!==v&&(r.removeChild(_.puzzle_alpha_instance[v]),_.puzzle_alpha_instance[v].removeAllChildren(),_.puzzle_alpha_instance[v].shape.graphics.clear(),_.puzzle_alpha_instance[v].shape=null);_.puzzle_unit_instance={},_.puzzle_alpha_instance={}}else for(var m in _.puzzle_unit_instance)""!==m&&(_.puzzle_unit_instance[m].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType6Bind),_.puzzle_unit_instance[m].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType6Bind,q.default.supportPassive()),_.puzzle_unit_instance[m].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType6Bind))}},{key:"injectQuizType6",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];this.clearType6Puzzle(t,!0);var g=void 0;for(var f in c.page_type="type6",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type6_ans={},c.page_active_right={},c.page_base)if(""!==f){var v=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[f]][0].sound];q.default.notNull(v)&&(_[c.page_base[f]].cursor="pointer",_[c.page_base[f]].rawdata=v,_[c.page_base[f]].baseTarget=t,_[c.page_base[f]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var m in c.page_active_mc)if(""!==m){_[c.page_active_mc[m]].visible=!1;for(var b=(g=c.quiz_unit_data[l][c.page_active_mc[m]])[0].passType.split(","),y=Number(b[1]),S=Number(b[2]),P=_[c.page_active_mc[m]].nominalBounds.width/Number(b[1]),M=_[c.page_active_mc[m]].nominalBounds.width/Number(b[2]),k=0,O=0,B=0;B<y;B++)for(var x=0;x<S;x++){var C=new n.MovieClip,T=new n.Bitmap(s[g[0].id]);T.sourceRect=new n.Rectangle(x*P,B*M,P,M),T.setTransform(-P/2,-M/2),C.timeline.addTween(n.Tween.get(T).wait(1).to({visible:!1},0).wait(1)),o.addChild(C),C.cursor="pointer",C.rawdata=null,C.baseTarget=t,C.addEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType6Bind),C.addEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType6Bind,q.default.supportPassive()),C.addEventListener("pressup",this.handleQuizUnitTouchMoveEndByType6Bind),C.setTransform(Number(b[3+k]),Number(b[4+k]),g[0].scaleX,g[0].scaleY),C.gotoAndStop(0),C.nominalBounds=new n.Rectangle(-P/2,-P/2,P,M),C.sound="",C.orgX=Number(b[3+k]),C.orgY=Number(b[4+k]),C.id=c.page_active_mc[m]+"_"+O,C.bmp=T,c.puzzle_unit_instance[c.page_active_mc[m]+"_"+O]=C,O++,k+=2}O=k=0;for(var w=Number(g[0].x)-P/2*g[0].scaleX,L=Number(g[0].y)-M/2*g[0].scaleY,I=P*g[0].scaleX,N=M*g[0].scaleY,j=0;j<y;j++)for(var A=0;A<S;A++){var E=new n.MovieClip,G=new n.Shape;G.graphics.clear(),G.graphics.beginFill("#ffffff").drawRect(0,0,P,M),G.setTransform(-P/2,-M/2),G.alpha=.01,E.timeline.addTween(n.Tween.get(G).wait(1).to({visible:!1},0).wait(1)),o.addChild(E),E.setTransform(w+A*I,L+j*N,g[0].scaleX,g[0].scaleY),E.gotoAndStop(0),E.nominalBounds=new n.Rectangle(-P/2,-P/2,P,M),E.sound="",E.orgX=w+A*I,E.orgY=L+j*N,E.id=c.page_active_mc[m]+"_"+O,E.shape=G,c.puzzle_alpha_instance[c.page_active_mc[m]+"_"+O]=E,c.page_type6_ans[c.page_active_mc[m]+"_"+O]="",O++,k+=2}}}},{key:"handleQuizUnitTouchMoveStartByType6",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent;if(!r.page_is_check_ans){var l=t.currentTarget;q.default.notNull(l.rawdata)&&this.callQuestionSoundClick(l),this.clearTouchPickerType6(s,l),u.setChildIndex(l,u.numChildren-1);var d=u.globalToLocal(t.stageX,t.stageY);l.offset={x:l.x-d.x,y:l.y-d.y}}}},{key:"handleQuizUnitTouchMoveMoveByType6",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u,l=s.parent.NXQuizContent.globalToLocal(t.stageX,t.stageY),d=t.currentTarget;d.x=l.x+d.offset.x,d.y=l.y+d.offset.y}},{key:"handleQuizUnitTouchMoveEndByType6",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent,l=t.currentTarget,d=u.globalToLocal(t.stageX,t.stageY),h="",p=Number.MAX_VALUE;for(var c in r.puzzle_alpha_instance)if(""!==c&&this.checkCollision(l,r.puzzle_alpha_instance[c])){var _=this.getDistanceFromTwoPoint(l.x,l.y,r.puzzle_alpha_instance[c].x,r.puzzle_alpha_instance[c].y);_<p&&""===r.page_type6_ans[c]&&(p=_,h=c)}""!==h?(r.page_type6_ans[h]=l.id,l.x=r.puzzle_alpha_instance[h].x,l.y=r.puzzle_alpha_instance[h].y):(l.x=l.orgX,l.y=l.orgY)}},{key:"clearTouchPickerType6",value:function e(t,i){var n=this.getCustomTag(t),a=this._pickListProp[n],s=this._pickListProp[n].unit_instance[this._quizPageIndex];for(var o in a.page_type6_ans)a.page_type6_ans[o]===i.id&&(a.page_type6_ans[o]="")}},{key:"calcType6Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type6_ans)if(""!==o&&(""===n.page_type6_ans[o]&&(s=!1),!1===s))break;return s}},{key:"calcType6Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type6_ans)if(""!==o&&(n.page_type6_ans[o]!=o&&(s=!1),!1===s))break;return s}},{key:"injectQuizType7",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];if(c.page_type="type7",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type7_ans={},c.page_active_right={},0!=d.activeRightSets.length)for(var g=c.page_active_mcp.length,f=0;f<g;f++)for(var v in void 0===d.activeRightSets[f]?c.page_active_right[c.page_active_mcp[f]]=[]:(c.page_active_right[c.page_active_mcp[f]]=d.activeRightSets[f].rawdata.split(","),c.page_active_right[c.page_active_mcp[f]]=this.checkArrayData(c.page_active_right[c.page_active_mcp[f]])),c.page_type7_ans[c.page_active_mcp[f]]={},c.page_active_right[c.page_active_mcp[f]])"KEYBOARDCLASS"===c.unit_auto_type[this._quizPageIndex][c.page_active_right[c.page_active_mcp[f]][v]]&&(c.unit_instance[l][c.page_active_right[c.page_active_mcp[f]][v]].relTag=c.page_active_mcp[f],c.unit_instance[l][c.page_active_right[c.page_active_mcp[f]][v]].relFunc=this.handleType7KeyboardBind,c.unit_instance[l][c.page_active_right[c.page_active_mcp[f]][v]].baseTarget=t);for(var m in c.page_base)if(""!==m){var b=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[m]][0].sound];q.default.notNull(b)&&(_[c.page_base[m]].cursor="pointer",_[c.page_base[m]].rawdata=b,_[c.page_base[m]].baseTarget=t,_[c.page_base[m]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var y in c.page_active_mc)if(""!==y){var S=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[y]][0].sound];_[c.page_active_mc[y]].cursor="pointer",_[c.page_active_mc[y]].rawdata=_[c.page_active_mc[y]].rawdata?_[c.page_active_mc[y]].rawdata:S,_[c.page_active_mc[y]].baseTarget=t,_[c.page_active_mc[y]].visible=!0,"KEYBOARDCLASS"!==c.unit_auto_type[this._quizPageIndex][c.page_active_mc[y]]?(_[c.page_active_mc[y]].addEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType7Bind),_[c.page_active_mc[y]].addEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType7Bind,q.default.supportPassive()),_[c.page_active_mc[y]].addEventListener("pressup",this.handleQuizUnitTouchMoveEndByType7Bind)):_[c.page_active_mc[y]].initRef(this._parent.stage.isWebGL)}for(var P in c.page_active_mcp)if(""!==P){c.page_type7_ans[c.page_active_mcp[P]].passType=c.quiz_unit_data[l][c.page_active_mcp[P]][0].passType,c.page_type7_ans[c.page_active_mcp[P]].gainans=[],c.page_type7_ans[c.page_active_mcp[P]].gainright="",c.page_type7_ans[c.page_active_mcp[P]].ans=_[c.page_active_mcp[P]].optText,_[c.page_active_mcp[P]].text.text="",this._parent.stage.isWebGL&&_[c.page_active_mcp[P]].updateCache();var M=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[P]][0].sound];q.default.notNull(M)&&(_[c.page_active_mcp[P]].cursor="pointer",_[c.page_active_mcp[P]].rawdata=M,_[c.page_active_mcp[P]].baseTarget=t,_[c.page_active_mcp[P]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}}},{key:"handleType7Keyboard",value:function e(t,i,n){this.displayType7TextByKeyBoard(t,i,n)}},{key:"handleQuizUnitTouchMoveStartByType7",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent;if(!r.page_is_check_ans){var l=t.currentTarget;q.default.notNull(l.rawdata)&&this.callQuestionSoundClick(l),u.setChildIndex(l,u.numChildren-1);var d=u.globalToLocal(t.stageX,t.stageY);l.offset={x:l.x-d.x,y:l.y-d.y}}}},{key:"handleQuizUnitTouchMoveMoveByType7",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u,l=s.parent.NXQuizContent.globalToLocal(t.stageX,t.stageY),d=t.currentTarget;void 0===d.nominalBounds&&(d=t.currentTarget.parent),d.x=l.x+d.offset.x,d.y=l.y+d.offset.y}},{key:"handleQuizUnitTouchMoveEndByType7",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.createjs,a=this._parent.getInstanceMirror(i),s=i.baseTarget,o=this.getCustomTag(s),r=this._pickListProp[o],u=s.parent.NXQuizContent,l=this._pickListProp[o].unit_instance[this._quizPageIndex],d=t.currentTarget,h=u.globalToLocal(t.stageX,t.stageY),p=void 0,c=-1,_="";p=Number.MAX_VALUE;for(var g=r.page_active_mcp.length,f=0;f<g;f++)if(-1!=r.page_active_right[r.page_active_mcp[f]].indexOf(d.id)&&this.checkCollision(d,l[r.page_active_mcp[f]])){var v=this.getDistanceFromTwoPoint(d.x,d.y,l[r.page_active_mcp[f]].x,l[r.page_active_mcp[f]].y);v<p&&(p=v,c=f,_=r.page_active_mcp[f])}-1!=c&&(r.page_type7_ans[_].gainans.push(d.id),this.displayType7Text(s,_),"ONE"===d.passType&&(d.visible=!1)),d.x=r.quiz_unit_data[this._quizPageIndex][d.id][0].x,d.y=r.quiz_unit_data[this._quizPageIndex][d.id][0].y}},{key:"displayType7TextByKeyBoard",value:function e(t,i,n){var a=this.getCustomTag(t),s=this._pickListProp[a],o=this._pickListProp[a].unit_instance[this._quizPageIndex],r=s.page_type7_ans[n].gainans,u="";for(var l in"back"===i?0<r.length&&(r.length=r.length-1):r.push(i),r)""!==l&&(u+=r[l]);s.page_type7_ans[n].gainright=u,o[n].text.text=s.page_type7_ans[n].gainright.trim(),this._parent.stage.isWebGL&&o[n].updateCache()}},{key:"displayType7Text",value:function e(t,i){var n=this.getCustomTag(t),a=this._pickListProp[n],s=this._pickListProp[n].unit_instance[this._quizPageIndex],o=void 0,r="",u="",l=a.page_type7_ans[i].gainans;for(var d in l)if(""!==d){var h=s[l[d]],p=0===d?h:s[l[d-1]];if("false"!==h.chinaCode||0!==Number(d)&&","!==h.optText&&"."!==h.optText&&";"!==h.optText&&"!"!==p.optText&&"?"!==p.optText){if(","===p.optText||"."===p.optText||";"===p.optText||"!"===p.optText||"?"===p.optText)for(var c in r+=" ",o=h.optText.split(""))""!==c&&(0===Number(c)&&(o[c]=o[c].toUpperCase()),r+=o[c]);else r+=" "+h.optText;u+=" "+h.optText}else for(var _ in o=h.optText.split(""))""!==_&&(u+=o[_],0===Number(_)&&(o[_]=o[_].toUpperCase()),r+=o[_])}s[i].text.text=r.trim(),this._parent.stage.isWebGL&&s[i].updateCache(),a.page_type7_ans[i].gainright=u.trim()}},{key:"calcType7Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type7_ans)if(""!==i&&(n.page_type7_ans[o].ans.split("").length>n.page_type7_ans[o].gainright.split("").length&&(s=!1),!1===s))break;return s}},{key:"calcType7Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],a=this._pickListProp[i].unit_instance[this._quizPageIndex],s=!0;for(var o in n.page_type7_ans)if(""!==o&&(n.page_type7_ans[o].ans.toUpperCase()!=n.page_type7_ans[o].gainright.toUpperCase()&&(s=!1),!1===s))break;return s}},{key:"checkTouchIsQuizAns",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:"",a=this.getCustomTag(t),s=this._parent.createjs,o=this._parent.lib,r=this._pickListImages[a],u=t.parent.NXQuizContent,l=t.parent.NXQuizToolBar,d=t,h=this._pickListQuestionSeq[a][this._pickListQuestionSeqIndex[a]],p=this._pickListProp[a].quiz_page_data[h],c=this._parentListShapeTemp[a],_=this._parentListShapeBase[a],g=this._pickListProp[a],f=this._pickListProp[a].unit_instance[h];switch(g.page_type){case"type2":""===n&&!q.default.isNull(n)||g.page_type2_ans.push(n),g.page_type2_ans=g.page_type2_ans.filter(q.default.getArrayUnique);var v=0;for(var m in g.page_type2_ans)-1!=g.page_active_right.indexOf(g.page_type2_ans[m])&&v++;""===n&&(v===g.page_active_right.length&&g.page_active_right.length===g.page_type2_ans.length?this.checkAnsIsRight(t):this.checkAnsIsWrong(t));break;case"type3":this.calcType3Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t);break;case"type5":this.calcType5Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t);break;case"type6":this.calcType6Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t);break;case"type7":this.calcType7Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t)}}},{key:"clearQuizAnsStatus",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];h.graphics.clear(),p.graphics.clear(),h.bitmapCache&&h.updateCache(),p.bitmapCache&&p.updateCache(),this.clearContent(t,!0)}},{key:"resetQuizAnsStatus",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];h.graphics.clear(),p.graphics.clear(),h.bitmapCache&&h.updateCache(),p.bitmapCache&&p.updateCache(),this.clearContent(t,!0),this.stepQuizProcess(t,l)}},{key:"clearContent",value:function e(t,i){this._parent.stop(null,!0);var n=this.getCustomTag(t),a=this._parent.createjs,s=this._parent.lib,o=this._pickListImages[n],r=t.parent.NXQuizContent,u=t.parent.NXQuizToolBar,l=t,d=this._pickListQuestionSeq[n][this._pickListQuestionSeqIndex[n]],h=this._pickListProp[n].quiz_page_data[d],p=this._parentListShapeTemp[n],c=this._parentListShapeBase[n],_=this._pickListProp[n],g=this._pickListProp[n].unit_instance[d],f=t.parent.mcRight,v=t.parent.mcWrong;for(var m in f.visible=!1,v.visible=!1,f.gotoAndStop(0),v.gotoAndStop(0),_.page_base)""!=m&&(_.unit_instance[d][_.page_base[m]].removeEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind),_.unit_instance[d][_.page_base[m]].cursor="null");for(var b in _.page_active_mc)""!=b&&(_.unit_instance[d][_.page_active_mc[b]].removeEventListener("click",this.handleQuizUnitTouchIsCheckBind),_.unit_instance[d][_.page_active_mc[b]].cursor="null",_.unit_instance[d][_.page_active_mc[b]].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType3Bind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType3Bind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType3Bind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressup",this.handleQuizUnitLineMoveEndBind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType7Bind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType7Bind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType7Bind),_.unit_instance[d][_.page_active_mc[b]].visible=!0,_.unit_instance[d][_.page_active_mc[b]].alpha=1,this._parent.createjs.Tween.hasActiveTweens(_.unit_instance[d][_.page_active_mc[b]])&&this._parent.createjs.Tween.removeTweens(_.unit_instance[d][_.page_active_mc[b]]));for(var y in _.page_active_mcp)""!=y&&(_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind),_.unit_instance[d][_.page_active_mcp[y]].cursor="null",_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("pressup",this.handleQuizUnitLineMoveEndBind),_.unit_instance[d][_.page_active_mcp[y]].visible=!0,_.unit_instance[d][_.page_active_mcp[y]].alpha=1,this._parent.createjs.Tween.hasActiveTweens(_.unit_instance[d][_.page_active_mcp[y]])&&this._parent.createjs.Tween.removeTweens(_.unit_instance[d][_.page_active_mcp[y]]));if(this.clearType6Puzzle(t,i),i){r._btn_sound.removeEventListener("click",this.handleQuestionSoundClickBind),r._btn_sound.cursor="null";var S=h.layout.rawdata.split(",");for(var P in S)S.hasOwnProperty(P)&&q.default.notNull(S[P])&&""!==S[P]&&(_.unit_instance[d][S[P]].gotoAndStop(0),r.removeChild(_.unit_instance[d][S[P]]));r._btn_sound.visible=!1}}},{key:"playEchoSound",value:function e(t,i){this._parent.stop(null,!0);var n=this._parent.getInstanceMirror(t),a=t.nominalBounds,s={x:t.x+a.x*t.scale,y:t.y+a.y*t.scale},o=t.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+t._replacePath+"sounds/":t._replacePath+"./sounds/";this._parent.soundObj={id:i,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:"Echo",target:t,target2:null};var l=this.checkCommandMode("Echo");q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"callAutoHintAnimate",value:function e(t){this._parent.stop(null,!0);var i=(this._runningAutoHint=t).nominalBounds,n={x:t.x+i.x*t.scale,y:t.y+i.y*t.scale},a=t.parent.localToGlobal(n.x,n.y),s=this._parent.exportRoot.globalToLocal(a.x,a.y),o=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:t.rawdata,path:o,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerResultAnimateSoundWatchBind,completeFunc:this.triggerAutoHintAnimateSoundCompleteBind,autoPlay:!0,locX:s.x,locY:s.y,excludeTags:null,command:"GameQuizPanel",target:t};var r=this.checkCommandMode("GameQuizPanel");q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerAutoHintAnimateSoundComplete",value:function e(t){var i=this._parent.soundObj.target;this._runningAutoHint=null;var n=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)),this.checkTouchIsQuizAns(i.baseTarget,i.id)}},{key:"checkAnsIsRight",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l],g=t.parent.mcRight,f=t.parent.mcWrong;this.clearContent(t,!1),g.visible=!0,this.callResultAnimate(g)}},{key:"checkAnsIsWrong",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[i],o=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l],g=t.parent.mcRight,f=t.parent.mcWrong;this.clearContent(t,!1),f.visible=!0,this.callResultAnimate(f)}},{key:"callResultAnimate",value:function e(t){this._parent.stop(null,!0);var i=t.nominalBounds,n={x:t.x+i.x*t.scale,y:t.y+i.y*t.scale},a=t.parent.localToGlobal(n.x,n.y),s=this._parent.exportRoot.globalToLocal(a.x,a.y),o=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:t.rawdata,path:o,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerResultAnimateSoundWatchBind,completeFunc:this.triggerResultAnimateSoundCompleteBind,autoPlay:!0,locX:s.x,locY:s.y,excludeTags:null,command:"GameQuizPanel",target:t};var r=this.checkCommandMode("GameQuizPanel");q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerResultAnimateSoundWatch",value:function e(t){if(q.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration,a=this._prevTime;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var s=this._parent.lib.properties.fps,o=Math.round(i/1e3*s),r=this._parent.soundObj.target;o<r.totalFrames&&r.gotoAndStop(o)}}},{key:"triggerResultAnimateSoundComplete",value:function e(t){var i;this._parent.soundObj.target.visible=!1;var n=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"handleQuizUnitTouchIsOnlySound",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);var i=t.currentTarget,n=i.baseTarget,a=this.getCustomTag(n),s;this._pickListProp[a].page_is_check_ans||q.default.notNull(i.rawdata)&&this.callQuestionSoundClick(i)}},{key:"callQuestionSoundClick",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);var i=this._parent.getInstanceMirror(t);this._parent.stop(null,!0);var n=t.nominalBounds,a={x:t.x+n.x*t.scale,y:t.y+n.y*t.scale},s=t.parent.localToGlobal(a.x,a.y),o=this._parent.exportRoot.globalToLocal(s.x,s.y),r=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"quiz/asset/":"./quiz/asset/";this._parent.soundObj={id:t.rawdata,path:r,loop:t.loopdata,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerQuestionSoundWatchBind,completeFunc:this.handleQuestionSoundCompleteBind,autoPlay:!0,locX:o.x,locY:o.y,excludeTags:null,command:"GameQuizPanel",target:t,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null};var u=this.checkCommandMode("GameQuizPanel");q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"handleQuestionSoundClick",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);var i=t.currentTarget,n=this._parent.getInstanceMirror(i);this._parent.stop(null,!0),i.gotoAndStop(1);var a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},o=i.parent.localToGlobal(s.x,s.y),r=this._parent.exportRoot.globalToLocal(o.x,o.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"quiz/asset/":"./quiz/asset/";this._parent.soundObj={id:i.rawdata,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerQuestionSoundWatchBind,completeFunc:this.handleQuestionSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:"GameQuizPanel",target:i,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null};var l=this.checkCommandMode("GameQuizPanel");q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(q.default.isNull(this._parent.soundObj)||q.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)q.default.notNull(i)&&i.stop();else switch(n){case"fileload":q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var a=this.checkCommandMode(this._parent.soundObj.command);"none"!==a&&this._parent.openSoundPlayBar(a,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){q.default.notNull(this._parent.soundChannel)}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.soundObj.target2,a=this._parent.getInstanceMirror(i);this.stop();var s=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===s||"normal-close"===s||"ex-normal-close"===s||"none"===s?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)),i.callNextFunc&&i.callNextFunc(i)}},{key:"triggerQuestionSoundWatch",value:function e(t){}},{key:"handleQuestionSoundComplete",value:function e(t){q.default.trace("SoundComplete");var i=this.checkCommandMode(this._parent.soundObj.command);this._parent.soundObj.target.gotoAndStop(0),"mini-close"===i||"normal-close"===i||"ex-normal-close"===i||"none"===i?(this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"generateArrayNumber",value:function e(t,i){if(i<t){var n=i;i=t,t=n}for(var a=[],s=t;s<i;s++)a.push(s);return a}},{key:"disableButtonHelper",value:function e(t){t._buttonHelper&&(t._buttonHelper.enabled=!1),t.mouseEnabled=!1,t.gotoAndStop(0),q.default.applyColorGrayFilter(this._parent.createjs,t,1)}},{key:"enableButtonHelper",value:function e(t){t._buttonHelper&&(t._buttonHelper.enabled=!0),t.mouseEnabled=!0,t.gotoAndStop(0),q.default.unapplyColorFilter(this._parent.createjs,t)}},{key:"checkArrayData",value:function e(t){return null!=t&&1===t.length&&""===t[0]&&(t.length=0),t}},{key:"triggerIntroMouseDown",value:function e(t){var i=t.currentTarget,n=i.parent,a=this.getCustomTag(n);"sequenceBtn"===i.name?(this._pickListQuestionSeq[a].sort(),this._pickListQuestionSeqIndex[a]=0):"randomBtn"===i.name&&(q.default.shuffleArray(this._pickListQuestionSeq[a]),this._pickListQuestionSeqIndex[a]=0),this.stepQuizProcess(n,this._pickListQuestionSeq[a][this._pickListQuestionSeqIndex[a]]);var s=n.parent.NXQuizToolBar,o=n,r;n.parent.NXQuizContent.visible=!0,o.visible=!1,this.refreshToolbar(n)}},{key:"triggerIntroMouseSwitch",value:function e(t){var i=t.currentTarget,n=i.parent,a=this.getCustomTag(n);this._pickListProp[a].autoSoundPlay?(this._pickListProp[a].autoSoundPlay=!1,i.gotoAndStop(0)):(this._pickListProp[a].autoSoundPlay=!0,i.gotoAndStop(2))}},{key:"triggerToolbarMouseDown",value:function e(t){var i=t.currentTarget,n=i.parentRef,a=this.getCustomTag(n),s=n.parent.NXQuizContent;switch(i.name){case"checkButton":null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null),this.checkTouchIsQuizAns(n);break;case"againBtn":this._runningAutoHint=null,this.resetQuizAnsStatus(n);break;case"backOne":var o;this._runningAutoHint=null,this.clearQuizAnsStatus(n),n.parent.NXQuizContent.visible=!1,n.visible=!0;break;case"prevBtn":this._runningAutoHint=null,this.clearQuizAnsStatus(n),this._pickListQuestionSeqIndex[a]--,this.stepQuizProcess(n,this._pickListQuestionSeq[a][this._pickListQuestionSeqIndex[a]]),this.refreshToolbar(n);break;case"nextBtn":this._runningAutoHint=null,this.clearQuizAnsStatus(n),this._pickListQuestionSeqIndex[a]++,this.stepQuizProcess(n,this._pickListQuestionSeq[a][this._pickListQuestionSeqIndex[a]]),this.refreshToolbar(n)}}},{key:"refreshToolbar",value:function e(t){var i=this.getCustomTag(t),n,a=t.parent.NXQuizToolBar,s=this._pickListQuestionSeqIndex[i],o=this._pickListQuestionSeq[i].length;a.mcToolType.pageShowMC.pageTxt.text=this.padLeft(s+1,2)+"/"+this.padLeft(o,2),this._parent.stage.isWebGL&&a.mcToolType.pageShowMC.pageTxt.updateCache(),this.enableButtonHelper(a.mcToolType.prevBtn),this.enableButtonHelper(a.mcToolType.nextBtn),0===s&&this.disableButtonHelper(a.mcToolType.prevBtn),o<=s+1&&this.disableButtonHelper(a.mcToolType.nextBtn)}},{key:"padLeft",value:function e(t,i){return(t=""+t).length>=i?t:new Array(i-t.length+1).join("0")+t}},{key:"padRight",value:function e(t,i){return(t=""+t).length>=i?t:t+new Array(i-t.length+1).join("0")}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._pickListLoader={},this._pickListXML={},this._pickListManifest={},this._pickListJsonManifest={},this._pickListImages={},this._pickListProp={},this._pickListQuestionSeq={},this._pickListQuestionSeqIndex={},this._pickListMP3Resource={},this._parentListShapeTemp={},this._parentListShapeBase={},this._pickListJsonSS={},this._pickListJsonSSImage={},this._seq=999,this._prevTime=-1,this._preloadManifestCount=0,this._preloadResourceCount=0,this._runningAutoHint=null,this._type5RadiusBaseSize=16,this._type5LineBaseSize=3}t.ModuleGameQuiz=h}],a.c=s,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return a.d(e,"a",e),e},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=59);function a(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var n,s});