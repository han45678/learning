!function e(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("SSDK",[],i):"object"==typeof exports?exports.SSDK=i():t.SSDK=i()}(window,function(){return a={},o.m=n=[function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1).default,o=n.trace,a=n.notNull,s=n.isNull,r=n.isTrue,u=i(21).default,l=u.prefixNumberStr,d=u.loadJSON,h=i(22).default.randomInt,p=i(23).default,c=p.getArrayUnique,_=p.checkArrayEquals,g=p.shuffleArray,f=p.sortByNameACS,v=p.sortByValueACS,m=i(24).default,b=m.playSoundCheckLoadRequest,y=m.playSound,S=m.playWebAudioSound,P=m.playWebAudioSound2,M=i(25).default.playWebVideo,O=i(26).default.collisionTest,B=i(27).default,k=B.applyMultiply,x=B.unapplyMultiply,C=B.applyColorFilter,w=B.applyColorGrayFilter,T=B.unapplyColorFilter,L=i(28).default,N=L.generateExtraCommand,I=L.sendExtraCommand,j=L.getHtmlhrefValue,A=L.supportPassive,E=L.createNewEvent,G=L.isIOS;t.default={trace:o,notNull:a,isNull:s,isTrue:r,prefixNumberStr:l,loadJSON:d,randomInt:h,getArrayUnique:c,checkArrayEquals:_,shuffleArray:g,sortByNameACS:f,sortByValueACS:v,playSoundCheckLoadRequest:b,playSound:y,playWebAudioSound:S,playWebAudioSound2:P,playWebVideo:M,collisionTest:O,applyMultiply:k,unapplyMultiply:x,applyColorFilter:C,applyColorGrayFilter:w,unapplyColorFilter:T,generateExtraCommand:N,sendExtraCommand:I,getHtmlhrefValue:j,supportPassive:A,createNewEvent:E,isIOS:G}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={trace:function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n]},notNull:function e(t){return null!=t},isNull:function e(t){return null==t},isTrue:function e(t){return"string"==typeof t&&"true"===t.toLowerCase()||("boolean"==typeof t?t:Boolean(t))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommonBookPage=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,O=i(15).ModuleOnAndOff,B=i(16).ModuleCalculator,k=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=(h(T,w=p),n(T,[{key:"init",value:function e(){a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.stop(n,o,!0)}},{key:"stop",value:function e(t,i,n){var o=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i,s=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(o=this.soundObj.excludeTags),r.default.isNull(o)&&(o=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(o=o.concat(this.videoObj.excludeTags)),-1===o.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!s&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!s&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleGoOutCommand&&-1===o.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===o.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===o.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===o.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===o.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===o.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===o.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===o.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===o.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===o.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===o.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===o.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===o.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleAnsZone&&-1===o.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===o.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===o.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),o&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),o&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var o=1<arguments.length&&void 0!==i?i:.2,a=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,o,a)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new O(this).init(),this._moduleCalculator=new B(this).init(),this._modulePureAnimate=new k(this).init(),this._moduleZoom=new x(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new O(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new B(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new k(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleZoom)?this._moduleZoom=new x(this).init(t):this._moduleZoom.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),T),w;function T(e,t,i,n){l(this,T);var o=d(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,e,t,i,n));return(o._this=o)._resetExclude=[],o}t.CommonBookPage=C},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasePage=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,g=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=i(29).SoundPlayerBar,l=i(30).VideoPlayerBar,d=(n(h,[{key:"openAlphabeticFix",value:function e(){this.textAlphabeticFixYScale=.77}},{key:"closeAlphabeticFix",value:function e(){this.textAlphabeticFixYScale=0}},{key:"setupBGListenZone",value:function e(t,i,n){var o=0<arguments.length&&void 0!==t?t:1,a=1<arguments.length&&void 0!==i?i:1,s=2<arguments.length&&void 0!==n?n:"mousedown";this.isInited||this.init(),g.default.notNull(this._bgShape)&&(this._bgShape.removeEventListener(this._bgListenZoneBehavior,this.triggerBGMousedownBind),this.exportRoot.contains(this._bgShape)&&this.exportRoot.removeChild(this._bgShape),this._bgShape.uncache(),this._bgShape.graphics.clear()),this._bgShape=new this.createjs.Shape,this._bgShape.graphics.beginFill("#000000").drawRect(0,0,o,a),this._bgShape.alpha=.01,this._bgShape.cache(0,0,o,a),this.exportRoot.addChildAt(this._bgShape,0),this._bgShape.addEventListener(s,this.triggerBGMousedownBind),this._bgListenZoneBehavior=s}},{key:"triggerBGMousedown",value:function e(t){this.sendCommand("BGMouseTrigger","BGMouseTrigger_"+this._bgListenZoneBehavior),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"init",value:function e(){this.isInited||(this._waitInited=!1,this.isInited=!0,this.initModules(),this.updatePageProps(),this.sendCommand("Inited","Inited",this),this._moduleDelayInit=!0,this._waitInited=!0)}},{key:"initByModule",value:function e(){this.initForModuleDelayCallback(),g.default.notNull(this.pageParam)&&(this.updatePageParam(JSON.stringify(this.pageParam)),this._waitInited=!0,0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()))}},{key:"initForModuleDelayCallback",value:function e(){this.isInited||(this._waitInited=!1,this.isInited=!0,this.initModules())}},{key:"loadContentByModule",value:function e(i,n){if(void 0!==i){this._moduleDelayInit&&(document.getElementById("_preload_div_").style.display="inline-block",document.getElementById("canvas").style.display="block");var o=this,t=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript";var s=[];for(var r in window.AdobeAn.compositions)g.default.notNull(r)&&""!==r&&s.push(r);a.onload=a.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState){a.onload=a.onreadystatechange=null;var e=!1;for(var t in window.AdobeAn.compositions)if(-1===s.indexOf(t)){e=!0,o.loadContentInstanceByModule(t,i,n);break}e||alert("載入頁面ID發現重覆:\n"+a.src)}},a.onerror=function(e){o._moduleDelayInit?document.getElementById("_preload_div_").style.display="none":(o.sendCommand("Inited","Inited",this),o._moduleDelayInit=!0,window.callDelayPageInitComplete&&window.callDelayPageInitComplete()),alert("找不到載入頁面:\n"+a.src)},a.src="../"+i.folder+"/"+i.folder+".js?"+Math.ceil(5e3*Math.random()),t.appendChild(a)}}},{key:"loadContentInstanceByModule",value:function e(t,i,n){var o=this;this.__loadinfo=i,this.__backInfo=n,this.contentComp=AdobeAn.getComposition(t),this.contentLib=this.contentComp.getLibrary(),this.contentLoader=new this.createjs.LoadQueue(!0,"../"+i.folder+"/","Anonymous"),this.contentLoader.addEventListener("fileload",function(e){o.handleContentByModuleLoad(e,o.contentComp)}),this.contentLoader.addEventListener("complete",function(e){o.handleContentByModuleComplete(e,o.contentComp)}),this.contentLoader.setMaxConnections(6),this.contentLoader.installPlugin(this.createjs.Sound);for(var a=this.contentLib.properties.manifest.length,s=[],r=0;r<a;r++)-1===this.contentLib.properties.manifest[r].src.indexOf(".mp3")&&s.push(this.contentLib.properties.manifest[r]);0!==s.length?this.contentLoader.loadManifest(s):this.handleMenuComplete({},this.contentComp)}},{key:"handleContentByModuleLoad",value:function e(t,i){var n=i.getImages();t&&"image"==t.item.type&&(n[t.item.id]=t.result)}},{key:"handleContentByModuleComplete",value:function e(t,i){for(var n=this,o=i.getLibrary(),a=i.getSpriteSheet(),s=t.target,r=o.ssMetadata,u=0;u<r.length;u++)a[r[u].name]=new this.createjs.SpriteSheet({images:[s.getResult(r[u].name)],frames:r[u].frames});s.close(),s.removeAllEventListeners(),s.destroy();for(var l=new o[this.__loadinfo.folder],d=[],h=0;h<l.children.length;h++)d[h]=l.children[h];for(var p=0;p<d.length;p++)if(void 0!==d[p].name&&g.default.notNull(this.__loadinfo.instanceReplace))for(var c=this.__loadinfo.instanceReplace.length,_=0;_<c;_++)if(this.__loadinfo.instanceReplace[_][0]===d[p].name){this.exportRoot.addChild(d[p]),d[p].orgVisible=d[p].visible,d[p].name=this.__loadinfo.instanceReplace[_][1],d[p].visible=!1,this.exportRoot[d[p].name]=d[p];break}this.rescanInstanceRef(),this.reprocessInstanceEffectBase(),this.reinitModules("../"+this.__loadinfo.folder+"/"),this._moduleDelayInit?document.getElementById("_preload_div_").style.display="none":(this.sendCommand("Inited","Inited",this),this._moduleDelayInit=!0,window.callDelayPageInitComplete&&window.callDelayPageInitComplete())}},{key:"appendMenu",value:function e(t,i){var n=this,o=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.onload=a.onreadystatechange=function(){if(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)for(var e in a.onload=a.onreadystatechange=null,window.AdobeAn.compositions)if(e!==n.animateID){n.loadMenuInstance(e,t,i);break}},a.onerror=function(e){n.init()},a.src="../"+t+"/"+t+".js?"+Math.ceil(5e3*Math.random()),o.appendChild(a)}},{key:"loadMenuInstance",value:function e(t,i,n){var o=this;this.menuID=i,this.menuContent=n,this.contentComp=AdobeAn.getComposition(t),this.contentLib=this.contentComp.getLibrary(),this.contentLoader=new this.createjs.LoadQueue(!0,"../"+i+"/","Anonymous"),this.contentLoader.addEventListener("fileload",function(e){o.handleMenuFileLoad(e,o.contentComp)}),this.contentLoader.addEventListener("complete",function(e){o.handleMenuComplete(e,o.contentComp)}),this.contentLoader.setMaxConnections(6),this.contentLoader.installPlugin(this.createjs.Sound);for(var a=this.contentLib.properties.manifest.length,s=[],r=0;r<a;r++)-1===this.contentLib.properties.manifest[r].src.indexOf(".mp3")&&s.push(this.contentLib.properties.manifest[r]);0!==s.length?this.contentLoader.loadManifest(s):this.handleMenuComplete({},this.contentComp)}},{key:"handleMenuFileLoad",value:function e(t,i){var n=i.getImages();t&&"image"==t.item.type&&(n[t.item.id]=t.result)}},{key:"handleMenuComplete",value:function e(t,i){for(var n=this,o=i.getLibrary(),a=i.getSpriteSheet(),s=t.target,r=o.ssMetadata,u=0;u<r.length;u++)a[r[u].name]=new this.createjs.SpriteSheet({images:[s.getResult(r[u].name)],frames:r[u].frames});s.close(),s.removeAllEventListeners(),s.destroy();for(var l=new o[this.menuID],d=[],h=0;h<l.children.length;h++)d[h]=l.children[h];for(var p=void 0,c=0;c<d.length;c++)this.exportRoot.addChild(d[c]),d[c].orgVisible=d[c].visible,g.default.notNull(d[c].name)&&(this.exportRoot[d[c].name]=d[c]),"MenuScript"===d[c].name&&((p=d[c]).visible=!1);this.scanInstanceRef(),this.processInstanceEffectBase(),g.default.notNull(p.menuRef)&&(this.menuRef=p.menuRef.concat()),this.init()}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i}},{key:"stop",value:function e(t,i,n){var o=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i,s=2<arguments.length&&void 0!==n&&n}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i}},{key:"clearSoundChannel",value:function e(){}},{key:"clearVideoChannel",value:function e(){}},{key:"updateMenuParam",value:function e(t){this.isInited||this.init(),g.default.isNull(t)?this.initMenuParamJSON=g.default.notNull(this.lib.js.initMenuParamJSON)?this.lib.js.initMenuParamJSON:this.initMenuParamJSON:(this.initMenuParamJSON=t,this.lib.js.initMenuParamJSON=t),this.pageMenuParam=g.default.notNull(this.initMenuParamJSON)&&""!==this.initMenuParamJSON?JSON.parse(this.initMenuParamJSON):null,this.updatePageParam()}},{key:"updatePageParam",value:function e(t){this.isInited||this.init(),g.default.isNull(t)?this.initParamJSON=g.default.notNull(this.lib.js.initParamJSON)?this.lib.js.initParamJSON:this.initParamJSON:(this.initParamJSON=t,this.lib.js.initParamJSON=t),this.pageParam=g.default.notNull(this.initParamJSON)&&""!==this.initParamJSON?JSON.parse(this.initParamJSON):null,this.updatePageProps()}},{key:"updatePageProps",value:function e(){}},{key:"getGoOutCommandItemList",value:function e(){}},{key:"syncMarqueeSound",value:function e(t,i){}},{key:"getZoomInInfo",value:function e(){}},{key:"setAnsZoneEnable",value:function e(t,i,n){var o=1<arguments.length&&void 0!==i?i:.2,a=2<arguments.length&&void 0!==n&&n}},{key:"updateVolume",value:function e(t){return this.isInited||this.init(),t<0&&(t=0),1<t&&(t=1),this.volume=t,g.default.notNull(this.soundChannel)&&(this.soundChannel.volume=t),g.default.notNull(this.videoChannel)&&(this.videoChannel.volume=t),this.volume}},{key:"receiveMessage",value:function e(t){this.isInited||this.init(),g.default.trace(t)}},{key:"refreshLibProp",value:function e(t,i,n,o,a,s,r){this.isInited||this.init(),g.default.isNull(t)?this.owner=g.default.notNull(this.lib.js.owner)?this.lib.js.owner:this.owner:(this.owner=t,this.lib.js.owner=t),g.default.isNull(i)?this.pageSoundPath=g.default.notNull(this.lib.js.pageSoundPath)?this.lib.js.pageSoundPath:this.pageSoundPath:(this.pageSoundPath=i,this.lib.js.pageSoundPath=i),g.default.isNull(a)?this.pageVideoPath=g.default.notNull(this.lib.js.pageVideoPath)?this.lib.js.pageVideoPath:this.pageVideoPath:(this.pageVideoPath=a,this.lib.js.pageVideoPath=a),g.default.isNull(o)?this.assetSoundPath=g.default.notNull(this.lib.js.assetSoundPath)?this.lib.js.assetSoundPath:this.assetSoundPath:(this.assetSoundPath=o,this.lib.js.assetSoundPath=o),g.default.isNull(s)?this.assetVideoPath=g.default.notNull(this.lib.js.assetVideoPath)?this.lib.js.assetVideoPath:this.assetVideoPath:(this.assetVideoPath=s,this.lib.js.assetVideoPath=s),g.default.isNull(n)?this.globalSoundPath=g.default.notNull(this.lib.js.globalSoundPath)?this.lib.js.globalSoundPath:this.globalSoundPath:(this.globalSoundPath=n,this.lib.js.globalSoundPath=n),g.default.notNull(r)&&(this.wordStrokeOffsetMs=Number(r))}},{key:"updatePairInstance",value:function e(t){this.isInited||this.init(),g.default.notNull(t)?this.pairInstance=t:this.pairInstance=this.lib.js.pairInstance||null,this.lib.js.pairInstance=this.pairInstance}},{key:"callTouchInstance",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:50;this.isInited||this.init();var o=this;clearTimeout(this.callTouchInstanceTimer),this.callTouchInstanceTimer=setTimeout(function(){o.callTouchInstanceRun(t,n)},n)}},{key:"assetBasePageInstance",value:function e(t){this.isInited||this.init(),this.createjs._assetBasePageInstance=t}},{key:"createAudioInstance",value:function e(t){this.isInited||this.init(),g.default.playWebAudioSound(this.createjs,t.path,t.id,t.loop,t.offset,t.volume,t.callback)}},{key:"callTouchInstanceRun",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:50;if(this.isInited||this.init(),g.default.notNull(t)&&0<t.length){for(var s=t.shift(),r=this,u=this.mouseTriggerBehavior,o=function e(t){var i=r.getInstanceMirror(t),n=i.subset.length,o=void 0;o===s&&t.dispatchEvent(u);for(var a=0;a<n;a++)o=i.subset[a],e(i.target[o])},a=this.levelOneInstanceNames.length,l=void 0,d=void 0,h=0;h<a;h++)l=this.levelOneInstanceNames[h],d=this.getInstanceMirror(this.exportRoot[l]),l===s&&this.exportRoot[l].dispatchEvent(u),o(d.target);clearTimeout(r.callTouchInstanceTimer),this.callTouchInstanceTimer=setTimeout(function(){r.callTouchInstanceRun(t,n)},n)}}},{key:"openFPS",value:function e(){this.isInited||this.init(),this._fps&&this._fps.startFPS(this.exportRoot,this)}},{key:"closeFPS",value:function e(){this.isInited||this.init(),this._fps&&this._fps.stopFPS(this.exportRoot)}},{key:"excludePageComponent",value:function e(t){var i=0<arguments.length&&void 0!==t?t:null;return this.isInited||this.init(),this.openMobileMode(i)}},{key:"unexcludePageComponent",value:function e(){return this.isInited||this.init(),this.closeMobileMode()}},{key:"modifyExtraComponentVisible",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=!(1<arguments.length&&void 0!==i)||i;return this.isInited||this.init(),g.default.notNull(this.commandMCListVisible)?this.commandMCListVisibleRest=this.commandMCListVisible:this.commandMCListVisibleRest=this.commandMCListInvisible,this.commandMCListVisible=null,this.commandMCListInvisible=null,o?this.commandMCListVisible=n:this.commandMCListInvisible=n,this.updatePageProps(),!0}},{key:"openMobileMode",value:function e(t){var i=0<arguments.length&&void 0!==t?t:null;return this.isInited||this.init(),this.mobileMode=!0,this.webMode=!0,this.extraToHideMCList=i,this.updatePageProps(),!0}},{key:"closeMobileMode",value:function e(){return this.isInited||this.init(),this.mobileMode=!1,this.webMode=!1,this.extraToHideMCList=null,this.updatePageProps(),!0}},{key:"openWebMode",value:function e(t){var i=0<arguments.length&&void 0!==t?t:null;return this.isInited||this.init(),this.webMode=!0,this.mobileMode=!1,this.extraToHideMCList=i,this.updatePageProps(),!0}},{key:"closeWebMode",value:function e(){return this.isInited||this.init(),this.webMode=!1,this.mobileMode=!1,this.extraToHideMCList=null,this.updatePageProps(),!0}},{key:"openIOSMode",value:function e(){return this.isInited||this.init(),this.iosMode=!0}},{key:"closeIOSMode",value:function e(){return this.isInited||this.init(),!(this.iosMode=!1)}},{key:"openWBCMode",value:function e(){return this.isInited||this.init(),this.wbcMode=!0,this.updatePageProps(),!0}},{key:"closeWBCMode",value:function e(){return this.isInited||this.init(),this.wbcMode=!1,this.updatePageProps(),!0}},{key:"openActWinNavBar",value:function e(){return this.isInited||this.init(),this.actWinNavHide=!1,this.updatePageProps(),!0}},{key:"closeActWinNavBar",value:function e(){return this.isInited||this.init(),this.actWinNavHide=!0,this.updatePageProps(),!0}},{key:"openActWinWordGroupBar",value:function e(){return this.isInited||this.init(),this.actWinNavHide=!1,this.actWinWordGroupHide=!1,this.updatePageProps(),!0}},{key:"closeActWinWordGroupBar",value:function e(){return this.isInited||this.init(),this.actWinNavHide=!0,this.actWinWordGroupHide=!0,this.updatePageProps(),!0}},{key:"updateSoundChannel",value:function e(t){this.isInited||init(),this.soundChannel=t}},{key:"updateVideoChannel",value:function e(t){this.isInited||init(),this.videoChannel=t}},{key:"setPressEventIsOn",value:function e(t){this.isPressMoveOn=t}},{key:"getPressEventIsOn",value:function e(){return this.isPressMoveOn}},{key:"getSoundObject",value:function e(){return this.soundObj}},{key:"getLastestParamJSON",value:function e(){return g.default.notNull(this.pageParam)?JSON.stringify(this.pageParam):null}},{key:"getParentIsNoDefinition",value:function e(){return!(!window.useMarqueeDebug||window.sendFromChild||g.default.notNull(window.parent)&&window.parent.sendFromIFrameChild)}},{key:"sendCommand",value:function e(t,i,n,o){var a=2<arguments.length&&void 0!==n?n:null,s=!(3<arguments.length&&void 0!==o)||o;if(!g.default.isNull(this)){this.isInited||this.init();var r=g.default.generateExtraCommand(t,i,this.owner);g.default.notNull(a)&&(r.selfInstance=a),s&&(r.selfInstance=this),g.default.sendExtraCommand(r)}}},{key:"sendPageFlipMessage",value:function e(){this.isInited&&this._moduleDelayInit&&this.sendCommand("PageFlip","PageFlip")}},{key:"sendPageTouchMessage",value:function e(t,i){this.sendCommand(t,i)}},{key:"setupCreatejs",value:function e(t,i){var n=!(0<arguments.length&&void 0!==t)||t,o=!(1<arguments.length&&void 0!==i)||i;g.default.isNull(this)||(g.default.notNull(this.createjs)&&(this.createjs.Ticker.timingMode=this.createjs.Ticker.RAF),g.default.notNull(this.stage)&&(n?this.stage.enableMouseOver(8):this.stage.enableMouseOver(0),this.createjs.Touch.isSupported()?o?this.createjs.Touch.enable(this.stage,!0,!1,!0):this.createjs.Touch.enable(this.stage,!1,!0,!0):(void 0===this.stage.__notouch&&(this.stage.__notouch={}),this.stage.__notouch.onlyEbookClick=!0),this.stage.preventSelection=!1))}},{key:"resetSingleTouchEvent",value:function e(){g.default.isNull(this)||g.default.notNull(this.createjs)&&g.default.notNull(this.createjs.Touch)&&g.default.notNull(this.createjs.Touch.resetTouchMove)&&this.createjs.Touch.resetTouchMove(this.stage)}},{key:"setTimeout",value:function e(t,i){if(g.default.isNull(this))return null;var n=this,o=this.createjs.Tween.get({}).wait(i).call(function(){t&&t(),n.clearTimeout(o)});return o}},{key:"clearTimeout",value:function e(t){return!(g.default.isNull(this)||(this.createjs.Tween.removeTweens(t.target),t=void 0))}},{key:"setInterval",value:function e(t,i){if(g.default.isNull(this))return null;var n=this.createjs.Tween.get({}).wait(i).call(function(){t&&t()});return n.loop=-1,n}},{key:"clearInterval",value:function e(t){if(!g.default.isNull(this))return this.Tween.removeTweens(t.target),!(t=void 0)}},{key:"scanInstanceRef",value:function e(){if(!g.default.isNull(this)){this.levelOneInstanceNames=[],this.levelInstanceMirror={};var l=this,t=function e(t,i){t.gotoAndStop(0);var n=t.parent.name||"",o,a=(n=""!==n?n+"_$"+t.parent.randID+"$":"")+t.name;i[a]={},i[a].parent=t.parent,i[a].target=t,i[a].name=t.name,t._parentLink=t.parent;var s=t.name.split("_");i[a].command=s[0],l.modulesIsOn.push(i[a].command),s.shift(),i[a].args=s,i[a].subset=[];for(var r=t.children.length,u=0;u<r;u++)t.children[u]instanceof createjs.MovieClip&&null!==t.children[u].name&&(t.children[u].randID=++l._randID,i[a].subset.push(t.children[u].name),e(t.children[u],i))},i="exportRoot";this.levelInstanceMirror[i]={},this.levelInstanceMirror[i].parent=null,this.levelInstanceMirror[i].target=this.exportRoot,this.levelInstanceMirror[i].name="exportRoot",this.levelInstanceMirror[i].name="exportRoot",this.levelInstanceMirror[i].command="",this.levelInstanceMirror[i].args=[],this.levelInstanceMirror[i].subset=[],this.exportRoot.gotoAndStop(0);for(var n=this.exportRoot.children.length,o=0;o<n;o++)this.exportRoot.children[o]instanceof createjs.MovieClip&&null!==this.exportRoot.children[o].name&&(this.exportRoot.children[o].randID=++this._randID,this.levelInstanceMirror[i].subset.push(this.exportRoot.children[o].name),this.levelOneInstanceNames.push(this.exportRoot.children[o].name),t(this.exportRoot.children[o],this.levelInstanceMirror));this.modulesIsOn=this.modulesIsOn.filter(g.default.getArrayUnique)}}},{key:"processInstanceEffectBase",value:function e(){if(!g.default.isNull(this))for(var t=this,i=function e(t,i){if(!t.EffectBaseShadow&&t.EffectBase){var n=t.EffectBase.clone(),o=t.EffectBase;t.EffectBaseShadow=n,t.EffectBase.alpha=0,t.EffectBaseShadow.alpha=.7;var a=t.localToGlobal(t.EffectBase.x-t.EffectBase.regX*t.EffectBase.scaleX,t.EffectBase.y-t.EffectBase.regY*t.EffectBase.scaleY),s=t.parent;g.default.notNull(t.parent._effectBaseToLoc)&&(s=t.parent._effectBaseToLoc);var r=s.globalToLocal(a.x,a.y);n.setTransform(r.x,r.y,n.scaleX*t.scaleX,n.scaleY*t.scaleY,t.rotation+n.rotation),t.timeline.on("change",function(e){o._off?s.removeChild(n):s.addChildAt(n,1)})}for(var u=t.children.length,l=0;l<u;l++)t.children[l]instanceof createjs.MovieClip&&null!==t.children[l].name&&e(t.children[l],i)},n=this.exportRoot.children.length,o=0;o<n;o++)this.exportRoot.children[o]instanceof createjs.MovieClip&&null!==this.exportRoot.children[o].name&&i(this.exportRoot.children[o],this.levelInstanceMirror)}},{key:"rescanInstanceRef",value:function e(){if(!g.default.isNull(this)){for(var l=this,t=function e(t,i){t.gotoAndStop(0);var n=t.parent.name||"",o,a=(n=""!==n?n+"_$"+t.parent.randID+"$":"")+t.name;i[a]={},i[a].parent=t.parent,i[a].target=t,i[a].name=t.name,t._parentLink=t.parent;var s=t.name.split("_");i[a].command=s[0],l.modulesIsOn.push(i[a].command),s.shift(),i[a].args=s,i[a].subset=[];for(var r=t.children.length,u=0;u<r;u++)t.children[u]instanceof createjs.MovieClip&&null!==t.children[u].name&&(t.children[u].randID=++l._randID,i[a].subset.push(t.children[u].name),e(t.children[u],i))},i="exportRoot",n=this.exportRoot.children.length,o=0;o<n;o++)this.exportRoot.children[o]instanceof createjs.MovieClip&&null!==this.exportRoot.children[o].name&&void 0===this.exportRoot.children[o].randID&&(this.exportRoot.children[o].isAppend=!0,this.exportRoot.children[o].randID=++this._randID,this.levelInstanceMirror[i].subset.push(this.exportRoot.children[o].name),this.levelOneInstanceNames.push(this.exportRoot.children[o].name),t(this.exportRoot.children[o],this.levelInstanceMirror));this.modulesIsOn=this.modulesIsOn.filter(g.default.getArrayUnique)}}},{key:"reprocessInstanceEffectBase",value:function e(){if(!g.default.isNull(this))for(var t=this,i=function e(t,i){if(!t.EffectBaseShadow&&t.EffectBase){var n=t.EffectBase.clone(),o=t.EffectBase;t.EffectBaseShadow=n,t.EffectBase.alpha=0,t.EffectBaseShadow.alpha=.7;var a=t.localToGlobal(t.EffectBase.x-t.EffectBase.regX*t.EffectBase.scaleX,t.EffectBase.y-t.EffectBase.regY*t.EffectBase.scaleY),s=t.parent;g.default.notNull(t.parent._effectBaseToLoc)&&(s=t.parent._effectBaseToLoc);var r=s.globalToLocal(a.x,a.y);n.setTransform(r.x,r.y,n.scaleX*t.scaleX,n.scaleY*t.scaleY,t.rotation+n.rotation),t.timeline.on("change",function(e){o._off?s.removeChild(n):s.addChildAt(n,1)})}for(var u=t.children.length,l=0;l<u;l++)t.children[l]instanceof createjs.MovieClip&&null!==t.children[l].name&&e(t.children[l],i)},n=this.exportRoot.children.length,o=0;o<n;o++)this.exportRoot.children[o]instanceof createjs.MovieClip&&null!==this.exportRoot.children[o].name&&!0===this.exportRoot.children[o].isAppend&&(this.exportRoot.children[o].isAppend=void 0,i(this.exportRoot.children[o],this.levelInstanceMirror))}},{key:"getInstanceMirror",value:function e(t){if(!g.default.isNull(this)){var i=void 0,n=void 0;n=g.default.notNull(t._parentLink)?(i=t._parentLink.name||"",t._parentLink.randID):g.default.notNull(t.parent)?(i=t.parent.name||"",t.parent.randID):i="",i=""!==i?i+"_$"+n+"$":"";var o=t.name,a=g.default.notNull(o)?i+o:"exportRoot",s;return this.levelInstanceMirror[a]||null}}},{key:"openSoundPlayBar",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:{};g.default.isNull(this)||this.soundPlayBar&&this.soundPlayBar.openSoundPlayBar(t,n)}},{key:"closeSoundPlayBar",value:function e(){g.default.isNull(this)||this.soundPlayBar&&this.soundPlayBar.closeSoundPlayBar()}},{key:"stopSoundPlayBar",value:function e(){g.default.isNull(this)||this.soundPlayBar&&this.soundPlayBar.stopSoundPlayBar()}},{key:"openVideoPlayBar",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:{};g.default.isNull(this)||this.videoPlayBar&&this.videoPlayBar.openVideoPlayBar(t,n)}},{key:"closeVideoPlayBar",value:function e(){g.default.isNull(this)||this.videoPlayBar&&this.videoPlayBar.closeVideoPlayBar()}},{key:"stopVideoPlayBar",value:function e(){g.default.isNull(this)||this.videoPlayBar&&this.videoPlayBar.stopVideoPlayBar()}},{key:"hideUIComponents",value:function e(){if(!g.default.isNull(this))for(var s=this,t=function e(t){var i=s.getInstanceMirror(t),n=i.subset.length,o=void 0;t._pageUI&&(t.visible=!1);for(var a=0;a<n;a++)o=i.subset[a],e(i.target[o])},i=this.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this.levelOneInstanceNames[a],t((o=this.getInstanceMirror(this.exportRoot[n])).target)}},{key:"initModules",value:function e(){this.isInited&&(this.soundPlayBar=new u(this).init(),this.videoPlayBar=new l(this).init())}}]),h);function h(e,t,i,n){r(this,h),g.default.notNull(i)&&i.gotoAndStop(0),this._resetExclude=[],(this._this=this)._randID=99,this.createjs=null,this.animate=null,this.exportRoot=null,this.animateID=null,this.composition=null,this.lib=null,this.stage=null,this.spriteSheet=null,this.images=null,this.pairInstance=null,this.owner=null,this.pageSoundPath=null,this.pageVideoPath=null,this.assetSoundPath=null,this.assetVideoPath=null,this.globalSoundPath=null,this.mobileMode=!1,this.webMode=!1,this.iosMode=!1,this.initParamJSON=null,this.levelOneInstanceNames=[],this.levelInstanceMirror={},this.modulesIsOn=[""],this.soundChannel=null,this.soundObj=null,this.videoChannel=null,this.videoObj=null,this.soundPlayBar=null,this.videoPlayBar=null,this.pageParam=null,this.wbcMode=!1,this.actWinNavHide=!1,this.actWinWordGroupHide=!1,this.extraToHideMCList=null,this.commandMCListVisibleRest=null,this.commandMCListVisible=null,this.commandMCListInvisible=null,this.volume=1,this.isPressMoveOn=!1,this.mouseTriggerBehavior="click",this.textBaseline="alphabetic",this.textAlphabeticFixYScale=0,this.customMainControl={},this.callTouchInstanceTimer,this.wordStrokeExtends=[],this.wordStrokeLinkInfo=[],this.moduleConfigData={},this.wordStrokeOffsetMs=0,this.isInited=!1,this.createjs=e,this.animate=t,this.exportRoot=i,this.animateID=n,g.default.notNull(t)&&(this.composition=t.getComposition(n),this.lib=this.composition.getLibrary(),this.stage=this.composition.getStage(),this.spriteSheet=this.composition.getSpriteSheet(),this.images=this.composition.getImages(),this.lib.js=this.lib.js||{},(this.lib.js.selfInstance=this).owner=g.default.isNull(this.lib.js.owner)?g.default.getHtmlhrefValue("owner"):this.lib.js.owner,this.pageSoundPath=g.default.isNull(this.lib.js.pageSoundPath)?g.default.getHtmlhrefValue("pageSoundPath"):this.lib.js.pageSoundPath,this.pageVideoPath=g.default.isNull(this.lib.js.pageVideoPath)?g.default.getHtmlhrefValue("pageVideoPath"):this.lib.js.pageVideoPath,this.assetSoundPath=g.default.isNull(this.lib.js.assetSoundPath)?g.default.getHtmlhrefValue("assetSoundPath"):this.lib.js.assetSoundPath,this.assetVideoPath=g.default.isNull(this.lib.js.assetVideoPath)?g.default.getHtmlhrefValue("assetVideoPath"):this.lib.js.assetVideoPath,this.globalSoundPath=g.default.isNull(this.lib.js.globalSoundPath)?g.default.getHtmlhrefValue("globalSoundPath"):this.lib.js.globalSoundPath,this.initParamJSON=g.default.isNull(this.lib.js.initParamJSON)?g.default.getHtmlhrefValue("initParamJSON"):this.lib.js.initParamJSON,this.pageParam=g.default.notNull(this.initParamJSON)&&""!==this.initParamJSON?JSON.parse(this.initParamJSON):[],this.wordStrokeOffsetMs=g.default.notNull(g.default.getHtmlhrefValue("wordStrokeOffsetMs"))?Number(g.default.getHtmlhrefValue("wordStrokeOffsetMs")):this.wordStrokeOffsetMs,this._fps=new p(this.lib)),this.setupCreatejs(!0),this.scanInstanceRef(),this.processInstanceEffectBase(),this.triggerBGMousedownBind=this.triggerBGMousedownBind||this.triggerBGMousedown.bind(this),this._bgListenZoneBehavior="mousedown"}var p=(n(c,[{key:"startFPS",value:function e(t,i){var n=(this._baseThis=i).exportRoot.nominalBounds.x+i.exportRoot.nominalBounds.width,o,a=(i.exportRoot.nominalBounds.y+i.exportRoot.nominalBounds.height)/20;this.shape=new i.createjs.Shape,this.shape.graphics.beginFill("#000000").drawRect(0,0,3*a,a),this.shape.alpha=.5,this.shape.cache(0,0,3*a,a,2),this.shape.updateCache(),t.addChild(this.shape),this.txt=new i.createjs.Text("",.75*a+"px Arial","#ffffff"),this.txt.y=.25*a/2,this.txt.cache(0,0,3*a,a,2),t.addChild(this.txt),i.createjs.Ticker.addEventListener("tick",this.tickerFPSBind)}},{key:"stopFPS",value:function e(t){this.shape&&(this.shape.graphics.clear(),this.shape.uncache(),t.removeChild(this.shape),this.shape=null),t.removeChild(this.txt),this.txt&&(this.txt.uncache(),this.txt=null),this._baseThis.createjs.Ticker.removeEventListener("tick",this.tickerFPSBind)}},{key:"tickerFPS",value:function e(t){this.onceEverySixty()&&(this._fps.FPS=this._baseThis.createjs.Ticker.getMeasuredFPS(),this.txt.text="FPS: "+Math.round(this._fps.FPS),this.txt.updateCache())}}]),c);function c(e){var t;r(this,c),this.time=0,this.fps=0,(this._fps=this).onceEverySixty=(t=0,function(){return++t%e.properties.fps==0}),this.tickerFPSBind=this.tickerFPSBind||this.tickerFPS.bind(this)}t.BasePage=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleGoOutCommand=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,c=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["GoPage","Exe","ParmsExe","Mp4","URL","PopWin","HPopWin","PaPopWin","BWComp","BWCompLink","BWBack","BWBackLink","CDTrackG","Cmd","ExePopWin","CDTrackGHide","HwPopWin","OpenWindow"],l=!1,d=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init(),this.clearInstanceTimeout();for(var t=this._pickList.length,i=void 0,n=void 0,o=0;o<t;o++){if(i=this._pickList[o],n=this._parent.getInstanceMirror(i),c.default.notNull(this._parent.commandMCListVisibleRest)){var a=n.name;-1!==this._parent.commandMCListVisibleRest.indexOf(a)&&(i.orgVisible=i.resetVisible)}if(c.default.notNull(this._parent.commandMCListVisible)){var s=n.name;-1!==this._parent.commandMCListVisible.indexOf(s)&&(c.default.isNull(i.resetVisible)&&(i.resetVisible=i.orgVisible),i.orgVisible=!0)}if(c.default.notNull(this._parent.commandMCListInvisible)){var r=n.name;-1!==this._parent.commandMCListInvisible.indexOf(r)&&(c.default.isNull(i.resetVisible)&&(i.resetVisible=i.orgVisible),i.orgVisible=!1)}this._parent.wbcMode?"BWComp"===n.command||"BWCompLink"===n.command?i.visible=!1:"BWBack"===n.command||"BWBackLink"===n.command?i.visible=!0:i.visible=i.orgVisible:"BWBack"===n.command||"BWBackLink"===n.command?i.visible=!1:"BWComp"===n.command||"BWCompLink"===n.command?i.visible=!0:i.visible=i.orgVisible}this._parent.commandMCListVisibleRest=null,this.switchMobileMode(this._parent.mobileMode),this.switchWebMode(this._parent.webMode)}},{key:"getPickListName",value:function e(){for(var t=[],i=this._pickList.length,n=0;n<i;n++){var o=this._pickList[n],a=this._parent.getInstanceMirror(o);"BWBack"!==a.command&&"BWBackLink"!==a.command&&"BWCompLink"!==a.command&&t.push(o.name)}return t.concat().filter(c.default.getArrayUnique)}},{key:"switchMobileMode",value:function e(t){this.isInited||this.init();var i=this._pickList.length,n=void 0,o=void 0;if(c.default.isNull(this._parent.extraToHideMCList))for(var a=0;a<i;a++)n=this._pickList[a],"ParmsExe"===(o=this._parent.getInstanceMirror(n)).command?n.visible=!t:"Exe"===o.command?n.visible=!t:"ExePopWin"===o.command?n.visible=!t:"BWComp"!==o.command&&"BWBack"!==o.command&&"BWBackLink"!==o.command&&"BWCompLink"!==o.command&&(n.visible=n.orgVisible);else for(var s=0;s<i;s++)n=this._pickList[s],o=this._parent.getInstanceMirror(n),-1!==this._parent.extraToHideMCList.indexOf(n.name)?"BWComp"!==o.command&&"BWBack"!==o.command&&"BWBackLink"!==o.command&&"BWCompLink"!==o.command&&(n.visible=!1):"BWComp"!==o.command&&"BWBack"!==o.command&&"BWBackLink"!==o.command&&"BWCompLink"!==o.command&&(n.visible=n.orgVisible)}},{key:"switchWebMode",value:function e(t){this.isInited||this.init();var i=this._pickList.length,n=void 0,o=void 0;if(c.default.isNull(this._parent.extraToHideMCList))for(var a=0;a<i;a++)n=this._pickList[a],"ParmsExe"===(o=this._parent.getInstanceMirror(n)).command?n.visible=!t:"BWComp"!==o.command&&"BWBack"!==o.command&&"Exe"!==o.command&&"ExePopWin"!==o.command&&"BWBackLink"!==o.command&&"BWCompLink"!==o.command&&(n.visible=n.orgVisible);else for(var s=0;s<i;s++)n=this._pickList[s],o=this._parent.getInstanceMirror(n),-1!==this._parent.extraToHideMCList.indexOf(n.name)?"BWComp"!==o.command&&"BWBack"!==o.command&&"BWBackLink"!==o.command&&"BWCompLink"!==o.command&&(n.visible=!1):"BWComp"!==o.command&&"BWBack"!==o.command&&"BWBackLink"!==o.command&&"BWCompLink"!==o.command&&(n.visible=n.orgVisible)}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this._parent,r=this,t=function e(t){for(var i=s.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],r.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;t._pageUI=!0,this._pickList.push(t)}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=this._pickList.length,o=void 0;this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this);for(var a=0;a<n;a++)if(!(o=this._pickList[a])._isModuleInited){o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.orgVisible=o.visible;var s=this._parent.getInstanceMirror(o);this._parent.wbcMode?("BWComp"===s.command&&(o.visible=!1),"BWCompLink"===s.command&&(o.visible=!1),"BWBack"===s.command&&(o.visible=!0),"BWBackLink"===s.command&&(o.visible=!0)):("BWBack"===s.command&&(o.visible=!1),"BWBackLink"===s.command&&(o.visible=!1),"BWComp"===s.command&&(o.visible=!0),"BWCompLink"===s.command&&(o.visible=!0)),o.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),c.default.notNull(o.EffectBase)&&c.default.applyMultiply(o.EffectBase)}}},{key:"triggerMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i);if(i.parent.isListPop?this._parent.stop(["ModuleListPop","ModuleDragListPop"],!0):this._parent.stop(null,!0),this.clearInstanceTimeout(),i.cursor=null,i.enabled=!1,i.mouseEnabled=!1,i.gotoAndStop(0),i.cache(i.nominalBounds.x,i.nominalBounds.y,i.nominalBounds.width,i.nominalBounds.height),-1===n.command.indexOf("CDTrackG"))this._timeoutID=setTimeout(function(){i.uncache(),i.cursor="pointer",i.gotoAndStop(0),i.enabled=!0,i.mouseEnabled=!0,this._timeoutID=void 0}.bind(this),300),this._parent.sendCommand(n.command,i.name);else if(this._timeoutID=setTimeout(function(){i.uncache(),i.cursor="pointer",i.gotoAndStop(0),i.enabled=!0,i.mouseEnabled=!0,this._timeoutID=void 0}.bind(this),300),c.default.isNull(this._parent.globalSoundPath))this._parent.sendCommand(n.command,i.name);else{this._parent.stop(null,!0);var o=i.nominalBounds,a={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},s=i.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.globalSoundPath?this._parent.globalSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";if(c.default.notNull(this._parent.lib.js.CDTrackHash)&&c.default.notNull(this._parent.lib.js.CDTrackHash[n.args[0]])){u=this._parent.lib.js.CDTrackHash[n.args[0]][0];for(var l=this._parent.lib.js.CDTrackHash[n.args[0]][1].split("."),d=l.length-1,h=l[0],p=1;p<d;p++)h+="."+l[p];this._parent.soundObj={id:h,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:null,completeFunc:null,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null},c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this.delayCommand={command:n.command,name:i.name}}else this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:null,completeFunc:null,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null},c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this.delayCommand={command:n.command,name:i.name}}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(c.default.isNull(this._parent.soundObj)||c.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)c.default.notNull(i)&&i.stop();else switch(n){case"fileload":c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.soundChannel.stop(),c.default.notNull(this.delayCommand)?(this._parent.sendCommand(this.delayCommand.command,this.delayCommand.name),this.delayCommand=null):(this._parent.soundChannel=null,this._parent.soundObj=null)}}},{key:"clearInstanceTimeout",value:function e(){c.default.notNull(this._timeoutID)&&(clearTimeout(this._timeoutID),this._timeoutID=void 0);for(var t=this._pickList.length,i=void 0,n=0;n<t;n++)(i=this._pickList[n]).uncache(),i.cursor="pointer",i.enabled=!0,i.mouseEnabled=!0,i.gotoAndStop(0)}}]),h);function h(e){r(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._timeoutID,this._prevTime=-1}t.ModuleGoOutCommand=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleBookSound=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,P=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["Sound","ReSound","Voice","VoiceTrack","CD","CDTrack","CDEx","CDExTrack"],l={Sound:"none",ReSound:"none",Voice:"mini-close",VoiceTrack:"mini-wait",CD:"normal-close",CDTrack:"normal-wait",CDEx:"ex-normal-close",CDExTrack:"ex-normal-wait"},d=!1,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();for(var t=this._pickList.length,i=void 0,n=void 0,o=0;o<t;o++)i=this._pickList[o],n=this._parent.getInstanceMirror(i);P.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),P.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;t._pageUI=!0,this._pickList.push(t)}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=this._pickList.length,o=void 0;this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this);for(var a=0;a<n;a++)(o=this._pickList[a])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),P.default.notNull(o.EffectBase)&&P.default.applyMultiply(o.EffectBase))}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i);if("Sound"===n.command&&P.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id===n.args[0])this._parent.stop(null,!0);else{this._parent.stop(null,!0);var o=void 0,a=0,s=i.parent,r=0;P.default.notNull(n.args[2])&&(r=Number(n.args[2])-1),r<0&&(r=0),P.default.trace(r),P.default.notNull(this._parent.marqueePagerData)&&P.default.notNull(this._parent.marqueePagerData[n.args[0]])&&(o=this._parent.marqueePagerData[n.args[0]],P.default.notNull(n.args[1])&&(a=o.sub[n.args[1]-1]||0,s=i.parent.parent));var u=this._parent.getInstanceMirror(s),l=u.subset.length,d=void 0,h=!1;if(P.default.notNull(o))for(var p=0;p<l;p++)if(-1!==u.subset[p].indexOf("ShowPic")){if(d=s[u.subset[p]],0===u.subset[p].indexOf("Slient")||0===u.subset[p].indexOf("Silent")){h=!0,d.alpha=.5,d.mouseChildren=!1,d.mouseEnabled=!1;for(var c=d.goPicList.length,_=0;_<c;_++){var g=d.goPicList[_];g.alpha=.5,g.mouseChildren=!1,g.mouseEnabled=!1}}break}var f=i.nominalBounds,v={x:i.x+f.x*i.scale,y:i.y+f.y*i.scale},m=i.parent.localToGlobal(v.x,v.y),b=this._parent.exportRoot.globalToLocal(m.x,m.y),y=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:y,loop:0,offset:a,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:b.x,locY:b.y,excludeTags:null,command:n.command,target:i,pager:d,pagerMarqueeData:o,alphaMode:h,shiftIndex:r};var S=this.checkCommandMode(n.command);this._parent.iosMode&&"none"===S?P.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):P.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(P.default.isNull(this._parent.soundObj)||P.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)P.default.notNull(i)&&i.stop();else switch(n){case"fileload":P.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var o=this.checkCommandMode(this._parent.soundObj.command);"none"!==o&&this._parent.openSoundPlayBar(o,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){if(P.default.notNull(this._parent.soundChannel)&&P.default.notNull(this._parent.soundObj.pagerMarqueeData)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var o=this._parent.lib.properties.fps;this.updateMarqueeStatus(i)}}},{key:"updateMarqueeStatus",value:function e(t){var i=this._parent.soundObj.pagerMarqueeData,n=i.sub.length,o=-1,a=void 0;for(a=0;a<n-1;a++)if(t>=i.sub[a]&&t<i.sub[a+1]){o=a;break}-1===o&&i.sub[a]<=t&&(o=a),-1!==o&&this._parent.updatePagerIndex(o+1+this._parent.soundObj.shiftIndex,this._parent.soundObj.pager)}},{key:"triggerSoundComplete",value:function e(t){P.default.trace("SoundComplete"),this.stop();var i=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===i||"normal-close"===i||"ex-normal-close"===i||"none"===i?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===i?P.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):P.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"checkSoundPlayStatus2",value:function e(t,i,n){if(P.default.isNull(this._parent.soundObj)||P.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)P.default.notNull(i)&&i.stop();else switch(n){case"fileerror":this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!this._parent.soundObj.autoPlay:this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var o=this.checkCommandMode(this._parent.soundObj.command);"none"!==o&&this._parent.openSoundPlayBar(o,this._parent.soundObj)}}},{key:"triggerSoundWatch2",value:function e(t){}},{key:"triggerSoundComplete2",value:function e(t){P.default.trace("complete2"),this.stop();var i=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===i||"normal-close"===i||"ex-normal-close"===i||"none"===i?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,P.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._prevTime=-1}t.ModuleBookSound=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleAnsZone=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,C=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["AnsGroup","AnsZone","AnsZoneR","Ans","AnsRef","StepAns","AnimateAns","AnimateAnsSwitch","SyncAns"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"setAnsZoneEnable",value:function e(t,i,n){var o=1<arguments.length&&void 0!==i?i:.2,a=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),this._isEnable=t,o<0&&(o=0),1<o&&(o=1),this._disableAlpha=o,this._isEcho=a,this.reset();var s=void 0,r=void 0,u=void 0,l=void 0,d=void 0,h=void 0,p=void 0,c,_,g,f;for(s=this._ansGroup.length,d=0;d<s;d++)(u=this._ansGroup[d]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho,!this._isEnable&&this._disableAlpha<1?C.default.applyColorGrayFilter(this._parent.createjs,u,this._disableAlpha):C.default.unapplyColorFilter(this._parent.createjs,u);for(s=this._ansZone.length,d=0;d<s;d++)for((u=this._ansZone[d]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho,!this._isEnable&&this._disableAlpha<1?C.default.applyColorGrayFilter(this._parent.createjs,u,this._disableAlpha):C.default.unapplyColorFilter(this._parent.createjs,u),p=this.getCustomTag(u),r=this._ansZoneMirror[p].length,h=0;h<r;h++)(l=this._ansZoneMirror[p][h]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho;for(s=this._ans.length,d=0;d<s;d++)(u=this._ans[d]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho;for(s=this._ansRefGroup.length,d=0;d<s;d++)for((u=this._ansRefGroup[d]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho,!this._isEnable&&this._disableAlpha<1?C.default.applyColorGrayFilter(this._parent.createjs,u,this._disableAlpha):C.default.unapplyColorFilter(this._parent.createjs,u),p=this.getCustomTag(u),r=this._ansRefMirror[p].length,h=0;h<r;h++)(l=this._ansRefMirror[p][h]).mouseEnabled=this._isEnable?this._isEnable:this._isEcho}},{key:"triggerAnsZoneDisableEvent",value:function e(){this.isInited||this.init(),this._parent.sendCommand("SMS","SMS_AnsZoneIsDisabled")}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0;t=this._stepAns.length;for(var i=0;i<t;i++){var n=this._stepAns[i];clearTimeout(n.timeout),n.timeout=null;var o=this._parent.getInstanceMirror(n),a=o.parent[o.args[0]];C.default.notNull(a)&&a.gotoAndStop(a.endStep)}t=this._animateAns.length;for(var s=0;s<t;s++){var r=this._animateAns[s],u=this._parent.getInstanceMirror(r),l=u.parent[u.args[0]];C.default.notNull(l)&&(clearTimeout(l.timeout),l.timeout=null,l.gotoAndStop(0))}t=this._animateAnsSwitch.length;for(var d=0;d<t;d++){var h=this._animateAnsSwitch[d],p=this._parent.getInstanceMirror(h),c=p.parent[p.args[0]];C.default.notNull(c)&&(clearTimeout(c.timeout),c.timeout=null,c.gotoAndStop(0))}}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0,o=void 0,a=void 0,s=void 0,r=void 0;for(t=this._ansGroup.length,a=0;a<t;a++)(n=this._ansGroup[a]).isShow=!1;for(t=this._ansZone.length,a=0;a<t;a++)for((n=this._ansZone[a]).isShow=!1,n.parent.isShow=!1,r=this.getCustomTag(n),i=this._ansZoneMirror[r].length,s=0;s<i;s++)(o=this._ansZoneMirror[r][s]).gotoAndStop(o.frameNormal);for(t=this._ans.length,a=0;a<t;a++)(n=this._ans[a]).gotoAndStop(n.frameNormal);for(t=this._ansRefGroup.length,a=0;a<t;a++)for((n=this._ansRefGroup[a]).isShow=!1,n.parent.isShow=!1,r=this.getCustomTag(n),i=this._ansRefMirror[r].length,s=0;s<i;s++)(o=this._ansRefMirror[r][s]).visible=!1;for(t=this._stepAns.length,a=0;a<t;a++){n=this._stepAns[a],clearTimeout(n.timeout),n.timeout=null;var u=this._parent.getInstanceMirror(n);n.stepIndex=0,o=u.parent[u.args[0]],C.default.notNull(o)&&(o.gotoAndStop(0),o.startStep=0,o.endStep=0),this.refreshStepAns(n)}for(t=this._animateAns.length,a=0;a<t;a++){n=this._animateAns[a];var l=this._parent.getInstanceMirror(n);n.stepIndex=0,o=l.parent[l.args[0]],C.default.notNull(o)&&(clearTimeout(o.timeout),o.timeout=null,o.gotoAndStop(0),o.startStep=0,o.endStep=0),this.refreshAnimateAns(n)}for(t=this._animateAnsSwitch.length,a=0;a<t;a++){n=this._animateAnsSwitch[a];var d=this._parent.getInstanceMirror(n);n.stepIndex=0,o=d.parent[d.args[0]],C.default.notNull(o)&&(clearTimeout(o.timeout),o.timeout=null,o.gotoAndStop(0),o.startStep=0,o.endStep=0),this.refreshAnimateAns(n)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"AnsGroup":t._pageUI=!0,n=this.getCustomTag(t),this._ansGroup.push(t),this._ansGroupMirror[n]=this.pickRelation(i.parent,i.args[0]),this._ansGroupMirrorControl[n]=this.pickRelationControl(i.parent,i.args[0],"AnsZone"),this._ansGroupMirrorControl2[n]=this.pickRelationControl(i.parent,i.args[0],"StepAns");break;case"AnsZone":case"AnsZoneR":t._pageUI=!0,n=this.getCustomTag(t),this._ansZone.push(t),this._ansZoneMirror[n]=this.pickRelationPlus(i.parent,i.args[0]);break;case"SyncAns":t._pageUI=!1,n=this.getCustomTag(t),this._syncAns.push(t),this._syncAnsMirror[n]=this.pickRelationPlus(i.parent,i.args[0]);break;case"Ans":t._pageUI=!1,this._ans.push(t);break;case"AnsRef":t._pageUI=!0,n=this.getCustomTag(t),this._ansRefGroup.push(t),this._ansRefMirror[n]=this.pickRelation(i.parent,i.args[0]);break;case"StepAns":t._pageUI=!0,this._stepAns.push(t);break;case"AnimateAns":t._pageUI=!0,this._animateAns.push(t);break;case"AnimateAnsSwitch":t._pageUI=!0,this._animateAnsSwitch.push(t)}}}},{key:"getCustomTag",value:function e(t){return C.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"pickRelationPlus",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=i.split("SS"),r=s.length,u=0;u<r;u++)for(var l=s[u],d=0;d<a;d++){var h=this._parent.getInstanceMirror(o.target[o.subset[d]]),p=o.target[o.subset[d]];h.command===l&&n.push(p)}return n}},{key:"pickRelationControl",value:function e(t,i,n){for(var o=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,r=0;r<s;r++){var u=this._parent.getInstanceMirror(a.target[a.subset[r]]);if(u.command===i)for(var l=u.subset.length,d=0;d<l;d++){var h=u.target[u.subset[d]],p;0===this._parent.getInstanceMirror(h).command.indexOf(n)&&o.push(h)}}return o}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=void 0,s=void 0,r=void 0,u=void 0,l=void 0;for(this.triggerAnsGroupMousedownBind=this.triggerAnsGroupMousedownBind||this.triggerAnsGroupMousedown.bind(this),this.triggerAnsZoneMousedownBind=this.triggerAnsZoneMousedownBind||this.triggerAnsZoneMousedown.bind(this),this.triggerAnsMousedownBind=this.triggerAnsMousedownBind||this.triggerAnsMousedown.bind(this),this.triggerSyncAnsMousedownBind=this.triggerSyncAnsMousedownBind||this.triggerSyncAnsMousedown.bind(this),this.triggerAnsRefMousedownBind=this.triggerAnsRefMousedownBind||this.triggerAnsRefMousedown.bind(this),this.triggerStepAnsFuncMousedownBind=this.triggerStepAnsFuncMousedownBind||this.triggerStepAnsFuncMousedown.bind(this),this.triggerAnimateAnsFuncMousedownBind=this.triggerAnimateAnsFuncMousedownBind||this.triggerAnimateAnsFuncMousedown.bind(this),this.triggerAnimateAnsSwitchFuncMousedownBind=this.triggerAnimateAnsSwitchFuncMousedownBind||this.triggerAnimateAnsSwitchFuncMousedown.bind(this),n=this._ansGroup.length,r=0;r<n;r++)if(!(a=this._ansGroup[r])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.isShow=!1,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerAnsGroupMousedownBind),C.default.notNull(a.EffectBase)&&C.default.applyMultiply(a.EffectBase);for(var d=this._parent.getInstanceMirror(a),h=this._parent.getInstanceMirror(d.parent),p=h.subset.length,c=0;c<p;c++){var _;s=h.target[h.subset[c]],this._parent.getInstanceMirror(s).command===d.args[0]&&(s.refAnsGroup=a)}}for(n=this._ansZone.length,r=0;r<n;r++)if(!(a=this._ansZone[r])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.isShow=!1,a.parent.isShow=a.isShow,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerAnsZoneMousedownBind),C.default.notNull(a.EffectBase)&&C.default.applyMultiply(a.EffectBase),l=this.getCustomTag(a),o=this._ansZoneMirror[l].length;var g="AnsZoneR"===this._parent.getInstanceMirror(a).command;for(u=0;u<o;u++)s=this._ansZoneMirror[l][u],-1===this._pickList.indexOf(s)&&(s.refAnsZone=a,s.cursor="pointer",void 0===s.frameNormal&&(s.frameNormal=0),void 0===s.frameOver&&(s.frameOver=1),g&&(s.frameNormal=1,s.frameOver=0),s.gotoAndStop(s.frameNormal),s.addEventListener(this._mouseTriggerBehavior,this.triggerAnsMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase))}for(n=this._ans.length,r=0;r<n;r++)(a=this._ans[r])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",void 0===a.frameNormal&&(a.frameNormal=0),void 0===a.frameOver&&(a.frameOver=1),a.gotoAndStop(a.frameNormal),a.addEventListener(this._mouseTriggerBehavior,this.triggerAnsMousedownBind),C.default.notNull(a.EffectBase)&&C.default.applyMultiply(a.EffectBase));for(n=this._syncAns.length,r=0;r<n;r++)(a=this._syncAns[r])._isModuleInited||(a._replacePath=i,a._isModuleInited=!0,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerSyncAnsMousedownBind),C.default.notNull(a.EffectBase)&&C.default.applyMultiply(a.EffectBase));for(n=this._ansRefGroup.length,r=0;r<n;r++)if(!(a=this._ansRefGroup[r])._isModuleInited)for(a._replacePath=i,a._isModuleInited=!0,a.isShow=!1,a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerAnsRefMousedownBind),C.default.notNull(a.EffectBase)&&C.default.applyMultiply(a.EffectBase),l=this.getCustomTag(a),o=this._ansRefMirror[l].length,u=0;u<o;u++)s=this._ansRefMirror[l][u],C.default.notNull(s)&&(s.visible=!1);for(n=this._stepAns.length,r=0;r<n;r++)if(!(a=this._stepAns[r])._isModuleInited){a._replacePath=i,a._isModuleInited=!0,a.isShow=!1,a.parent.isShow=!1;for(var f=this._parent.getInstanceMirror(a),v=f.subset.length,m=0;m<v;m++){var b;s=a[f.subset[m]],"lastBtn"===this._parent.getInstanceMirror(s).command&&(s.cursor="pointer",s.addEventListener(this._mouseTriggerBehavior,this.triggerStepAnsFuncMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase))}if(s=a.prevBtn,C.default.notNull(s)&&(s.cursor="pointer",s.addEventListener(this._mouseTriggerBehavior,this.triggerStepAnsFuncMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase)),s=a.nextBtn,C.default.notNull(s)&&(s.cursor="pointer",s.addEventListener(this._mouseTriggerBehavior,this.triggerStepAnsFuncMousedownBind),C.default.notNull(s.EffectBase)&&C.default.applyMultiply(s.EffectBase)),a.stepIndex=0,s=f.parent[f.args[0]],C.default.notNull(s)){s.stepData=[],s.gotoAndStop(0);for(var y=s.labels.length,S=0;S<y;S++)s.stepData.push(s.labels[S].position);s.startStep=0,s.endStep=0}a._this=this,a.stepAnsRunningBind=a.stepAnsRunningBind||this.stepAnsRunning.bind(a),this.refreshStepAns(a)}for(n=this._animateAns.length,r=0;r<n;r++)if(!(a=this._animateAns[r])._isModuleInited){a._replacePath=i,a._isModuleInited=!0;var P=this._parent.getInstanceMirror(a);if(a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerAnimateAnsFuncMousedownBind),C.default.notNull(a.EffectBase)&&C.default.applyMultiply(a.EffectBase),a.stepIndex=0,s=P.parent[P.args[0]],C.default.notNull(s)){s.stepData=[],s.gotoAndStop(0);for(var M=s.labels.length,O=0;O<M;O++)s.stepData.push(s.labels[O].position);s.startStep=0,s.endStep=0,s._this=this,s.animateAnsRunningBind=s.animateAnsRunningBind||this.animateAnsRunning.bind(s)}this.refreshAnimateAns(a)}for(n=this._animateAnsSwitch.length,r=0;r<n;r++)if(!(a=this._animateAnsSwitch[r])._isModuleInited){a._replacePath=i,a._isModuleInited=!0;var B=this._parent.getInstanceMirror(a);if(a.cursor="pointer",a.addEventListener(this._mouseTriggerBehavior,this.triggerAnimateAnsSwitchFuncMousedownBind),C.default.notNull(a.EffectBase)&&C.default.applyMultiply(a.EffectBase),a.stepIndex=0,s=B.parent[B.args[0]],C.default.notNull(s)){s.stepData=[],s.gotoAndStop(0);for(var k=s.labels.length,x=0;x<k;x++)s.stepData.push(s.labels[x].position);s.startStep=0,s.endStep=0,s._this=this,s.animateAnsSwitchRunningBind=s.animateAnsSwitchRunningBind||this.animateAnsSwitchRunning.bind(s)}this.refreshAnimateAnsSwitch(a)}}},{key:"triggerAnsGroupMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();var i=t.currentTarget,n=this.getCustomTag(i),o=void 0,a=i.isShow;o=this._ansGroupMirrorControl2[n].length;for(var s=0;s<o;s++){var r=this._ansGroupMirrorControl2[n][s];if(C.default.notNull(r)){if(a)r.stepIndex=0;else{var u=this._parent.getInstanceMirror(r),l=u.parent[u.args[0]];C.default.notNull(l)&&(r.stepIndex=l.stepData.length)}r.isShow=a,r.parent.isShow=a,this.refreshStepAns(r),this.refreshAnsZoneStatus(r)}}o=this._ansGroupMirrorControl[n].length;for(var d=0;d<o;d++){var h=this._ansGroupMirrorControl[n][d];C.default.notNull(h)&&(h.isShow=a,h.parent.isShow=a,h.dispatchEvent(this._mouseTriggerBehavior),"mousedown"===this._mouseTriggerBehavior&&h.dispatchEvent("pressup"))}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerAnsZoneMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();C.default.notNull(t.stageX);for(var i=t.currentTarget,n=this.getCustomTag(i),o=this._ansZoneMirror[n].length,a=0;a<o;a++){var s=this._ansZoneMirror[n][a];C.default.notNull(s)&&(i.isShow?s.gotoAndStop(s.frameNormal):s.gotoAndStop(s.frameOver))}var r=this._parent.getInstanceMirror(i);if(i.isShow=!i.isShow,i.parent.isShow=i.isShow,C.default.notNull(r.args[1]))for(var u=this._ansZone.length,l=0;l<u;l++){var d=this._ansZone[l],h=this._parent.getInstanceMirror(d);if(d!==i&&h.args[1]===r.args[1]){d.isShow=i.isShow,d.parent.isShow=i.isShow;for(var p=this.getCustomTag(d),c=this._ansZoneMirror[p].length,_=0;_<c;_++){var g=this._ansZoneMirror[p][_];C.default.notNull(g)&&(d.isShow?g.gotoAndStop(g.frameOver):g.gotoAndStop(g.frameNormal))}}}this.refreshAnsZoneStatus(i),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSyncAnsMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();C.default.notNull(t.stageX);for(var i=t.currentTarget,n=this.getCustomTag(i),o=this._syncAnsMirror[n].length,a=0,s=0;s<o;s++){var r=this._syncAnsMirror[n][s];C.default.notNull(r)&&r.currentFrame===r.frameOver&&(a+=1)}var u=!0;a===o&&(u=!1);for(var l=0;l<o;l++){var d=this._syncAnsMirror[n][l];C.default.notNull(d)&&(u?d.gotoAndStop(d.frameOver):d.gotoAndStop(d.frameNormal),C.default.notNull(d.refAnsZone)&&this.refreshAnsStatus(d.refAnsZone))}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"refreshAnsZoneStatus",value:function e(t){var i,n=this._parent.getInstanceMirror(t).parent,o=n.refAnsGroup;if(!C.default.isNull(o)){var a=this._parent.getInstanceMirror(n),s=this._parent.getInstanceMirror(o),r=s.parent;if(!C.default.isNull(r)){for(var u=this._parent.getInstanceMirror(r),l=u.subset.length,d=0,h=0,p=0;p<l;p++){var c=r[u.subset[p]],_;this._parent.getInstanceMirror(c).command===s.args[0]&&(h++,c.isShow&&d++)}0===d?o.isShow=!1:d===h&&(o.isShow=!0)}}}},{key:"triggerAnsMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();var i=t.currentTarget;i.currentFrame===i.frameNormal?i.gotoAndStop(i.frameOver):i.gotoAndStop(i.frameNormal),C.default.notNull(i.refAnsZone)&&this.refreshAnsStatus(i.refAnsZone),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"refreshAnsStatus",value:function e(t){for(var i=this._parent.getInstanceMirror(t),n=i.parent,o=this._parent.getInstanceMirror(n),a=o.subset.length,s=0,r=0,u=0;u<a;u++)for(var l=n[o.subset[u]],d=this._parent.getInstanceMirror(l),h=i.args[0].split("SS"),p=h.length,c=0;c<p;c++)d.command===h[c]&&(r++,l.currentFrame===l.frameOver&&s++);if(0===s?t.isShow=!1:s===r&&(t.isShow=!0),t.parent.isShow=t.isShow,C.default.notNull(i.args[1]))for(var _=this._ansZone.length,g=0;g<_;g++){var f=this._ansZone[g],v=this._parent.getInstanceMirror(f);if(f!==t&&v.args[1]===i.args[1]){f.isShow=t.isShow,f.parent.isShow=t.isShow;for(var m=this.getCustomTag(f),b=this._ansZoneMirror[m].length,y=0;y<b;y++){var S=this._ansZoneMirror[m][y];C.default.notNull(S)&&(f.isShow?S.gotoAndStop(1):S.gotoAndStop(0))}}}this.refreshAnsZoneStatus(t)}},{key:"triggerAnsRefMousedown",value:function e(t){if(!this._isEnable)return this.triggerAnsZoneDisableEvent(),t.stopPropagation(),void t.stopImmediatePropagation();for(var i=t.currentTarget,n=this.getCustomTag(i),o=this._ansRefMirror[n].length,a=0;a<o;a++){var s=this._ansRefMirror[n][a];C.default.notNull(s)&&(i.isShow?s.visible=!1:s.visible=!0)}i.isShow=!i.isShow,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerStepAnsFuncMousedown",value:function e(t){var i=t.currentTarget,n=i.parent,o=this._parent.getInstanceMirror(i),a=this._parent.getInstanceMirror(n),s=a.parent[a.args[0]];switch(o.command){case"lastBtn":n.toEnd?n.stepIndex=s.stepData.length:n.stepIndex=0,this.refreshStepAns(n);break;case"prevBtn":0<=n.stepIndex-1&&(n.stepIndex--,this.refreshStepAns(n));break;case"nextBtn":n.stepIndex+1<s.stepData.length&&(n.stepIndex++,this.refreshStepAns(n));break;default:"lastBtn"===o.command&&(n.toEnd?n.stepIndex=s.stepData.length:n.stepIndex=0,this.refreshStepAns(n))}this.refreshAnsZoneStatus(n)}},{key:"refreshStepAns",value:function e(t){clearTimeout(t.timeout);var i=this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!C.default.isNull(n)){0===t.stepIndex?(t.toEnd=!0,t.isShow=!1,t.parent.isShow=!1):t.stepIndex>=n.stepData.length-1&&(t.toEnd=!1,t.isShow=!0,t.parent.isShow=!0);var o=void 0;if(o=t.prevBtn,C.default.notNull(o)&&(0===t.stepIndex?(o.visible=!1,t.isShow=!1,t.parent.isShow=!1):o.visible=!0),o=t.nextBtn,C.default.notNull(o)&&(0===t.stepIndex?o.visible=!1:o.visible=!0,t.stepIndex<n.stepData.length-1?o.visible=!0:(o.visible=!1,t.isShow=!0,t.parent.isShow=!0)),t.stepIndex===n.stepData.length)return t.stepIndex-=1,n.gotoAndStop(n.totalFrames-1),n.startStep=n.totalFrames-1,void(n.endStep=n.totalFrames-1);n.gotoAndStop(n.stepData[t.stepIndex]),n.startStep=n.stepData[t.stepIndex],n.endStep=n.stepData[t.stepIndex+1]||n.totalFrames,n.endStep--;var a=Math.floor(1e3/this._parent.lib.properties.fps);n.startStep<n.endStep?t.timeout=setTimeout(t.stepAnsRunningBind,a):n.endStep=n.startStep}}},{key:"stepAnsRunning",value:function e(){var t=this,i=this._this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!(n.currentFrame<n.endStep))return n.gotoAndStop(n.currentFrame),clearTimeout(t.timeout),void(t.timeout=null);n.gotoAndStop(n.currentFrame+1);var o=Math.floor(1e3/this._this._parent.lib.properties.fps);t.timeout=setTimeout(t.stepAnsRunningBind,o)}},{key:"triggerAnimateAnsFuncMousedown",value:function e(t){var i=t.currentTarget,n=i.parent,o=this._parent.getInstanceMirror(i),a=this._parent.getInstanceMirror(n),s=o.parent[o.args[0]];i.stepIndex=Number(o.args[1]),this.refreshAnimateAns(i)}},{key:"refreshAnimateAns",value:function e(t){var i=this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!C.default.isNull(n)){clearTimeout(n.timeout),n.gotoAndStop(n.stepData[t.stepIndex]),n.startStep=n.stepData[t.stepIndex],n.endStep=n.stepData[t.stepIndex+1]||n.totalFrames,n.endStep--,n._target=t;var o=Math.floor(1e3/this._parent.lib.properties.fps);n.startStep<n.endStep?n.timeout=setTimeout(n.animateAnsRunningBind,o):n.endStep=n.startStep}}},{key:"animateAnsRunning",value:function e(){var t=this._target,i=this._this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!(n.currentFrame<n.endStep))return n.gotoAndStop(n.currentFrame),clearTimeout(n.timeout),void(n.timeout=null);n.gotoAndStop(n.currentFrame+1);var o=Math.floor(1e3/this._this._parent.lib.properties.fps);n.timeout=setTimeout(n.animateAnsRunningBind,o)}},{key:"triggerAnimateAnsSwitchFuncMousedown",value:function e(t){var i=t.currentTarget,n=i.parent,o=this._parent.getInstanceMirror(i),a=this._parent.getInstanceMirror(n),s=o.parent[o.args[0]];i.stepIndex=Number(o.args[1]),this.refreshAnimateAnsSwitch(i)}},{key:"refreshAnimateAnsSwitch",value:function e(t){var i=this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!C.default.isNull(n)){if(clearTimeout(n.timeout),C.default.notNull(n.timeout)){var o=n.stepData[t.stepIndex]-1;return o<0&&(o=0),n.gotoAndStop(0),void(n.timeout=null)}n.gotoAndStop(n.stepData[t.stepIndex]),n.startStep=n.stepData[t.stepIndex],n.endStep=n.stepData[t.stepIndex+1]||n.totalFrames,n.endStep--,n._target=t;var a=Math.floor(1e3/this._parent.lib.properties.fps);n.startStep<n.endStep?n.timeout=setTimeout(n.animateAnsSwitchRunningBind,a):n.endStep=n.startStep}}},{key:"animateAnsSwitchRunning",value:function e(){var t=this._target,i=this._this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!(n.currentFrame<n.endStep))return n.gotoAndStop(n.currentFrame),void clearTimeout(n.timeout);n.gotoAndStop(n.currentFrame+1);var o=Math.floor(1e3/this._this._parent.lib.properties.fps);n.timeout=setTimeout(n.animateAnsSwitchRunningBind,o)}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._ansGroup=[],this._ansGroupMirror={},this._ansGroupMirrorControl={},this._ansGroupMirrorControl2={},this._ansZone=[],this._ansZoneMirror={},this._syncAns=[],this._syncAnsMirror={},this._ans=[],this._ansRefGroup=[],this._ansRefMirror=[],this._stepAns=[],this._animateAns=[],this._animateAnsSwitch=[],this._seq=999,this._isEnable=!0,this._disableAlpha=.2,this._isEcho=!1}t.ModuleAnsZone=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModulePlaySwitchSound=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,c=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["PlayPause","PlayStop","PlayNoPause"],l=!1,d=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._playPause.length;for(i=0;i<n;i++)(t=this._playPause[i]).gotoAndStop(0);for(n=this._playNoPause.length,i=0;i<n;i++)(t=this._playNoPause[i]).gotoAndStop(0);c.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),c.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0;for(t=this._playStop.length,n=0;n<t;n++)(i=this._playStop[n]).gotoAndStop(0);for(t=this._playPause.length,n=0;n<t;n++)(i=this._playPause[n]).gotoAndStop(0);for(t=this._playNoPause.length,n=0;n<t;n++)(i=this._playNoPause[n]).gotoAndStop(0);c.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),c.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"isForceUseCreateJSAudio",value:function e(t){this._forceUseCreateJSAudio=t}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;t._pageUI=!0,t._seq=this._seq,this._seq++,this._pickList.push(t);var n=void 0;switch(i.command){case"PlayStop":n=this.getCustomTag(t),this._playStop.push(t),this._playStopMirror[n]=this.pickRelation(i.parent,i.command,t);break;case"PlayNoPause":n=this.getCustomTag(t),this._playNoPause.push(t),this._playNoPauseMirror[n]=this.pickRelation(i.parent,i.command,t);break;case"PlayPause":n=this.getCustomTag(t),this._playPause.push(t),this._playPauseMirror[t]=this.pickRelation(i.parent,i.command,t)}}}},{key:"getCustomTag",value:function e(t){return c.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i,n){for(var o=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,r=0;r<s;r++){var u=this._parent.getInstanceMirror(a.target[a.subset[r]]),l=a.target[a.subset[r]];u.command===i&&l!==n&&o.push(l)}return o}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=void 0;for(this.triggerBtnPlayStopMousedownBind=this.triggerBtnPlayStopMousedownBind||this.triggerBtnPlayStopMousedown.bind(this),this.triggerBtnPlayPauseMousedownBind=this.triggerBtnPlayPauseMousedownBind||this.triggerBtnPlayPauseMousedown.bind(this),this.triggerBtnPlayNoPauseMousedownBind=this.triggerBtnPlayNoPauseMousedownBind||this.triggerBtnPlayNoPauseMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerStopSoundCompleteBind=this.triggerStopSoundCompleteBind||this.triggerStopSoundComplete.bind(this),this.triggerPauseSoundCompleteBind=this.triggerPauseSoundCompleteBind||this.triggerPauseSoundComplete.bind(this),this.triggerNoPauseSoundCompleteBind=this.triggerNoPauseSoundCompleteBind||this.triggerNoPauseSoundComplete.bind(this),n=this._playStop.length,a=0;a<n;a++)(o=this._playStop[a])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerBtnPlayStopMousedownBind),c.default.notNull(o.EffectBase)&&c.default.applyMultiply(o.EffectBase));for(n=this._playPause.length,a=0;a<n;a++)(o=this._playPause[a])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerBtnPlayPauseMousedownBind),c.default.notNull(o.EffectBase)&&c.default.applyMultiply(o.EffectBase));for(n=this._playNoPause.length,a=0;a<n;a++)(o=this._playNoPause[a])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerBtnPlayNoPauseMousedownBind),c.default.notNull(o.EffectBase)&&c.default.applyMultiply(o.EffectBase))}},{key:"triggerBtnPlayStopMousedown",value:function e(t){var i=t.currentTarget;if(this._parent.stop(null,!0),1===i.currentFrame)return i.gotoAndStop(0),t.stopPropagation(),void t.stopImmediatePropagation();for(var n=this.getCustomTag(i),o=this._playStopMirror[n].length,a=0;a<o;a++){var s;this._playStopMirror[n][a].gotoAndStop(0)}i.gotoAndStop(1);var r=this._parent.getInstanceMirror(i),u=i.nominalBounds,l={x:i.x+u.x*i.scale,y:i.y+u.y*i.scale},d=i.parent.localToGlobal(l.x,l.y),h=this._parent.exportRoot.globalToLocal(d.x,d.y),p=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:r.args[0],path:p,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerStopSoundCompleteBind,autoPlay:!0,locX:h.x,locY:h.y,excludeTags:null,command:r.command,target:i},this._parent.iosMode||this._forceUseCreateJSAudio?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnPlayPauseMousedown",value:function e(t){var i=t.currentTarget;if(c.default.notNull(this._parent.soundChannel)&&c.default.notNull(this._parent.soundObj)&&this._parent.soundObj.target===i)return 1===i.currentFrame?(this._parent.soundChannel.paused=!0,i.gotoAndStop(0)):(this._parent.soundChannel.paused=!1,i.gotoAndStop(1)),t.stopPropagation(),void t.stopImmediatePropagation();this._parent.stop(null,!0),i.gotoAndStop(1);var n=this._parent.getInstanceMirror(i),o=i.nominalBounds,a={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},s=i.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerPauseSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i},this._parent.iosMode||this._forceUseCreateJSAudio?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnPlayNoPauseMousedown",value:function e(t){var i=t.currentTarget;if(1===i.currentFrame)return this._parent.soundChannel.paused=!0,i.gotoAndStop(0),t.stopPropagation(),void t.stopImmediatePropagation();this._parent.stop(null,!0),i.gotoAndStop(1);var n=this._parent.getInstanceMirror(i),o=i.nominalBounds,a={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},s=i.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerNoPauseSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i},this._parent.iosMode||this._forceUseCreateJSAudio?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(c.default.isNull(this._parent.soundObj)||c.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)c.default.notNull(i)&&i.stop();else switch(n){case"fileload":c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this._parent.soundObj.target.gotoAndStop(0),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc)}}},{key:"triggerSoundWatch",value:function e(t){}},{key:"triggerPauseSoundComplete",value:function e(t){this._parent.soundObj.target.gotoAndStop(0),this.stop(),this._parent.clearSoundChannel()}},{key:"triggerNoPauseSoundComplete",value:function e(t){this._parent.soundObj.target.gotoAndStop(0),this.stop(),this._parent.clearSoundChannel()}},{key:"triggerStopSoundComplete",value:function e(t){this.stop(),this._parent.clearSoundChannel()}}]),h);function h(e){r(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._playStop=[],this._playPause=[],this._playNoPause=[],this._playStopMirror={},this._playNoPauseMirror={},this._playPauseMirror={},this._forceUseCreateJSAudio=!1,this._prevTime=-1,this._seq=999}t.ModulePlaySwitchSound=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleListPop=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,k=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["List","Close"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._listGroup.length;for(i=0;i<n;i++){t=this._listGroup[i];var o=this._parent.getInstanceMirror(t),a=o.parent[o.args[0]];if(k.default.notNull(a)){a.visible=!1;for(var s=this._parent.getInstanceMirror(a),r=s.subset.length,u=0,l=[],d=0;d<r;d++){var h=a[s.subset[d]],p=this._parent.getInstanceMirror(h);"Close"!==p.command&&"StopTouch"!==p.command&&(k.default.isNull(h._orgXY)&&(h.setTransform(h.x-h.regX*h.scaleX,h.y-h.regY*h.scaleY,h.scaleX,h.scaleY),h._orgXY={x:h.x,y:h.y}),l.push({target:h,y:h._orgXY.y,diff:0})),h.visible&&"Close"!==p.command&&"StopTouch"!==p.command&&u++}for(var c=l.sort(function(e,t){return e.y>t.y?1:-1}),_=0,g=c.length,f=1;f<g;f++){var v=c[f].target,m=c[f-1].target,b=m._orgXY.y+m.nominalBounds.height*m.scaleY,y=v._orgXY.y-b;c[f].diff=y}for(var S=null,P=_=0;P<g;P++){var M=c[P].target,O=this._parent.getInstanceMirror(M);if(M.visible&&"Close"!==O.command&&"StopTouch"!==O.command){if(M.y=c[_].y,k.default.isNull(S))M.y=c[_].y;else{var B=S.target.nominalBounds.height*S.target.scaleY;M.y=S.target.y+B+c[_].diff}_++,S=c[P]}}t.visible=0!==u}}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"List":n=this.getCustomTag(t),this._listGroup.push(t),this._listGroupControlMirror[n]=this.pickRelation(i.parent,i.command,t);break;case"Close":n=this.getCustomTag(t),this._closeGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return k.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i,n){for(var o=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,r=0;r<s;r++){var u=this._parent.getInstanceMirror(a.target[a.subset[r]]),l=a.target[a.subset[r]];if(u.command===i&&l!==n){var d=this._parent.getInstanceMirror(l);o.push(d.parent[d.args[0]])}}return o}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=void 0;for(this.triggerBtnListMousedownBind=this.triggerBtnListMousedownBind||this.triggerBtnListMousedown.bind(this),this.triggerBtnCloseMousedownBind=this.triggerBtnCloseMousedownBind||this.triggerBtnCloseMousedown.bind(this),n=this._listGroup.length,a=0;a<n;a++)if(!(o=this._listGroup[a])._isModuleInited){o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer";var s=this._parent.getInstanceMirror(o),r=s.parent[s.args[0]];k.default.notNull(r)&&(r.isListPop=!0,r.visible=!1,k.default.isNull(r._orgXY)&&(r._orgXY={x:r.x,y:r.y})),o.addEventListener(this._mouseTriggerBehavior,this.triggerBtnListMousedownBind),k.default.notNull(o.EffectBase)&&k.default.applyMultiply(o.EffectBase)}for(n=this._closeGroup.length,a=0;a<n;a++)(o=this._closeGroup[a])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerBtnCloseMousedownBind),k.default.notNull(o.EffectBase)&&k.default.applyMultiply(o.EffectBase))}},{key:"triggerBtnListMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]];k.default.isNull(i._orgXY)&&(i.setTransform(i.x-i.regX*i.scaleX,i.y-i.regY*i.scaleY,i.scaleX,i.scaleY),i._orgXY={x:i.x,y:i.y});var a=i.y-i._orgXY.y;0!=a&&(o.y=o._orgXY.y+a),k.default.notNull(o)&&(o.visible=!o.visible);for(var s=this.getCustomTag(i),r=this._listGroupControlMirror[s].length,u=0;u<r;u++)this._listGroupControlMirror[s][u].visible=!1;t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnCloseMousedown",value:function e(t){var i=t.currentTarget,n;this._parent.getInstanceMirror(i).parent.visible=!1,t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._listGroup=[],this._listGroupControlMirror={},this._closeGroup=[],this._seq=999}t.ModuleListPop=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleSwitchPop=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,h=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["Switch","ReverseSwitch"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0;for(n=this._switchGroup.length,i=0;i<n;i++){(t=this._switchGroup[i]).visible=!this._parent.actWinNavHide,t.gotoAndStop(0);var o=this._parent.getInstanceMirror(t),a=o.parent[o.args[0]];h.default.notNull(a)&&(a.visible=!1)}for(n=this._reverseSwitchGroup.length,i=0;i<n;i++){(t=this._reverseSwitchGroup[i]).visible=!this._parent.actWinNavHide,t.gotoAndStop(0);var s=this._parent.getInstanceMirror(t),r=s.parent[s.args[0]];h.default.notNull(r)&&(this._parent.actWinNavHide?r.visible=!1:r.visible=!0)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"Switch":n=this.getCustomTag(t),this._switchGroup.push(t);break;case"ReverseSwitch":n=this.getCustomTag(t),this._reverseSwitchGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return h.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=void 0;for(this.triggerSwitchMousedownBind=this.triggerSwitchMousedownBind||this.triggerSwitchMousedown.bind(this),this.triggerReverseSwitchMousedownBind=this.triggerReverseSwitchMousedownBind||this.triggerReverseSwitchMousedown.bind(this),a=this._switchGroup.length,o=0;o<a;o++)if(!(n=this._switchGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var s=this._parent.getInstanceMirror(n),r=s.parent[s.args[0]];h.default.notNull(r)&&(r.visible=!1),n.addEventListener(this._mouseTriggerBehavior,this.triggerSwitchMousedownBind),h.default.notNull(n.EffectBase)&&h.default.applyMultiply(n.EffectBase)}for(a=this._reverseSwitchGroup.length,o=0;o<a;o++)if(!(n=this._reverseSwitchGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var u=this._parent.getInstanceMirror(n),l=u.parent[u.args[0]];h.default.notNull(l)&&(l.visible=!0),n.addEventListener(this._mouseTriggerBehavior,this.triggerReverseSwitchMousedownBind),h.default.notNull(n.EffectBase)&&h.default.applyMultiply(n.EffectBase)}}},{key:"triggerSwitchMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]];0===i.currentFrame?i.gotoAndStop(1):i.gotoAndStop(0),h.default.notNull(o)&&(o.visible=!o.visible),this.processToggleBehavior(i),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerReverseSwitchMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]];0===i.currentFrame?i.gotoAndStop(1):i.gotoAndStop(0),h.default.notNull(o)&&(o.visible=!o.visible),this.processToggleBehavior(i),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"processToggleBehavior",value:function e(t){var i=this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(h.default.notNull(i.args[1])&&n.visible){var o=void 0,a=void 0,s=void 0;for(s=this._switchGroup.length,a=0;a<s;a++)if((o=this._switchGroup[a])!==t){var r=this._parent.getInstanceMirror(o),u=r.parent[r.args[0]];h.default.notNull(r.args[1])&&r.args[1]===i.args[1]&&u.visible&&(o.gotoAndStop(0),h.default.notNull(u)&&(u.visible=!1))}for(s=this._reverseSwitchGroup.length,a=0;a<s;a++)if((o=this._reverseSwitchGroup[a])!==t){var l=this._parent.getInstanceMirror(o),d=l.parent[l.args[0]];h.default.notNull(l.args[1])&&l.args[1]===i.args[1]&&d.visible&&(o.gotoAndStop(0),h.default.notNull(d)&&(d.visible=!1))}}}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._switchGroup=[],this._reverseSwitchGroup=[],this._seq=999}t.ModuleSwitchPop=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleStopTouch=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,s=r(i(0));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=["StopTouch"],d=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init()}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==l.indexOf(i.command)){if(this._pickList.includes(t))return;t._pageUI=!0,this._pickList.push(t)}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=this._pickList.length,o=void 0;this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this);for(var a=0;a<n;a++)(o=this._pickList[a])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor=null,o.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),s.default.notNull(o.EffectBase)&&s.default.applyMultiply(o.EffectBase))}},{key:"triggerMousedown",value:function e(t){t.stopPropagation(),t.stopImmediatePropagation()}}]),h);function h(e){u(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList}t.ModuleStopTouch=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleDragListPop=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,j=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["DragList","DragMainMenuList"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),j.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1)}},{key:"reset",value:function e(){this.isInited||this.init(),j.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=void 0;for(n=this._dragListGroup.length,i=0;i<n;i++){(t=this._dragListGroup[i]).addEventListener("click",this.triggerBtnDragListClickBind);var o=this._parent.getInstanceMirror(t),a=o.parent[o.args[0]];if(j.default.notNull(a)){a.visible=!1;for(var s=this._parent.getInstanceMirror(a),r=s.subset.length,u=0,l=0;l<r;l++){var d=a[s.subset[l]],h=this._parent.getInstanceMirror(d);d.visible&&"Close"!==h.command&&u++}t.visible=0!==u}}for(n=this._dragMainMenuListGroup.length,i=0;i<n;i++){(t=this._dragMainMenuListGroup[i]).addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),t.addEventListener("click",this.triggerBtnDragMainMenuListClickBind),t.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),t.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind);var p=this._parent.getInstanceMirror(t),c=p.parent[p.args[0]];if(j.default.notNull(c)){c.visible=!1;for(var _=this._parent.getInstanceMirror(c),g=_.subset.length,f=0,v=[],m=0;m<g;m++){var b=c[_.subset[m]],y=this._parent.getInstanceMirror(b);"Close"!==y.command&&(j.default.isNull(b._orgXY)&&(b.setTransform(b.x-b.regX*b.scaleX,b.y-b.regY*b.scaleY,b.scaleX,b.scaleY),b._orgXY={x:b.x,y:b.y}),v.push({target:b,y:b._orgXY.y,diff:0})),"List"===y.command&&(c[y.args[0]].visible=!1),b.visible&&"Close"!==y.command&&f++}for(var S=v.sort(function(e,t){return e.y>t.y?1:-1}),P=0,M=S.length,O=1;O<M;O++){var B=S[O].target,k=S[O-1].target,x=k._orgXY.y+k.nominalBounds.height*k.scaleY,C=B._orgXY.y-x;S[O].diff=C}for(var w=null,T=P=0;T<M;T++){var L=S[T].target,N=this._parent.getInstanceMirror(L);if(L.visible&&"Close"!==N.command){if(L.y=S[P].y,j.default.isNull(w))L.y=S[P].y;else{var I=w.target.nominalBounds.height*w.target.scaleY;L.y=w.target.y+I+S[P].diff}P++,w=S[T]}}t.parent.visible=0!==f}t.visible=!0,p.parent.btnFixed.visible=!1,p.parent.btnNotFixed.visible=!0,p.parent.btnDisplay.visible=!1,p.parent.btnHide.visible=!0,p.parent.btnDisplay.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),p.parent.btnHide.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),p.parent.btnDisplay.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),p.parent.btnDisplay.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),p.parent.btnDisplay.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),p.parent.btnHide.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),p.parent.btnHide.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),p.parent.btnHide.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"DragList":n=this.getCustomTag(t),this._dragListGroup.push(t);break;case"DragMainMenuList":n=this.getCustomTag(t),this._dragMainMenuListGroup.push(t),this._dragMainMenuListGroupMirror[n]=this.pickRelation(i.parent,i.args[0])}}}},{key:"getCustomTag",value:function e(t){return j.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=void 0;for(this.triggerBtnDragListMousedownBind=this.triggerBtnDragListMousedownBind||this.triggerBtnDragListMousedown.bind(this),this.triggerBtnDragListClickBind=this.triggerBtnDragListClickBind||this.triggerBtnDragListClick.bind(this),this.triggerBtnDragListPressmoveBind=this.triggerBtnDragListPressmoveBind||this.triggerBtnDragListPressmove.bind(this),this.triggerBtnDragListPressupBind=this.triggerBtnDragListPressupBind||this.triggerBtnDragListPressup.bind(this),this.triggerBtnDragMainMenuListMousedownBind=this.triggerBtnDragMainMenuListMousedownBind||this.triggerBtnDragMainMenuListMousedown.bind(this),this.triggerBtnDragMainMenuListClickBind=this.triggerBtnDragMainMenuListClickBind||this.triggerBtnDragMainMenuListClick.bind(this),this.triggerBtnDragMainMenuListPressmoveBind=this.triggerBtnDragMainMenuListPressmoveBind||this.triggerBtnDragMainMenuListPressmove.bind(this),this.triggerBtnDragMainMenuListPressupBind=this.triggerBtnDragMainMenuListPressupBind||this.triggerBtnDragMainMenuListPressup.bind(this),this.triggerBtnDragMainMenuListFuncMousedownBind=this.triggerBtnDragMainMenuListFuncMousedownBind||this.triggerBtnDragMainMenuListFuncMousedown.bind(this),a=this._dragListGroup.length,o=0;o<a;o++)if(!(n=this._dragListGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var s=this._parent.getInstanceMirror(n);s.parent.orgX=s.parent.x,s.parent.orgY=s.parent.y;var r=s.parent[s.args[0]];j.default.notNull(r)&&(r.isListPop=!0,r.visible=!1),n.addEventListener("mousedown",this.triggerBtnDragListMousedownBind),n.addEventListener("click",this.triggerBtnDragListClickBind),n.addEventListener("pressmove",this.triggerBtnDragListPressmoveBind,j.default.supportPassive()),n.addEventListener("pressup",this.triggerBtnDragListPressupBind),j.default.notNull(n.EffectBase)&&j.default.applyMultiply(n.EffectBase)}for(a=this._dragMainMenuListGroup.length,o=0;o<a;o++)if(!(n=this._dragMainMenuListGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var u=this._parent.getInstanceMirror(n),l=u.parent[u.args[0]];if(u.parent.orgX=u.parent.x,u.parent.orgY=u.parent.y,j.default.notNull(l)){l.isListPop=!0,l.visible=!1;for(var d=this._parent.getInstanceMirror(l),h=d.subset.length,p=0;p<h;p++){var c=l[d.subset[p]],_=this._parent.getInstanceMirror(c);"List"===_.command&&(l[_.args[0]].visible=!1)}}n.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),n.addEventListener("click",this.triggerBtnDragMainMenuListClickBind),n.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),n.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),j.default.notNull(n.EffectBase)&&j.default.applyMultiply(n.EffectBase),n.visible=!0,u.parent.btnFixed.visible=!1,u.parent.btnNotFixed.visible=!0,u.parent.btnDisplay.visible=!1,u.parent.btnHide.visible=!0,u.parent.btnFixed.dragMainMenuList=n,u.parent.btnNotFixed.dragMainMenuList=n,u.parent.btnDisplay.dragMainMenuList=n,u.parent.btnHide.dragMainMenuList=n,u.parent.btnFixed.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),u.parent.btnNotFixed.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),u.parent.btnDisplay.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),u.parent.btnHide.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),u.parent.btnDisplay.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),u.parent.btnDisplay.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),u.parent.btnDisplay.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),u.parent.btnHide.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),u.parent.btnHide.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),u.parent.btnHide.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind)}}},{key:"triggerBtnDragListClick",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]];j.default.notNull(o)&&(o.visible=!o.visible),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListClick",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]];if(j.default.notNull(o)){o.visible=!o.visible;for(var a=this._parent.getInstanceMirror(o),s=a.subset.length,r=0;r<s;r++){var u=o[a.subset[r]],l=this._parent.getInstanceMirror(u);"List"===l.command&&(o[l.args[0]].visible=!1)}}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListFuncMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent,a=void 0,s=void 0;switch(n.command){case"btnFixed":o.btnFixed.visible=!1,o.btnNotFixed.visible=!0,i.dragMainMenuList.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),i.dragMainMenuList.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),i.dragMainMenuList.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),o.btnDisplay.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),o.btnDisplay.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),o.btnDisplay.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),o.btnHide.addEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),o.btnHide.addEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),o.btnHide.addEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind);break;case"btnNotFixed":o.btnFixed.visible=!0,o.btnNotFixed.visible=!1,i.dragMainMenuList.removeEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),i.dragMainMenuList.removeEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),i.dragMainMenuList.removeEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),o.btnDisplay.removeEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),o.btnDisplay.removeEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),o.btnDisplay.removeEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind),o.btnHide.removeEventListener("mousedown",this.triggerBtnDragMainMenuListMousedownBind),o.btnHide.removeEventListener("pressmove",this.triggerBtnDragMainMenuListPressmoveBind,j.default.supportPassive()),o.btnHide.removeEventListener("pressup",this.triggerBtnDragMainMenuListPressupBind);break;case"btnDisplay":if(o.btnHide.visible=!0,o.btnDisplay.visible=!1,s=(a=this._parent.getInstanceMirror(i.dragMainMenuList)).parent[a.args[0]],j.default.notNull(s)){s.visible=!1;for(var r=this._parent.getInstanceMirror(s),u=r.subset.length,l=0;l<u;l++){var d=s[r.subset[l]],h=this._parent.getInstanceMirror(d);"List"===h.command&&(s[h.args[0]].visible=!1)}}i.dragMainMenuList.visible=!0;break;case"btnHide":if(o.btnHide.visible=!1,o.btnDisplay.visible=!0,s=(a=this._parent.getInstanceMirror(i.dragMainMenuList)).parent[a.args[0]],j.default.notNull(s)){s.visible=!1;for(var p=this._parent.getInstanceMirror(s),c=p.subset.length,_=0;_<c;_++){var g=s[p.subset[_]],f=this._parent.getInstanceMirror(g);"List"===f.command&&(s[f.args[0]].visible=!1)}}i.dragMainMenuList.visible=!1}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.parent.globalToLocal(t.stageX,t.stageY);this.isCheckMove=!1,i.parent.fixX=i.parent.x-n.x,i.parent.fixY=i.parent.y-n.y,i.parent.startX=i.parent.x,i.parent.startY=i.parent.y,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget;i.parent.parent.setChildIndex(i.parent,i.parent.parent.getNumChildren()-1);var n=i.parent.parent.globalToLocal(t.stageX,t.stageY);i.parent.x=n.x+i.parent.fixX,i.parent.y=n.y+i.parent.fixY;var o=Math.abs(i.parent.x-i.parent.startX),a=Math.abs(i.parent.y-i.parent.startY),s;60<Math.sqrt(Math.pow(o,2)+Math.pow(a,2))&&i.removeEventListener("click",this.triggerBtnDragListClickBind),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListPressup",value:function e(t){var i;this._parent.setPressEventIsOn(!1),t.currentTarget.addEventListener("click",this.triggerBtnDragListClickBind),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.parent.globalToLocal(t.stageX,t.stageY);this.isCheckMove=!1,i.parent.fixX=i.parent.x-n.x,i.parent.fixY=i.parent.y-n.y,i.parent.startX=i.parent.x,i.parent.startY=i.parent.y,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget;i.parent.parent.setChildIndex(i.parent,i.parent.parent.getNumChildren()-1);var n=i.parent.parent.globalToLocal(t.stageX,t.stageY);i.parent.x=n.x+i.parent.fixX,i.parent.y=n.y+i.parent.fixY;var o=Math.abs(i.parent.x-i.parent.startX),a=Math.abs(i.parent.y-i.parent.startY),s,r;60<Math.sqrt(Math.pow(o,2)+Math.pow(a,2))&&("DragMainMenuList"===this._parent.getInstanceMirror(i).command?i.removeEventListener("click",this.triggerBtnDragMainMenuListClickBind):i.removeEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind)),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMainMenuListPressup",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n;"DragMainMenuList"===this._parent.getInstanceMirror(i).command?i.addEventListener("click",this.triggerBtnDragMainMenuListClickBind):i.addEventListener("click",this.triggerBtnDragMainMenuListFuncMousedownBind),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._parent=e,this._pickList,this._dragListGroup=[],this._dragMainMenuListGroup=[],this._dragMainMenuListGroupMirror={},this._seq=999}t.ModuleDragListPop=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModulePageActSoundMV=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,B=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["ActMV","ActVideo","AbortActMV","OnceActVideo"],l={ActMV:"mini-wait",ActVideo:"mini-wait",AbortActMV:"none",OnceActVideo:"none"},d=!1,h=!0,p=.5,c=(n(_,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();for(var t=!this._parent.stage.contains(this._parent.exportRoot),i=this._actMVGroup.length,n=void 0,o=void 0,a=0;a<i;a++){n=this._actMVGroup[a];var s=(o=this._parent.getInstanceMirror(n)).parent[o.args[0]];if(B.default.notNull(s)){s._changeFinalFrame?s.gotoAndStop(s._changeFinalFrame):s.gotoAndStop(0);var r=s;if(s.useGL&&B.default.notNull(r)){r.bitmapCache&&(r.uncache(),this._parent.stage.update());var u=r._maskBase;if(u){if(this._parent.stage.isWebGL){var l=r.scaleX/u.scaleX,d=r.scaleY/u.scaleY;r.cache(u.nominalBounds.x/l,u.nominalBounds.y/d,u.nominalBounds.width/l,u.nominalBounds.height/d,r._webGLCacheRectSize),r.useGL=!1}}else this._parent.stage.isWebGL;this._parent.stage.update()}s._abortZeroFrame?(s.visible=!1,s.bitmapCache&&(s.uncache(),this._parent.stage.update()),t&&s._maskBase&&s._maskBase.bitmapCache&&s._maskBase.uncache()):t?(s.bitmapCache&&(s.uncache(),this._parent.stage.update()),s._maskBase&&s._maskBase.bitmapCache&&s._maskBase.uncache()):s.bitmapCache&&(s.updateCache(),this._parent.stage.update())}}B.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),B.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc),B.default.notNull(this._parent.videoChannel)&&(B.default.notNull(this._parent.videoChannel.videoBitmap)&&(B.default.notNull(this._parent.videoChannel.videoBitmap.parent)&&this._parent.videoChannel.videoBitmap.parent.removeChild(this._parent.videoChannel.videoBitmap),this._parent.videoChannel.videoBitmap=null,this._parent.videoChannel.videoBuffer=null),this._parent.videoChannel.removeEventListener("complete",this._parent.videoObj.completeFunc)),B.default.notNull(this._parent.videoObj)&&(B.default.notNull(this._parent.videoObj.videoBase)&&(this._parent.videoObj.videoBase.visible=!1,this._parent.videoObj.videoBase._abortZeroFrame&&(this._parent.videoObj.videoBase.visible=!1),this._parent.videoObj.videoBase.bitmapCache&&(this._parent.videoObj.videoBase.uncache(),this._parent.stage.update())),this._parent.createjs.Ticker.removeEventListener("tick",this._parent.videoObj.watchFunc)),i=this._actVideoGroup.length;for(var h=0;h<i;h++){n=this._actVideoGroup[h];var p=(o=this._parent.getInstanceMirror(n)).parent[o.args[0]];B.default.notNull(p)&&t&&(p.bitmapCache&&(p.uncache(),this._parent.stage.update()),p._maskBase&&p._maskBase.bitmapCache&&p._maskBase.uncache())}i=this._onceActVideoGroup.length;for(var c=0;c<i;c++){n=this._onceActVideoGroup[c];var _=(o=this._parent.getInstanceMirror(n)).parent[o.args[0]];B.default.notNull(_)&&t&&(_.bitmapCache&&(_.uncache(),this._parent.stage.update()),_._maskBase&&_._maskBase.bitmapCache&&_._maskBase.uncache())}var g=this;this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),t||(this._timeout=setTimeout(function(){g._parent.stage.contains(g._parent.exportRoot)||g.stop()},100))}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ActMV":this._actMVGroup.push(t);break;case"AbortActMV":this._abortActMVGroup.push(t);break;case"ActVideo":this._actVideoGroup.push(t);break;case"OnceActVideo":this._onceActVideoGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerVideoMousedownBind=this.triggerVideoMousedownBind||this.triggerVideoMousedown.bind(this),this.triggerVideoWatchBind=this.triggerVideoWatchBind||this.triggerVideoWatch.bind(this),this.triggerVideoCompleteBind=this.triggerVideoCompleteBind||this.triggerVideoComplete.bind(this),this.triggerOnceVideoMousedownBind=this.triggerOnceVideoMousedownBind||this.triggerOnceVideoMousedown.bind(this),this.triggerOnceVideoWatchBind=this.triggerOnceVideoWatchBind||this.triggerOnceVideoWatch.bind(this),this.triggerOnceVideoCompleteBind=this.triggerOnceVideoCompleteBind||this.triggerOnceVideoComplete.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundMousedownBind=this.triggerSoundMousedownBind||this.triggerSoundMousedown.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerAbortSoundMousedownBind=this.triggerAbortSoundMousedownBind||this.triggerAbortSoundMousedown.bind(this),this.checkVideoPlayStatusBind=this.checkVideoPlayStatusBind||this.checkVideoPlayStatus.bind(this),this.checkOnceVideoPlayStatusBind=this.checkOnceVideoPlayStatusBind||this.checkOnceVideoPlayStatus.bind(this);var n=void 0;n=this._actMVGroup.length;for(var o=void 0,a=0;a<n;a++)if(!(o=this._actMVGroup[a])._isModuleInited){o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerSoundMousedownBind),B.default.notNull(o.EffectBase)&&B.default.applyMultiply(o.EffectBase);var s=this._parent.getInstanceMirror(o),r=s.parent[s.args[0]];if(B.default.notNull(r)){r._abortZeroFrame=!1,r._changeFinalFrame=0;var u=this._parent.getInstanceMirror(o);r._webGLCacheRectSize=r.scale?r.scale:.5,o._animateBase=r;var l=u.parent[u.args[0]+"_mask"];if(B.default.notNull(l)){if(u.parent.removeChild(l),l.cache(l.nominalBounds.x,l.nominalBounds.y,l.nominalBounds.width,l.nominalBounds.height,r._webGLCacheRectSize),r._maskBase=l,this._parent.stage.isWebGL&&(r.filters=[new createjs.AlphaMaskFilter(l.cacheCanvas)],!r._abortZeroFrame&&B.default.notNull(l))){var d=r.scaleX/l.scaleX,h=r.scaleY/l.scaleY;r.cache(l.nominalBounds.x/d,l.nominalBounds.y/h,l.nominalBounds.width/d,l.nominalBounds.height/h,r._webGLCacheRectSize),r.useGL=!1}}else this._parent.stage.isWebGL}}n=this._abortActMVGroup.length;for(var p=0;p<n;p++)if(!(o=this._abortActMVGroup[p])._isModuleInited){o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerAbortSoundMousedownBind),B.default.notNull(o.EffectBase)&&B.default.applyMultiply(o.EffectBase);var c=this._parent.getInstanceMirror(o),_=c.parent[c.args[0]];B.default.notNull(_)&&(o._animateBase=_,o._animateBase._playCompleteToEndFrame=!0,_._abortBtn=o)}n=this._actVideoGroup.length;for(var g=0;g<n;g++)if(!(o=this._actVideoGroup[g])._isModuleInited){o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerVideoMousedownBind),B.default.notNull(o.EffectBase)&&B.default.applyMultiply(o.EffectBase);var f=this._parent.getInstanceMirror(o),v=f.parent[f.args[0]];if(B.default.notNull(v)){v._abortZeroFrame=!0,v.visible=!1;var m=this._parent.getInstanceMirror(o);v._webGLCacheRectSize=v.scale?v.scale:.5,o._animateBase=v;var b=m.parent[m.args[0]+"_mask"];B.default.notNull(b)&&(m.parent.removeChild(b),b.cache(b.nominalBounds.x,b.nominalBounds.y,b.nominalBounds.width,b.nominalBounds.height,v._webGLCacheRectSize),v._maskBase=b,this._parent.stage.isWebGL&&(v.filters=[new createjs.AlphaMaskFilter(b.cacheCanvas)]))}}n=this._onceActVideoGroup.length;for(var y=0;y<n;y++)if(!(o=this._onceActVideoGroup[y])._isModuleInited){o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerOnceVideoMousedownBind),B.default.notNull(o.EffectBase)&&B.default.applyMultiply(o.EffectBase);var S=this._parent.getInstanceMirror(o),P=S.parent[S.args[0]];if(B.default.notNull(P)){P._abortZeroFrame=!0,P.visible=!1;var M=this._parent.getInstanceMirror(o);P._webGLCacheRectSize=P.scale?P.scale:.5,o._animateBase=P;var O=M.parent[M.args[0]+"_mask"];B.default.notNull(O)&&(M.parent.removeChild(O),O.cache(O.nominalBounds.x,O.nominalBounds.y,O.nominalBounds.width,O.nominalBounds.height,P._webGLCacheRectSize),P._maskBase=O,this._parent.stage.isWebGL&&(P.filters=[new createjs.AlphaMaskFilter(O.cacheCanvas)]))}}}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerAbortSoundMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.nominalBounds,a={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},s=i.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/",l=i._animateBase;if(B.default.notNull(l)){l.bitmapCache&&l.uncache(),2<=i.totalFrames?0===i.currentFrame?(l._changeFinalFrame=l.totalFrames-1,i.gotoAndStop(1)):(l._changeFinalFrame=0,i.gotoAndStop(0)):l._changeFinalFrame=l.totalFrames-1;var d=l._maskBase;if(l.gotoAndStop(l._changeFinalFrame),d){if(this._parent.stage.isWebGL){var h=l.scaleX/d.scaleX,p=l.scaleY/d.scaleY;l.cache(d.nominalBounds.x/h,d.nominalBounds.y/p,d.nominalBounds.width/h,d.nominalBounds.height/p,l._webGLCacheRectSize),l.useGL=!1}}else this._parent.stage.isWebGL&&(l.cache(l.nominalBounds.x,l.nominalBounds.y,l.nominalBounds.width,l.nominalBounds.height,l._webGLCacheRectSize),l.useGL=!1);this._parent.stage.update()}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSoundMousedown",value:function e(t){var i=t.currentTarget._animateBase,n=0;i&&i._changeFinalFrame&&0!==i._changeFinalFrame&&(n=i._changeFinalFrame,i._changeFinalFrame=0),this._parent.stop(null,!0),i&&(i._changeFinalFrame=n);var o=t.currentTarget,a=this._parent.getInstanceMirror(o),s=o.nominalBounds,r={x:o.x+s.x*o.scale,y:o.y+s.y*o.scale},u=o.parent.localToGlobal(r.x,r.y),l=this._parent.exportRoot.globalToLocal(u.x,u.y),d=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+o._replacePath+"sounds/":o._replacePath+"./sounds/",h=o._animateBase;if(B.default.notNull(h)){h._abortZeroFrame&&(h.visible=!1),h.bitmapCache&&h.uncache();var p=h._maskBase;if(p){if(this._parent.stage.isWebGL){var c=h.scaleX/p.scaleX,_=h.scaleY/p.scaleY;h.cache(p.nominalBounds.x/c,p.nominalBounds.y/_,p.nominalBounds.width/c,p.nominalBounds.height/_,h._webGLCacheRectSize,{useGL:"stage"}),h.useGL=!0}}else this._parent.stage.isWebGL;this._parent.stage.update()}this._parent.soundObj={id:a.args[1],path:d,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:l.x,locY:l.y,excludeTags:null,command:a.command,target:o};var g=this.checkCommandMode(a.command);this._parent.iosMode&&"none"===g?B.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):B.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(B.default.isNull(this._parent.soundObj)||B.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)B.default.notNull(i)&&i.stop();else switch(n){case"fileload":B.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var o=this.checkCommandMode(this._parent.soundObj.command);"none"!==o&&this._parent.openSoundPlayBar(o,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){if(B.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration,o=this._prevTime;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.lib.properties.fps,s=Math.round(i/1e3*a),r=this._parent.soundObj.target,u=this._parent.getInstanceMirror(r),l=u.parent[u.args[0]];if(B.default.notNull(l)){var d=l.totalFrames;l._playCompleteToEndFrame&&s===d&&(l._changeFinalFrame=l.totalFrames-1),l._playCompleteToEndFrame&&0!==l._changeFinalFrame&&0===s&&this._parent.soundChannel.paused&&(s=l._changeFinalFrame,B.default.notNull(l._abortBtn)&&2<=l._abortBtn.totalFrames&&l._abortBtn.gotoAndStop(1)),s<d&&(l.gotoAndStop(s),l.bitmapCache?(l.visible||l._abortZeroFrame&&0<s&&(l.visible=!0),l.updateCache(),this._parent.stage.update()):l.visible||l._abortZeroFrame&&0<s&&(l.visible=!0))}}}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=void 0,o=void 0;B.default.notNull(i)&&(o=(n=this._parent.getInstanceMirror(i)).parent[n.args[0]]);var a=this.checkCommandMode(this._parent.soundObj.command);if("mini-close"===a||"normal-close"===a||"ex-normal-close"===a||"none"===a)this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel();else if(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===a?B.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):B.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),B.default.notNull(o)){o._playCompleteToEndFrame&&(o._changeFinalFrame=o.totalFrames-1,o._playedEndFinish=!0);var s=o._maskBase;if(o.bitmapCache){if(B.default.notNull(o))if(o.bitmapCache&&o.uncache(),o._changeFinalFrame?o.gotoAndStop(o._changeFinalFrame):o.gotoAndStop(0),s){if(this._parent.stage.isWebGL){var r=o.scaleX/s.scaleX,u=o.scaleY/s.scaleY;o.cache(s.nominalBounds.x/r,s.nominalBounds.y/u,s.nominalBounds.width/r,s.nominalBounds.height/u,o._webGLCacheRectSize),o.useGL=!1}}else this._parent.stage.isWebGL&&(o.cache(o.nominalBounds.x,o.nominalBounds.y,o.nominalBounds.width,o.nominalBounds.height,o._webGLCacheRectSize),o.useGL=!1);this._parent.stage.update()}o._abortZeroFrame&&(o.visible=!1)}}},{key:"triggerVideoMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]],a=i._animateBase;if(B.default.notNull(a)){a._abortZeroFrame&&(a.visible=!1),a.bitmapCache&&a.uncache();var s=a._maskBase;if(s){if(this._parent.stage.isWebGL){var r=a.scaleX/s.scaleX,u=a.scaleY/s.scaleY;a.cache(s.nominalBounds.x/r,s.nominalBounds.y/u,s.nominalBounds.width/r,s.nominalBounds.height/u,a._webGLCacheRectSize,{useGL:"stage"}),a.useGL=!0}}else this._parent.stage.isWebGL;this._parent.stage.update()}null!==this._parent.assetVideoPath&&""!==this._parent.assetVideoPath||(this._parent.assetVideoPath=this._parent.assetSoundPath),null!==this._parent.pageVideoPath&&""!==this._parent.pageVideoPath||(this._parent.pageVideoPath=this._parent.pageSoundPath);var l=i.nominalBounds,d={x:i.x+l.x*i.scale,y:i.y+l.y*i.scale},h=i.parent.localToGlobal(d.x,d.y),p=this._parent.exportRoot.globalToLocal(h.x,h.y),c=this._parent.assetVideoPath?this._parent.assetVideoPath:this._parent.pageVideoPath?this._parent.pageVideoPath+i._replacePath+"videos/":i._replacePath+"./videos/",_=navigator.platform.match(/iPhone|iPod|iPad|Mac/)?15:0;this._parent.videoObj={id:n.args[1],path:c,loop:0,offset:_,volume:this._parent.volume,callback:this.checkVideoPlayStatusBind,watchFunc:this.triggerVideoWatchBind,completeFunc:this.triggerVideoCompleteBind,autoPlay:!0,locX:p.x,locY:p.y,excludeTags:null,command:n.command,target:i,videoBase:o},B.default.playWebVideo(this._parent.createjs,this._parent.videoObj.path,this._parent.videoObj.id,this._parent.videoObj.loop,this._parent.videoObj.offset,this._parent.videoObj.volume,this._parent.videoObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkVideoPlayStatus",value:function e(t,i,n){if(B.default.isNull(this._parent.videoObj)||B.default.notNull(this._parent.videoObj)&&this._parent.videoObj.id!==t)B.default.notNull(i)&&i.stop();else switch(n){case"fileload":break;case"fileerror":this.stop(),this._parent.videoObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.videoChannel=i,this._parent.videoChannel.video.muted=!0,this._parent.videoChannel.paused=!this._parent.videoObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.videoObj.watchFunc),this._parent.videoChannel.addEventListener("complete",this._parent.videoObj.completeFunc);var o=this.checkCommandMode(this._parent.videoObj.command);"none"!==o&&this._parent.openVideoPlayBar(o,this._parent.videoObj)}}},{key:"triggerVideoWatch",value:function e(t){if(B.default.notNull(this._parent.videoChannel)&&B.default.notNull(this._parent.videoObj))if(B.default.isNull(this._parent.videoChannel.videoBitmap))if(this._parent.stage.isWebGL){var i=function e(){o._video.currentTime!==u||o._video.currentTime===u&&3===l?(o._video.currentTime!==u?l=0:l<Number.MAX_VALUE&&l++,u=o._video.currentTime,a.image._invalid=!0,a.parent&&(!n._parent.videoObj.videoBase.visible&&0<=o._video.currentTime&&(n._parent.videoObj.videoBase.visible=!0,o._video.muted=!1),a.parent.bitmapCache&&a.parent.updateCache())):l<Number.MAX_VALUE&&l++,a.parent&&requestAnimationFrame(e)};this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),B.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&B.default.notNull(this._parent.videoObj.videoBase)&&this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap);var n=this,o=this._parent.videoChannel.videoBuffer,a=this._parent.videoChannel.videoBitmap,s=this._parent.videoObj.offset,r=this._parent.videoChannel,u=-1,l=0;requestAnimationFrame(i)}else this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),B.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&(B.default.notNull(this._parent.videoObj.videoBase)&&(this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap),this._parent.videoChannel.video.muted=!1),this._parent.videoObj.videoBase.visible=!0);else!this._parent.stage.isWebGL&&this._parent.videoChannel.paused&&this._parent.videoChannel.position===this._parent.videoObj.offset&&B.default.notNull(this._parent.videoChannel.videoBuffer)&&(this._parent.videoChannel.videoBuffer._lastTime=-1)}},{key:"triggerVideoComplete",value:function e(t){var i=this._parent.videoObj.videoBase,n=this.checkCommandMode(this._parent.videoObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeVideoPlayBar(),this._parent.clearVideoChannel()):(this._parent.stopVideoPlayBar(),this._parent.videoObj.autoPlay=!1,B.default.notNull(i)&&(i.bitmapCache&&(i.updateCache(),this._parent.stage.update()),i._abortZeroFrame))}},{key:"triggerOnceVideoMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]],a=i._animateBase;if(B.default.notNull(a)){a._abortZeroFrame&&(a.visible=!1),a.bitmapCache&&a.uncache();var s=a._maskBase;if(s){if(this._parent.stage.isWebGL){var r=a.scaleX/s.scaleX,u=a.scaleY/s.scaleY;a.cache(s.nominalBounds.x/r,s.nominalBounds.y/u,s.nominalBounds.width/r,s.nominalBounds.height/u,a._webGLCacheRectSize,{useGL:"stage"}),a.useGL=!0}}else this._parent.stage.isWebGL;this._parent.stage.update()}null!==this._parent.assetVideoPath&&""!==this._parent.assetVideoPath||(this._parent.assetVideoPath=this._parent.assetSoundPath),null!==this._parent.pageVideoPath&&""!==this._parent.pageVideoPath||(this._parent.pageVideoPath=this._parent.pageSoundPath);var l=i.nominalBounds,d={x:i.x+l.x*i.scale,y:i.y+l.y*i.scale},h=i.parent.localToGlobal(d.x,d.y),p=this._parent.exportRoot.globalToLocal(h.x,h.y),c=this._parent.assetVideoPath?this._parent.assetVideoPath:this._parent.pageVideoPath?this._parent.pageVideoPath+i._replacePath+"videos/":i._replacePath+"./videos/",_=navigator.platform.match(/iPhone|iPod|iPad|Mac/)?15:0;this._parent.videoObj={id:n.args[1],path:c,loop:0,offset:_,volume:this._parent.volume,callback:this.checkOnceVideoPlayStatusBind,watchFunc:this.triggerOnceVideoWatchBind,completeFunc:this.triggerOnceVideoCompleteBind,autoPlay:!0,locX:p.x,locY:p.y,excludeTags:null,command:n.command,target:i,videoBase:o},B.default.playWebVideo(this._parent.createjs,this._parent.videoObj.path,this._parent.videoObj.id,this._parent.videoObj.loop,this._parent.videoObj.offset,this._parent.videoObj.volume,this._parent.videoObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkOnceVideoPlayStatus",value:function e(t,i,n){if(B.default.isNull(this._parent.videoObj)||B.default.notNull(this._parent.videoObj)&&this._parent.videoObj.id!==t)B.default.notNull(i)&&i.stop();else switch(n){case"fileload":break;case"fileerror":this.stop(),this._parent.videoObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.videoChannel=i,this._parent.videoChannel.video.muted=!0,this._parent.videoChannel.paused=!this._parent.videoObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.videoObj.watchFunc),this._parent.videoChannel.addEventListener("complete",this._parent.videoObj.completeFunc);var o=this.checkCommandMode(this._parent.videoObj.command);"none"!==o&&this._parent.openVideoPlayBar(o,this._parent.videoObj)}}},{key:"triggerOnceVideoWatch",value:function e(t){if(B.default.notNull(this._parent.videoChannel)&&B.default.notNull(this._parent.videoObj))if(B.default.isNull(this._parent.videoChannel.videoBitmap))if(this._parent.stage.isWebGL){var i=function e(){o._video.currentTime!==u||o._video.currentTime===u&&3===l?(o._video.currentTime!==u?l=0:l<Number.MAX_VALUE&&l++,u=o._video.currentTime,a.image._invalid=!0,a.parent&&(!n._parent.videoObj.videoBase.visible&&0<=o._video.currentTime&&(n._parent.videoObj.videoBase.visible=!0,o._video.muted=!1),a.parent.bitmapCache&&a.parent.updateCache())):l<Number.MAX_VALUE&&l++,a.parent&&requestAnimationFrame(e)};this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),B.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&B.default.notNull(this._parent.videoObj.videoBase)&&this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap);var n=this,o=this._parent.videoChannel.videoBuffer,a=this._parent.videoChannel.videoBitmap,s=this._parent.videoObj.offset,r=this._parent.videoChannel,u=-1,l=0;requestAnimationFrame(i)}else this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),B.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&(B.default.notNull(this._parent.videoObj.videoBase)&&(this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap),this._parent.videoChannel.video.muted=!1),this._parent.videoObj.videoBase.visible=!0);else!this._parent.stage.isWebGL&&this._parent.videoChannel.paused&&this._parent.videoChannel.position===this._parent.videoObj.offset&&B.default.notNull(this._parent.videoChannel.videoBuffer)&&(this._parent.videoChannel.videoBuffer._lastTime=-1)}},{key:"triggerOnceVideoComplete",value:function e(t){var i=this._parent.videoObj.videoBase,n=this.checkCommandMode(this._parent.videoObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeVideoPlayBar(),this._parent.clearVideoChannel()):(this._parent.stopVideoPlayBar(),this._parent.videoObj.autoPlay=!1,B.default.notNull(i)&&(i.bitmapCache&&(i.updateCache(),this._parent.stage.update()),i._abortZeroFrame))}}]),_);function _(e){r(this,_),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._actMVGroup=[],this._actVideoGroup=[],this._abortActMVGroup=[],this._onceActVideoGroup=[],this._prevTime=-1,this._seq=999,this._timeout}t.ModulePageActSoundMV=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModulePager=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,y=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["SilentShowPicL","SilentShowPicR","SlientShowPicL","SlientShowPicR","ShowPicL","ShowPicR","PicLabel","GoPic"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._showPicGroup.length;for(i=0;i<n;i++)(t=this._showPicGroup[i]).alpha=1,t.mouseChildren=!0,t.mouseEnabled=!0;for(n=this._goPicGroup.length,i=0;i<n;i++)(t=this._goPicGroup[i]).alpha=1,null!==t.cursor&&(t.mouseChildren=!0,t.mouseEnabled=!0)}},{key:"reset",value:function e(){this.isInited||this.init(),this.stop();var t=void 0,i=void 0,n=this._showPicGroup.length;for(i=0;i<n;i++){t=this._showPicGroup[i];var o,a=this._parent.getInstanceMirror(t).parent;1===n&&(a.visible=!0),this.useJSON?a.showPicFunc(a,Number(this._parent.pageParam[this._parent.pageParam.length-1])):a.showPicFunc(a,1)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"update",value:function e(t,i){this.isInited||this.init();var n=void 0,o=void 0,a=this._showPicGroup.length;for(o=0;o<a;o++){n=this._showPicGroup[o];var s,r=this._parent.getInstanceMirror(n).parent;1===a&&(r.visible=!0),y.default.isNull(i)?r.showPicFunc(r,t,!0):i===n&&r.showPicFunc(r,t,!0,i)}}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ShowPicL":case"ShowPicR":case"SlientShowPicL":case"SlientShowPicR":case"SilentShowPicL":case"SilentShowPicR":n=this.getCustomTag(t),this._showPicGroup.push(t),this._showPicGroupMirror[n]=this.pickRelation(i.parent,i.args[0]);break;case"PicLabel":n=this.getCustomTag(t),this._picLabelGroup.push(t);break;case"GoPic":n=this.getCustomTag(t),this._goPicGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return y.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=void 0,s=void 0,r=void 0,u=void 0,l=void 0;for(this.triggerPicShowControlMousedownBind=this.triggerPicShowControlMousedownBind||this.triggerPicShowControlMousedown.bind(this),this.triggerPicLabelControlMousedownBind=this.triggerPicLabelControlMousedownBind||this.triggerPicLabelControlMousedown.bind(this),this.triggerPicPageControlMousedownBind=this.triggerPicPageControlMousedownBind||this.triggerPicPageControlMousedown.bind(this),this.callShowPicBind=this.callShowPicBind||this.callShowPic.bind(this),a=this._showPicGroup.length,o=0;o<a;o++)if(!(n=this._showPicGroup[o])._isModuleInited){n.goPicList=[],(l=n.parent).showPicFunc=this.callShowPicBind,l.currentPicIndex=1,l.showPicControl=n;var d=this._parent.getInstanceMirror(n);for(y.default.notNull(n.prevBtn)&&("ShowPicR"===d.command||"SlientShowPicR"===d.command||"SilentShowPicR"===d.command?(n.prevBtnRef=n.prevBtn,n.nextBtnRef=n.nextBtn):"ShowPicL"!==d.command&&"SlientShowPicL"!==d.command&&"SilentShowPicL"!==d.command||(n.nextBtnRef=n.prevBtn,n.prevBtnRef=n.nextBtn),n.prevBtn.cursor="pointer",n.prevBtn.addEventListener(this._mouseTriggerBehavior,this.triggerPicShowControlMousedownBind),y.default.notNull(n.prevBtn.EffectBase)&&(y.default.applyMultiply(n.prevBtn.EffectBase),y.default.applyColorFilter(n.prevBtn.createjs,n.EffectBase)),y.default.notNull(n.prevBtn.hintTxt)&&(n.prevBtn.hintTxt.textBaseline=this._parent.textBaseline,n.prevBtn.hintTxt.text="              ","alphabetic"===this._parent.textBaseline&&(n.prevBtn.hintTxt.y+=n.prevBtn.hintTxt.lineHeight*this._parent.textAlphabeticFixYScale),n.prevBtn.hintTxt.cache(n.prevBtn.hintTxt.getBounds().x,n.prevBtn.hintTxt.getBounds().y,n.prevBtn.hintTxt.getBounds().width,n.prevBtn.hintTxt.getBounds().height,2),n.prevBtn.hintTxt.updateCache())),y.default.notNull(n.nextBtn)&&("ShowPicR"===d.command||"SlientShowPicR"===d.command||"SilentShowPicR"===d.command?(n.prevBtnRef=n.prevBtn,n.nextBtnRef=n.nextBtn):"ShowPicL"!==d.command&&"SlientShowPicL"!==d.command&&"SilentShowPicL"!==d.command||(n.nextBtnRef=n.prevBtn,n.prevBtnRef=n.nextBtn),n.nextBtn.cursor="pointer",n.nextBtn.addEventListener(this._mouseTriggerBehavior,this.triggerPicShowControlMousedownBind),y.default.notNull(n.nextBtn.EffectBase)&&(y.default.applyMultiply(n.nextBtn.EffectBase),y.default.applyColorFilter(n.nextBtn.createjs,n.EffectBase)),y.default.notNull(n.nextBtn.hintTxt)&&(n.nextBtn.hintTxt.textBaseline=this._parent.textBaseline,n.nextBtn.hintTxt.text="              ","alphabetic"===this._parent.textBaseline&&(n.nextBtn.hintTxt.y+=n.nextBtn.hintTxt.lineHeight*this._parent.textAlphabeticFixYScale),n.nextBtn.hintTxt.cache(n.nextBtn.hintTxt.getBounds().x,n.nextBtn.hintTxt.getBounds().y,n.nextBtn.hintTxt.getBounds().width,n.nextBtn.hintTxt.getBounds().height,2),n.nextBtn.hintTxt.updateCache())),y.default.notNull(n.noTxt)&&(n.noTxt.textBaseline=this._parent.textBaseline,n.noTxt.text="              ","alphabetic"===this._parent.textBaseline&&(n.noTxt.y+=n.noTxt.lineHeight*this._parent.textAlphabeticFixYScale),n.noTxt.cache(n.noTxt.getBounds().x,n.noTxt.getBounds().y,n.noTxt.getBounds().width,n.noTxt.getBounds().height,2),n.noTxt.updateCache()),s=this.getCustomTag(n),u=this._showPicGroupMirror[s].length,r=0;r<u;r++)this._showPicGroupMirror[s][r].visible=!1}for(a=this._picLabelGroup.length,o=0;o<a;o++)if(!(n=this._picLabelGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var h=this._parent.getInstanceMirror(n);for((l=n.parent).showPicLabels=l.showPicLabels||[],u=Number(h.args[2]),r=Number(h.args[1]);r<=u;r++)l.showPicLabels[r]=h.args[0];n.addEventListener(this._mouseTriggerBehavior,this.triggerPicLabelControlMousedownBind),y.default.notNull(n.EffectBase)&&y.default.applyMultiply(n.EffectBase)}for(a=this._goPicGroup.length,o=0;o<a;o++)if(!(n=this._goPicGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.showPicControlBase=n.parent.parent,n.showPicControlBase.showPicControl.goPicList.push(n),n.cursor="pointer";var p=this._parent.getInstanceMirror(n);n.addEventListener(this._mouseTriggerBehavior,this.triggerPicPageControlMousedownBind),y.default.notNull(n.EffectBase)&&y.default.applyMultiply(n.EffectBase),0<p.args.length&&"ICON"===p.args[0]&&(n.removeEventListener(this._mouseTriggerBehavior,this.triggerPicPageControlMousedownBind),n.gotoAndStop(2),n.cursor=null,n.mouseEnabled=!1,n.mouseChildren=!1)}for(a=this._showPicGroup.length,o=0;o<a;o++)(n=this._showPicGroup[o])._isModuleInited||(n._replacePath=i,n._isModuleInited=!0,(l=n.parent).showPicFunc(l,1))}},{key:"callShowPic",value:function e(t,i,n,o){var a=1<arguments.length&&void 0!==i?i:1,s=2<arguments.length&&void 0!==n&&n,r=3<arguments.length&&void 0!==o?o:null;if(this.useJSON&&(this._parent.pageParam[this._parent.pageParam.length-1]=a),!s||t.currentPicIndex!==a){t.currentPicIndex=a;var u=void 0,l=void 0,d=void 0,h=void 0,p=this.getCustomTag(t.showPicControl),c=void 0;(l=this._showPicGroupMirror[p].length)<a&&(a=l,t.currentPicIndex=a,this.useJSON&&(this._parent.pageParam[this._parent.pageParam.length-1]=a));var _=this._parent.getInstanceMirror(t.showPicControl).command;for(u=0;u<l;u++)(c=this._showPicGroupMirror[p][u]).visible=!1,h=this._parent.getInstanceMirror(c),Number(h.args[0])===a&&null===r?(c.visible=!0,"EnCnTrans"===h.command?y.default.notNull(c.selfReset)&&c.selfReset(c):"RecoverZone"===h.command&&this._parent._waitInited&&this._parent.reset(["ModulePager","ModuleWordsNavigator"],!0)):Number(h.args[0])===a&&null!==r&&(c.visible=!0,"EnCnTrans"===h.command?y.default.notNull(c.selfReset)&&c.selfReset(c):"RecoverZone"===h.command&&-1===_.indexOf("Slient")&&-1===_.indexOf("Silent")?this._parent._waitInited&&this._parent.reset(["ModulePager","ModuleWordsNavigator"],!0):"RecoverZone"===h.command&&this._parent._waitInited&&this._parent.resetAbortSound(["ModulePager","ModuleWordsNavigator"],!0));var g=l;g<=1?t.showPicControl.visible=!1:(t.showPicControl.visible=!0,c=t.showPicControl,d=this._parent.getInstanceMirror(c),y.default.notNull(c.noTxt)&&(c.noTxt.text=a+"/"+g,c.noTxt.updateCache()),c=t.showPicControl.prevBtnRef,y.default.notNull(c.hintTxt)&&(c.hintTxt.text="",c.hintTxt.updateCache()),a<=1?y.default.notNull(c)&&(c.gotoAndStop(0),c.cursor=null,y.default.applyColorGrayFilter(this._parent.createjs,c)):y.default.notNull(c)&&(c.cursor="pointer",c.gotoAndStop(0),y.default.unapplyColorFilter(this._parent.createjs,c)),c=t.showPicControl.nextBtnRef,y.default.notNull(c.hintTxt)&&(c.hintTxt.text="",c.hintTxt.updateCache()),g<=a?y.default.notNull(c)&&(c.gotoAndStop(0),c.cursor=null,y.default.applyColorGrayFilter(this._parent.createjs,c)):y.default.notNull(c)&&(c.cursor="pointer",c.gotoAndStop(0),y.default.unapplyColorFilter(this._parent.createjs,c)));var f=!0;if(y.default.notNull(t.showPicLabels)){var v=void 0;for(l=(d=this._parent.getInstanceMirror(t)).subset.length,u=0;u<l;u++)if(c=t[d.subset[u]],"PicLabel"===(h=this._parent.getInstanceMirror(c)).command&&2===c.currentFrame){v=h.args[0];break}for(u=0;u<l;u++)c=t[d.subset[u]],"PicLabel"===(h=this._parent.getInstanceMirror(c)).command&&(y.default.unapplyColorFilter(this._parent.createjs,c),h.args[0]===t.showPicLabels[a]?(f=v!==h.args[0],c.gotoAndStop(2),this.applyNormalCache(c)):(this.applyReverseCache(c),c.gotoAndStop(0)));var m=a-1,b=a+1;c=t.showPicControl.prevBtnRef,y.default.notNull(t)&&(c.hintTxt.text=t.showPicLabels[m],c.hintTxt.updateCache()),c=t.showPicControl.nextBtnRef,y.default.notNull(t)&&(c.hintTxt.text=t.showPicLabels[b],c.hintTxt.updateCache())}}}},{key:"applyNormalCache",value:function e(t){y.default.isNull(t)||(y.default.notNull(t.nominalBounds)&&t.cache(t.nominalBounds.x,t.nominalBounds.y,t.nominalBounds.width,t.nominalBounds.height),y.default.notNull(t.EffectBase)&&y.default.applyMultiply(t))}},{key:"applyReverseCache",value:function e(t){y.default.isNull(t)||(t.uncache(),y.default.notNull(t.EffectBase)&&y.default.unapplyMultiply(t))}},{key:"triggerPicShowControlMousedown",value:function e(t){if(!y.default.isNull(t.currentTarget.bitmapCache))return t.stopPropagation(),void t.stopImmediatePropagation();var i=this._parent.getInstanceMirror(t.currentTarget.parent);"ShowPicL"!==i.command&&"ShowPicR"!==i.command||this._parent.stop(null,!0);var n=t.currentTarget,o=this._parent.getInstanceMirror(n),a=o.parent,s=o.parent.parent;switch(n){case a.prevBtnRef:s.showPicFunc(s,s.currentPicIndex-1);break;case a.nextBtnRef:s.showPicFunc(s,s.currentPicIndex+1)}this._parent.sendPageFlipMessage(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerPicLabelControlMousedown",value:function e(t){var i=this._parent.getInstanceMirror(t.currentTarget.parent.showPicControl);"ShowPicL"!==i.command&&"ShowPicR"!==i.command||this._parent.stop(null,!0);var n=t.currentTarget,o=this._parent.getInstanceMirror(n),a=o.parent;a.showPicFunc(a,Number(o.args[1])),this._parent.sendPageFlipMessage(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerPicPageControlMousedown",value:function e(t){var i=this._parent.getInstanceMirror(t.currentTarget.parent.parent.showPicControl);"ShowPicL"!==i.command&&"ShowPicR"!==i.command||this._parent.stop(null,!0);var n=t.currentTarget,o=this._parent.getInstanceMirror(n),a=o.parent,s=o.parent.parent;s.showPicFunc(s,Number(o.args[0])),this._parent.sendPageFlipMessage(),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._showPicGroup=[],this._showPicGroupMirror={},this._picLabelGroup=[],this._goPicGroup=[],this._seq=999}t.ModulePager=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleWordsNavigator=void 0;var o=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,j=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=["WordsNavL","WordsNavR","OpenWord","ExWB","ExWordBar","ExWord"],d=(o(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e})&&(this.initModulesByModule(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._wordsNavGroup.length;for(i=0;i<n;i++){t=this._wordsNavGroup[i];var o,a=this._parent.getInstanceMirror(t).parent;this.useJSON?a.ExWB?(2===this._parent.pageParam.length&&(this._parent.pageParam[2]="1"),a.showWordFunc(a,Number(this._parent.pageParam[0]),Number(this._parent.pageParam[1]),Number(this._parent.pageParam[2]))):a.showWordFunc(a,Number(this._parent.pageParam[0]),1,Number(this._parent.pageParam[1])):a.showWordFunc(a,1,1,1)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"initModulesByModule",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTargetByModule(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTargetByModule(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==l.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"WordsNavL":case"WordsNavR":n=this.getCustomTag(t),this._wordsNavGroup.push(t),this._wordsNavGroupMirror[n]=this.pickRelation(i.parent,i.args[0]);break;case"OpenWord":n=this.getCustomTag(t),this._openWordGroup.push(t),this._openWordGroupMirror[n]=this.pickRelation(i.parent.parent,i.args[0]);break;case"ExWordBar":n=this.getCustomTag(t),this._exWordBarGroup.push(t);break;case"ExWord":n=this.getCustomTag(t),this._exWordGroup.push(t)}}}},{key:"pickTargetByModule",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==l.indexOf(i.command))switch(i.command){case"OpenWord":n=this.getCustomTag(t),this._openWordGroupMirror[n]=this.pickRelation(i.parent.parent,i.args[0])}}},{key:"getCustomTag",value:function e(t){return j.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=void 0,s=void 0,r=void 0,u=void 0,l=void 0,d=void 0;for(this.callShowWordBind=this.callShowWordBind||this.callShowWord.bind(this),this.triggerPicShowControlMousedownBind=this.triggerPicShowControlMousedownBind||this.triggerPicShowControlMousedown.bind(this),this.triggerOpenWordMousedownBind=this.triggerOpenWordMousedownBind||this.triggerOpenWordMousedown.bind(this),this.triggerWordBarChangeMousedownBind=this.triggerWordBarChangeMousedownBind||this.triggerWordBarChangeMousedown.bind(this),s=this._wordsNavGroup.length,a=0;a<s;a++)if(!(n=this._wordsNavGroup[a])._isModuleInited){(d=n.parent).showWordFunc=this.callShowWordBind,d.currentWordIndex=1,d.currentWordSubIndex=1,n.currentWordNavIndex=1,d.wordsNavControl=n;var h=this._parent.getInstanceMirror(n);for(j.default.notNull(n.prevBtn)&&("WordsNavR"===h.command?(n.prevBtnRef=n.prevBtn,n.nextBtnRef=n.nextBtn):"WordsNavL"===h.command&&(n.nextBtnRef=n.prevBtn,n.prevBtnRef=n.nextBtn),n.prevBtn.cursor="pointer",n.prevBtn.addEventListener(this._mouseTriggerBehavior,this.triggerPicShowControlMousedownBind),j.default.notNull(n.prevBtn.EffectBase)&&(j.default.applyMultiply(n.prevBtn.EffectBase),j.default.applyColorFilter(n.prevBtn.createjs,n.EffectBase))),j.default.notNull(n.nextBtn)&&("WordsNavR"===h.command?(n.prevBtnRef=n.prevBtn,n.nextBtnRef=n.nextBtn):"WordsNavL"===h.command&&(n.nextBtnRef=n.prevBtn,n.prevBtnRef=n.nextBtn),n.nextBtn.cursor="pointer",n.nextBtn.addEventListener(this._mouseTriggerBehavior,this.triggerPicShowControlMousedownBind),j.default.notNull(n.nextBtn.EffectBase)&&(j.default.applyMultiply(n.nextBtn.EffectBase),j.default.applyColorFilter(n.nextBtn.createjs,n.EffectBase))),j.default.notNull(n.noTxt)&&(n.noTxt.text=""),r=this.getCustomTag(n),l=this._wordsNavGroupMirror[r].length,u=0;u<l;u++)this._wordsNavGroupMirror[r][u].visible=!1}for(s=this._openWordGroup.length,a=0;a<s;a++)if(!(n=this._openWordGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var p=this._parent.getInstanceMirror(n);for(n.addEventListener(this._mouseTriggerBehavior,this.triggerOpenWordMousedownBind),j.default.notNull(n.EffectBase)&&j.default.applyMultiply(n.EffectBase),r=this.getCustomTag(n),l=this._openWordGroupMirror[r].length,u=0;u<l;u++)(o=this._openWordGroupMirror[r][u]).visible=!1}for(s=this._exWordBarGroup.length,a=0;a<s;a++)if(!(n=this._exWordBarGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0;var c=this._parent.getInstanceMirror(n);for(l=c.subset.length,u=0;u<l;u++){var _;o=n[c.subset[u]],"opt"===this._parent.getInstanceMirror(o).command&&(o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerWordBarChangeMousedownBind),j.default.notNull(o.EffectBase)&&j.default.applyMultiply(o.EffectBase))}}for(s=this._wordsNavGroup.length,a=0;a<s;a++)(n=this._wordsNavGroup[a])._isModuleInited||(n._replacePath=i,n._isModuleInited=!0,(d=n.parent).showWordFunc(d,1,1))}},{key:"callShowWord",value:function e(t,i,n,o,a){var s=1<arguments.length&&void 0!==i?i:1,r=2<arguments.length&&void 0!==n?n:1,u=3<arguments.length&&void 0!==o?o:1,l=4<arguments.length&&void 0!==a&&a;this.useJSON&&(this._parent.pageParam[0]=s,j.default.notNull(t.ExWB)?(this._parent.pageParam[1]=r,this._parent.pageParam[2]=u):this._parent.pageParam[1]=u);var d=!this._parent.actWinWordGroupHide;t.currentWordIndex=s,t.currentWordSubIndex=r;var h=void 0,p=void 0,c=void 0,_=void 0,g=void 0,f=void 0,v=void 0,m=this.getCustomTag(t.wordsNavControl),b=void 0,y=void 0,S=-1,P=!0,M=null;for(c=this._wordsNavGroupMirror[m].length,h=0;h<c;h++){(b=this._wordsNavGroupMirror[m][h]).visible=!1,_=(f=this._parent.getInstanceMirror(b)).subset.length;var O=Number.MAX_VALUE;for(p=0;p<_;p++)y=b[f.subset[p]],j.default.isNull(y.orgVisible)&&(y.orgVisible=y.visible),j.default.isNull(y.orgWGLoc)&&(y.orgWGLoc={x:y.x,y:y.y}),O>y.orgWGLoc.x&&(O=y.orgWGLoc.x);for(p=0;p<_;p++)y=b[f.subset[p]],v=this._parent.getInstanceMirror(y),Number(v.args[1])===s&&(b.visible=d,S=Number(f.args[0]));for(p=0;p<_;p++)if(y=b[f.subset[p]],v=this._parent.getInstanceMirror(y),y.mouseEnabled=!0,"OpenWord"===v.command)if(Number(v.args[1])===s){if(y.x=d?y.orgWGLoc.x:O,this._parent.menuContentInit&&l&&j.default.notNull(this._parent.menuRef[s-1])){var B=this._parent.menuRef[s-1].split("_")[0];return void this._parent.sendCommand(B,this._parent.menuRef[s-1])}this._parent._waitInited&&(j.default.isNull(t.wordsNavControl.callSpecClickFunc)?y.mouseEnabled=!1:j.default.notNull(t.wordsNavControl.callSpecClickFunc)&&j.default.notNull(y.bitmapCache)?t.wordsNavControl.callSpecClickFunc({self:t.wordsNavControl}):j.default.notNull(t.wordsNavControl.callSpecClickFunc)&&j.default.isNull(y.bitmapCache)&&t.wordsNavControl.callSpecClearFunc({self:t.wordsNavControl}),y.gotoAndStop(2),this.applyNormalCache(y));for(var k=this.getCustomTag(y),x=this._openWordGroupMirror[k].length,C=void 0,w=0;w<x;w++){C=this._openWordGroupMirror[k][w];var T=this._parent.getInstanceMirror(C);Number(T.args[0])===s?(P=!(C.visible=!0),C.showPicFunc&&C.showPicFunc(C,u)):C.visible=!1}null===M&&(M=y)}else y.x=y.orgWGLoc.x,y.gotoAndStop(0),this.applyReverseCache(y)}j.default.notNull(this._parent.menuContent)&&(this._parent.menuContent.visible=!0,this._parent.menuContentInit=!0,this._parent.menuContent.showPicFunc&&this._parent.menuContent.showPicFunc(this._parent.menuContent,u)),t.currentWordNavIndex=S;var L=c;if(L<=1||!d?t.wordsNavControl.visible=!1:(t.wordsNavControl.visible=!0,b=t.wordsNavControl.prevBtnRef,S<=1?j.default.notNull(b)&&(b.cursor=null,b.gotoAndStop(0),b.mouseEnabled=!1,j.default.applyColorGrayFilter(this._parent.createjs,b)):j.default.notNull(b)&&(b.cursor="pointer",b.gotoAndStop(0),b.mouseEnabled=!0,j.default.unapplyColorFilter(this._parent.createjs,b)),b=t.wordsNavControl.nextBtnRef,L<=S?j.default.notNull(b)&&(b.cursor=null,b.gotoAndStop(0),b.mouseEnabled=!1,j.default.applyColorGrayFilter(this._parent.createjs,b)):j.default.notNull(b)&&(b.cursor="pointer",b.gotoAndStop(0),b.mouseEnabled=!0,j.default.unapplyColorFilter(this._parent.createjs,b))),j.default.notNull(t.ExWB)){for(c=this._exWordBarGroup.length,h=0;h<c;h++)if(b=this._exWordBarGroup[h],f=this._parent.getInstanceMirror(b),Number(f.args[0])===s)for(b.visible=!0,_=f.subset.length,p=0;p<_;p++)y=b[f.subset[p]],"opt"===(v=this._parent.getInstanceMirror(y)).command&&(Number(v.args[0])===r?(y.gotoAndStop(2),this.applyNormalCache(y)):(y.gotoAndStop(0),this.applyReverseCache(y)));else b.visible=!1;for(c=this._exWordGroup.length,h=0;h<c;h++)b=this._exWordGroup[h],f=this._parent.getInstanceMirror(b),Number(f.args[0])===s&&Number(f.args[1])===r?b.visible=!0:b.visible=!1}if(P&&null!==M){var N,I=this._parent.getInstanceMirror(M).args[0]+"_"+s;this._parent._waitInited&&j.default.notNull(this._parent.moduleConfigData[I])&&this._parent.loadContentByModule(this._parent.moduleConfigData[I],{target:t,index:s,subindex:r,pagerindex:u,changeBar:l,TYPE:"words-navigator"})}else P||j.default.notNull(t.wordsNavControl.callSpecCompleteFunc)&&t.wordsNavControl.callSpecCompleteFunc({self:t.wordsNavControl,pickTarget:M})}},{key:"applyNormalCache",value:function e(t){j.default.isNull(t)||(j.default.notNull(t.nominalBounds)&&t.cache(t.nominalBounds.x,t.nominalBounds.y,t.nominalBounds.width,t.nominalBounds.height),j.default.notNull(t.EffectBase)&&j.default.applyMultiply(t))}},{key:"applyReverseCache",value:function e(t){j.default.isNull(t)||(t.uncache(),j.default.notNull(t.EffectBase)&&j.default.unapplyMultiply(t))}},{key:"triggerPicShowControlMousedown",value:function e(t){if(j.default.notNull(t.currentTarget.bitmapCache))return t.stopPropagation(),void t.stopImmediatePropagation();var n=t.currentTarget,o=this._parent.getInstanceMirror(n),a=o.parent,s=o.parent.parent,r=this.getCustomTag(a),u=void 0,l=void 0,d=this._wordsNavGroupMirror[r].length;switch(n){case a.prevBtnRef:s.currentWordNavIndex--;break;case a.nextBtnRef:s.currentWordNavIndex++}for(s.currentWordNavIndex<=1&&(s.currentWordNavIndex=1),s.currentWordNavIndex>=d&&(s.currentWordNavIndex=d),i=0;i<d;i++)u=this._wordsNavGroupMirror[r][i],l=this._parent.getInstanceMirror(u),Number(l.args[0])===s.currentWordNavIndex?(u.visible=!0,1!==l.args.length&&(this._parent.stop(null,!0),n.parent.parent.showWordFunc(n.parent.parent,Number(l.args[1]),Number(l.args[0]),1,!0),this._parent.sendPageFlipMessage())):u.visible=!1;u=a.prevBtnRef,s.currentWordNavIndex<=1?j.default.notNull(u)&&(u.cursor=null,u.gotoAndStop(0),u.mouseEnabled=!1,j.default.applyColorGrayFilter(this._parent.createjs,u)):j.default.notNull(u)&&(u.cursor="pointer",u.mouseEnabled=!0,j.default.unapplyColorFilter(this._parent.createjs,u)),u=a.nextBtnRef,s.currentWordNavIndex>=d?j.default.notNull(u)&&(u.cursor=null,u.gotoAndStop(0),u.mouseEnabled=!1,j.default.applyColorGrayFilter(this._parent.createjs,u)):j.default.notNull(u)&&(u.cursor="pointer",u.mouseEnabled=!0,j.default.unapplyColorFilter(this._parent.createjs,u)),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerOpenWordMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent,a=n.parent.parent;if(j.default.isNull(t.currentTarget.bitmapCache)&&this._parent.stop(null,!0),"RecoverZone"===n.args[0]&&("EnBookPage"===this._parent.__specClassName?this._parent.reset(["ModuleWordsNavigator"],!0):this._parent.reset(["ModulePager","ModuleWordsNavigator"],!0)),this._parent.menuContentInit&&j.default.notNull(this._parent.menuRef[Number(n.args[1])-1])){var s=this._parent.menuRef[Number(n.args[1])-1].split("_")[0];return this._parent.sendCommand(s,this._parent.menuRef[Number(n.args[1])-1]),t.stopPropagation(),void t.stopImmediatePropagation()}j.default.isNull(t.currentTarget.bitmapCache)&&this._parent.sendPageFlipMessage(),j.default.notNull(a.ExWB)?a.showWordFunc(a,Number(n.args[1]),Number(n.args[2]),Number(n.args[3])):a.showWordFunc(a,Number(n.args[1]),1,Number(n.args[2])),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerWordBarChangeMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent,a=this._parent.getInstanceMirror(o),s=n.parent.parent.parent;j.default.trace(Number(a.args[0]),Number(n.args[0])),s.showWordFunc(s,Number(a.args[0]),Number(n.args[0])),t.stopPropagation(),t.stopImmediatePropagation()}}]),h);function h(e){u(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._wordsNavGroup=[],this._wordsNavGroupMirror={},this._openWordGroup=[],this._openWordGroupMirror={},this._exWordBarGroup=[],this._exWordGroup=[],this._seq=999}t.ModuleWordsNavigator=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleOnAndOff=void 0;var o=function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s,r=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=["OnToOff","OffToOn","AllOnAndOff","OnAndOffControl"],h=(o(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==d.indexOf(e)||-1!==d.indexOf(t):-1!==d.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==d.indexOf(e)||-1!==d.indexOf(t):-1!==d.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0;i=this._onToOffGroup.length;for(var n=0;n<i;n++)if(0===(t=this._onToOffGroup[n]).groupSync.length){t.btnOn.visible=!0,t.btnOff.visible=!1;for(var o=this.getCustomTag(t),a=this._onToOffBtnGroup[o].length,s=0;s<a;s++){var r;this._onToOffBtnGroup[o][s].gotoAndStop(0)}}i=this._offToOnGroup.length;for(var u=0;u<i;u++)if(0===(t=this._offToOnGroup[u]).groupSync.length){t.btnOn.visible=!1,t.btnOff.visible=!0;for(var l=this.getCustomTag(t),d=this._offToOnBtnGroup[l].length,h=0;h<d;h++){var p;this._offToOnBtnGroup[l][h].gotoAndStop(1)}}i=this._allOnAndOffGroup.length;for(var c=0;c<i;c++)0===(t=this._allOnAndOffGroup[c]).groupSync.length&&(t.btnOn.visible=!1,t.btnOff.visible=!0),this.refreshAllOnAndOffStatus(t);this.refreshOnAndOffControl()}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==d.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"OnToOff":n=this.getCustomTag(t),this._onToOffGroup.push(t),this._onToOffBtnGroup[n]=this.pickRelation(t.parent,i.args[0]);break;case"OffToOn":n=this.getCustomTag(t),this._offToOnGroup.push(t),this._offToOnBtnGroup[n]=this.pickRelation(t.parent,i.args[0]);break;case"AllOnAndOff":n=this.getCustomTag(t),this._allOnAndOffGroup.push(t);break;case"OnAndOffControl":n=this.getCustomTag(t),this._onAndOffControlGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return r.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickAllOnAndOffRelation",value:function e(t){for(var i=this._parent.getInstanceMirror(t),n=i.subset.length,o=0;o<n;o++){var a=this._parent.getInstanceMirror(i.target[i.subset[o]]),s=i.target[i.subset[o]];if("AllOnAndOff"===a.command)return s}return null}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0;this.triggerFuncMousedownBind=this.triggerFuncMousedownBind||this.triggerFuncMousedown.bind(this),this.triggerSubMousedownBind=this.triggerSubMousedownBind||this.triggerSubMousedown.bind(this);var o=void 0;o=this._onToOffGroup.length;for(var a=0;a<o;a++){if(!(n=this._onToOffGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.btnOn.cursor="pointer",n.btnOff.cursor="pointer",n.btnOn.visible=!0,n.btnOff.visible=!1,n.btnOn.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.btnOff.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.allOnAndOff=this.pickAllOnAndOffRelation(n.parent);for(var s=this.getCustomTag(n),r=this._onToOffBtnGroup[s].length,u=0;u<r;u++){var l=this._onToOffBtnGroup[s][u];l.cursor="pointer",l.gotoAndStop(0),l.rel=n,l.addEventListener(this._mouseTriggerBehavior,this.triggerSubMousedownBind)}}var d=this._parent.getInstanceMirror(n);if(n.groupSync=[],1<d.args.length)for(var h=0;h<o;h++){var p=this._onToOffGroup[h],c;p!==n&&this._parent.getInstanceMirror(p).args[1]===d.args[1]&&n.groupSync.push(p)}}o=this._offToOnGroup.length;for(var _=0;_<o;_++){if(!(n=this._offToOnGroup[_])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.btnOn.cursor="pointer",n.btnOff.cursor="pointer",n.btnOn.visible=!1,n.btnOff.visible=!0,n.btnOn.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.btnOff.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.allOnAndOff=this.pickAllOnAndOffRelation(n.parent);for(var g=this.getCustomTag(n),f=this._offToOnBtnGroup[g].length,v=0;v<f;v++){var m=this._offToOnBtnGroup[g][v];m.cursor="pointer",m.gotoAndStop(1),m.rel=n,m.addEventListener(this._mouseTriggerBehavior,this.triggerSubMousedownBind)}}var b=this._parent.getInstanceMirror(n);if(n.groupSync=[],1<b.args.length)for(var y=0;y<o;y++){var S=this._offToOnGroup[y],P;S!==n&&this._parent.getInstanceMirror(S).args[1]===b.args[1]&&n.groupSync.push(S)}}o=this._allOnAndOffGroup.length;for(var M=0;M<o;M++){(n=this._allOnAndOffGroup[M])._isModuleInited||(n._replacePath=i,n._isModuleInited=!0,n.btnOn.cursor="pointer",n.btnOff.cursor="pointer",n.btnOn.visible=!1,n.btnOff.visible=!0,n.btnOn.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.btnOff.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),n.onToOff=this.pickRelation(n.parent,"OnToOff"),n.offToOn=this.pickRelation(n.parent,"OffToOn"),this.refreshAllOnAndOffStatus(n));var O=this._parent.getInstanceMirror(n);if(n.groupSync=[],0<O.args.length)for(var B=0;B<o;B++){var k=this._allOnAndOffGroup[B],x;k!==n&&this._parent.getInstanceMirror(k).args[0]===O.args[0]&&n.groupSync.push(k)}}o=this._onAndOffControlGroup.length;for(var C=0;C<o;C++)(n=this._onAndOffControlGroup[C])._isModuleInited||(n._replacePath=i,n._isModuleInited=!0,n.onToOff=this.pickRelation(n.parent,"OnToOff"),n.offToOn=this.pickRelation(n.parent,"OffToOn"))}},{key:"refreshAllOnAndOffStatus",value:function e(t){if(r.default.notNull(t)){var n=void 0;n=t.onToOff.length;var o=!0;for(i=0;i<n;i++)if(t.onToOff[i].btnOff.visible){o=!1;break}for(n=t.offToOn.length,i=0;i<n;i++)if(t.offToOn[i].btnOff.visible){o=!1;break}o?(t.btnOn.visible=!0,t.btnOff.visible=!1):(t.btnOn.visible=!1,t.btnOff.visible=!0)}}},{key:"refreshOnAndOffControl",value:function e(){this.isInited||this.init();for(var t=void 0,i=this._onAndOffControlGroup.length,n=0;n<i;n++){var o=void 0;o=(t=this._onAndOffControlGroup[n]).onToOff.length;for(var a=!1,s=0;s<o;s++)for(var r=this.getCustomTag(t.onToOff[s]),u=this._onToOffBtnGroup[r].length,l=0;l<u;l++)if(0===this._onToOffBtnGroup[r][l].currentFrame){a=!0;break}var d=!1;o=t.offToOn.length;for(var h=0;h<o;h++)for(var p=this.getCustomTag(t.offToOn[h]),c=this._offToOnBtnGroup[p].length,_=0;_<c;_++)if(0===this._offToOnBtnGroup[p][_].currentFrame){d=!0;break}0<t.onToOff.length&&0<t.offToOn.length?t.visible=!(!a&&!d):0<t.onToOff.length?t.visible=!!a:(t.offToOn.length,t.visible=!0)}}},{key:"updateFuncBtnStatus",value:function e(t){var i=this._parent.getInstanceMirror(t),n=this.getCustomTag(t),o=void 0,a=void 0,s=void 0,r=void 0;switch(i.command){case"OnToOff":if(o=this._onToOffBtnGroup[n].length,t.btnOn.visible){a=!1;for(var u=0;u<o;u++)if(0===this._onToOffBtnGroup[n][u].currentFrame){a=!0;break}}else if(t.btnOff.visible){a=!0;for(var l=0;l<o;l++)if(0!==this._onToOffBtnGroup[n][l].currentFrame){a=!1;break}}if(s=r=!0,0!==t.groupSync.length)for(var d=t.groupSync.length,h=0;h<d;h++){for(var p=t.groupSync[h],c=this.getCustomTag(p),_=this._onToOffBtnGroup[c].length,g=0;g<_;g++)if(0===this._onToOffBtnGroup[c][g].currentFrame){s=!1;break}for(var f=0;f<_;f++)if(0!==this._onToOffBtnGroup[c][f].currentFrame){r=!1;break}}if(0!==t.groupSync.length&&(t.btnOn.visible?a||s||(a=!0):t.btnOn.visible||a&&!r&&(a=!1)),a){if(t.btnOn.visible=!0,t.btnOff.visible=!1,0!==t.groupSync.length)for(var v=t.groupSync.length,m=0;m<v;m++){var b=t.groupSync[m];b.btnOn.visible=!0,b.btnOff.visible=!1}}else if(t.btnOn.visible=!1,t.btnOff.visible=!0,0!==t.groupSync.length)for(var y=t.groupSync.length,S=0;S<y;S++){var P=t.groupSync[S];P.btnOn.visible=!1,P.btnOff.visible=!0}this.refreshAllOnAndOffStatus(t.allOnAndOff);break;case"OffToOn":if(o=this._offToOnBtnGroup[n].length,t.btnOn.visible){a=!1;for(var M=0;M<o;M++)if(0===this._offToOnBtnGroup[n][M].currentFrame){a=!0;break}}else if(t.btnOff.visible){a=!0;for(var O=0;O<o;O++)if(0!==this._offToOnBtnGroup[n][O].currentFrame){a=!1;break}}if(s=r=!0,0!==t.groupSync.length)for(var B=t.groupSync.length,k=0;k<B;k++){for(var x=t.groupSync[k],C=this.getCustomTag(x),w=this._offToOnBtnGroup[C].length,T=0;T<w;T++)if(0===this._offToOnBtnGroup[C][T].currentFrame){s=!1;break}for(var L=0;L<w;L++)if(0!==this._offToOnBtnGroup[C][L].currentFrame){r=!1;break}}if(0!==t.groupSync.length&&(t.btnOn.visible?a||s||(a=!0):t.btnOn.visible||a&&!r&&(a=!1)),a){if(t.btnOn.visible=!0,t.btnOff.visible=!1,0!==t.groupSync.length)for(var N=t.groupSync.length,I=0;I<N;I++){var j=t.groupSync[I];j.btnOn.visible=!0,j.btnOff.visible=!1}}else if(t.btnOn.visible=!1,t.btnOff.visible=!0,0!==t.groupSync.length)for(var A=t.groupSync.length,E=0;E<A;E++){var G=t.groupSync[E];G.btnOn.visible=!1,G.btnOff.visible=!0}this.refreshAllOnAndOffStatus(t.allOnAndOff);break;case"AllOnAndOff":if(t.btnOff.visible){o=t.onToOff.length;for(var q=0;q<o;q++)t.onToOff[q].btnOn.visible=!1,t.onToOff[q].btnOff.visible=!0;o=t.offToOn.length;for(var W=0;W<o;W++)t.offToOn[W].btnOn.visible=!1,t.offToOn[W].btnOff.visible=!0}else{o=t.onToOff.length;for(var R=0;R<o;R++)t.onToOff[R].btnOn.visible=!0,t.onToOff[R].btnOff.visible=!1;o=t.offToOn.length;for(var D=0;D<o;D++)t.offToOn[D].btnOn.visible=!0,t.offToOn[D].btnOff.visible=!1}}this.refreshOnAndOffControl()}},{key:"triggerFuncMousedown",value:function e(t){var n=t.currentTarget,o=this._parent.getInstanceMirror(n),a=this.getCustomTag(n),s=n.parent;switch(n.name){case"btnOn":s.btnOn.visible=!1,s.btnOff.visible=!0;break;case"btnOff":s.btnOn.visible=!0,s.btnOff.visible=!1}var r=void 0;switch(o=this._parent.getInstanceMirror(s),a=this.getCustomTag(s),o.command){case"OnToOff":r=this._onToOffBtnGroup[a].length;for(var u=0;u<r;u++)s.btnOff.visible?this._onToOffBtnGroup[a][u].gotoAndStop(1):this._onToOffBtnGroup[a][u].gotoAndStop(0);if(0!==s.groupSync.length)for(var l=s.groupSync.length,d=0;d<l;d++){var h=s.groupSync[d];h.btnOn.visible=s.btnOn.visible,h.btnOff.visible=s.btnOff.visible;for(var p=this.getCustomTag(h),c=this._onToOffBtnGroup[p].length,_=0;_<c;_++)h.btnOff.visible?this._onToOffBtnGroup[p][_].gotoAndStop(1):this._onToOffBtnGroup[p][_].gotoAndStop(0)}break;case"OffToOn":r=this._offToOnBtnGroup[a].length;for(var g=0;g<r;g++)s.btnOff.visible?this._offToOnBtnGroup[a][g].gotoAndStop(1):this._offToOnBtnGroup[a][g].gotoAndStop(0);if(0!==s.groupSync.length)for(var f=s.groupSync.length,v=0;v<f;v++){var m=s.groupSync[v];m.btnOn.visible=s.btnOn.visible,m.btnOff.visible=s.btnOff.visible;for(var b=this.getCustomTag(m),y=this._offToOnBtnGroup[b].length,S=0;S<y;S++)m.btnOff.visible?this._offToOnBtnGroup[b][S].gotoAndStop(1):this._offToOnBtnGroup[b][S].gotoAndStop(0)}break;case"AllOnAndOff":for(r=s.onToOff.length,i=0;i<r;i++){a=this.getCustomTag(s.onToOff[i]);for(var P=this._onToOffBtnGroup[a].length,M=0;M<P;M++)s.btnOff.visible?this._onToOffBtnGroup[a][M].gotoAndStop(1):this._onToOffBtnGroup[a][M].gotoAndStop(0)}for(r=s.offToOn.length,i=0;i<r;i++){a=this.getCustomTag(s.offToOn[i]);for(var O=this._offToOnBtnGroup[a].length,B=0;B<O;B++)s.btnOff.visible?this._offToOnBtnGroup[a][B].gotoAndStop(1):this._offToOnBtnGroup[a][B].gotoAndStop(0)}if(0!==s.groupSync.length)for(var k=s.groupSync.length,x=0;x<k;x++){var C=s.groupSync[x];C.btnOn.visible=s.btnOn.visible,C.btnOff.visible=s.btnOff.visible;for(var w=C.onToOff.length,T=0;T<w;T++)for(var L=this.getCustomTag(C.onToOff[T]),N=this._onToOffBtnGroup[L].length,I=0;I<N;I++)C.btnOff.visible?this._onToOffBtnGroup[L][I].gotoAndStop(1):this._onToOffBtnGroup[L][I].gotoAndStop(0);w=C.offToOn.length;for(var j=0;j<w;j++)for(var A=this.getCustomTag(C.offToOn[j]),E=this._offToOnBtnGroup[A].length,G=0;G<E;G++)C.btnOff.visible?this._offToOnBtnGroup[A][G].gotoAndStop(1):this._offToOnBtnGroup[A][G].gotoAndStop(0);this.updateFuncBtnStatus(C)}}this.updateFuncBtnStatus(s),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSubMousedown",value:function e(t){var i=t.currentTarget,n=i.bigTag,o=i.parent;0===i.currentFrame?i.gotoAndStop(1):i.gotoAndStop(0),this.updateFuncBtnStatus(i.rel),t.stopPropagation(),t.stopImmediatePropagation()}}]),p);function p(e){l(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._onToOffGroup=[],this._offToOnGroup=[],this._allOnAndOffGroup=[],this._onAndOffControlGroup=[],this._onToOffBtnGroup={},this._offToOnBtnGroup={},this._seq=999}t.ModuleOnAndOff=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleCalculator=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,c=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["Calculator"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),c.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1)}},{key:"reset",value:function e(){this.isInited||this.init(),c.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);for(var t=void 0,i=this._calculatorGroup.length,n=0;n<i;n++){t=this._calculatorGroup[n];var o=this._parent.getInstanceMirror(t);t.txt.text="",t.todo=[""],t.x=t.orgX,t.y=t.orgY}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"Calculator":n=this.getCustomTag(t),this._calculatorGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return c.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0;this.triggerBtnDragMainMenuListFuncMousedownBind=this.triggerBtnDragMainMenuListFuncMousedownBind||this.triggerBtnDragMainMenuListFuncMousedown.bind(this),this.triggerBtnDragListMousedownBind=this.triggerBtnDragListMousedownBind||this.triggerBtnDragListMousedown.bind(this),this.triggerBtnDragListPressmoveBind=this.triggerBtnDragListPressmoveBind||this.triggerBtnDragListPressmove.bind(this),this.triggerBtnDragListPressupBind=this.triggerBtnDragListPressupBind||this.triggerBtnDragListPressup.bind(this);for(var o=this._calculatorGroup.length,a=0;a<o;a++)if(!(n=this._calculatorGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer",n.callUpdateFunc=null;var s=this._parent.getInstanceMirror(n);n.txt=s.parent[s.args[0]],n.txtMax=s.parent[s.args[1]]||1,n.limitInput=s.args[2].split("")||null,n.orgX=n.x,n.orgY=n.y,c.default.notNull(n.canDrag)&&(n.canDrag.addEventListener("mousedown",this.triggerBtnDragListMousedownBind),n.canDrag.addEventListener("pressup",this.triggerBtnDragListPressupBind));for(var r=s.subset.length,u=0;u<r;u++){var l=n[s.subset[u]],d;"sp"===this._parent.getInstanceMirror(l).command&&(l.mouseEnabled=!1)}for(var h=void 0,p=0;p<10;p++)h=n["n"+p],c.default.notNull(h)&&(h.value=p,h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind));h=n.b1_btn,c.default.notNull(h)&&(h.value="back",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b2_btn,c.default.notNull(h)&&(h.value="=",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b3_btn,c.default.notNull(h)&&(h.value="<",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b4_btn,c.default.notNull(h)&&(h.value=">",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b5_btn,c.default.notNull(h)&&(h.value=".",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b6_btn,c.default.notNull(h)&&(h.value="+",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b7_btn,c.default.notNull(h)&&(h.value="-",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b8_btn,c.default.notNull(h)&&(h.value="x",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.b9_btn,c.default.notNull(h)&&(h.value="÷",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind)),h=n.close_btn,c.default.notNull(h)&&(h.value="close",h.addEventListener(this._mouseTriggerBehavior,this.triggerBtnDragMainMenuListFuncMousedownBind))}}},{key:"triggerBtnDragMainMenuListFuncMousedown",value:function e(t){var i=t.currentTarget,n,o=this._parent.getInstanceMirror(i).parent,a=o.txt,s=void 0,r=void 0;if(o.todo=o.todo||[""],"close"===i.value)o.visible=!1;else if(c.default.isNull(o.limitInput))if(this.isNumber(i.value)){var u=a.text.toString().split("");u.length<o.txtMax&&(u.push(i.value),a.text=u.join(),o.todo[o.todo.length-1]=a.text,c.default.notNull(o.callUpdateFunc)&&o.callUpdateFunc(o))}else{var l=void 0;switch(i.value){case"back":0<(l=a.text.toString().split("")).length&&(l.pop(),a.text=l.join(),o.todo[o.todo.length-1]=a.text);break;case"=":this.calculate(o);break;case"+":case"-":case"x":case"÷":""!==o.todo[o.todo.length-1]&&this.isNumber(o.todo[o.todo.length-1])?o.todo.push(""):(""===o.todo[o.todo.length-1]||this.isNumber(o.todo[o.todo.length-1]),o.todo[o.todo.length-1]=i.value);break;case"<":case">":break;case".":(l=a.text.split("")).length<o.txtMax&&-1===l.indexOf(".")&&(l.push(i.value),a.text=l.join(),o.todo[o.todo.length-1]=a.text)}}else{if(-1===o.limitInput.indexOf(i.value.toString())&&"back"!==i.value){var d=a.text.toString().split("");return d.length<o.txtMax&&(d.push(i.value),a.text=d.join(),o.todo[o.todo.length-1]=a.text,c.default.notNull(o.callUpdateFunc)&&o.callUpdateFunc(o)),a.bitmapCache&&a.updateCache(),t.stopPropagation(),void t.stopImmediatePropagation()}if(this.isNumber(i.value)){var h=a.text.toString().split("");h.length<o.txtMax&&(h.push(i.value),a.text=h.join(),o.todo[o.todo.length-1]=a.text,c.default.notNull(o.callUpdateFunc)&&o.callUpdateFunc(o))}else{var p=void 0;switch(i.value){case"back":0<(p=a.text.toString().split("")).length&&(p.pop(),a.text=p.join(),o.todo[o.todo.length-1]=a.text,c.default.notNull(o.callUpdateFunc)&&o.callUpdateFunc(o));break;case"=":o.visible=!1,this.calculate(o)}}}a.bitmapCache&&a.updateCache(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"calculate",value:function e(t){c.default.notNull(parent.callUpdateFunc)&&parent.callUpdateFunc(t)}},{key:"isNumber",value:function e(t){return!isNaN(t)}},{key:"triggerBtnDragListMousedown",value:function e(t){var i=t.currentTarget,n=i.parent.parent.globalToLocal(t.stageX,t.stageY);i.parent.fixX=i.parent.x-n.x,i.parent.fixY=i.parent.y-n.y,i.parent.startX=i.parent.x+i.parent.fixX,i.parent.startY=i.parent.y+i.parent.fixY,this._parent.setPressEventIsOn(!0),i.addEventListener("pressmove",this.triggerBtnDragListPressmoveBind,c.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListPressmove",value:function e(t){var i=t.currentTarget;i.parent.parent.setChildIndex(i.parent,i.parent.parent.getNumChildren()-1);var n=i.parent.parent.globalToLocal(t.stageX,t.stageY);i.parent.x=n.x+i.parent.fixX,i.parent.y=n.y+i.parent.fixY,this._parent.setPressEventIsOn(!0);var o=Math.abs(i.parent.x-i.parent.startX),a=Math.abs(i.parent.y-i.parent.startY),s=Math.sqrt(Math.pow(o,2)+Math.pow(a,2));t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragListPressup",value:function e(t){var i=t.currentTarget;this._parent.setPressEventIsOn(!1),i.removeEventListener("pressmove",this.triggerBtnDragListPressmoveBind,c.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._calculatorGroup=[],this._dragMainMenuListGroup=[],this._dragMainMenuListGroupMirror={},this._seq=999}t.ModuleCalculator=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModulePureAnimate=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,s=r(i(0));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=["ReplayAnimate"],d={ReplayAnimate:"none"},h=!1,p=.5,c=(n(_,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==l.indexOf(e)||-1!==l.indexOf(t):-1!==l.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();for(var t=this._pickList.length,i=void 0,n=void 0,o=0;o<t;o++)i=this._pickList[o],n=this._parent.getInstanceMirror(i)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==l.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ReplayAnimate":this._animate.push(t)}}}},{key:"setup",value:function e(t){for(var u=this,l=0<arguments.length&&void 0!==t?t:"",i=this._animate.length,n=function e(t){var a=u._animate[t];if(!a._isModuleInited){var i=function e(t){if(t-a.lastFrameTime<r)requestAnimationFrame(e);else{a.lastFrameTime=t;var i=a.totalFrames,n,o=a.currentFrame+1;i<=o&&(o=0),a.gotoAndStop(o),a.bitmapCache&&a.updateCache(),s._parent.stage.contains(s._parent.exportRoot)?requestAnimationFrame(e):a.bitmapCache&&(a.uncache(),s._parent.stage.update())}};a._replacePath=l,a._isModuleInited=!0,a.fps=1e3/u._parent.lib.properties.fps,a.interval&&(u._parent.clearInterval(a.interval),cancelAnimationFrame(a.interval));var n=u._parent.getInstanceMirror(a);a._webGLCacheRectSize=n.args[1]?Number(n.args[1]):.5;var s=u,o=0,r=1e3/60*(60/u._parent.lib.properties.fps)-1e3/60*.5;a.lastFrameTime=0,u._parent.stage.isWebGL,a.interval=requestAnimationFrame(i)}},o=0;o<i;o++)n(o)}},{key:"checkCommandMode",value:function e(t){var i;return d[t]}}]),_);function _(e){u(this,_),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._animate=[],this._prevTime=-1,this._seq=999}t.ModulePureAnimate=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleZoom=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,v=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["ZoomIn"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._zoomInGroup.length;for(i=0;i<n;i++){t=this._zoomInGroup[i];var o=this._parent.getInstanceMirror(t),a=this.getCustomTag(t),s=this._zoomInGroupMirror[a];v.default.notNull(s)&&(s.visible=!1)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ZoomIn":n=this.getCustomTag(t),this._zoomInGroup.push(t),this._zoomInGroupMirror[n]=this.pickRelation(i.parent,i.args[1])}}}},{key:"getCustomTag",value:function e(t){return v.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){var n=t[i];return null!=n?n:null}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0;this.triggerBtnZoomInMousedownBind=this.triggerBtnZoomInMousedownBind||this.triggerBtnZoomInMousedown.bind(this);var a=this._zoomInGroup.length;for(o=0;o<a;o++)if(!(n=this._zoomInGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var s=this.getCustomTag(n),r=this._parent.getInstanceMirror(n),u=this._zoomInGroupMirror[s];if(v.default.notNull(u)){u.visible=!1;var l=u.parent.localToGlobal(u.x-u.regX*u.scaleX,u.y-u.regY*u.scaleY),d=u.getBounds().width*u.scaleX,h=u.getBounds().height*u.scaleY,p=0<=u.getBounds().x?1:-1,c=0<=u.getBounds().y?1:-1,_=new this._parent.createjs.Point(u.x-u.regX*u.scaleX,u.y-u.regY*u.scaleY);1==p?_.x+=d:_.x-=d,1==c?_.y+=h:_.y-=h;var g=u.parent.localToGlobal(_.x,_.y);if(l.x>g.x){var f=l.clone();l.setValues(g.x,g.y),g.setValues(f.x,f.y)}u._locXY1=l,u._locXY2=g,u._locXY1N=u.parent.parent.globalToLocal(l.x,l.y),u._locXY2N=u.parent.parent.globalToLocal(g.x,g.y),this._zoomInGroupList.push({index:Number(r.args[0]),id:r.args[0],locX1:u._locXY1N.x,locY1:u._locXY1N.y,locX2:u._locXY2N.x,locY2:u._locXY2N.y})}n.addEventListener(this._mouseTriggerBehavior,this.triggerBtnZoomInMousedownBind),v.default.notNull(n.EffectBase)&&v.default.applyMultiply(n.EffectBase)}this._zoomInGroupList=this._zoomInGroupList.sort(function(e,t){return e.index>t.index?1:-1})}},{key:"getZoomInInfoList",value:function e(){return this._zoomInGroupList.concat()}},{key:"triggerBtnZoomInMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i);this._parent.sendCommand(n.command,i.name),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._parent=e,this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._pickList,this._zoomInGroup=[],this._zoomInGroupList=[],this._zoomInGroupMirror={},this._seq=999}t.ModuleZoom=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnBookPage=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,O=i(15).ModuleOnAndOff,B=i(16).ModuleCalculator,k=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(32).ModuleWordsMarqueeSound,w=i(36).ModuleDragQA,T=i(37).ModuleEnCnTranslate,L=i(38).ModuleAnimateAnsRightWrong,N=i(39).ModuleSpotlight,I=i(40).ModuleLetterStroke,j=(h(E,A=p),n(E,[{key:"init",value:function e(){a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.stop(n,o,!0)}},{key:"stop",value:function e(t,i,n){var o=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i,s=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(o=this.soundObj.excludeTags),r.default.isNull(o)&&(o=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(o=o.concat(this.videoObj.excludeTags)),-1===o.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!s&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!s&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleWordsMarqueeSound&&-1===o.indexOf("ModuleWordsMarqueeSound")&&-1===this._resetExclude.indexOf("ModuleWordsMarqueeSound")&&this._moduleWordsMarqueeSound.stop(),this._moduleDragQA&&-1===o.indexOf("ModuleDragQA")&&-1===this._resetExclude.indexOf("ModuleDragQA")&&this._moduleDragQA.stop(),this._moduleEnCnTranslate&&-1===o.indexOf("ModuleEnCnTranslate")&&-1===this._resetExclude.indexOf("ModuleEnCnTranslate")&&this._moduleEnCnTranslate.stop(),this._moduleAnimateAnsRightWrong&&-1===o.indexOf("ModuleAnimateAnsRightWrong")&&-1===this._resetExclude.indexOf("ModuleAnimateAnsRightWrong")&&this._moduleAnimateAnsRightWrong.stop(),this._moduleSpotlight&&-1===o.indexOf("ModuleSpotlight")&&-1===this._resetExclude.indexOf("ModuleSpotlight")&&this._moduleSpotlight.stop(),this._moduleLetterStroke&&-1===o.indexOf("ModuleLetterStroke")&&-1===this._resetExclude.indexOf("ModuleLetterStroke")&&this._moduleLetterStroke.stop(),this._moduleGoOutCommand&&-1===o.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===o.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===o.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===o.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===o.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===o.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===o.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===o.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===o.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===o.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===o.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===o.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===o.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleAnsZone&&-1===o.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===o.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===o.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleWordsMarqueeSound&&-1===n.indexOf("ModuleWordsMarqueeSound")&&-1===this._resetExclude.indexOf("ModuleWordsMarqueeSound")&&this._moduleWordsMarqueeSound.reset(),this._moduleDragQA&&-1===n.indexOf("ModuleDragQA")&&-1===this._resetExclude.indexOf("ModuleDragQA")&&this._moduleDragQA.reset(),this._moduleEnCnTranslate&&-1===n.indexOf("ModuleEnCnTranslate")&&-1===this._resetExclude.indexOf("ModuleEnCnTranslate")&&this._moduleEnCnTranslate.reset(),this._moduleAnimateAnsRightWrong&&-1===n.indexOf("ModuleAnimateAnsRightWrong")&&-1===this._resetExclude.indexOf("ModuleAnimateAnsRightWrong")&&this._moduleAnimateAnsRightWrong.reset(),this._moduleSpotlight&&-1===n.indexOf("ModuleSpotlight")&&-1===this._resetExclude.indexOf("ModuleSpotlight")&&this._moduleSpotlight.reset(),this._moduleLetterStroke&&-1===n.indexOf("ModuleLetterStroke")&&-1===this._resetExclude.indexOf("ModuleLetterStroke")&&this._moduleLetterStroke.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),o&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleDragQA&&-1===n.indexOf("ModuleDragQA")&&-1===this._resetExclude.indexOf("ModuleDragQA")&&this._moduleDragQA.reset(),this._moduleEnCnTranslate&&-1===n.indexOf("ModuleEnCnTranslate")&&-1===this._resetExclude.indexOf("ModuleEnCnTranslate")&&this._moduleEnCnTranslate.reset(),this._moduleAnimateAnsRightWrong&&-1===n.indexOf("ModuleAnimateAnsRightWrong")&&-1===this._resetExclude.indexOf("ModuleAnimateAnsRightWrong")&&this._moduleAnimateAnsRightWrong.reset(),this._moduleSpotlight&&-1===n.indexOf("ModuleSpotlight")&&-1===this._resetExclude.indexOf("ModuleSpotlight")&&this._moduleSpotlight.reset(),this._moduleLetterStroke&&-1===n.indexOf("ModuleLetterStroke")&&-1===this._resetExclude.indexOf("ModuleLetterStroke")&&this._moduleLetterStroke.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),o&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var o=1<arguments.length&&void 0!==i?i:.2,a=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,o,a)}},{key:"injectMarqueeData",value:function e(t,i){this.marqueeSData=t,this.marqueeDData=i}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"syncMarqueeSound",value:function e(t,i){t!==this.soundChannel&&r.default.notNull(this._moduleWordsMarqueeSound)&&this._moduleWordsMarqueeSound.syncMarqueeSound(t,i)}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new O(this).init(),this._moduleCalculator=new B(this).init(),this._modulePureAnimate=new k(this).init(),this._moduleZoom=new x(this).init(),this._moduleWordsMarqueeSound=new C(this).init(),this._moduleDragQA=new w(this).init(),this._moduleEnCnTranslate=new T(this).init(),this._moduleAnimateAnsRightWrong=new L(this).init(),this._moduleSpotlight=new N(this).init(),this._moduleLetterStroke=new I(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new O(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new B(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new k(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleZoom)?this._moduleZoom=new x(this).init(t):this._moduleZoom.reinit(t),r.default.isNull(this._moduleWordsMarqueeSound)?this._moduleWordsMarqueeSound=new C(this).init(t):this._moduleWordsMarqueeSound.reinit(t),r.default.isNull(this._moduleDragQA)?this._moduleDragQA=new w(this).init(t):this._moduleDragQA.reinit(t),r.default.isNull(this._moduleEnCnTranslate)?this._moduleEnCnTranslate=new T(this).init(t):this._moduleEnCnTranslate.reinit(t),r.default.isNull(this._moduleAnimateAnsRightWrong)?this._moduleAnimateAnsRightWrong=new L(this).init(t):this._moduleAnimateAnsRightWrong.reinit(t),r.default.isNull(this._moduleSpotlight)?this._moduleSpotlight=new N(this).init(t):this._moduleSpotlight.reinit(t),r.default.isNull(this._moduleLetterStroke)?this._moduleLetterStroke=new I(this).init(t):this._moduleLetterStroke.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),E),A;function E(e,t,i,n){l(this,E);var o=d(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,e,t,i,n));return(o._this=o)._resetExclude=[],o.__specClassName="EnBookPage",o}t.EnBookPage=j},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChBookPage=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,O=i(15).ModuleOnAndOff,B=i(16).ModuleCalculator,k=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(31).ModuleWordStroke,w=(h(L,T=p),n(L,[{key:"init",value:function e(){a(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.stop(n,o,!0)}},{key:"stop",value:function e(t,i,n){var o=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i,s=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(o=this.soundObj.excludeTags),r.default.isNull(o)&&(o=[]),-1===o.indexOf("VideoChannel")&&(r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(o=o.concat(this.videoObj.excludeTags)),r.default.notNull(this.videoChannel)&&!s&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!s&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleWordStroke&&-1===o.indexOf("ModuleWordStroke")&&-1===this._resetExclude.indexOf("ModuleWordStroke")&&this._moduleWordStroke.stop(),this._moduleGoOutCommand&&-1===o.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===o.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===o.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===o.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===o.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===o.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===o.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===o.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===o.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===o.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===o.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===o.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===o.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleAnsZone&&-1===o.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===o.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===o.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleWordStroke&&-1===n.indexOf("ModuleWordStroke")&&-1===this._resetExclude.indexOf("ModuleWordStroke")&&this._moduleWordStroke.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),o&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),o&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(a(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleWordStroke&&(this._moduleWordStroke.useJSON=!0,this._moduleWordStroke.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var o=1<arguments.length&&void 0!==i?i:.2,a=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,o,a)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(a(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new O(this).init(),this._moduleCalculator=new B(this).init(),this._modulePureAnimate=new k(this).init(),this._moduleZoom=new x(this).init(),this._moduleWordStroke=new C(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new O(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new B(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new k(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleZoom)?this._moduleZoom=new x(this).init(t):this._moduleZoom.reinit(t),r.default.isNull(this._moduleWordStroke)?this._moduleWordStroke=new C(this).init(t):this._moduleWordStroke.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar);break;case"word-stroke-mix-canvas":this.__backInfo.base.playWordSound(this.__backInfo.wordStrokeBase,this.__backInfo.target,this.__backInfo.isContinue,this.__backInfo.isPlay)}this.__backInfo=null,this.__loadinfo=null}}}]),L),T;function L(e,t,i,n){l(this,L);var o=d(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,e,t,i,n));return(o._this=o)._resetExclude=[],o}t.ChBookPage=w},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(i(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=!window.ActiveXObject&&window.ActiveXObject;t.default={prefixNumberStr:function e(t,i){return(Array(i).join("0")+t).slice(-i)},loadJSON:function e(t,i){var n=void 0;(n=s?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest).callback=i,n.overrideMimeType&&n.overrideMimeType("application/json"),n.open("GET",t,!1),n.onreadystatechange=function(){4==this.readyState&&this.callback(this)},n.send(null)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(i(1));function a(e){return e&&e.__esModule?e:{default:e}}t.default={randomInt:function e(t,i,n){for(var o=void 0;o=Math.round(Math.random()*(i-t))+t,helper.notNull(n)&&o===n;);return o},roundX:function e(t,i){return Math.round(Math.round(t*Math.pow(10,(i||0)+1))/10)/Math.pow(10,i||0)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=o(i(1));function o(e){return e&&e.__esModule?e:{default:e}}t.default={checkArrayEquals:function e(t,i){if(!i)return!1;if(t.length!=i.length)return!1;for(var n=0,o=t.length;n<o;n++)if(t[n]instanceof Array&&i[n]instanceof Array){if(!a.default.checkArrayEquals(t[n],i[n]))return!1}else if(t[n]!==i[n])return!1;return!0},getArrayUnique:function e(t,i,n){return n.indexOf(t)===i},shuffleArray:function e(t){for(var i=t.length-1;0<i;i--){var n=Math.floor(Math.random()*(i+1)),o=[t[n],t[i]];t[i]=o[0],t[n]=o[1]}},sortByValueACS:function e(t,i){return t.value-i.value},sortByNameACS:function e(t,i){var n=t.name.toUpperCase(),o=i.name.toUpperCase();return n<o?-1:o<n?1:0}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,p=s(i(1));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=void 0,l=void 0,d=void 0,h=!1,c=!1;t.default={playSoundCheckLoadRequest:function e(i,t,n,o,a,s,r){var u=i.Sound.play(n,{offset:a,interrupt:i.Sound.INTERRUPT_EARLY,loop:o,volume:s});if("playFailed"===u.playState){var l=function e(t){i.Sound.removeEventListener("fileload",e),i.Sound.removeEventListener("fileerror",h),i.Sound.removeEventListener("error",d),p.default.notNull(r)&&r(n,u,"fileload")},d=function e(t){i.Sound.removeEventListener("fileload",l),i.Sound.removeEventListener("fileerror",h),i.Sound.removeEventListener("error",e),p.default.notNull(r)&&r(n,u,"error")},h=function e(t){i.Sound.removeEventListener("fileload",l),i.Sound.removeEventListener("fileerror",e),i.Sound.removeEventListener("error",d),p.default.notNull(r)&&r(n,u,"fileerror")};i.Sound.alternateExtensions=["mp3"],i.Sound.registerSound(t+n+".mp3",n),p.default.notNull(r)&&r(n,u,"preloading"),i.Sound.addEventListener("fileload",l),i.Sound.addEventListener("error",d),i.Sound.addEventListener("fileerror",h)}else p.default.notNull(r)&&(u.paused=!0,r(n,u,"playSuccess"))},playSound:function e(t,i,n){return t.Sound.play(i,{interrupt:t.Sound.INTERRUPT_EARLY,loop:n})},playWebAudioSound:function e(t,i,n,o,a,s,r){d=t,p.default.notNull(u)?u.stop():u=new _,u.path=i,u.id=n,u.loop=o,u.offset=a,u.volume=s,u.callback=r,u.src=i+n+".mp3",u.play()},playWebAudioSound2:function e(t,i,n,o,a,s,r){d=t,p.default.notNull(l)?l.stop():l=new _,l.path=i,l.id=n,l.loop=o,l.offset=a,l.volume=s,l.callback=r,l.src=i+n+".mp3",l.play()}};var _=(n(g,[{key:"addEventListener",value:function e(t,i){this.hasOwnProperty("_listener")||(this._listener=[]),void 0===this._listener[t]&&(this._listener[t]=[]),this._listener[t].push(i)}},{key:"dispatchEvent",value:function e(t){if(t.target,!t.type)throw new Error("Event Object missing 'type' ");var i;this._listener&&this._listener[t.type]instanceof Array&&this._listener[t.type].forEach(function(e){e.call(this,t)})}},{key:"removeEventListener",value:function e(t,i){if(this._listener&&this._listener[t]instanceof Array)for(var n=this._listener[t],o=0,a=n.length;o<a;o++)if(n[o]===i){n.splice(o,1);break}}},{key:"updateTicker",value:function e(){d.Ticker.paused||d.Ticker._tick()}},{key:"stop",value:function e(){d.Ticker.removeEventListener("tick",this.watchCreateJSIsLive),h=!1,this.audio.removeEventListener("canplaythrough",this.triggerWebAudioCanPaly),this.audio.removeEventListener("loadedmetadata",this.triggerWebAudioMetaData),this.audio.removeEventListener("timeupdate",this.updateTicker),this.audio.autoplay=!1,this.audio.pause()}},{key:"play",value:function e(){d.Ticker.addEventListener("tick",this.watchCreateJSIsLive),this.audio.addEventListener("loadedmetadata",this.triggerWebAudioMetaData),this.audio.addEventListener("timeupdate",this.updateTicker),this.audio.load()}},{key:"triggerWebAudioMetaData",value:function e(t){var i=t.target;i.removeEventListener("loadedmetadata",i.__this.triggerWebAudioCanPaly),i.__this.callback(i.__this.id,i.__this,"playSuccess")}},{key:"triggerWebAudioCanPaly",value:function e(t){var i=t.target;i.removeEventListener("canplaythrough",i.__this.triggerWebAudioCanPaly),p.default.trace("canplay",i.duration,i.currentTime),i.__this.position=i.__this.offset;var n=i.play();void 0!==n?n.then(function(){i.play(),i.__this.callback(i.__this.id,i.__this,"playSuccess")}).catch(function(){i.__this.callback(i.__this.id,i.__this,"fileerror")}):i.__this.callback(i.__this.id,i.__this,"playSuccess")}},{key:"triggerWebAudioError",value:function e(t){var i=t.target;i.__this.callback(i.__this.id,i.__this,"fileerror")}},{key:"triggerWebAudioComplete",value:function e(t){var i=t.target;if(0===i.__this.loopMax)i.__this.dispatchEvent(i.__this.createNewEvent("complete"));else if(i.__this.loopCount++,i.__this.loopCount<=i.__this.loopMax){var n=i.play();void 0!==n&&n.then(function(){i.play()}).catch(function(){i.__this.dispatchEvent(i.__this.createNewEvent("complete"))})}else i.__this.dispatchEvent(i.__this.createNewEvent("complete"))}},{key:"watchCreateJSIsLive",value:function e(t){d.Ticker.paused?(u.paused||(h=!0,u.paused=!0),l.paused||(c=!0,l.paused=!0)):(h&&!d.Ticker.paused?(h=!1,u.paused=!1):h=!1,c&&!d.Ticker.paused?(c=!1,l.paused=!1):c=!1)}},{key:"createNewEvent",value:function e(t){var i;return"function"==typeof Event?i=new Event(t,{bubbles:!0,cancelable:!1}):(i=document.createEvent("Event")).initEvent(t,!0,!0),i}},{key:"autoplay",set:function e(t){this.audio.autoplay=t},get:function e(){return this.audio.autoplay}},{key:"playbackRate",set:function e(t){this.audio.playbackRate=t},get:function e(){return this.audio.playbackRate}},{key:"src",set:function e(t){this.audio.src=t},get:function e(){return this.audio.src}},{key:"volume",set:function e(t){this.audio.volume=t},get:function e(){return this.audio.volume}},{key:"loop",set:function e(t){this.loopMax=0<=t?t:0,this.loopCount=0},get:function e(){return this.loopMax}},{key:"duration",get:function e(){return 1e3*this.audio.duration}},{key:"position",get:function e(){return p.default.notNull(this.audio.currentTime)?1e3*this.audio.currentTime:0},set:function e(t){t<=this.offset&&(t=this.offset),this.audio.currentTime=t/1e3}},{key:"paused",set:function e(t){if(t)this.audio.autoplay=!1,this.audio.pause();else{this.audio.autoplay=!0;var i=this.audio.play(),n=this;void 0!==i&&i.then(function(){n.audio.play()}).catch(function(){})}},get:function e(){return this.audio.paused}}]),g);function g(){r(this,g),this.audio=new Audio,this.audio.preload="metadata",(this.audio.__this=this).audio.autoplay=!1,this.path,this.id,this.offset,this.vol,this.loop,this.callback,this.audio.addEventListener("error",this.triggerWebAudioError),this.audio.addEventListener("ended",this.triggerWebAudioComplete)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,u=s(i(1));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=void 0,d=void 0,h=!1;t.default={playWebVideo:function e(t,i,n,o,a,s,r){d=t,u.default.notNull(l)&&l.stop(),(l=new p).path=i,l.id=n,l.loop=o,l.offset=a,l.volume=s,l.callback=r,l.src=i+n+".mp4",l.play()}};var p=(n(c,[{key:"addEventListener",value:function e(t,i){this.hasOwnProperty("_listener")||(this._listener=[]),void 0===this._listener[t]&&(this._listener[t]=[]),this._listener[t].push(i)}},{key:"dispatchEvent",value:function e(t){if(t.target,!t.type)throw new Error("Event Object missing 'type' ");var i;this._listener&&this._listener[t.type]instanceof Array&&this._listener[t.type].forEach(function(e){e.call(this,t)})}},{key:"removeEventListener",value:function e(t,i){if(this._listener&&this._listener[t]instanceof Array)for(var n=this._listener[t],o=0,a=n.length;o<a;o++)if(n[o]===i){n.splice(o,1);break}}},{key:"updateTicker",value:function e(){d.Ticker.paused||d.Ticker._tick()}},{key:"stop",value:function e(t){var i=0<arguments.length&&void 0!==t&&t;d.Ticker.removeEventListener("tick",this.watchCreateJSIsLive),h=!1,this.video.removeEventListener("canplaythrough",this.triggerWebVideoCanPaly),this.video.removeEventListener("loadedmetadata",this.triggerWebVideoMetaData),this.video.autoplay=!1,this.video.pause(),i&&u.default.notNull(this.videoBitmap)&&(u.default.notNull(this.videoBitmap.parent)&&this.videoBitmap.parent.removeChild(this.videoBitmap),this.videoBitmap=null,this.videoBuffer=null)}},{key:"play",value:function e(){u.default.notNull(this.videoBitmap)&&(u.default.notNull(this.videoBitmap.parent)&&this.videoBitmap.parent.removeChild(this.videoBitmap),this.videoBitmap=null,this.videoBuffer=null),d.Ticker.addEventListener("tick",this.watchCreateJSIsLive),this.video.addEventListener("loadedmetadata",this.triggerWebVideoMetaData)}},{key:"triggerWebVideoMetaData",value:function e(t){var i=t.target;i.removeEventListener("loadedmetadata",i.__this.triggerWebVideoMetaData),i.__this.callback(i.__this.id,i.__this,"playSuccess")}},{key:"triggerWebVideoCanPaly",value:function e(t){var i=t.target;i.removeEventListener("canplaythrough",i.__this.triggerWebVideoCanPaly),u.default.trace("canplay",i.duration,i.currentTime),i.__this.position=i.__this.offset;var n=i.play();void 0!==n?n.then(function(){i.play(),i.__this.callback(i.__this.id,i.__this,"playSuccess")}).catch(function(){i.__this.callback(i.__this.id,i.__this,"fileerror")}):(i.__this.videoBuffer=new d.VideoBuffer(i),i.__this.videoBitmap=new d.Bitmap(i.__this.videoBuffer),i.__this.callback(i.__this.id,i.__this,"playSuccess"))}},{key:"triggerWebVideoError",value:function e(t){var i=t.target;i.__this.callback(i.__this.id,i.__this,"fileerror")}},{key:"triggerWebVideoComplete",value:function e(t){var i=t.target;if(0===i.__this.loopMax)i.__this.dispatchEvent(i.__this.createNewEvent("complete"));else if(i.__this.loopCount++,i.__this.loopCount<=i.__this.loopMax){var n=i.play();void 0!==n&&n.then(function(){i.play()}).catch(function(){i.__this.dispatchEvent(i.__this.createNewEvent("complete"))})}else i.__this.dispatchEvent(i.__this.createNewEvent("complete"))}},{key:"watchCreateJSIsLive",value:function e(t){d.Ticker.paused?l.paused||(h=!0,l.paused=!0):h&&!d.Ticker.paused?(h=!1,l.paused=!1):h=!1}},{key:"createNewEvent",value:function e(t){var i;return"function"==typeof Event?i=new Event(t,{bubbles:!0,cancelable:!1}):(i=document.createEvent("Event")).initEvent(t,!0,!0),i}},{key:"autoplay",set:function e(t){this.video.autoplay=t},get:function e(){return this.video.autoplay}},{key:"playbackRate",set:function e(t){this.video.playbackRate=t},get:function e(){return this.video.playbackRate}},{key:"src",set:function e(t){this.video.src=t},get:function e(){return this.video.src}},{key:"volume",set:function e(t){this.video.volume=t},get:function e(){return this.video.volume}},{key:"loop",set:function e(t){this.loopMax=0<=t?t:0,this.loopCount=0},get:function e(){return this.loopMax}},{key:"duration",get:function e(){return 1e3*this.video.duration}},{key:"position",get:function e(){return u.default.notNull(this.video.currentTime)?1e3*this.video.currentTime:0},set:function e(t){t<=this.offset&&(t=this.offset),this.video.currentTime=t/1e3}},{key:"paused",set:function e(t){if(t)this.video.autoplay=!1,this.video.pause();else{this.video.autoplay=!0;var i=this.video.play(),n=this;void 0!==i&&i.then(function(){n.video.play()}).catch(function(){})}},get:function e(){return this.video.paused}}]),c);function c(){r(this,c),this.video=document.createElement("video"),(this.video.__this=this).video.preload="metadata",this.video.autoplay=!1,this.videoBuffer,this.videoBitmap,this.path,this.id,this.offset,this.vol,this.loop,this.callback,this.video.playsInline="true",this.video["webkit-playsinline"]="true",this.video.addEventListener("error",this.triggerWebVideoError),this.video.addEventListener("ended",this.triggerWebVideoComplete)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(i(1));function a(e){return e&&e.__esModule?e:{default:e}}t.default={collisionTest:function e(t,i){if(t.getBounds()&&i.getBounds()){var n=t.getBounds().width*t.scaleX,o=t.getBounds().height*t.scaleY,a=i.getBounds().width*i.scaleX,s=i.getBounds().height*i.scaleY,r=t.x+t.getBounds().x*t.scaleX-t.regX*t.scaleX,u=t.y+t.getBounds().y*t.scaleY-t.regY*t.scaleY,l=r+n,d=u+o,h=i.x+i.getBounds().x*i.scaleX-i.regX*i.scaleX,p=i.y+i.getBounds().y*i.scaleY-i.regY*i.scaleY,c=h+a,_=p+s,g=void 0,f=void 0;return f=u<p&&p<d||u<_&&_<d,(g=r<h&&h<l||r<c&&c<l)&&f}return!1}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,h=o(i(1));function o(e){return e&&e.__esModule?e:{default:e}}t.default={applyMultiply:function e(t){h.default.notNull(t)&&(t.compositeOperation="multiply")},unapplyMultiply:function e(t){h.default.notNull(t)&&(t.compositeOperation=null)},applyColorFilter:function e(t,i,n,o,a,s){var r=2<arguments.length&&void 0!==n?n:255,u=3<arguments.length&&void 0!==o?o:0,l=4<arguments.length&&void 0!==a?a:0,d=5<arguments.length&&void 0!==s?s:0;h.default.notNull(i)&&i instanceof t.MovieClip&&(h.default.isNull(i.orgAlpha)&&(i.orgAlpha=i.alpha),i.filters=[new t.ColorFilter(0,0,0,1,r,u,l,d)],h.default.notNull(i.nominalBounds)?i.cache(i.nominalBounds.x,i.nominalBounds.y,i.nominalBounds.width,i.nominalBounds.height):h.default.trace("target.nominalBounds is undefined."))},applyColorGrayFilter:function e(t,i,n){var o=2<arguments.length&&void 0!==n?n:.2;h.default.notNull(i)&&i instanceof t.MovieClip&&(h.default.isNull(i.orgAlpha)&&(i.orgAlpha=i.alpha),i.alpha=o,i.filters=[new createjs.ColorMatrixFilter((new t.ColorMatrix).adjustSaturation(-100))],h.default.notNull(i.nominalBounds)?i.cache(i.nominalBounds.x,i.nominalBounds.y,i.nominalBounds.width,i.nominalBounds.height):h.default.trace("target.nominalBounds is undefined."))},unapplyColorFilter:function e(t,i){h.default.notNull(i)&&i instanceof t.MovieClip&&(h.default.isNull(i.orgAlpha)&&(i.orgAlpha=i.alpha),i.alpha=i.orgAlpha,i.filters=null,i.uncache())}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l=o(i(1));function o(e){return e&&e.__esModule?e:{default:e}}var a=!1;t.default={generateExtraCommand:function e(t,i,n){var o={};if(o.owner=n,l.default.notNull(i)){var a=i.split("_");o.command=t,(o.data=a.concat()).shift()}return o},sendExtraCommand:function e(t){for(var i=arguments.length,n=Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];var a,s;if(l.default.trace.apply(l.default,["log: sendExtraCommand",t].concat(n)),l.default.notNull(t)&&l.default.notNull(t.selfInstance)&&l.default.notNull(t.selfInstance.lib)&&l.default.notNull(t.selfInstance.lib.extraSendChannelFunc))(a=t.selfInstance.lib).extraSendChannelFunc.apply(a,[t].concat(n));else if(l.default.notNull(window)){if(window.sendFromChild)(s=window).sendFromChild.apply(s,[t].concat(n));else if(l.default.notNull(window.parent)&&window.parent.sendFromIFrameChild){var r;(r=window.parent).sendFromIFrameChild.apply(r,[t].concat(n))}}else l.default.trace("warning: window is not exist.")},getHtmlhrefValue:function e(t){if(l.default.notNull(window)){var i,n=decodeURI(window.location.href).split("?");if(n.length<=1)return;var o,a=n[1].split("&"),s=void 0,r=void 0;for(r=0;r<a.length;r++){var u=a[r].split("=");if(u[0]==t){s=u[1];break}}return void 0!==s&&(s=unescape(s)).replace(/\+/g," "),s}},canvasResume:function e(t,i){l.default.trace("canvas resume"),t.Ticker.paused=!1,t.Ticker.addEventListener("tick",i)},canvasPause:function e(t,i){l.default.trace("canvas pause"),t.Ticker.paused=!0,t.Ticker.removeEventListener("tick",i)},supportPassive:function e(){if(a)return{passive:!0};if(l.default.isNull(window))return!1;try{var t=Object.defineProperty({},"passive",{get:function e(){a=!0}});window.addEventListener("test",null,t)}catch(e){}return!!a&&{passive:!0}},createNewEvent:function e(t){var i;return"function"==typeof Event?i=new Event(t,{bubbles:!0,cancelable:!1}):(i=document.createEvent("Event")).initEvent(t,!0,!0),i},isIOS:function e(t){var i;return 0<arguments.length&&void 0!==t&&t?(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform)&&!window.MSStream:(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints)&&!window.MSStream}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SoundPlayerBar=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,c=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["SoundPlayBar","MiniSoundPlayBar"],l=(n(d,[{key:"init",value:function e(){if(!this.isInited){var t;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup()}return this}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init(),c.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),this.closeSoundPlayBar();for(var t=this._pickList.length,i=void 0,n=void 0,o=0;o<t;o++)i=this._pickList[o],n=this._parent.getInstanceMirror(i),i.timeTF.text="",i.durationTF.text="",i.timeTF.updateCache(),i.durationTF.updateCache(),i.visible=!1}},{key:"openSoundPlayBar",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:{};this.isInited||this.init(),this.reset(),this._soundPlayBar&&(this._soundPlayBar.visible=!1),this._miniSoundPlayBar&&(this._miniSoundPlayBar.visible=!1),this._controlPlayBar="mini-close"===t||"mini-wait"===t?this._miniSoundPlayBar:this._soundPlayBar,this._soundObj=n,this.initControlSoundPlayBar(t)}},{key:"stopSoundPlayBar",value:function e(){this.isInited||this.init(),c.default.notNull(this._controlPlayBar)&&(this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0,this._parent.soundChannel.position=0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1)}},{key:"closeSoundPlayBar",value:function e(){this.isInited||this.init(),c.default.notNull(this._controlPlayBar)&&(c.default.notNull(this._parent.soundChannel)&&(this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0),this._controlPlayBar.visible=!1,this._parent.createjs.Ticker.removeEventListener("tick",this.watchPlaySoundTickBind),this._soundObj=null,this._controlPlayBar=null)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);-1!==u.indexOf(i.command)&&this._pickList.push(t)}},{key:"setup",value:function e(){this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.pressmoveScrollBind=this.pressmoveScrollBind||this.pressmoveScroll.bind(this),this.mousedownScrollBind=this.mousedownScrollBind||this.mousedownScroll.bind(this),this.pressupScrollBind=this.pressupScrollBind||this.pressupScroll.bind(this),this.pressmoveBarBaseBind=this.pressmoveBarBaseBind||this.pressmoveBarBase.bind(this),this.mousedownBarBaseBind=this.mousedownBarBaseBind||this.mousedownBarBase.bind(this),this.pressupBarBaseBind=this.pressupBarBaseBind||this.pressupBarBase.bind(this),this.watchPlaySoundTickBind=this.watchPlaySoundTickBind||this.watchPlaySoundTick.bind(this);for(var t=this._pickList.length,i=void 0,n=0;n<t;n++)(i=this._pickList[n])._isModuleInited||(i._isModuleInited=!0,this.build(i));this._miniSoundPlayBar||(this._miniSoundPlayBar=this._soundPlayBar),this._soundPlayBar||(this._soundPlayBar=this._miniSoundPlayBar)}},{key:"build",value:function e(t){var i=this._parent.getInstanceMirror(t);"SoundPlayBar"===i.command&&(this._soundPlayBar=t),"MiniSoundPlayBar"===i.command&&(this._miniSoundPlayBar=t),t.controlClose&&(t.controlClose.cursor="pointer",t.controlClose.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlStop&&(t.controlStop.cursor="pointer",t.controlStop.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlPlay&&(t.controlPlay.cursor="pointer",t.controlPlay.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlPause&&(t.controlPause.cursor="pointer",t.controlPause.visible=!1,t.controlPause.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.timeBar&&t.timeBar.pullBall&&(t.timeBar.pullBall.cursor="pointer",t.timeBar.pullBall.addEventListener("pressmove",this.pressmoveScrollBind,c.default.supportPassive()),t.timeBar.pullBall.addEventListener("mousedown",this.mousedownScrollBind,c.default.supportPassive()),t.timeBar.pullBall.addEventListener("pressup",this.pressupScrollBind,c.default.supportPassive())),t.baseMC&&(t.baseMC.addEventListener("pressmove",this.pressmoveBarBaseBind,c.default.supportPassive()),t.baseMC.addEventListener("mousedown",this.mousedownBarBaseBind,c.default.supportPassive()),t.baseMC.addEventListener("pressup",this.pressupBarBaseBind,c.default.supportPassive())),t.timeTF.mouseEnabled=!1,t.durationTF.mouseEnabled=!1,t.gapTF.mouseEnabled=!1,t.timeTF.text="  00:00  ",t.durationTF.text="  00:00  ",t.timeTF.cache(t.timeTF.getBounds().x,t.timeTF.getBounds().y,t.timeTF.getBounds().width,t.timeTF.getBounds().height,1),t.timeTF.updateCache(),t.durationTF.cache(t.durationTF.getBounds().x,t.durationTF.getBounds().y,t.durationTF.getBounds().width,t.durationTF.getBounds().height,1),t.durationTF.updateCache(),t.gapTF.cache(t.gapTF.getBounds().x,t.gapTF.getBounds().y,t.gapTF.getBounds().width,t.gapTF.getBounds().height,1),t.gapTF.updateCache(),t.visible=!1}},{key:"initControlSoundPlayBar",value:function e(t){if(!c.default.isNull(this._soundObj)&&!c.default.isNull(this._controlPlayBar))if(c.default.notNull(this._parent.owner)&&""!==this._parent.owner)c.default.notNull(this._parent.soundChannel)&&(this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),this._parent.soundChannel.stop()),c.default.isNull(this._soundObj.marqueeMode)?this._parent.sendCommand("SoundPlayBar","SoundPlayBar_"+t):this._parent.sendCommand("MarqueeSoundPlayBar","MarqueeSoundPlayBar_"+t);else{if(this._parent.createjs.Ticker.addEventListener("tick",this.watchPlaySoundTickBind),this._soundObj.autoPlay){var i=this._controlPlayBar.nominalBounds,n=this._parent.exportRoot.nominalBounds;"mini-close"===t||"mini-wait"===t?this._controlPlayBar.setTransform(this._soundObj.locX-i.width*this._controlPlayBar.scale/2,this._soundObj.locY-i.height*this._controlPlayBar.scale):this._controlPlayBar.setTransform((n.x+n.width)/2-i.width*this._controlPlayBar.scale/2,n.y+n.height-i.height*this._controlPlayBar.scale),this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!1:this._parent.soundChannel.paused=!1,this._controlPlayBar.controlPlay.visible=!1,this._controlPlayBar.controlPause.visible=!0}else this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1;this._controlPlayBar.visible=!0}}},{key:"triggerMousedown",value:function e(t){var i=t.currentTarget,n;switch(this._parent.getInstanceMirror(i).command){case"controlClose":this._parent.stop(null,!0);break;case"controlPlay":this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!1:this._parent.soundChannel.paused=!1,this._controlPlayBar.controlPlay.visible=!1,this._controlPlayBar.controlPause.visible=!0;break;case"controlPause":this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1;break;case"controlStop":this.stopSoundPlayBar()}this.refreshScroll(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"watchPlaySoundTick",value:function e(t){if(c.default.notNull(this._soundObj)&&this._parent.soundChannel){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(i*=1e3,n*=1e3),this.showBarTime(i,n),this.refreshScroll()}}},{key:"mousedownScroll",value:function e(t){this._parent.setPressEventIsOn(!0),c.default.notNull(this._soundObj)&&this._parent.soundChannel&&(this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!0:this._parent.soundChannel.paused=!0),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressupScroll",value:function e(t){this._parent.setPressEventIsOn(!1),c.default.notNull(this._soundObj)&&this._parent.soundChannel&&(c.default.notNull(this._parent.soundChannel.debugReset)&&this._parent.soundChannel.debugReset(),this._controlPlayBar.controlPause.visible&&(this._parent.soundChannel.defaultPlaybackRate?this._parent.soundChannel.controlPaused=!1:this._parent.soundChannel.paused=!1)),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressmoveScroll",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.lineBase.nominalBounds.width,o=i.parent.globalToLocal(t.stageX,t.stageY);o.x<0&&(o.x=0),o.x>n&&(o.x=n),i.x=o.x;var a=o.x/n;this._parent.soundChannel.position=this._parent.soundChannel.duration*a;var s=this._parent.soundChannel.position,r=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(s*=1e3,r*=1e3),this.showBarTime(r*a,r),this.setBarLineSize(i.parent.lineBase,i.x,i.parent.lineBase.nominalBounds.height,!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"setBarLineSize",value:function e(t,i,n,o){if(void 0!==i&&void 0!==n){var a=t.nominalBounds;o?t.setTransform(t.x-a.width/2,t.y-a.height/2,i/t.nominalBounds.width,n/t.nominalBounds.height):t.setTransform(t.x,t.y,i/t.nominalBounds.width,n/t.nominalBounds.height)}}},{key:"showBarTime",value:function e(t,i){var n=this._controlPlayBar.timeTF,o=this._controlPlayBar.durationTF,a=Math.round(i/1e3),s=Math.floor(a/3600),r=Math.floor((a-3600*s)/60),u=Math.floor(a-(3600*s+60*r));o.text=s<=0?c.default.prefixNumberStr(r,2)+"："+c.default.prefixNumberStr(u,2):c.default.prefixNumberStr(s,2)+"："+c.default.prefixNumberStr(r,2)+"："+c.default.prefixNumberStr(u,2),o.updateCache();var l=Math.round(t/1e3),d=Math.floor(l/3600),h=Math.floor((l-3600*d)/60),p=Math.floor(l-(3600*d+60*h));n.text=d<=0?c.default.prefixNumberStr(h,2)+"："+c.default.prefixNumberStr(p,2):c.default.prefixNumberStr(d,2)+"："+c.default.prefixNumberStr(h,2)+"："+c.default.prefixNumberStr(p,2),n.updateCache()}},{key:"refreshScroll",value:function e(){if(c.default.notNull(this._soundObj)&&this._parent.soundChannel){var t=this._controlPlayBar.timeBar.pullBall,i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration,o=this._parent.soundChannel.position,a=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(o*=1e3,a*=1e3);var s=this._controlPlayBar.timeBar.lineBase.nominalBounds.width;t.x=s*(o/a),this.setBarLineSize(t.parent.lineBase,t.x,t.parent.lineBase.nominalBounds.height,!1)}}},{key:"pressmoveBarBase",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget.parent;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+this._baseMoveFixedX,i.y=n.y+this._baseMoveFixedY;var o=i.nominalBounds.width*i.scale,a=i.nominalBounds.height*i.scale,s=0-i.nominalBounds.x*i.scale,r=this._parent.exportRoot.nominalBounds.width+this._parent.exportRoot.nominalBounds.x-o,u=0-i.nominalBounds.y*i.scale,l=this._parent.exportRoot.nominalBounds.height+this._parent.exportRoot.nominalBounds.y-a;i.x<s&&(i.x=s),i.x>r&&(i.x=r),i.y<u&&(i.y=u),i.y>l&&(i.y=l);var d=Math.abs(i.x-this._baseMoveStartX),h=Math.abs(i.y-this._baseMoveStartY),p=Math.sqrt(Math.pow(d,2)+Math.pow(h,2));t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressupBarBase",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget.parent;t.stopPropagation(),t.stopImmediatePropagation()}},{key:"mousedownBarBase",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget.parent;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);this._baseMoveFixedX=i.x-n.x,this._baseMoveFixedY=i.y-n.y,this._baseMoveStartX=i.x+this._baseMoveFixedX,this._baseMoveStartY=i.y+this._baseMoveFixedY,t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._soundPlayBar,this._miniSoundPlayBar,this._controlPlayBar,this._soundObj}t.SoundPlayerBar=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPlayerBar=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,c=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["VideoPlayBar","MiniVideoPlayBar"],l=(n(d,[{key:"init",value:function e(){if(!this.isInited){var t;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup()}return this}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init(),c.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),this.closeVideoPlayBar();for(var t=this._pickList.length,i=void 0,n=void 0,o=0;o<t;o++)i=this._pickList[o],n=this._parent.getInstanceMirror(i),i.timeTF.text="",i.durationTF.text="",i.timeTF.updateCache(),i.durationTF.updateCache(),i.visible=!1}},{key:"openVideoPlayBar",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:{};this.isInited||this.init(),this.reset(),this._videoPlayBar&&(this._videoPlayBar.visible=!1),this._miniVideoPlayBar&&(this._miniVideoPlayBar.visible=!1),this._controlPlayBar="mini-close"===t||"mini-wait"===t?this._miniVideoPlayBar:this._videoPlayBar,this._videoObj=n,this.initControlVideoPlayBar(t)}},{key:"stopVideoPlayBar",value:function e(){this.isInited||this.init(),c.default.notNull(this._controlPlayBar)&&(this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0,this._parent.videoChannel.position=0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1)}},{key:"closeVideoPlayBar",value:function e(){this.isInited||this.init(),c.default.notNull(this._controlPlayBar)&&(c.default.notNull(this._parent.videoChannel)&&(this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0),this._controlPlayBar.visible=!1,this._parent.createjs.Ticker.removeEventListener("tick",this.watchPlayVideoTickBind),this._videoObj=null,this._controlPlayBar=null)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);-1!==u.indexOf(i.command)&&this._pickList.push(t)}},{key:"setup",value:function e(){this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.pressmoveScrollBind=this.pressmoveScrollBind||this.pressmoveScroll.bind(this),this.mousedownScrollBind=this.mousedownScrollBind||this.mousedownScroll.bind(this),this.pressupScrollBind=this.pressupScrollBind||this.pressupScroll.bind(this),this.pressmoveBarBaseBind=this.pressmoveBarBaseBind||this.pressmoveBarBase.bind(this),this.mousedownBarBaseBind=this.mousedownBarBaseBind||this.mousedownBarBase.bind(this),this.pressupBarBaseBind=this.pressupBarBaseBind||this.pressupBarBase.bind(this),this.watchPlayVideoTickBind=this.watchPlayVideoTickBind||this.watchPlayVideoTick.bind(this);for(var t=this._pickList.length,i=void 0,n=0;n<t;n++)(i=this._pickList[n])._isModuleInited||(i._isModuleInited=!0,this.build(i));this._miniVideoPlayBar||(this._miniVideoPlayBar=this._videoPlayBar),this._videoPlayBar||(this._videoPlayBar=this._miniVideoPlayBar)}},{key:"build",value:function e(t){var i=this._parent.getInstanceMirror(t);"VideoPlayBar"===i.command&&(this._videoPlayBar=t),"MiniVideoPlayBar"===i.command&&(this._miniVideoPlayBar=t),t.controlClose&&(t.controlClose.cursor="pointer",t.controlClose.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlStop&&(t.controlStop.cursor="pointer",t.controlStop.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlPlay&&(t.controlPlay.cursor="pointer",t.controlPlay.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.controlPause&&(t.controlPause.cursor="pointer",t.controlPause.visible=!1,t.controlPause.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind)),t.timeBar&&t.timeBar.pullBall&&(t.timeBar.pullBall.cursor="pointer",t.timeBar.pullBall.addEventListener("pressmove",this.pressmoveScrollBind,c.default.supportPassive()),t.timeBar.pullBall.addEventListener("mousedown",this.mousedownScrollBind,c.default.supportPassive()),t.timeBar.pullBall.addEventListener("pressup",this.pressupScrollBind,c.default.supportPassive())),t.baseMC&&(t.baseMC.addEventListener("pressmove",this.pressmoveBarBaseBind,c.default.supportPassive()),t.baseMC.addEventListener("mousedown",this.mousedownBarBaseBind,c.default.supportPassive()),t.baseMC.addEventListener("pressup",this.pressupBarBaseBind,c.default.supportPassive())),t.timeTF.mouseEnabled=!1,t.durationTF.mouseEnabled=!1,t.gapTF.mouseEnabled=!1,t.timeTF.text="  00:00  ",t.durationTF.text="  00:00  ",t.timeTF.cache(t.timeTF.getBounds().x,t.timeTF.getBounds().y,t.timeTF.getBounds().width,t.timeTF.getBounds().height,1),t.timeTF.updateCache(),t.durationTF.cache(t.durationTF.getBounds().x,t.durationTF.getBounds().y,t.durationTF.getBounds().width,t.durationTF.getBounds().height,1),t.durationTF.updateCache(),t.gapTF.cache(t.gapTF.getBounds().x,t.gapTF.getBounds().y,t.gapTF.getBounds().width,t.gapTF.getBounds().height,1),t.gapTF.updateCache(),t.visible=!1}},{key:"initControlVideoPlayBar",value:function e(t){if(!c.default.isNull(this._videoObj)&&!c.default.isNull(this._controlPlayBar))if(c.default.notNull(this._parent.owner)&&""!==this._parent.owner)c.default.notNull(this._parent.videoChannel)&&(this._parent.videoChannel.removeEventListener("complete",this._parent.videoObj.completeFunc),this._parent.videoChannel.stop()),this._parent.sendCommand("VideoPlayBar","VideoPlayBar_"+t);else{if(this._parent.createjs.Ticker.addEventListener("tick",this.watchPlayVideoTickBind),this._videoObj.autoPlay){var i=this._controlPlayBar.nominalBounds,n=this._parent.exportRoot.nominalBounds;"mini-close"===t||"mini-wait"===t?this._controlPlayBar.setTransform(this._videoObj.locX-i.width*this._controlPlayBar.scale/2,this._videoObj.locY-i.height*this._controlPlayBar.scale):this._controlPlayBar.setTransform((n.x+n.width)/2-i.width*this._controlPlayBar.scale/2,n.y+n.height-i.height*this._controlPlayBar.scale),this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!1:this._parent.videoChannel.paused=!1,this._controlPlayBar.controlPlay.visible=!1,this._controlPlayBar.controlPause.visible=!0}else this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1;this._controlPlayBar.visible=!0}}},{key:"triggerMousedown",value:function e(t){var i=t.currentTarget,n;switch(this._parent.getInstanceMirror(i).command){case"controlClose":this._parent.stop(null,!0);break;case"controlPlay":this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!1:this._parent.videoChannel.paused=!1,this._controlPlayBar.controlPlay.visible=!1,this._controlPlayBar.controlPause.visible=!0;break;case"controlPause":this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0,this._controlPlayBar.controlPlay.visible=!0,this._controlPlayBar.controlPause.visible=!1;break;case"controlStop":this.stopVideoPlayBar()}this.refreshScroll(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"watchPlayVideoTick",value:function e(t){if(c.default.notNull(this._videoObj)&&this._parent.videoChannel){var i=this._parent.videoChannel.position,n=this._parent.videoChannel.duration;this._parent.videoChannel.sec&&(i*=1e3,n*=1e3),this.showBarTime(i,n),this.refreshScroll()}}},{key:"mousedownScroll",value:function e(t){this._parent.setPressEventIsOn(!0),c.default.notNull(this._videoObj)&&this._parent.videoChannel&&(this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!0:this._parent.videoChannel.paused=!0),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressupScroll",value:function e(t){this._parent.setPressEventIsOn(!1),c.default.notNull(this._videoObj)&&this._parent.videoChannel&&this._controlPlayBar.controlPause.visible&&(this._parent.videoChannel.defaultPlaybackRate?this._parent.videoChannel.controlPaused=!1:this._parent.videoChannel.paused=!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressmoveScroll",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.lineBase.nominalBounds.width,o=i.parent.globalToLocal(t.stageX,t.stageY);o.x<0&&(o.x=0),o.x>n&&(o.x=n),i.x=o.x;var a=o.x/n;this._parent.videoChannel.position=this._parent.videoChannel.duration*a;var s=this._parent.videoChannel.position,r=this._parent.videoChannel.duration;this._parent.videoChannel.sec&&(s*=1e3,r*=1e3),this.showBarTime(r*a,r),this.setBarLineSize(i.parent.lineBase,i.x,i.parent.lineBase.nominalBounds.height,!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"setBarLineSize",value:function e(t,i,n,o){if(void 0!==i&&void 0!==n){var a=t.nominalBounds;o?t.setTransform(t.x-a.width/2,t.y-a.height/2,i/t.nominalBounds.width,n/t.nominalBounds.height):t.setTransform(t.x,t.y,i/t.nominalBounds.width,n/t.nominalBounds.height)}}},{key:"showBarTime",value:function e(t,i){var n=this._controlPlayBar.timeTF,o=this._controlPlayBar.durationTF,a=Math.round(i/1e3),s=Math.floor(a/3600),r=Math.floor((a-3600*s)/60),u=Math.floor(a-(3600*s+60*r));o.text=s<=0?c.default.prefixNumberStr(r,2)+"："+c.default.prefixNumberStr(u,2):c.default.prefixNumberStr(s,2)+"："+c.default.prefixNumberStr(r,2)+"："+c.default.prefixNumberStr(u,2),o.updateCache();var l=Math.round(t/1e3),d=Math.floor(l/3600),h=Math.floor((l-3600*d)/60),p=Math.floor(l-(3600*d+60*h));n.text=d<=0?c.default.prefixNumberStr(h,2)+"："+c.default.prefixNumberStr(p,2):c.default.prefixNumberStr(d,2)+"："+c.default.prefixNumberStr(h,2)+"："+c.default.prefixNumberStr(p,2),n.updateCache()}},{key:"refreshScroll",value:function e(){if(c.default.notNull(this._videoObj)&&this._parent.videoChannel){var t=this._controlPlayBar.timeBar.pullBall,i=this._parent.videoChannel.position,n=this._parent.videoChannel.duration,o=this._parent.videoChannel.position,a=this._parent.videoChannel.duration;this._parent.videoChannel.sec&&(o*=1e3,a*=1e3);var s=this._controlPlayBar.timeBar.lineBase.nominalBounds.width;t.x=s*(o/a),this.setBarLineSize(t.parent.lineBase,t.x,t.parent.lineBase.nominalBounds.height,!1)}}},{key:"pressmoveBarBase",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget.parent;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+this._baseMoveFixedX,i.y=n.y+this._baseMoveFixedY;var o=i.nominalBounds.width*i.scale,a=i.nominalBounds.height*i.scale,s=0-i.nominalBounds.x*i.scale,r=this._parent.exportRoot.nominalBounds.width+this._parent.exportRoot.nominalBounds.x-o,u=0-i.nominalBounds.y*i.scale,l=this._parent.exportRoot.nominalBounds.height+this._parent.exportRoot.nominalBounds.y-a;i.x<s&&(i.x=s),i.x>r&&(i.x=r),i.y<u&&(i.y=u),i.y>l&&(i.y=l);var d=Math.abs(i.x-this._baseMoveStartX),h=Math.abs(i.y-this._baseMoveStartY),p=Math.sqrt(Math.pow(d,2)+Math.pow(h,2));t.stopPropagation(),t.stopImmediatePropagation()}},{key:"pressupBarBase",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget.parent;t.stopPropagation(),t.stopImmediatePropagation()}},{key:"mousedownBarBase",value:function e(t){var i=t.currentTarget.parent;this._parent.setPressEventIsOn(!0),i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);this._baseMoveFixedX=i.x-n.x,this._baseMoveFixedY=i.y-n.y,this._baseMoveStartX=i.x+this._baseMoveFixedX,this._baseMoveStartY=i.y+this._baseMoveFixedY,t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._videoPlayBar,this._miniVideoPlayBar,this._controlPlayBar,this._videoObj}t.VideoPlayerBar=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleWordStroke=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,M=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["WordStrokeBar"],l={WordStrokeBar:"none"},d=["右斜豎","左斜豎","臥鉤","長頓點","挑","挑左弧","捺","斜鉤","頓點","撇","撇挑","撇頓點","撇橫","撇橫折鉤","撇橫撇","豎","豎下弧","豎曲鉤","豎折","豎挑","豎鉤","豎撇","豎橫折","豎橫折鉤","豎彎折","橫","橫曲鉤","橫折","橫折鉤","橫折橫","橫折橫豎","橫斜鉤","橫鉤","橫撇","橫撇橫折鉤","橫豎挑","橫彎鉤","點","彎鉤"],h=["str01","str02","str03","str04","str05","str06","str07","str08","str09","str10","str11","str12","str13","str14","str15","str16","str17","str18","str19","str20","str21","str22","str23","str24","str25","str26","str27","str28","str29","str30","str31","str32","str33","str34","str35","str36","str37","str38","str39"],p=["bsh01","bsh02","bsh03","bsh04","bsh05","bsh06","bsh07","bsh08","bsh09","bsh10","bsh11","bsh12","bsh13","bsh14","bsh15","bsh16","bsh17","bsh18","bsh19","bsh20","bsh21","bsh22","bsh23","bsh24","bsh25","bsh26","bsh27","bsh28","bsh29","bsh30","bsh31","bsh32","bsh33","bsh34","bsh35"],c={str01:[1042,2167],str02:[3334,4459],str03:[5500,6500],str04:[7542,8667],str05:[9709,10375],str06:[11459,12834],str07:[13918,14500],str08:[15500,16542],str09:[17500,18375],str10:[19542,20250],str11:[21209,22209],str12:[23292,24542],str13:[25584,26709],str14:[27667,29167],str15:[30167,31500],str16:[32584,33250],str17:[34250,35500],str18:[36542,37834],str19:[38876,39876],str20:[40918,41959],str21:[43042,44e3],str22:[45042,46167],str23:[47209,48417],str24:[49417,50959],str25:[52e3,53334],str26:[54334,54918],str27:[55959,57167],str28:[58250,59167],str29:[60125,61334],str30:[62375,63542],str31:[64584,65709],str32:[66709,67959],str33:[69042,69918],str34:[70959,71918],str35:[72834,74584],str36:[75709,76834],str37:[77792,78792],str38:[79959,80375],str39:[81417,82459],bsh01:[83500,83959],bsh02:[85042,85626],bsh03:[86667,87375],bsh04:[88417,89083],bsh05:[90125,90792],bsh06:[91792,92375],bsh07:[93459,94292],bsh08:[95292,95876],bsh09:[96959,97751],bsh10:[98792,99542],bsh11:[100584,101500],bsh12:[102542,103334],bsh13:[104375,105334],bsh14:[106375,107209],bsh15:[108250,109125],bsh16:[110125,111e3],bsh17:[112042,112959],bsh18:[114042,114959],bsh19:[116e3,116834],bsh20:[117834,118667],bsh21:[119751,120626],bsh22:[121709,122542],bsh23:[123584,124500],bsh24:[125584,126459],bsh25:[127500,128417],bsh26:[129459,130292],bsh27:[131334,132334],bsh28:[133375,134334],bsh29:[135375,136250],bsh30:[137292,138209],bsh31:[139292,140250],bsh32:[141250,142250],bsh33:[143292,144375],bsh34:[145417,146500],bsh35:[147542,148709],buso:[149075,151035]},_=[300,300,300,300,300],y=[.6,.8,1,1.1,1.3],S=[1200,800,500,300,140],g=!1,f=(n(v,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModulesByModule(),this.setupByModule(t))}},{key:"stop",value:function e(t){var i=0<arguments.length&&void 0!==t&&t;if(this.isInited||this.init(),M.default.notNull(this._mixSoundChannel)&&(this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundWatchBind),this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundBusoWatchBind),this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!0,clearTimeout(this._mixSoundInitSeq),M.default.notNull(this._mixSoundInitSeq)&&M.default.isNull(this._mixSoundInit)&&(this._mixSoundInit=!0,this._mixSoundInitSeq=void 0,this._mixSoundChannel.position=0,this._mixSoundChannel.paused=!0,this._mixSoundChannel.volume=1),this._mixSoundChannelBound=null),M.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),M.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc),clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,!i)for(var n=this._wordStrokeBarGroup.length,o=void 0,a=void 0,s=0;s<n;s++)o=this._wordStrokeBarGroup[s],a=this._parent.getInstanceMirror(o),o.configProps.marqueePlayIndex=-1,o.configProps.wordMarquee.gotoAndStop(0),o.configProps.wordMarquee.buso.gotoAndStop(0),o.configProps.wordMarquee.buso.visible=!1,o.toPlay.gotoAndStop(0),o.configProps.playStatus=!1,this.updatePageParam(o)}},{key:"reset",value:function e(){this.isInited||this.init(),M.default.notNull(this._mixSoundChannel)&&(this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundWatchBind),this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundBusoWatchBind),this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!0,clearTimeout(this._mixSoundInitSeq),M.default.notNull(this._mixSoundInitSeq)&&M.default.isNull(this._mixSoundInit)&&(this._mixSoundInit=!0,this._mixSoundInitSeq=void 0,this._mixSoundChannel.position=0,this._mixSoundChannel.paused=!0,this._mixSoundChannel.volume=1),this._mixSoundChannelBound=null),M.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),M.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc),clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0;for(var t=this._wordStrokeBarGroup.length,i=void 0,n=void 0,o=void 0,a=0;a<t;a++){((i=this._wordStrokeBarGroup[a]).parent.wordStrokeBase=i).configProps=i.configProps||{},i.configProps.wordIndex=1,i.configProps.marqueePlayIndex=-1,i.configProps.speed=3,i.configProps.playStatus=!1,i.configProps.mode=1,i.configProps.isContinue=!1,6<=i.configProps.speed&&(i.configProps.speed=1),i.speed.num_txt.text=i.configProps.speed,i.speed.num_txt.updateCache(),i.bishum.gotoAndStop(1),i.bihuw.gotoAndStop(0),i.allSound.gotoAndStop(0),i.toPlay.gotoAndStop(0),i.continuePlay.gotoAndStop(0),o=this.getCustomTag(i);var s=void 0;s=this._wordStrokeBarIndexGroupMirror[o].length;for(var r=0;r<s;r++){var u=this._wordStrokeBarIndexGroupMirror[o][r];u.cursor="pointer",u.addEventListener(this._mouseTriggerBehavior,this.triggerWordMousedownBind),M.default.notNull(i.continuePlay.EffectBase)&&M.default.applyMultiply(u.EffectBase)}s=this._wordStrokeBarMarqueeGroupMirror[o].length;for(var l=0;l<s;l++){var d=this._wordStrokeBarMarqueeGroupMirror[o][l];d.visible=!1,d.gotoAndStop(0),d.buso.visible=!1,d.buso.gotoAndStop(0),d.shumArrayS=[],d.arrayS=[];for(var h=d.shumArray.length,p=0;p<h;p++)d.shumArrayS[p]=this.checkShumSound(d.shumArray[p]),0===d.array.length?d.arrayS[p]=8*p:d.arrayS[p]=d.array[p]-1;var c=this._parent.getInstanceMirror(d);Number(c.args[0])===i.configProps.wordIndex&&(i.bihuwNum.num_txt.text=d.bihuw,i.outSidebihuwNum.num_txt.text=d.outSide,i.bihuwNum.num_txt.updateCache(),i.outSidebihuwNum.num_txt.updateCache(),(i.configProps.wordMarquee=d).visible=!0)}s=this._wordStrokeBarExtendGroupMirror[o].length;for(var _=0;_<s;_++){var g=this._wordStrokeBarExtendGroupMirror[o][_];g.visible=!1;var f=this._parent.getInstanceMirror(g);Number(f.args[0])===i.configProps.wordIndex&&(g.visible=!0)}}if(this.useJSON){0===this._parent.pageParam.length&&(this._parent.pageParam[0]=1),1===this._parent.pageParam.length&&(this._parent.pageParam[1]=1,this._parent.pageParam[2]=3,this._parent.pageParam[3]=0,this._parent.pageParam[4]=0),this._parent.pageParam[0]=Number(this._parent.pageParam[0]),this._parent.pageParam[1]=Number(this._parent.pageParam[1]),this._parent.pageParam[2]=Number(this._parent.pageParam[2]),this._parent.pageParam[3]=Number(this._parent.pageParam[3]),this._parent.pageParam[4]=Number(this._parent.pageParam[4]);for(var v=0;v<t;v++){switch(((i=this._wordStrokeBarGroup[v]).parent.wordStrokeBase=i).configProps=i.configProps||{},i.configProps.wordIndex=this._parent.pageParam[0],i.configProps.marqueePlayIndex=-1,i.configProps.speed=this._parent.pageParam[2],i.configProps.playStatus=0!==this._parent.pageParam[3],i.configProps.mode=this._parent.pageParam[1],i.configProps.isContinue=0!==this._parent.pageParam[4],6<=i.configProps.speed&&(i.configProps.speed=1),i.speed.num_txt.text=i.configProps.speed,i.speed.num_txt.updateCache(),i.bishum.gotoAndStop(0),i.bihuw.gotoAndStop(0),i.allSound.gotoAndStop(0),i.toPlay.gotoAndStop(0),i.continuePlay.gotoAndStop(0),this.refreshShowWord(i),i.configProps.mode){case 1:i.bishum.gotoAndStop(1);break;case 2:i.bihuw.gotoAndStop(1);break;case 3:i.allSound.gotoAndStop(1)}if(i.configProps.playStatus)i.toPlay.gotoAndStop(1),M.default.notNull(this._parent.soundChannel)?this._parent.soundChannel.paused=!1:(i.configProps.wordMarquee.gotoAndStop(0),i.configProps.marqueePlayIndex=0,this.playWordMarquee(i));else{i.toPlay.gotoAndStop(0),o=this.getCustomTag(i);for(var m=this._wordStrokeBarIndexGroupMirror[o].length,b=0;b<m;b++){var y=this._wordStrokeBarIndexGroupMirror[o][b],S=this._parent.getInstanceMirror(y);!0!==this._parent.pageParam[5]&&Number(S.args[0])===i.configProps.wordIndex?(this._parent.pageParam[5]=!0,this.playWordSound(i,y,!1,!0)):!0===this._parent.pageParam[5]&&Number(S.args[0])===i.configProps.wordIndex&&this.playWordSound(i,y,!1,!1)}}i.configProps.isContinue?i.continuePlay.gotoAndStop(1):i.continuePlay.gotoAndStop(0)}}else for(var P=0;P<t;P++)i=this._wordStrokeBarGroup[P],this.updatePageParam(i)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"initModulesByModule",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTargetByModule(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTargetByModule(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"WordStrokeBar":this._wordStrokeBarGroup.push(t),n=this.getCustomTag(t),this._wordStrokeBarIndexGroupMirror[n]=this.pickRelation(t.parent,"wordIndex"),this._wordStrokeBarMarqueeGroupMirror[n]=this.pickRelation(t.parent,"wordMarquee"),this._wordStrokeBarExtendGroupMirror[n]=this.pickRelation(t.parent,"extendProps"),this._wordStrokeBarIndexGroupMirror[n]=this._wordStrokeBarIndexGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1}),this._wordStrokeBarMarqueeGroupMirror[n]=this._wordStrokeBarMarqueeGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1}),this._wordStrokeBarExtendGroupMirror[n]=this._wordStrokeBarExtendGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1})}}}},{key:"pickTargetByModule",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command))switch(i.command){case"WordStrokeBar":n=this.getCustomTag(t),this._wordStrokeBarMarqueeGroupMirror[n]=this.pickRelation(t.parent,"wordMarquee"),this._wordStrokeBarExtendGroupMirror[n]=this.pickRelation(t.parent,"extendProps"),this._wordStrokeBarMarqueeGroupMirror[n]=this._wordStrokeBarMarqueeGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1}),this._wordStrokeBarExtendGroupMirror[n]=this._wordStrokeBarExtendGroupMirror[n].sort(function(e,t){return e.wordIndexSeq>t.wordIndexSeq?1:-1})}}},{key:"getCustomTag",value:function e(t){return M.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&(u.wordIndexSeq=Number(r.args[0])-1,n.push(u))}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerFuncMousedownBind=this.triggerFuncMousedownBind||this.triggerFuncMousedown.bind(this),this.triggerWordMousedownBind=this.triggerWordMousedownBind||this.triggerWordMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerSingleSoundWatchBind=this.triggerSingleSoundWatchBind||this.triggerSingleSoundWatch.bind(this),this.triggerSingleSoundCompleteBind=this.triggerSingleSoundCompleteBind||this.triggerSingleSoundComplete.bind(this),this.triggerBusoSoundWatchBind=this.triggerBusoSoundWatchBind||this.triggerBusoSoundWatch.bind(this),this.triggerBusoSoundCompleteBind=this.triggerBusoSoundCompleteBind||this.triggerBusoSoundComplete.bind(this),this.triggerOneSoundWatchBind=this.triggerOneSoundWatchBind||this.triggerOneSoundWatch.bind(this),this.triggerOneSoundCompleteBind=this.triggerOneSoundCompleteBind||this.triggerOneSoundComplete.bind(this),this.delaySpaceBind=this.delaySpaceBind||this.delaySpace.bind(this),this.checkMixSoundPlayStatusBind=this.checkMixSoundPlayStatusBind||this.checkMixSoundPlayStatus.bind(this),this.triggerMixSoundWatchBind=this.triggerMixSoundWatchBind||this.triggerMixSoundWatch.bind(this),this.triggerMixSoundBusoWatchBind=this.triggerMixSoundBusoWatchBind||this.triggerMixSoundBusoWatch.bind(this),this.triggerMixSingleSoundWatchBind=this.triggerMixSingleSoundWatchBind||this.triggerMixSingleSoundWatch.bind(this),this.delayBusoSpaceBind=this.delayBusoSpaceBind||this.delayBusoSpace.bind(this);for(var n=this._wordStrokeBarGroup.length,o=void 0,a=void 0,s=0;s<n;s++)if(!(o=this._wordStrokeBarGroup[s])._isModuleInited){o._replacePath=i,o._isModuleInited=!0,(o.parent.wordStrokeBase=o).configProps=o.configProps||{},o.configProps.wordIndex=1,o.configProps.marqueePlayIndex=-1,o.configProps.speed=3,o.configProps.playStatus=!1,o.configProps.mode=1,o.configProps.isContinue=!1,6<=o.configProps.speed&&(o.configProps.speed=1),o.speed.num_txt.textBaseline=this._parent.textBaseline,o.speed.num_txt.text=o.configProps.speed,"alphabetic"===this._parent.textBaseline&&(o.speed.num_txt.y+=o.speed.num_txt.lineHeight*this._parent.textAlphabeticFixYScale/o.parent.parent.scaleY),o.speed.num_txt.cache(o.speed.num_txt.getBounds().x,o.speed.num_txt.getBounds().y,o.speed.num_txt.getBounds().width,o.speed.num_txt.getBounds().height,2),o.speed.num_txt.updateCache(),o.bishum.gotoAndStop(1),o.bihuw.gotoAndStop(0),o.allSound.gotoAndStop(0),o.toPlay.gotoAndStop(0),o.continuePlay.gotoAndStop(0),o.bishum.cursor="pointer",o.bihuw.cursor="pointer",o.allSound.cursor="pointer",o.speed.cursor="pointer",o.toPlay.cursor="pointer",o.prevPlay.cursor="pointer",o.nextPlay.cursor="pointer",o.continuePlay.cursor="pointer",o.bishum.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(o.bishum.EffectBase)&&M.default.applyMultiply(o.bishum.EffectBase),o.bihuw.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(o.bihuw.EffectBase)&&M.default.applyMultiply(o.bihuw.EffectBase),o.allSound.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(o.allSound.EffectBase)&&M.default.applyMultiply(o.allSound.EffectBase),o.speed.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(o.speed.EffectBase)&&M.default.applyMultiply(o.speed.EffectBase),o.toPlay.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(o.toPlay.EffectBase)&&M.default.applyMultiply(o.toPlay.EffectBase),o.prevPlay.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(o.prevPlay.EffectBase)&&M.default.applyMultiply(o.prevPlay.EffectBase),o.nextPlay.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(o.nextPlay.EffectBase)&&M.default.applyMultiply(o.nextPlay.EffectBase),o.continuePlay.addEventListener(this._mouseTriggerBehavior,this.triggerFuncMousedownBind),M.default.notNull(o.continuePlay.EffectBase)&&M.default.applyMultiply(o.continuePlay.EffectBase),o.bihuwNum.num_txt.textBaseline=this._parent.textBaseline,"alphabetic"===this._parent.textBaseline&&(o.bihuwNum.num_txt.y+=o.bihuwNum.num_txt.lineHeight*this._parent.textAlphabeticFixYScale),o.outSidebihuwNum.num_txt.textBaseline=this._parent.textBaseline,"alphabetic"===this._parent.textBaseline&&(o.outSidebihuwNum.num_txt.y+=o.outSidebihuwNum.num_txt.lineHeight*this._parent.textAlphabeticFixYScale),o.bihuwNum.num_txt.text="99",o.outSidebihuwNum.num_txt.text="99",o.bihuwNum.num_txt.cache(o.bihuwNum.num_txt.getBounds().x,o.bihuwNum.num_txt.getBounds().y,o.bihuwNum.num_txt.getBounds().width,o.bihuwNum.num_txt.getBounds().height,2),o.outSidebihuwNum.num_txt.cache(o.outSidebihuwNum.num_txt.getBounds().x,o.outSidebihuwNum.num_txt.getBounds().y,o.outSidebihuwNum.num_txt.getBounds().width,o.outSidebihuwNum.num_txt.getBounds().height,2),o.bihuwNum.num_txt.updateCache(),o.outSidebihuwNum.num_txt.updateCache(),a=this.getCustomTag(o);var r=void 0;r=this._wordStrokeBarIndexGroupMirror[a].length;for(var u=0;u<r;u++){var l=this._wordStrokeBarIndexGroupMirror[a][u];l.cursor="pointer",l.addEventListener(this._mouseTriggerBehavior,this.triggerWordMousedownBind),M.default.notNull(o.continuePlay.EffectBase)&&M.default.applyMultiply(l.EffectBase)}r=this._wordStrokeBarMarqueeGroupMirror[a].length;for(var d=0;d<r;d++){var h=this._wordStrokeBarMarqueeGroupMirror[a][d];h._replacePath=i,h.visible=!1,h.gotoAndStop(0),h.buso.visible=!1,h.buso.gotoAndStop(0),h.shumArrayS=[],h.arrayS=[];for(var p=h.shumArray.length,c=0;c<p;c++)h.shumArrayS[c]=this.checkShumSound(h.shumArray[c]),0===h.array.length?h.arrayS[c]=8*c:h.arrayS[c]=h.array[c]-1;var _=this._parent.getInstanceMirror(h);Number(_.args[0])===o.configProps.wordIndex&&(o.bihuwNum.num_txt.text=h.bihuw,o.outSidebihuwNum.num_txt.text=h.outSide,o.bihuwNum.num_txt.updateCache(),o.outSidebihuwNum.num_txt.updateCache(),(o.configProps.wordMarquee=h).visible=!0)}r=this._wordStrokeBarExtendGroupMirror[a].length;for(var g=0;g<r;g++){var f=this._wordStrokeBarExtendGroupMirror[a][g];f.visible=!1;var v=this._parent.getInstanceMirror(f);Number(v.args[0])===o.configProps.wordIndex&&(f.visible=!0)}}this.createMixSoundChannel()}},{key:"setupByModule",value:function e(t){for(var i=0<arguments.length&&void 0!==t?t:"",n=this._wordStrokeBarGroup.length,o=void 0,a=void 0,s=0;s<n;s++){o=this._wordStrokeBarGroup[s],a=this.getCustomTag(o);var r=void 0;r=this._wordStrokeBarMarqueeGroupMirror[a].length;for(var u=0;u<r;u++){var l=this._wordStrokeBarMarqueeGroupMirror[a][u];l.visible=!1,l.gotoAndStop(0),l.buso.visible=!1,l.buso.gotoAndStop(0),l.shumArrayS=[],l.arrayS=[],void 0===l._replacePath&&(l._replacePath=i);for(var d=l.shumArray.length,h=0;h<d;h++)l.shumArrayS[h]=this.checkShumSound(l.shumArray[h]),0===l.array.length?l.arrayS[h]=8*h:l.arrayS[h]=l.array[h]-1;var p=this._parent.getInstanceMirror(l);Number(p.args[0])===o.configProps.wordIndex&&(o.bihuwNum.num_txt.text=l.bihuw,o.outSidebihuwNum.num_txt.text=l.outSide,o.bihuwNum.num_txt.updateCache(),o.outSidebihuwNum.num_txt.updateCache(),(o.configProps.wordMarquee=l).visible=!0)}r=this._wordStrokeBarExtendGroupMirror[a].length;for(var c=0;c<r;c++){var _=this._wordStrokeBarExtendGroupMirror[a][c];_.visible=!1;var g=this._parent.getInstanceMirror(_);Number(g.args[0])===o.configProps.wordIndex&&(_.visible=!0)}}}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"checkShumSound",value:function e(t){var i=d.indexOf(t);return-1!==i?h[i]:null}},{key:"updatePageParam",value:function e(t){this.useJSON&&(this._parent.pageParam=this._parent.pageParam||[],this._parent.pageParam[0]=t.configProps.wordIndex,this._parent.pageParam[1]=t.configProps.mode,this._parent.pageParam[2]=t.configProps.speed,this._parent.pageParam[3]=t.configProps.playStatus?1:0,this._parent.pageParam[4]=t.configProps.isContinue?1:0)}},{key:"triggerFuncMousedown",value:function e(t){var i=t.currentTarget,n=i.parent;switch(i.name){case"bishum":if(0===i.currentFrame){if(n.configProps.mode=1,n.bishum.gotoAndStop(1),n.bihuw.gotoAndStop(0),n.allSound.gotoAndStop(0),M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.target===n){var o=this._parent.soundObj.isBishum,a=this._parent.soundObj.isBuso;if(this.stop(!0),this._parent.clearSoundChannel(),1===n.toPlay.currentFrame)o||a?o&&!a?this.playSingleBishum(n):!o&&a&&this.playWordBuso(n):this.playWordMarquee(n);else if(M.default.notNull(n.toPlay)){var s=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(s)}}else if(M.default.notNull(n.toPlay)){var r=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(r)}}else if(0===n.toPlay.currentFrame&&M.default.notNull(n.toPlay)){var u=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(u)}break;case"bihuw":if(0===i.currentFrame){if(n.configProps.mode=2,n.bishum.gotoAndStop(0),n.bihuw.gotoAndStop(1),n.allSound.gotoAndStop(0),M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.target===n){var l=this._parent.soundObj.isBishum,d=this._parent.soundObj.isBuso;if(this.stop(!0),this._parent.clearSoundChannel(),1===n.toPlay.currentFrame)l||d?l&&!d?this.playSingleBishum(n):!l&&d&&this.playWordBuso(n):this.playWordMarquee(n);else if(M.default.notNull(n.toPlay)){var h=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(h)}}else if(M.default.notNull(n.toPlay)){var p=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(p)}}else if(0===n.toPlay.currentFrame&&M.default.notNull(n.toPlay)){var c=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(c)}break;case"allSound":if(0===i.currentFrame){if(n.configProps.mode=3,n.bishum.gotoAndStop(0),n.bihuw.gotoAndStop(0),n.allSound.gotoAndStop(1),M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.target===n){var _=this._parent.soundObj.isBishum,g=this._parent.soundObj.isBuso;if(this.stop(!0),this._parent.clearSoundChannel(),1===n.toPlay.currentFrame)_||g?_&&!g?this.playSingleBishum(n):!_&&g&&this.playWordBuso(n):this.playWordMarquee(n);else if(M.default.notNull(n.toPlay)){var f=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(f)}}else if(M.default.notNull(n.toPlay)){var v=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(v)}}else if(0===n.toPlay.currentFrame&&M.default.notNull(n.toPlay)){var m=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(m)}break;case"speed":n.configProps.speed++,6<=n.configProps.speed&&(n.configProps.speed=1),n.speed.num_txt.text=n.configProps.speed,n.speed.num_txt.updateCache(),M.default.notNull(this._parent.soundChannel)&&this._parent.soundObj.target===n&&(this._parent.soundChannel.playbackRate=y[n.configProps.speed-1]),M.default.notNull(this._mixSoundChannel)&&(this._mixSoundChannel.playbackRate=y[n.configProps.speed-1]);break;case"toPlay":if(M.default.trace("toPlay",n.configProps.marqueePlayIndex),0===i.currentFrame){if(i.gotoAndStop(1),!0===this._delayTimerS)return this._delayTimerS=void 0,void(this._delayTimer=setTimeout(this._delayTimerSBind,S[this._parent.soundObj.target.configProps.speed-1]));if((M.default.notNull(this._parent.soundObj)&&M.default.notNull(this._parent.soundChannel)&&this._parent.soundObj.target!==n||M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.isBishum)&&(this.stop(!0),this._parent.clearSoundChannel()),n.configProps.playStatus=!0,M.default.notNull(this._parent.soundChannel))this._parent.soundChannel.paused=!1;else if(M.default.notNull(this._mixSoundChannel)&&M.default.notNull(this._parent.soundObj))this._mixSoundChannel.paused=!1;else{if(-1===n.configProps.marqueePlayIndex||n.configProps.wordMarquee.buso.visible)n.configProps.wordMarquee.gotoAndStop(0),n.configProps.marqueePlayIndex=0;else if(n.configProps.marqueePlayIndex+1<=n.configProps.wordMarquee.arrayS.length-1);else if(n.configProps.marqueePlayIndex!==n.configProps.wordMarquee.arrayS.length-1)return n.configProps.wordMarquee.gotoAndStop(n.configProps.wordMarquee.totalFrames-1),void this.playWordBuso(n);this.playWordMarquee(n)}}else M.default.notNull(this._parent.soundChannel)?(i.gotoAndStop(0),n.configProps.playStatus=!1,this._parent.soundChannel.paused=!0,M.default.notNull(this._mixSoundChannel)&&(this._mixSoundChannel.paused=!0)):M.default.notNull(this._mixSoundChannel)&&M.default.notNull(this._parent.soundObj)?(i.gotoAndStop(0),n.configProps.playStatus=!1,this._mixSoundChannel.paused=!0):M.default.notNull(this._parent.soundObj)&&(i.gotoAndStop(0),n.configProps.playStatus=!1,this.triggerSoundIsPaused=!0),void 0!==this._delayTimer&&(clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=!0);break;case"prevPlay":if(M.default.trace("prevPlay",n.configProps.marqueePlayIndex,n.configProps.wordMarquee.arrayS.length),n.configProps.marqueePlayIndex>=n.configProps.wordMarquee.arrayS.length&&(n.configProps.marqueePlayIndex=n.configProps.wordMarquee.arrayS.length),-1<=n.configProps.marqueePlayIndex-1)if(n.configProps.marqueePlayIndex--,0<=n.configProps.marqueePlayIndex)n.configProps.wordMarquee.gotoAndStop(n.configProps.wordMarquee.arrayS[n.configProps.marqueePlayIndex]),this.stop(!0),this._parent.clearSoundChannel(),n.configProps.playStatus?this.playWordMarquee(n):this.playSingleBishum(n);else{if(n.configProps.playStatus&&M.default.notNull(n.toPlay)){var b=new this._parent.createjs.Event(this._mouseTriggerBehavior);n.toPlay.dispatchEvent(b)}this.stop(!0),this._parent.clearSoundChannel(),n.configProps.marqueePlayIndex=-1,n.configProps.wordMarquee.gotoAndStop(0)}else n.configProps.wordMarquee.gotoAndStop(0);break;case"nextPlay":M.default.trace("nextPlay",n.configProps.marqueePlayIndex),n.configProps.marqueePlayIndex+1<=n.configProps.wordMarquee.arrayS.length-1&&(n.configProps.marqueePlayIndex++,n.configProps.wordMarquee.gotoAndStop(n.configProps.wordMarquee.arrayS[n.configProps.marqueePlayIndex]),this.stop(!0),this._parent.clearSoundChannel(),n.configProps.playStatus?this.playWordMarquee(n):this.playSingleBishum(n));break;case"continuePlay":0===i.currentFrame?(this.stop(!0),this._parent.clearSoundChannel(),i.gotoAndStop(1),n.configProps.isContinue=!0,n.configProps.marqueePlayIndex=-1,this.playWordSound(n,n.parent["wordIndex_"+n.configProps.wordIndex],!0)):(i.gotoAndStop(0),n.configProps.isContinue=!1)}this.updatePageParam(n),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerWordMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n,o=i.parent.wordStrokeBase;this.playWordSound(o,i),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"refreshShowWord",value:function e(t){var i=this.getCustomTag(t),n=void 0;n=this._wordStrokeBarMarqueeGroupMirror[i].length;for(var o=0;o<n;o++){var a=this._wordStrokeBarMarqueeGroupMirror[i][o];a.gotoAndStop(0);var s=this._parent.getInstanceMirror(a);Number(s.args[0])!==t.configProps.wordIndex||a.visible||this._parent.sendPageFlipMessage(),a.visible=!1,a.buso.gotoAndStop(0),a.buso.visible=!1,Number(s.args[0])===t.configProps.wordIndex&&(a.visible=!0,t.bihuwNum.num_txt.text=a.bihuw,t.outSidebihuwNum.num_txt.text=a.outSide,t.bihuwNum.num_txt.updateCache(),t.outSidebihuwNum.num_txt.updateCache(),t.configProps.wordMarquee=a)}n=this._wordStrokeBarExtendGroupMirror[i].length;for(var r=0;r<n;r++){var u=this._wordStrokeBarExtendGroupMirror[i][r];u.visible=!1;var l=this._parent.getInstanceMirror(u);Number(l.args[0])===t.configProps.wordIndex&&(u.visible=!0)}}},{key:"playWordSound",value:function e(t,i,n,o){var a=2<arguments.length&&void 0!==n&&n,s=!(3<arguments.length&&void 0!==o)||o;this._parent.stop(["ModuleWordStroke"],!0);var r=this._parent.getInstanceMirror(i);if(t.configProps.wordIndex=Number(r.args[0]),t.configProps.marqueePlayIndex=-1,t.toPlay.gotoAndStop(0),t.configProps.playStatus=!1,this.refreshShowWord(t),this.updatePageParam(t),void 0===this._parent.exportRoot["wordMarquee_"+t.configProps.wordIndex])return t.bihuwNum.num_txt.text="",t.outSidebihuwNum.num_txt.text="",t.bihuwNum.num_txt.updateCache(),t.outSidebihuwNum.num_txt.updateCache(),this._parent.loadContentByModule(this._parent.moduleConfigData["wordMarquee_"+t.configProps.wordIndex],{wordStrokeBase:t,target:i,isContinue:a,isPlay:s,base:this,TYPE:"word-stroke-mix-canvas"}),void this._parent.sendPageFlipMessage();if(s){var u=this._parent.exportRoot["wordMarquee_"+t.configProps.wordIndex]._replacePath,l=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+u+"sounds/":u+"./sounds/";this._parent.soundObj={id:t.configProps.wordMarquee.word,path:l,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerOneSoundWatchBind,completeFunc:this.triggerOneSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:r.command,target:i,isContinue:a,wordStrokeBase:t},this._parent.iosMode?M.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}}},{key:"playSingleBishum",value:function e(t){this._parent.stop(["ModuleWordStroke"],!0);var i=this._parent.getInstanceMirror(t),n=void 0,o=null;switch(t.configProps.mode){case 1:n=p[t.configProps.marqueePlayIndex],o=null;break;case 2:n=t.configProps.wordMarquee.shumArrayS[t.configProps.marqueePlayIndex],o=null;break;case 3:n=p[t.configProps.marqueePlayIndex],o=t.configProps.wordMarquee.shumArrayS[t.configProps.marqueePlayIndex]}t.configProps.wordMarquee.buso.visible=!1;var a=t.configProps.wordMarquee.arrayS[t.configProps.marqueePlayIndex],s=t.configProps.wordMarquee.arrayS[t.configProps.marqueePlayIndex+1]||t.configProps.wordMarquee.totalFrames-1,r=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:n,path:r,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSingleSoundWatchBind,completeFunc:this.triggerSingleSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:i.command,target:t,id2:o,start:a,end:s,isBishum:!0},t.configProps.wordMarquee.gotoAndStop(a),M.default.notNull(this._mixSoundChannel)?(this._prevTime=-1,this._mixSoundChannelBound=c[n],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!1):M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"playWordMarquee",value:function e(t){this._parent.stop(["ModuleWordStroke"],!0);var i=this._parent.getInstanceMirror(t),n=void 0,o=null,a="space";switch(t.configProps.mode){case 1:n=p[t.configProps.marqueePlayIndex],o=null;break;case 2:n=t.configProps.wordMarquee.shumArrayS[t.configProps.marqueePlayIndex],o=null;break;case 3:n=p[t.configProps.marqueePlayIndex],o=t.configProps.wordMarquee.shumArrayS[t.configProps.marqueePlayIndex]}t.configProps.wordMarquee.buso.visible=!1;var s=t.configProps.wordMarquee.arrayS[t.configProps.marqueePlayIndex],r=t.configProps.wordMarquee.arrayS[t.configProps.marqueePlayIndex+1]||t.configProps.wordMarquee.totalFrames-1,u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";t.configProps.wordMarquee.gotoAndStop(s),this._parent.soundObj={id:n,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:i.command,target:t,id2:o,id3:a,start:s,end:r},M.default.notNull(this._mixSoundChannel)?(this._prevTime=-1,this._mixSoundChannelBound=c[n],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSoundWatchBind),this._mixSoundChannel.paused=!1):M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"playWordBuso",value:function e(t){this._parent.stop(["ModuleWordStroke"],!0);var i=this._parent.getInstanceMirror(t),n="buso",o=null,a="space";t.configProps.wordMarquee.buso.visible=!0,t.configProps.wordMarquee.buso.gotoAndStop(0);var s=0,r=t.configProps.wordMarquee.buso.totalFrames-1;t.configProps.marqueePlayIndex++;var u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:n,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerBusoSoundWatchBind,completeFunc:this.triggerBusoSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:i.command,target:t,id2:o,id3:a,start:0,end:r,isBuso:!0},M.default.notNull(this._mixSoundChannel)?(this._prevTime=-1,this._mixSoundChannelBound=c.buso,this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSoundBusoWatchBind),this._mixSoundChannel.paused=!1):M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.nominalBounds,a={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},s=i.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:n.args[1],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i},M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(M.default.isNull(this._parent.soundObj)||M.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)M.default.notNull(i)&&i.stop();else switch(n){case"fileload":M.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(!0),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundObj.target.configProps&&(this._parent.soundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this.triggerSoundIsPaused||(this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay),this.triggerSoundIsPaused=!1,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc)}}},{key:"createMixSoundChannel",value:function e(){if(M.default.isNull(this._mixSoundChannel)){var t=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";M.default.playWebAudioSound2(this._parent.createjs,t,"MIX",0,0,0,this.checkMixSoundPlayStatusBind)}}},{key:"checkMixSoundPlayStatus",value:function e(t,i,n){switch(n){case"fileerror":break;case"playSuccess":var o=this;this._mixSoundChannel=i,this._mixSoundChannel.position=0,this._mixSoundChannel.volume=1,this._mixSoundChannel.paused=!0,this._mixSoundInit=!0}}},{key:"triggerMixSoundWatch",value:function e(t){if(M.default.notNull(this._mixSoundChannel)&&M.default.notNull(this._mixSoundChannelBound)&&this._prevTime!==this._mixSoundChannel.position){var i=this._mixSoundChannel.position;if(this._prevTime=i,this._mixSoundChannel.sec&&(i*=1e3),i>=Number(this._mixSoundChannelBound[1]))return this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundWatchBind),this._mixSoundChannel.volume=0,void this.triggerMixSoundComplete();this._mixSoundChannel.volume=this._parent.soundObj.volume,i-=this._mixSoundChannelBound[0];var n=this._parent.soundObj,o,a=n.target.configProps.wordMarquee,s=n.start,r=n.end,u=this._parent.lib.properties.fps;i<0&&(i=0);var l=1e3/_[2]*1e3,d=Math.round(i/l*u);if(d<0&&(d=0),M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){var h=s+d;r<=h&&(h=r),a.gotoAndStop(h)}}}},{key:"triggerMixSoundComplete",value:function e(t){if(M.default.isNull(this._parent.soundObj.id2)&&M.default.isNull(this._parent.soundObj.id3)){this.stop(!0);var i=this._parent.soundObj,n=i.target,o=n.configProps.wordMarquee,a=i.end;o.gotoAndStop(a),n.configProps.marqueePlayIndex>=o.array.length-1?(this._parent.clearSoundChannel(),this.playWordBuso(n)):(this._parent.clearSoundChannel(),n.configProps.marqueePlayIndex++,this.playWordMarquee(n))}else if(M.default.notNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3))this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,this._prevTime=-1,this._mixSoundChannelBound=c[this._parent.soundObj.id],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSoundWatchBind),this._mixSoundChannel.paused=!1;else if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){this._parent.soundObj.id=this._parent.soundObj.id3,this._parent.soundObj.id3=null,clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,this._delayTimerSBind=this.delaySpaceBind,this._delayTimer=setTimeout(this.delaySpaceBind,S[this._parent.soundObj.target.configProps.speed-1]);var s=this._parent.soundObj,r,u=s.target.configProps.wordMarquee,l=s.end;u.gotoAndStop(l)}}},{key:"triggerMixSoundBusoWatch",value:function e(t){if(M.default.notNull(this._mixSoundChannel)&&this._prevTime!==this._mixSoundChannel.position){var i=this._mixSoundChannel.position;if(this._prevTime=i,this._mixSoundChannel.sec&&(i*=1e3),i>=Number(this._mixSoundChannelBound[1]))return this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSoundBusoWatchBind),this._mixSoundChannel.paused=!0,void this.triggerMixSoundBusoComplete();i-=this._mixSoundChannelBound[0];var n=this._parent.soundObj,o,a=n.target.configProps.wordMarquee,s=n.start,r=n.end;i<0&&(i=0);var u=this._parent.lib.properties.fps,l=1e3,d=Math.round(i/1e3*u);if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){var h=s+d;r<=h&&(h=r),a.buso.gotoAndStop(h)}}}},{key:"triggerMixSoundBusoComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)&&M.default.isNull(this._parent.soundObj.id3)){var i=this._parent.soundObj,n=i.target,o=n.configProps.wordMarquee,a=i.end;if(o.buso.gotoAndStop(a),n.toPlay.gotoAndStop(0),n.configProps.playStatus=!1,this._parent.clearSoundChannel(),n.configProps.isContinue){var s=this.getCustomTag(n);n.configProps.wordIndex+1<=this._wordStrokeBarIndexGroupMirror[s].length?(n.configProps.wordIndex++,this.refreshShowWord(n),n.configProps.marqueePlayIndex=-1,this.playWordSound(n,n.parent["wordIndex_"+n.configProps.wordIndex],!0)):(n.toPlay.gotoAndStop(0),n.continuePlay.gotoAndStop(0),n.configProps.playStatus=!1,n.configProps.isContinue=!1)}this.updatePageParam(n)}else if(M.default.notNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3))this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,this._prevTime=-1,this._mixSoundChannelBound=c[this._parent.soundObj.id],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSoundBusoWatchBind),this._mixSoundChannel.paused=!1;else if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){this._parent.soundObj.id=this._parent.soundObj.id3,this._parent.soundObj.id3=null,clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,this._delayTimerSBind=this.delayBusoSpaceBind,this._delayTimer=setTimeout(this.delayBusoSpaceBind,S[this._parent.soundObj.target.configProps.speed-1]);var r=this._parent.soundObj,u,l=r.target.configProps.wordMarquee,d=r.end;l.buso.gotoAndStop(d)}}},{key:"delayBusoSpace",value:function e(){clearTimeout(this._delayTimer),this._delayTimer=void 0;var t=this._parent.soundObj,i=t.target,n=i.configProps.wordMarquee,o=t.end;if(n.buso.gotoAndStop(t.start),i.toPlay.gotoAndStop(0),i.configProps.playStatus=!1,this._parent.clearSoundChannel(),i.configProps.isContinue){var a=this.getCustomTag(i);i.configProps.wordIndex+1<=this._wordStrokeBarIndexGroupMirror[a].length?(i.configProps.wordIndex++,this.refreshShowWord(i),i.configProps.marqueePlayIndex=-1,this.playWordSound(i,i.parent["wordIndex_"+i.configProps.wordIndex],!0)):(i.toPlay.gotoAndStop(0),i.continuePlay.gotoAndStop(0),i.configProps.playStatus=!1,i.configProps.isContinue=!1)}this.updatePageParam(i)}},{key:"triggerMixSingleSoundWatch",value:function e(t){if(M.default.notNull(this._mixSoundChannel)&&this._prevTime!==this._mixSoundChannel.position){var i=this._mixSoundChannel.position;if(this._prevTime=i,this._mixSoundChannel.sec&&(i*=1e3),i>=Number(this._mixSoundChannelBound[1]))return this._parent.createjs.Ticker.removeEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!0,void this.triggerMixSingleSoundComplete();i-=this._mixSoundChannelBound[0];var n=this._parent.soundObj,o,a=n.target.configProps.wordMarquee,s=n.start,r=n.end;i<0&&(i=0);var u=this._parent.lib.properties.fps,l=1e3/_[2]*1e3,d=Math.round(i/l*u);if(M.default.isNull(this._parent.soundObj.id2)){var h=s+d;r<=h&&(h=r),a.gotoAndStop(h)}}}},{key:"triggerMixSingleSoundComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)){var i=this._parent.soundObj,n,o=i.target.configProps.wordMarquee,a=i.end;o.gotoAndStop(a),this._parent.clearSoundChannel()}else this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,this._prevTime=-1,this._mixSoundChannelBound=c[this._parent.soundObj.id],this._parent.soundObj.target.configProps&&(this._mixSoundChannel.playbackRate=y[this._parent.soundObj.target.configProps.speed-1]),this._mixSoundChannel.position=Number(this._mixSoundChannelBound[0]),this._parent.createjs.Ticker.addEventListener("tick",this.triggerMixSingleSoundWatchBind),this._mixSoundChannel.paused=!1}},{key:"triggerOneSoundWatch",value:function e(t){}},{key:"triggerOneSoundComplete",value:function e(t){var i=!!this._parent.soundObj.isContinue&&this._parent.soundObj.isContinue,n=this._parent.soundObj.wordStrokeBase,o;this.stop(!0),this._parent.clearSoundChannel(),i&&(n.toPlay.gotoAndStop(1),M.default.notNull(this._parent.soundObj)&&M.default.notNull(this._parent.soundChannel)&&this._parent.soundObj.target!==n&&(this.stop(!0),this._parent.clearSoundChannel()),n.configProps.playStatus=!0,M.default.notNull(this._parent.soundChannel)?this._parent.soundChannel.paused=!1:(n.configProps.wordMarquee.gotoAndStop(0),n.configProps.marqueePlayIndex=0,this.playWordMarquee(n)))}},{key:"triggerSingleSoundWatch",value:function e(t){if(M.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var o=this._parent.soundObj,a,s=o.target.configProps.wordMarquee,r=o.start,u=o.end,l=this._parent.lib.properties.fps;(i-=this._parent.wordStrokeOffsetMs)<0&&(i=0);var d=1e3/_[2]*1e3,h=Math.round(i/d*l);if(M.default.isNull(this._parent.soundObj.id2)){var p=r+h;u<=p&&(p=u),s.gotoAndStop(p)}}}},{key:"triggerSingleSoundComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)){var i=this._parent.soundObj,n,o=i.target.configProps.wordMarquee,a=i.end;o.gotoAndStop(a),this._parent.clearSoundChannel()}else this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerSoundWatch",value:function e(t){if(M.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var o=this._parent.soundObj,a,s=o.target.configProps.wordMarquee,r=o.start,u=o.end,l=this._parent.lib.properties.fps;(i-=this._parent.wordStrokeOffsetMs)<0&&(i=0);var d=1e3/_[2]*1e3,h=Math.round(i/d*l);if(h<0&&(h=0),M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){var p=r+h;u<=p&&(p=u),s.gotoAndStop(p)}}}},{key:"triggerSoundComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)&&M.default.isNull(this._parent.soundObj.id3)){var i=this._parent.soundObj,n=i.target,o=n.configProps.wordMarquee,a=i.end;o.gotoAndStop(a),n.configProps.marqueePlayIndex>=o.array.length-1?(this._parent.clearSoundChannel(),this.playWordBuso(n)):(this._parent.clearSoundChannel(),n.configProps.marqueePlayIndex++,this.playWordMarquee(n))}else if(M.default.notNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3))this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);else if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){this._parent.soundObj.id=this._parent.soundObj.id3,this._parent.soundObj.id3=null,clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,this._delayTimerSBind=this.delaySpaceBind,this._delayTimer=setTimeout(this.delaySpaceBind,S[this._parent.soundObj.target.configProps.speed-1]);var s=this._parent.soundObj,r,u=s.target.configProps.wordMarquee,l=s.end,d,h,p,c;return void u.gotoAndStop(l)}}},{key:"delaySpace",value:function e(){clearTimeout(this._delayTimer),this._delayTimer=void 0;var t,i=this._parent.soundObj.target,n=i.configProps.wordMarquee;0!==i.toPlay.currentFrame&&(i.configProps.marqueePlayIndex>=n.array.length-1?(this._parent.clearSoundChannel(),this.playWordBuso(i)):(this._parent.clearSoundChannel(),i.configProps.marqueePlayIndex++,this.playWordMarquee(i)))}},{key:"triggerBusoSoundWatch",value:function e(t){if(M.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var o=this._parent.soundObj,a,s=o.target.configProps.wordMarquee,r=o.start,u=o.end,l=this._parent.lib.properties.fps,d=1e3,h=Math.round(i/1e3*l);if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){var p=r+h;u<=p&&(p=u),s.buso.gotoAndStop(p)}}}},{key:"triggerBusoSoundComplete",value:function e(t){if(this.stop(!0),M.default.isNull(this._parent.soundObj.id2)&&M.default.isNull(this._parent.soundObj.id3)){var i=this._parent.soundObj,n=i.target,o=n.configProps.wordMarquee,a=i.end;if(o.buso.gotoAndStop(a),n.toPlay.gotoAndStop(0),n.configProps.playStatus=!1,this._parent.clearSoundChannel(),n.configProps.isContinue){var s=this.getCustomTag(n);n.configProps.wordIndex+1<=this._wordStrokeBarIndexGroupMirror[s].length?(n.configProps.wordIndex++,this.refreshShowWord(n),n.configProps.marqueePlayIndex=-1,this.playWordSound(n,n.parent["wordIndex_"+n.configProps.wordIndex],!0)):(n.toPlay.gotoAndStop(0),n.continuePlay.gotoAndStop(0),n.configProps.playStatus=!1,n.configProps.isContinue=!1)}this.updatePageParam(n)}else if(M.default.notNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3))this._parent.soundObj.id=this._parent.soundObj.id2,this._parent.soundObj.id2=null,M.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);else if(M.default.isNull(this._parent.soundObj.id2)&&M.default.notNull(this._parent.soundObj.id3)){this._parent.soundObj.id=this._parent.soundObj.id3,this._parent.soundObj.id3=null,clearTimeout(this._delayTimer),this._delayTimer=void 0,this._delayTimerS=void 0,this._delayTimerSBind=this.delayBusoSpaceBind,this._delayTimer=setTimeout(this.delayBusoSpaceBind,S[this._parent.soundObj.target.configProps.speed-1]);var r=this._parent.soundObj,u,l=r.target.configProps.wordMarquee,d=r.end,h,p,c,_;return void l.buso.gotoAndStop(d)}}}]),v);function v(e){var t;r(this,v),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._wordStrokeBarGroup=[],this._wordStrokeBarIndexGroupMirror={},this._wordStrokeBarMarqueeGroupMirror={},this._wordStrokeBarExtendGroupMirror={},this._prevTime=-1,this._seq=999,this.triggerSoundIsPaused=!1,15==(navigator.platform.match(/iPhone|iPod|iPad|Mac/)?15:0)&&(S[0]-=140,S[1]-=140,S[2]-=140,S[3]-=140,S[4]-=140)}t.ModuleWordStroke=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleWordsMarqueeSound=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,c=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=i(33),u=["ReadSound","MarqueeS","MarqueeD"],l={ReadSound:"none",MarqueeS:"ex-normal-wait",MarqueeD:"ex-normal-wait"},d=!1,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"debugReset",value:function e(){this._parent.getParentIsNoDefinition()&&(this.isInited||this.init(),this._playSubPrev=-1,this._marqueeSPlayCount.length=0,this._marqueeDPlayCount.length=0)}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init(),this.debugReset();var t=void 0,i=void 0,n=void 0,o=void 0,a=void 0,s=void 0;for(t=this._readSoundGroup.length,n=0;n<t;n++)a=this._readSoundGroup[n],c.default.notNull(a)&&(a.bitmapCache||a._buttonHelper&&!1===a._buttonHelper.enabled)&&(c.default.notNull(a.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,a.EffectBase),c.default.notNull(a.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,a.EffectBaseShadow),this.applyReverseCache(a),a.gotoAndStop(0));for(t=this._marqueeSGroup.length,n=0;n<t;n++){a=this._marqueeSGroup[n];var r=this.getCustomTag(a);for(i=this._marqueeSControlMirror[r].length,o=0;o<i;o++)s=this._marqueeSControlMirror[r][o],c.default.notNull(s)&&(s.bitmapCache||s._buttonHelper&&!1===s._buttonHelper.enabled)&&(c.default.notNull(s.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,s.EffectBase),c.default.notNull(s.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,s.EffectBaseShadow),this.applyReverseCache(s),s.gotoAndStop(0))}for(t=this._marqueeDGroup.length,n=0;n<t;n++){a=this._marqueeDGroup[n];var u=this.getCustomTag(a);for(i=this._marqueeDControlMirror[u].length,o=0;o<i;o++)s=this._marqueeDControlMirror[u][o],c.default.notNull(s)&&(s.bitmapCache||s._buttonHelper&&!1===s._buttonHelper.enabled)&&(c.default.notNull(s.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,s.EffectBase),c.default.notNull(s.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,s.EffectBaseShadow),this.applyReverseCache(s),s.gotoAndStop(0))}c.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),c.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"syncMarqueeSound",value:function e(t,i){if(this.isInited||this.init(),"marqueeS"===i.marqueeMode){for(var n=this._marqueeSGroup.length,o=null,a=0;a<n;a++){var s=this._marqueeSGroup[a],r;if(this._parent.getInstanceMirror(s).args[0]===i.id){o=s;break}}c.default.notNull(o)&&(this.stop(),this._parent.soundObj=_.cloneDeep(i),this._parent.soundObj.callback=this.checkSoundPlayStatusBind,this._parent.soundObj.watchFunc=this.triggerSoundWatchSyncBind,this._parent.soundObj.completeFunc=this.triggerSoundCompleteBind,this._parent.soundObj.target=o,this._parent.soundChannel=t,this._prevTime=-1,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc))}else if("marqueeD"===i.marqueeMode){for(var u=this._marqueeDGroup.length,l=null,d=0;d<u;d++){var h=this._marqueeDGroup[d],p;if(this._parent.getInstanceMirror(h).args[0]===i.id){l=h;break}}c.default.notNull(l)&&(this.stop(),this._parent.soundObj=_.cloneDeep(i),this._parent.soundObj.callback=this.checkSoundPlayStatusBind,this._parent.soundObj.watchFunc=this.triggerSoundWatchSyncBind,this._parent.soundObj.completeFunc=this.triggerSoundCompleteBind,this._parent.soundObj.target=l,this._parent.soundChannel=t,this._prevTime=-1,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc))}}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"ReadSound":this._readSoundGroup.push(t);break;case"MarqueeS":n=this.getCustomTag(t),void 0!==this._parent.marqueeSData&&(this._marqueeSGroup.push(t),this._marqueeSControlMirror[n]=this.pickRelation(i.parent,this._parent.marqueeSData[i.args[0]]));break;case"MarqueeD":n=this.getCustomTag(t),void 0!==this._parent.marqueeDData&&(this._marqueeDGroup.push(t),this._marqueeDControlMirror[n]=this.pickRelation(i.parent,this._parent.marqueeDData[i.args[0]]))}}}},{key:"getCustomTag",value:function e(t){return c.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){var n=[];if(c.default.isNull(i))return n;for(var o=this._parent.getInstanceMirror(t),a=i.mc.length,s=0;s<a;s++){var r=t[i.mc[s]];r?n.push(r):n.push(null)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerReadSoundMousedownBind=this.triggerReadSoundMousedownBind||this.triggerReadSoundMousedown.bind(this),this.triggerMarqueeSMousedownBind=this.triggerMarqueeSMousedownBind||this.triggerMarqueeSMousedown.bind(this),this.triggerMarqueeDMousedownBind=this.triggerMarqueeDMousedownBind||this.triggerMarqueeDMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundWatch2Bind=this.triggerSoundWatch2Bind||this.triggerSoundWatch2.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerSoundWatchSyncBind=this.triggerSoundWatchSyncBind||this.triggerSoundWatchSync.bind(this),this.debugResetBind=this.debugResetBind||this.debugReset.bind(this);var n=void 0;n=this._readSoundGroup.length;for(var o=void 0,a=0;a<n;a++)(o=this._readSoundGroup[a])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerReadSoundMousedownBind),c.default.notNull(o.EffectBase)&&c.default.applyMultiply(o.EffectBase));n=this._marqueeSGroup.length;for(var s=0;s<n;s++)(o=this._marqueeSGroup[s])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerMarqueeSMousedownBind),c.default.notNull(o.EffectBase)&&c.default.applyMultiply(o.EffectBase));n=this._marqueeDGroup.length;for(var r=0;r<n;r++)(o=this._marqueeDGroup[r])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerMarqueeDMousedownBind),c.default.notNull(o.EffectBase)&&c.default.applyMultiply(o.EffectBase))}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"applyNormalCache",value:function e(t){c.default.isNull(t)||(c.default.isNull(t._buttonHelper)?(c.default.notNull(t.nominalBounds)&&t.cache(t.nominalBounds.x,t.nominalBounds.y,t.nominalBounds.width,t.nominalBounds.height),c.default.notNull(t.EffectBase)&&c.default.applyMultiply(t)):(t._buttonHelper.enabled=!1,t.cursor="pointer",t.gotoAndStop(1)))}},{key:"applyReverseCache",value:function e(t){c.default.isNull(t)||(c.default.isNull(t._buttonHelper)?(t.uncache(),c.default.notNull(t.EffectBase)&&c.default.unapplyMultiply(t)):(t._buttonHelper.enabled=!0,t._buttonHelper._isPressed=!1,t.gotoAndStop(0)))}},{key:"triggerReadSoundMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i);i.gotoAndStop(1),this.applyNormalCache(i);var o=i.nominalBounds,a={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},s=i.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i};var l=this.checkCommandMode(n.command);this._parent.iosMode&&"none"===l?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerMarqueeSMousedown",value:function e(t){this._parent.stop(null,!0),this.debugReset();var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.nominalBounds,a={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},s=i.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatch2Bind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i,marqueeMode:"marqueeS",marqueeData:this._parent.marqueeSData[n.args[0]]},void 0!==this._parent.marqueeSData[n.args[0]].sub&&0<this._parent.marqueeSData[n.args[0]].sub.length&&1===this._parent.marqueeSData[n.args[0]].sub[0]&&(this._parent.marqueeSData[n.args[0]].sub[0]=100);var l=this.checkCommandMode(n.command);this._parent.iosMode&&"none"===l||this._parent.getParentIsNoDefinition()?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerMarqueeDMousedown",value:function e(t){this._parent.stop(null,!0),this.debugReset();var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.nominalBounds,a={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},s=i.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:n.args[0],path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatch2Bind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:n.command,target:i,marqueeMode:"marqueeD",marqueeData:this._parent.marqueeDData[n.args[0]]},void 0!==this._parent.marqueeDData[n.args[0]].sub&&0<this._parent.marqueeDData[n.args[0]].sub.length&&1===this._parent.marqueeDData[n.args[0]].sub[0]&&(this._parent.marqueeDData[n.args[0]].sub[0]=100);var l=this.checkCommandMode(n.command);this._parent.iosMode&&"none"===l||this._parent.getParentIsNoDefinition()?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),this._parent.sendPageTouchMessage("TouchSound","TouchSound_"+i.name),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(c.default.isNull(this._parent.soundObj)||c.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)c.default.notNull(i)&&i.stop();else switch(this._delayChangeMS=void 0,n){case"fileload":c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var o=this.checkCommandMode(this._parent.soundObj.command);this._parent.getParentIsNoDefinition()&&(this._parent.soundChannel.debugReset=this.debugResetBind),"none"!==o&&this._parent.openSoundPlayBar(o,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){}},{key:"triggerSoundComplete",value:function e(t){this._parent.soundObj.target.gotoAndStop(0),this.stop();var i=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===i||"normal-close"===i||"ex-normal-close"===i||"none"===i?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===i?c.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):c.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"triggerSoundWatch2",value:function e(t){if(c.default.notNull(this._parent.soundChannel)){var i=void 0!==this._parent.soundChannel.position?this._parent.soundChannel.position:this._parent.soundChannel.currentTime;if(this._prevTime!==i){c.default.notNull(this._parent.pairInstance)&&this._parent.pairInstance.syncMarqueeSound(this._parent.soundChannel,this._parent.soundObj),this._prevTime=i;var n=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var o=this._parent.lib.properties.fps,a=this._parent.soundObj.marqueeData;switch(this._parent.soundObj.marqueeMode){case"marqueeS":this.updateMarqueeSStatus(i);break;case"marqueeD":this.updateMarqueeDStatus(i)}}}}},{key:"triggerSoundWatchSync",value:function e(t){if(c.default.notNull(this._parent.soundChannel)){var i=void 0!==this._parent.soundChannel.position?this._parent.soundChannel.position:this._parent.soundChannel.currentTime;if(this._prevTime!==i){this._prevTime=i;var n=this._parent.soundChannel.duration;this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var o=this._parent.lib.properties.fps,a=this._parent.soundObj.marqueeData;switch(this._parent.soundObj.marqueeMode){case"marqueeS":this.updateMarqueeSStatus(i);break;case"marqueeD":this.updateMarqueeDStatus(i)}}}}},{key:"updateMarqueeSStatus",value:function e(t){var i=this._parent.soundObj.marqueeData,n=void 0,o=void 0,a=void 0,s=void 0,r=void 0;if(this._parent.soundChannel.soundrepeat&&!this._parent.soundChannel.paused&&(this._parent.soundChannel.soundrepeat=void 0),this._parent.soundChannel.paused&&this._parent.soundChannel.soundrepeat&&0!==t&&void 0===this._delayChangeMS)this._delayChangeMS=t;else{if(this._parent.soundChannel.paused&&void 0===this._parent.soundChannel.soundrepeat&&(this._delayChangeMS=void 0),void 0!==this._delayChangeMS){if(this._delayChangeMS>t)return;this._delayChangeMS=void 0}var u=this._parent.soundObj.target,l=this.getCustomTag(u);s=i.sub.length;var d=-1;for(o=0;o<s-1;o++)if(t>=i.sub[o]&&t<i.sub[o+1]){d=o;break}if(-1===d&&i.sub[o]<=t&&(d=o),this._parent.getParentIsNoDefinition()&&-1!==d&&!this._parent.soundChannel.paused&&(void 0===this._marqueeSPlayCount[d]?this._marqueeSPlayCount[d]=1:this._marqueeSPlayCount[d]=2,this._marqueeSPlayCount[d]<2))return-1===this._playSubPrev?(this._marqueeSPlayCount[d-1]=2,void(this._playSubPrev=0)):void(void 0===i.sub[d-1]?this._parent.soundChannel.position=0:this._parent.soundChannel.position=i.sub[d-1]);for(s=this._marqueeSControlMirror[l].length,o=0;o<s;o++)n=this._marqueeSControlMirror[l][o],c.default.notNull(n)&&(n.bitmapCache||n._buttonHelper&&!1===n._buttonHelper.enabled)&&(c.default.notNull(n.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,n.EffectBase),c.default.notNull(n.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,n.EffectBaseShadow),this.applyReverseCache(n),n.gotoAndStop(0));-1!==d&&(n=this._marqueeSControlMirror[l][d],c.default.notNull(n)&&(n.gotoAndStop(1),this.applyNormalCache(n)))}}},{key:"updateMarqueeDStatus",value:function e(t){var i=this._parent.soundObj.marqueeData,n=void 0,o=void 0,a=void 0,s=void 0,r=void 0;if(this._parent.soundChannel.soundrepeat&&!this._parent.soundChannel.paused&&(this._parent.soundChannel.soundrepeat=void 0),this._parent.soundChannel.paused&&this._parent.soundChannel.soundrepeat&&0!==t&&void 0===this._delayChangeMS)this._delayChangeMS=t;else{if(this._parent.soundChannel.paused&&void 0===this._parent.soundChannel.soundrepeat&&(this._delayChangeMS=void 0),void 0!==this._delayChangeMS){if(this._delayChangeMS>t)return;this._delayChangeMS=void 0}var u=this._parent.soundObj.target,l=this.getCustomTag(u);s=i.sub.length;var d=-1;for(o=0;o<s-1;o++)if(t>=i.sub[o]&&t<i.sub[o+1]){d=o;break}if(-1===d&&i.sub[o]<=t&&(d=o),this._parent.getParentIsNoDefinition()&&-1!==d&&!this._parent.soundChannel.paused&&(void 0===this._marqueeDPlayCount[d]?this._marqueeDPlayCount[d]=1:this._marqueeDPlayCount[d]=2,this._marqueeDPlayCount[d]<2))return-1===this._playSubPrev?(this._marqueeDPlayCount[d-1]=2,void(this._playSubPrev=0)):void(void 0===i.sub[d-1]?this._parent.soundChannel.position=0:this._parent.soundChannel.position=i.sub[d-1]);for(s=this._marqueeDControlMirror[l].length,o=0;o<s;o++)n=this._marqueeDControlMirror[l][o],c.default.notNull(n)&&(n.bitmapCache||n._buttonHelper&&!1===n._buttonHelper.enabled)&&(c.default.notNull(n.EffectBase)&&c.default.unapplyColorFilter(this._parent.createjs,n.EffectBase),c.default.notNull(n.EffectBaseShadow)&&c.default.unapplyColorFilter(this._parent.createjs,n.EffectBaseShadow),this.applyReverseCache(n),n.gotoAndStop(0));-1!==d&&(n=this._marqueeDControlMirror[l][d],c.default.notNull(n)&&(n.gotoAndStop(1),d%2!=0&&(c.default.applyColorFilter(this._parent.createjs,n.EffectBase,255,153,255),c.default.notNull(n.EffectBaseShadow)&&c.default.applyColorFilter(this._parent.createjs,n.EffectBaseShadow,255,153,255)),this.applyNormalCache(n)))}}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._readSoundGroup=[],this._marqueeSGroup=[],this._marqueeDGroup=[],this._marqueeSControlMirror={},this._marqueeDControlMirror={},this._marqueeSPlayCount=[],this._marqueeDPlayCount=[],this._playSubPrev=-1,this._prevTime=-1,this._seq=999}t.ModuleWordsMarqueeSound=h},function(e,Ee,Ge){(function(Ie,je){var Ae;(function(){var dd,hd="4.17.15",e=200,pd="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",cd="Expected a function",_d="__lodash_hash_undefined__",t=500,gd="__lodash_placeholder__",i=1,n=2,o=4,a=1,s=2,r=1,u=2,l=4,d=8,h=16,p=32,c=64,_=128,g=256,f=512,v=30,fd="...",m=800,b=16,y=1,S=2,P=3,M=1/0,vd=9007199254740991,md=17976931348623157e292,bd=NaN,yd=4294967295,Sd=yd-1,Pd=yd>>>1,Md=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Od="[object Arguments]",Bd="[object Array]",kd="[object AsyncFunction]",xd="[object Boolean]",Cd="[object Date]",wd="[object DOMException]",Td="[object Error]",Ld="[object Function]",Nd="[object GeneratorFunction]",Id="[object Map]",jd="[object Number]",Ad="[object Null]",Ed="[object Object]",Gd="[object Promise]",qd="[object Proxy]",Wd="[object RegExp]",Rd="[object Set]",Dd="[object String]",Fd="[object Symbol]",zd="[object Undefined]",Vd="[object WeakMap]",Xd="[object WeakSet]",Zd="[object ArrayBuffer]",Qd="[object DataView]",Yd="[object Float32Array]",Ud="[object Float64Array]",Hd="[object Int8Array]",Jd="[object Int16Array]",$d="[object Int32Array]",Kd="[object Uint8Array]",eh="[object Uint8ClampedArray]",th="[object Uint16Array]",ih="[object Uint32Array]",nh=/\b__p \+= '';/g,oh=/\b(__p \+=) '' \+/g,ah=/(__e\(.*?\)|\b__t\)) \+\n'';/g,sh=/&(?:amp|lt|gt|quot|#39);/g,rh=/[&<>"']/g,uh=RegExp(sh.source),lh=RegExp(rh.source),dh=/<%-([\s\S]+?)%>/g,hh=/<%([\s\S]+?)%>/g,ph=/<%=([\s\S]+?)%>/g,ch=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_h=/^\w*$/,gh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fh=/[\\^$.*+?()[\]{}|]/g,vh=RegExp(fh.source),mh=/^\s+|\s+$/g,bh=/^\s+/,yh=/\s+$/,Sh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ph=/\{\n\/\* \[wrapped with (.+)\] \*/,Mh=/,? & /,O=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Oh=/\\(\\)?/g,Bh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,kh=/\w*$/,xh=/^[-+]0x[0-9a-f]+$/i,Ch=/^0b[01]+$/i,wh=/^\[object .+?Constructor\]$/,Th=/^0o[0-7]+$/i,Lh=/^(?:0|[1-9]\d*)$/,Nh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ih=/($^)/,jh=/['\n\r\u2028\u2029\\]/g,B="\\ud800-\\udfff",k,x,C,w="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff",T="\\u2700-\\u27bf",L="a-z\\xdf-\\xf6\\xf8-\\xff",N,I,j,A,E="A-Z\\xc0-\\xd6\\xd8-\\xde",G="\\ufe0e\\ufe0f",q="\\xac\\xb1\\xd7\\xf7"+"\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf"+"\\u2000-\\u206f"+" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",W="['’]",R="["+B+"]",D="["+q+"]",F="["+w+"]",z="\\d+",V="["+T+"]",X="["+L+"]",Z="[^"+B+q+z+T+L+E+"]",Q="\\ud83c[\\udffb-\\udfff]",Y,U="[^"+B+"]",H="(?:\\ud83c[\\udde6-\\uddff]){2}",J="[\\ud800-\\udbff][\\udc00-\\udfff]",$="["+E+"]",K="\\u200d",ee="(?:"+X+"|"+Z+")",te="(?:"+$+"|"+Z+")",ie="(?:['’](?:d|ll|m|re|s|t|ve))?",ne="(?:['’](?:D|LL|M|RE|S|T|VE))?",oe="(?:"+F+"|"+Q+")"+"?",ae="["+G+"]?",se,re="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ue="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",le=ae+oe+("(?:\\u200d(?:"+[U,H,J].join("|")+")"+ae+oe+")*"),de="(?:"+[V,H,J].join("|")+")"+le,he="(?:"+[U+F+"?",F,H,J,R].join("|")+")",Ah=RegExp(W,"g"),Eh=RegExp(F,"g"),pe=RegExp(Q+"(?="+Q+")|"+he+le,"g"),ce=RegExp([$+"?"+X+"+"+ie+"(?="+[D,$,"$"].join("|")+")",te+"+"+ne+"(?="+[D,$+ee,"$"].join("|")+")",$+"?"+ee+"+"+ie,$+"+"+ne,ue,re,z,de].join("|"),"g"),_e=RegExp("["+K+B+w+G+"]"),ge=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qh=-1,Wh={};Wh[Yd]=Wh[Ud]=Wh[Hd]=Wh[Jd]=Wh[$d]=Wh[Kd]=Wh[eh]=Wh[th]=Wh[ih]=!0,Wh[Od]=Wh[Bd]=Wh[Zd]=Wh[xd]=Wh[Qd]=Wh[Cd]=Wh[Td]=Wh[Ld]=Wh[Id]=Wh[jd]=Wh[Ed]=Wh[Wd]=Wh[Rd]=Wh[Dd]=Wh[Vd]=!1;var Rh={};Rh[Od]=Rh[Bd]=Rh[Zd]=Rh[Qd]=Rh[xd]=Rh[Cd]=Rh[Yd]=Rh[Ud]=Rh[Hd]=Rh[Jd]=Rh[$d]=Rh[Id]=Rh[jd]=Rh[Ed]=Rh[Wd]=Rh[Rd]=Rh[Dd]=Rh[Fd]=Rh[Kd]=Rh[eh]=Rh[th]=Rh[ih]=!0,Rh[Td]=Rh[Ld]=Rh[Vd]=!1;var fe={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},me={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Dh=parseFloat,Fh=parseInt,ye="object"==typeof Ie&&Ie&&Ie.Object===Object&&Ie,Se="object"==typeof self&&self&&self.Object===Object&&self,zh=ye||Se||Function("return this")(),Pe=Ee&&!Ee.nodeType&&Ee,Me=Pe&&"object"==typeof je&&je&&!je.nodeType&&je,Vh=Me&&Me.exports===Pe,Oe=Vh&&ye.process,Be=function(){try{var e=Me&&Me.require&&Me.require("util").types;return e||Oe&&Oe.binding&&Oe.binding("util")}catch(e){}}(),Xh=Be&&Be.isArrayBuffer,Zh=Be&&Be.isDate,Qh=Be&&Be.isMap,Yh=Be&&Be.isRegExp,Uh=Be&&Be.isSet,Hh=Be&&Be.isTypedArray;function Jh(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function $h(e,t,i,n){for(var o=-1,a=null==e?0:e.length;++o<a;){var s=e[o];t(n,s,i(s),e)}return n}function Kh(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}function ep(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}function tp(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function ip(e,t){for(var i=-1,n=null==e?0:e.length,o=0,a=[];++i<n;){var s=e[i];t(s,i,e)&&(a[o++]=s)}return a}function np(e,t){var i;return!!(null==e?0:e.length)&&-1<cp(e,t,0)}function op(e,t,i){for(var n=-1,o=null==e?0:e.length;++n<o;)if(i(t,e[n]))return!0;return!1}function ap(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}function sp(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}function rp(e,t,i,n){var o=-1,a=null==e?0:e.length;for(n&&a&&(i=e[++o]);++o<a;)i=t(i,e[o],o,e);return i}function up(e,t,i,n){var o=null==e?0:e.length;for(n&&o&&(i=e[--o]);o--;)i=t(i,e[o],o,e);return i}function lp(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}var ke=vp("length");function xe(e){return e.split("")}function dp(e){return e.match(O)||[]}function hp(e,n,t){var o;return t(e,function(e,t,i){if(n(e,t,i))return o=t,!1}),o}function pp(e,t,i,n){for(var o=e.length,a=i+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function cp(e,t,i){return t==t?we(e,t,i):pp(e,gp,i)}function _p(e,t,i,n){for(var o=i-1,a=e.length;++o<a;)if(n(e[o],t))return o;return-1}function gp(e){return e!=e}function fp(e,t){var i=null==e?0:e.length;return i?yp(e,t)/i:bd}function vp(t){return function(e){return null==e?dd:e[t]}}function Ce(t){return function(e){return null==t?dd:t[e]}}function mp(e,n,o,a,t){return t(e,function(e,t,i){o=a?(a=!1,e):n(o,e,t,i)}),o}function bp(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}function yp(e,t){for(var i,n=-1,o=e.length;++n<o;){var a=t(e[n]);a!==dd&&(i=i===dd?a:i+a)}return i}function Sp(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}function Pp(t,e){return ap(e,function(e){return[e,t[e]]})}function Mp(t){return function(e){return t(e)}}function Op(t,e){return ap(e,function(e){return t[e]})}function Bp(e,t){return e.has(t)}function kp(e,t){for(var i=-1,n=e.length;++i<n&&-1<cp(t,e[i],0););return i}function xp(e,t){for(var i=e.length;i--&&-1<cp(t,e[i],0););return i}function Cp(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}var wp=Ce(fe),Tp=Ce(ve);function Lp(e){return"\\"+be[e]}function Np(e,t){return null==e?dd:e[t]}function Ip(e){return _e.test(e)}function jp(e){return ge.test(e)}function Ap(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}function Ep(e){var i=-1,n=Array(e.size);return e.forEach(function(e,t){n[++i]=[t,e]}),n}function Gp(t,i){return function(e){return t(i(e))}}function qp(e,t){for(var i=-1,n=e.length,o=0,a=[];++i<n;){var s=e[i];s!==t&&s!==gd||(e[i]=gd,a[o++]=i)}return a}function Wp(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}function Rp(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=[e,e]}),i}function we(e,t,i){for(var n=i-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function Dp(e,t,i){for(var n=i+1;n--;)if(e[n]===t)return n;return n}function Fp(e){return Ip(e)?Te(e):ke(e)}function zp(e){return Ip(e)?Le(e):xe(e)}var Vp=Ce(me);function Te(e){for(var t=pe.lastIndex=0;pe.test(e);)++t;return t}function Le(e){return e.match(pe)||[]}function Xp(e){return e.match(ce)||[]}var Ne,Zp=function e(t){var B=(t=null==t?zh:Zp.defaults(zh.Object(),t,Zp.pick(zh,Gh))).Array,i=t.Date,n=t.Error,f=t.Function,a=t.Math,c=t.Object,v=t.RegExp,d=t.String,P=t.TypeError,s=B.prototype,o=f.prototype,h=c.prototype,r=t["__core-js_shared__"],u=o.toString,S=h.hasOwnProperty,l=0,p=(_=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",_,g=h.toString,m=u.call(c),b=zh._,y=v("^"+u.call(S).replace(fh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=Vh?t.Buffer:dd,O=t.Symbol,k=t.Uint8Array,x=M?M.allocUnsafe:dd,C=Gp(c.getPrototypeOf,c),w=c.create,T=h.propertyIsEnumerable,L=s.splice,N=O?O.isConcatSpreadable:dd,I=O?O.iterator:dd,j=O?O.toStringTag:dd,A=function(){try{var e=Wn(c,"defineProperty");return e({},"",{}),e}catch(e){}}(),E=t.clearTimeout!==zh.clearTimeout&&t.clearTimeout,G=i&&i.now!==zh.Date.now&&i.now,q=t.setTimeout!==zh.setTimeout&&t.setTimeout,W=a.ceil,R=a.floor,D=c.getOwnPropertySymbols,F=M?M.isBuffer:dd,z=t.isFinite,V=s.join,X=Gp(c.keys,c),Z=a.max,Q=a.min,Y=i.now,U=t.parseInt,H=a.random,J=s.reverse,$=Wn(t,"DataView"),K=Wn(t,"Map"),ee=Wn(t,"Promise"),te=Wn(t,"Set"),ie=Wn(t,"WeakMap"),ne=Wn(c,"create"),oe=ie&&new ie,ae={},se=Bo($),re=Bo(K),ue=Bo(ee),le=Bo(te),de=Bo(ie),he=O?O.prototype:dd,pe=he?he.valueOf:dd,ce=he?he.toString:dd;function _e(e){if(mr(e)&&!tr(e)&&!(e instanceof be)){if(e instanceof me)return e;if(S.call(e,"__wrapped__"))return xo(e)}return new me(e)}var ge=function(e){if(!vr(e))return{};if(w)return w(e);fe.prototype=e;var t=new fe;return fe.prototype=dd,t};function fe(){}function ve(){}function me(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=dd}function be(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=yd,this.__views__=[]}function ye(){var e=new be(this.__wrapped__);return e.__actions__=Ui(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ui(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ui(this.__views__),e}function Se(){if(this.__filtered__){var e=new be(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e}function Pe(){var e=this.__wrapped__.value(),t=this.__dir__,i=tr(e),n=t<0,o=i?e.length:0,a=Vn(0,o,this.__views__),s=a.start,r=a.end,u=r-s,l=n?r:s-1,d=this.__iteratees__,h=d.length,p=0,c=Q(u,this.__takeCount__);if(!i||!n&&o==u&&c==u)return Ti(e,this.__actions__);var _=[];e:for(;u--&&p<c;){for(var g=-1,f=e[l+=t];++g<h;){var v=d[g],m=v.iteratee,b=v.type,y=m(f);if(2==b)f=y;else if(!y){if(1==b)continue e;break e}}_[p++]=f}return _}function Me(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Oe(){this.__data__=ne?ne(null):{},this.size=0}function Be(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function ke(e){var t=this.__data__;if(ne){var i=t[e];return i===_d?dd:i}return S.call(t,e)?t[e]:dd}function xe(e){var t=this.__data__;return ne?t[e]!==dd:S.call(t,e)}function Ce(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=ne&&t===dd?_d:t,this}function we(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Te(){this.__data__=[],this.size=0}function Le(e){var t=this.__data__,i=it(t,e),n;return!(i<0)&&(i==t.length-1?t.pop():L.call(t,i,1),--this.size,!0)}function Ne(e){var t=this.__data__,i=it(t,e);return i<0?dd:t[i][1]}function Ie(e){return-1<it(this.__data__,e)}function je(e,t){var i=this.__data__,n=it(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this}function Ae(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ee(){this.size=0,this.__data__={hash:new Me,map:new(K||we),string:new Me}}function Ge(e){var t=Gn(this,e).delete(e);return this.size-=t?1:0,t}function qe(e){return Gn(this,e).get(e)}function We(e){return Gn(this,e).has(e)}function Re(e,t){var i=Gn(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this}function De(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ae;++t<i;)this.add(e[t])}function Fe(e){return this.__data__.set(e,_d),this}function ze(e){return this.__data__.has(e)}function Ve(e){var t=this.__data__=new we(e);this.size=t.size}function Xe(){this.__data__=new we,this.size=0}function Ze(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function Qe(e){return this.__data__.get(e)}function Ye(e){return this.__data__.has(e)}function Ue(e,t){var i=this.__data__;if(i instanceof we){var n=i.__data__;if(!K||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ae(n)}return i.set(e,t),this.size=i.size,this}function He(e,t){var i=tr(e),n=!i&&er(e),o=!i&&!n&&sr(e),a=!i&&!n&&!o&&Ir(e),s=i||n||o||a,r=s?Sp(e.length,d):[],u=r.length;for(var l in e)!t&&!S.call(e,l)||s&&("length"==l||o&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||$n(l,u))||r.push(l);return r}function Je(e){var t=e.length;return t?e[li(0,t-1)]:dd}function $e(e,t){return Po(Ui(e),ut(t,0,e.length))}function Ke(e){return Po(Ui(e))}function et(e,t,i){(i===dd||Js(e[t],i))&&(i!==dd||t in e)||st(e,t,i)}function tt(e,t,i){var n=e[t];S.call(e,t)&&Js(n,i)&&(i!==dd||t in e)||st(e,t,i)}function it(e,t){for(var i=e.length;i--;)if(Js(e[i][0],t))return i;return-1}function nt(e,n,o,a){return _t(e,function(e,t,i){n(a,e,o(e),i)}),a}function ot(e,t){return e&&Hi(t,gu(t),e)}function at(e,t){return e&&Hi(t,fu(t),e)}function st(e,t,i){"__proto__"==t&&A?A(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function rt(e,t){for(var i=-1,n=t.length,o=B(n),a=null==e;++i<n;)o[i]=a?dd:lu(e,t[i]);return o}function ut(e,t,i){return e==e&&(i!==dd&&(e=e<=i?e:i),t!==dd&&(e=t<=e?e:t)),e}function lt(i,n,o,e,t,a){var s,r=1&n,u=2&n,l=4&n;if(o&&(s=t?o(i,e,t,a):o(i)),s!==dd)return s;if(!vr(i))return i;var d=tr(i);if(d){if(s=Qn(i),!r)return Ui(i,s)}else{var h=zn(i),p=h==Ld||h==Nd;if(sr(i))return Wi(i,r);if(h==Ed||h==Od||p&&!t){if(s=u||p?{}:Yn(i),!r)return u?$i(i,at(s,i)):Ji(i,ot(s,i))}else{if(!Rh[h])return t?i:{};s=Un(i,h,r)}}var c=(a=a||new Ve).get(i);if(c)return c;a.set(i,s),Tr(i)?i.forEach(function(e){s.add(lt(e,n,o,e,i,a))}):br(i)&&i.forEach(function(e,t){s.set(t,lt(e,n,o,t,i,a))});var _,g=d?dd:(l?u?Nn:Ln:u?fu:gu)(i);return Kh(g||i,function(e,t){g&&(e=i[t=e]),tt(s,t,lt(e,n,o,t,i,a))}),s}function dt(t){var i=gu(t);return function(e){return ht(e,t,i)}}function ht(e,t,i){var n=i.length;if(null==e)return!n;for(e=c(e);n--;){var o=i[n],a=t[o],s=e[o];if(s===dd&&!(o in e)||!a(s))return!1}return!0}function pt(e,t,i){if("function"!=typeof e)throw new P(cd);return mo(function(){e.apply(dd,i)},t)}function ct(e,t,i,n){var o=-1,a=np,s=!0,r=e.length,u=[],l=t.length;if(!r)return u;i&&(t=ap(t,Mp(i))),n?(a=op,s=!1):200<=t.length&&(a=Bp,s=!1,t=new De(t));e:for(;++o<r;){var d=e[o],h=null==i?d:i(d);if(d=n||0!==d?d:0,s&&h==h){for(var p=l;p--;)if(t[p]===h)continue e;u.push(d)}else a(t,h,n)||u.push(d)}return u}_e.templateSettings={escape:dh,evaluate:hh,interpolate:ph,variable:"",imports:{_:_e}},(_e.prototype=ve.prototype).constructor=_e,(me.prototype=ge(ve.prototype)).constructor=me,(be.prototype=ge(ve.prototype)).constructor=be,Me.prototype.clear=Oe,Me.prototype.delete=Be,Me.prototype.get=ke,Me.prototype.has=xe,Me.prototype.set=Ce,we.prototype.clear=Te,we.prototype.delete=Le,we.prototype.get=Ne,we.prototype.has=Ie,we.prototype.set=je,Ae.prototype.clear=Ee,Ae.prototype.delete=Ge,Ae.prototype.get=qe,Ae.prototype.has=We,Ae.prototype.set=Re,De.prototype.add=De.prototype.push=Fe,De.prototype.has=ze,Ve.prototype.clear=Xe,Ve.prototype.delete=Ze,Ve.prototype.get=Qe,Ve.prototype.has=Ye,Ve.prototype.set=Ue;var _t=tn(Mt),gt=tn(Ot,!0);function ft(e,n){var o=!0;return _t(e,function(e,t,i){return o=!!n(e,t,i)}),o}function vt(e,t,i){for(var n=-1,o=e.length;++n<o;){var a=e[n],s=t(a);if(null!=s&&(r===dd?s==s&&!Nr(s):i(s,r)))var r=s,u=a}return u}function mt(e,t,i,n){var o=e.length;for((i=Dr(i))<0&&(i=o<-i?0:o+i),(n=n===dd||o<n?o:Dr(n))<0&&(n+=o),n=n<i?0:Fr(n);i<n;)e[i++]=t;return e}function bt(e,n){var o=[];return _t(e,function(e,t,i){n(e,t,i)&&o.push(e)}),o}function yt(e,t,i,n,o){var a=-1,s=e.length;for(i=i||Jn,o=o||[];++a<s;){var r=e[a];0<t&&i(r)?1<t?yt(r,t-1,i,n,o):sp(o,r):n||(o[o.length]=r)}return o}var St=nn(),Pt=nn(!0);function Mt(e,t){return e&&St(e,t,gu)}function Ot(e,t){return e&&Pt(e,t,gu)}function Bt(t,e){return ip(e,function(e){return _r(t[e])})}function kt(e,t){for(var i=0,n=(t=Ai(t,e)).length;null!=e&&i<n;)e=e[Oo(t[i++])];return i&&i==n?e:dd}function xt(e,t,i){var n=t(e);return tr(e)?n:sp(n,i(e))}function Ct(e){return null==e?e===dd?zd:Ad:j&&j in c(e)?Rn(e):po(e)}function wt(e,t){return t<e}function Tt(e,t){return null!=e&&S.call(e,t)}function Lt(e,t){return null!=e&&t in c(e)}function Nt(e,t,i){return e>=Q(t,i)&&e<Z(t,i)}function It(e,t,i){for(var n=i?op:np,o=e[0].length,a=e.length,s=a,r=B(a),u=1/0,l=[];s--;){var d=e[s];s&&t&&(d=ap(d,Mp(t))),u=Q(d.length,u),r[s]=!i&&(t||120<=o&&120<=d.length)?new De(s&&d):dd}d=e[0];var h=-1,p=r[0];e:for(;++h<o&&l.length<u;){var c=d[h],_=t?t(c):c;if(c=i||0!==c?c:0,!(p?Bp(p,_):n(l,_,i))){for(s=a;--s;){var g=r[s];if(!(g?Bp(g,_):n(e[s],_,i)))continue e}p&&p.push(_),l.push(c)}}return l}function jt(e,n,o,a){return Mt(e,function(e,t,i){n(a,o(e),t,i)}),a}function At(e,t,i){var n=null==(e=_o(e,t=Ai(t,e)))?e:e[Oo($o(t))];return null==n?dd:Jh(n,e,i)}function Et(e){return mr(e)&&Ct(e)==Od}function Gt(e){return mr(e)&&Ct(e)==Zd}function qt(e){return mr(e)&&Ct(e)==Cd}function Wt(e,t,i,n,o){return e===t||(null==e||null==t||!mr(e)&&!mr(t)?e!=e&&t!=t:Rt(e,t,i,n,Wt,o))}function Rt(e,t,i,n,o,a){var s=tr(e),r=tr(t),u=s?Bd:zn(e),l=r?Bd:zn(t),d=(u=u==Od?Ed:u)==Ed,h=(l=l==Od?Ed:l)==Ed,p=u==l;if(p&&sr(e)){if(!sr(t))return!1;d=!(s=!0)}if(p&&!d)return a=a||new Ve,s||Ir(e)?xn(e,t,i,n,o,a):Cn(e,t,u,i,n,o,a);if(!(1&i)){var c=d&&S.call(e,"__wrapped__"),_=h&&S.call(t,"__wrapped__"),g,f;if(c||_)return o(c?e.value():e,_?t.value():t,i,n,a=a||new Ve)}return p&&wn(e,t,i,n,o,a=a||new Ve)}function Dt(e){return mr(e)&&zn(e)==Id}function Ft(e,t,i,n){var o=i.length,a=o,s=!n;if(null==e)return!a;for(e=c(e);o--;){var r=i[o];if(s&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++o<a;){var u=(r=i[o])[0],l=e[u],d=r[1];if(s&&r[2]){if(l===dd&&!(u in e))return!1}else{var h=new Ve;if(n)var p=n(l,d,u,e,t,h);if(!(p===dd?Wt(d,l,3,n,h):p))return!1}}return!0}function zt(e){return!(!vr(e)||no(e))&&(_r(e)?y:wh).test(Bo(e));var t}function Vt(e){return mr(e)&&Ct(e)==Wd}function Xt(e){return mr(e)&&zn(e)==Rd}function Zt(e){return mr(e)&&fr(e.length)&&!!Wh[Ct(e)]}function Qt(e){return"function"==typeof e?e:null==e?Ml:"object"==typeof e?tr(e)?Kt(e[0],e[1]):$t(e):El(e)}function Yt(e){if(!ao(e))return X(e);var t=[];for(var i in c(e))S.call(e,i)&&"constructor"!=i&&t.push(i);return t}function Ut(e){if(!vr(e))return ho(e);var t=ao(e),i=[];for(var n in e)("constructor"!=n||!t&&S.call(e,n))&&i.push(n);return i}function Ht(e,t){return e<t}function Jt(e,n){var o=-1,a=nr(e)?B(e.length):[];return _t(e,function(e,t,i){a[++o]=n(e,t,i)}),a}function $t(t){var i=qn(t);return 1==i.length&&i[0][2]?ro(i[0][0],i[0][1]):function(e){return e===t||Ft(e,t,i)}}function Kt(i,n){return eo(i)&&so(n)?ro(Oo(i),n):function(e){var t=lu(e,i);return t===dd&&t===n?hu(e,i):Wt(n,t,3)}}function ei(n,o,a,s,r){n!==o&&St(o,function(e,t){if(r=r||new Ve,vr(e))ti(n,o,t,a,ei,s,r);else{var i=s?s(fo(n,t),e,t+"",n,o,r):dd;i===dd&&(i=e),et(n,t,i)}},fu)}function ti(e,t,i,n,o,a,s){var r=fo(e,i),u=fo(t,i),l=s.get(u);if(l)et(e,i,l);else{var d=a?a(r,u,i+"",e,t,s):dd,h=d===dd;if(h){var p=tr(u),c=!p&&sr(u),_=!p&&!c&&Ir(u);d=u,p||c||_?d=tr(r)?r:or(r)?Ui(r):c?Wi(u,!(h=!1)):_?Vi(u,!(h=!1)):[]:xr(u)||er(u)?er(d=r)?d=Vr(r):vr(r)&&!_r(r)||(d=Yn(u)):h=!1}h&&(s.set(u,d),o(d,u,n,a,s),s.delete(u)),et(e,i,d)}}function ii(e,t){var i=e.length;if(i)return $n(t+=t<0?i:0,i)?e[t]:dd}function ni(e,o,i){var a=-1,t;return o=ap(o.length?o:[Ml],Mp(En())),bp(Jt(e,function(t,e,i){var n;return{criteria:ap(o,function(e){return e(t)}),index:++a,value:t}}),function(e,t){return Zi(e,t,i)})}function oi(i,e){return ai(i,e,function(e,t){return hu(i,t)})}function ai(e,t,i){for(var n=-1,o=t.length,a={};++n<o;){var s=t[n],r=kt(e,s);i(r,s)&&gi(a,Ai(s,e),r)}return a}function si(t){return function(e){return kt(e,t)}}function ri(e,t,i,n){var o=n?_p:cp,a=-1,s=t.length,r=e;for(e===t&&(t=Ui(t)),i&&(r=ap(e,Mp(i)));++a<s;)for(var u=0,l=t[a],d=i?i(l):l;-1<(u=o(r,d,u,n));)r!==e&&L.call(r,u,1),L.call(e,u,1);return e}function ui(e,t){for(var i=e?t.length:0,n=i-1;i--;){var o=t[i];if(i==n||o!==a){var a=o;$n(o)?L.call(e,o,1):xi(e,o)}}return e}function li(e,t){return e+R(H()*(t-e+1))}function di(e,t,i,n){for(var o=-1,a=Z(W((t-e)/(i||1)),0),s=B(a);a--;)s[n?a:++o]=e,e+=i;return s}function hi(e,t){var i="";if(!e||t<1||vd<t)return i;for(;t%2&&(i+=e),(t=R(t/2))&&(e+=e),t;);return i}function pi(e,t){return bo(co(e,t,Ml),e+"")}function ci(e){return Je(ju(e))}function _i(e,t){var i=ju(e);return Po(i,ut(t,0,i.length))}function gi(e,t,i,n){if(!vr(e))return e;for(var o=-1,a=(t=Ai(t,e)).length,s=a-1,r=e;null!=r&&++o<a;){var u=Oo(t[o]),l=i;if(o!=s){var d=r[u];(l=n?n(d,u,r):dd)===dd&&(l=vr(d)?d:$n(t[o+1])?[]:{})}tt(r,u,l),r=r[u]}return e}var fi=oe?function(e,t){return oe.set(e,t),e}:Ml,vi=A?function(e,t){return A(e,"toString",{configurable:!0,enumerable:!1,value:bl(t),writable:!0})}:Ml;function mi(e){return Po(ju(e))}function bi(e,t,i){var n=-1,o=e.length;t<0&&(t=o<-t?0:o+t),(i=o<i?o:i)<0&&(i+=o),o=i<t?0:i-t>>>0,t>>>=0;for(var a=B(o);++n<o;)a[n]=e[n+t];return a}function yi(e,n){var o;return _t(e,function(e,t,i){return!(o=n(e,t,i))}),!!o}function Si(e,t,i){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=Pd){for(;n<o;){var a=n+o>>>1,s=e[a];null!==s&&!Nr(s)&&(i?s<=t:s<t)?n=1+a:o=a}return o}return Pi(e,t,Ml,i)}function Pi(e,t,i,n){t=i(t);for(var o=0,a=null==e?0:e.length,s=t!=t,r=null===t,u=Nr(t),l=t===dd;o<a;){var d=R((o+a)/2),h=i(e[d]),p=h!==dd,c=null===h,_=h==h,g=Nr(h);if(s)var f=n||_;else f=l?_&&(n||p):r?_&&p&&(n||!c):u?_&&p&&!c&&(n||!g):!c&&!g&&(n?h<=t:h<t);f?o=d+1:a=d}return Q(a,Sd)}function Mi(e,t){for(var i=-1,n=e.length,o=0,a=[];++i<n;){var s=e[i],r=t?t(s):s;if(!i||!Js(r,u)){var u=r;a[o++]=0===s?0:s}}return a}function Oi(e){return"number"==typeof e?e:Nr(e)?bd:+e}function Bi(e){if("string"==typeof e)return e;if(tr(e))return ap(e,Bi)+"";if(Nr(e))return ce?ce.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ki(e,t,i){var n=-1,o=np,a=e.length,s=!0,r=[],u=r;if(i)s=!1,o=op;else if(200<=a){var l=t?null:Sn(e);if(l)return Wp(l);s=!1,o=Bp,u=new De}else u=t?[]:r;e:for(;++n<a;){var d=e[n],h=t?t(d):d;if(d=i||0!==d?d:0,s&&h==h){for(var p=u.length;p--;)if(u[p]===h)continue e;t&&u.push(h),r.push(d)}else o(u,h,i)||(u!==r&&u.push(h),r.push(d))}return r}function xi(e,t){return null==(e=_o(e,t=Ai(t,e)))||delete e[Oo($o(t))]}function Ci(e,t,i,n){return gi(e,t,i(kt(e,t)),n)}function wi(e,t,i,n){for(var o=e.length,a=n?o:-1;(n?a--:++a<o)&&t(e[a],a,e););return i?bi(e,n?0:a,n?a+1:o):bi(e,n?a+1:0,n?o:a)}function Ti(e,t){var i=e;return i instanceof be&&(i=i.value()),rp(t,function(e,t){return t.func.apply(t.thisArg,sp([e],t.args))},i)}function Li(e,t,i){var n=e.length;if(n<2)return n?ki(e[0]):[];for(var o=-1,a=B(n);++o<n;)for(var s=e[o],r=-1;++r<n;)r!=o&&(a[o]=ct(a[o]||s,e[r],t,i));return ki(yt(a,1),t,i)}function Ni(e,t,i){for(var n=-1,o=e.length,a=t.length,s={};++n<o;){var r=n<a?t[n]:dd;i(s,e[n],r)}return s}function Ii(e){return or(e)?e:[]}function ji(e){return"function"==typeof e?e:Ml}function Ai(e,t){return tr(e)?e:eo(e,t)?[e]:Mo(Zr(e))}var Ei=pi;function Gi(e,t,i){var n=e.length;return i=i===dd?n:i,!t&&n<=i?e:bi(e,t,i)}var qi=E||function(e){return zh.clearTimeout(e)};function Wi(e,t){if(t)return e.slice();var i=e.length,n=x?x(i):new e.constructor(i);return e.copy(n),n}function Ri(e){var t=new e.constructor(e.byteLength);return new k(t).set(new k(e)),t}function Di(e,t){var i=t?Ri(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function Fi(e){var t=new e.constructor(e.source,kh.exec(e));return t.lastIndex=e.lastIndex,t}function zi(e){return pe?c(pe.call(e)):{}}function Vi(e,t){var i=t?Ri(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Xi(e,t){if(e!==t){var i=e!==dd,n=null===e,o=e==e,a=Nr(e),s=t!==dd,r=null===t,u=t==t,l=Nr(t);if(!r&&!l&&!a&&t<e||a&&s&&u&&!r&&!l||n&&s&&u||!i&&u||!o)return 1;if(!n&&!a&&!l&&e<t||l&&i&&o&&!n&&!a||r&&i&&o||!s&&o||!u)return-1}return 0}function Zi(e,t,i){for(var n=-1,o=e.criteria,a=t.criteria,s=o.length,r=i.length;++n<s;){var u=Xi(o[n],a[n]),l;if(u)return r<=n?u:u*("desc"==i[n]?-1:1)}return e.index-t.index}function Qi(e,t,i,n){for(var o=-1,a=e.length,s=i.length,r=-1,u=t.length,l=Z(a-s,0),d=B(u+l),h=!n;++r<u;)d[r]=t[r];for(;++o<s;)(h||o<a)&&(d[i[o]]=e[o]);for(;l--;)d[r++]=e[o++];return d}function Yi(e,t,i,n){for(var o=-1,a=e.length,s=-1,r=i.length,u=-1,l=t.length,d=Z(a-r,0),h=B(d+l),p=!n;++o<d;)h[o]=e[o];for(var c=o;++u<l;)h[c+u]=t[u];for(;++s<r;)(p||o<a)&&(h[c+i[s]]=e[o++]);return h}function Ui(e,t){var i=-1,n=e.length;for(t=t||B(n);++i<n;)t[i]=e[i];return t}function Hi(e,t,i,n){var o=!i;i=i||{};for(var a=-1,s=t.length;++a<s;){var r=t[a],u=n?n(i[r],e[r],r,i,e):dd;u===dd&&(u=e[r]),o?st(i,r,u):tt(i,r,u)}return i}function Ji(e,t){return Hi(e,Dn(e),t)}function $i(e,t){return Hi(e,Fn(e),t)}function Ki(o,a){return function(e,t){var i=tr(e)?$h:nt,n=a?a():{};return i(e,o,En(t,2),n)}}function en(r){return pi(function(e,t){var i=-1,n=t.length,o=1<n?t[n-1]:dd,a=2<n?t[2]:dd;for(o=3<r.length&&"function"==typeof o?(n--,o):dd,a&&Kn(t[0],t[1],a)&&(o=n<3?dd:o,n=1),e=c(e);++i<n;){var s=t[i];s&&r(e,s,i,o)}return e})}function tn(a,s){return function(e,t){if(null==e)return e;if(!nr(e))return a(e,t);for(var i=e.length,n=s?i:-1,o=c(e);(s?n--:++n<i)&&!1!==t(o[n],n,o););return e}}function nn(u){return function(e,t,i){for(var n=-1,o=c(e),a=i(e),s=a.length;s--;){var r=a[u?s:++n];if(!1===t(o[r],r,o))break}return e}}function on(t,e,i){var n=1&e,o=rn(t);function a(){var e;return(this&&this!==zh&&this instanceof a?o:t).apply(n?i:this,arguments)}return a}function an(o){return function(e){var t=Ip(e=Zr(e))?zp(e):dd,i=t?t[0]:e.charAt(0),n=t?Gi(t,1).join(""):e.slice(1);return i[o]()+n}}function sn(t){return function(e){return rp(_l(Du(e).replace(Ah,"")),t,"")}}function rn(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=ge(n.prototype),i=n.apply(t,e);return vr(i)?i:t}}function un(s,r,u){var l=rn(s);function d(){for(var e=arguments.length,t=B(e),i=e,n=An(d);i--;)t[i]=arguments[i];var o=e<3&&t[0]!==n&&t[e-1]!==n?[]:qp(t,n),a;return(e-=o.length)<u?bn(s,r,hn,d.placeholder,dd,t,o,dd,dd,u-e):Jh(this&&this!==zh&&this instanceof d?l:s,this,t)}return d}function ln(s){return function(e,t,i){var n=c(e);if(!nr(e)){var o=En(t,3);e=gu(e),t=function(e){return o(n[e],e,n)}}var a=s(e,t,i);return-1<a?n[o?e[a]:a]:dd}}function dn(u){return Tn(function(o){var a=o.length,e=a,t=me.prototype.thru;for(u&&o.reverse();e--;){var i=o[e];if("function"!=typeof i)throw new P(cd);if(t&&!s&&"wrapper"==jn(i))var s=new me([],!0)}for(e=s?e:a;++e<a;){var n=jn(i=o[e]),r="wrapper"==n?In(i):dd;s=r&&io(r[0])&&424==r[1]&&!r[4].length&&1==r[9]?s[jn(r[0])].apply(s,r[3]):1==i.length&&io(i)?s[n]():s.thru(i)}return function(){var e=arguments,t=e[0];if(s&&1==e.length&&tr(t))return s.plant(t).value();for(var i=0,n=a?o[i].apply(this,e):t;++i<a;)n=o[i].call(this,n);return n}})}function hn(u,l,d,h,p,c,_,g,f,v){var m=128&l,b=1&l,y=2&l,S=24&l,P=512&l,M=y?dd:rn(u);function O(){for(var e=arguments.length,t=B(e),i=e;i--;)t[i]=arguments[i];if(S)var n=An(O),o=Cp(t,n);if(h&&(t=Qi(t,h,p,S)),c&&(t=Yi(t,c,_,S)),e-=o,S&&e<v){var a=qp(t,n);return bn(u,l,hn,O.placeholder,d,t,a,g,f,v-e)}var s=b?d:this,r=y?s[u]:u;return e=t.length,g?t=go(t,g):P&&1<e&&t.reverse(),m&&f<e&&(t.length=f),this&&this!==zh&&this instanceof O&&(r=M||rn(r)),r.apply(s,t)}return O}function pn(i,n){return function(e,t){return jt(e,i,n(t),{})}}function cn(n,o){return function(e,t){var i;if(e===dd&&t===dd)return o;if(e!==dd&&(i=e),t!==dd){if(i===dd)return t;t="string"==typeof e||"string"==typeof t?(e=Bi(e),Bi(t)):(e=Oi(e),Oi(t)),i=n(e,t)}return i}}function _n(n){return Tn(function(e){return e=ap(e,Mp(En())),pi(function(t){var i=this;return n(e,function(e){return Jh(e,i,t)})})})}function gn(e,t){var i=(t=t===dd?" ":Bi(t)).length;if(i<2)return i?hi(t,e):t;var n=hi(t,W(e/Fp(t)));return Ip(t)?Gi(zp(n),0,e).join(""):n.slice(0,e)}function fn(s,e,r,u){var l=1&e,d=rn(s);function h(){for(var e=-1,t=arguments.length,i=-1,n=u.length,o=B(n+t),a=this&&this!==zh&&this instanceof h?d:s;++i<n;)o[i]=u[i];for(;t--;)o[i++]=arguments[++e];return Jh(a,l?r:this,o)}return h}function vn(n){return function(e,t,i){return i&&"number"!=typeof i&&Kn(e,t,i)&&(t=i=dd),e=Rr(e),t===dd?(t=e,e=0):t=Rr(t),di(e,t,i=i===dd?e<t?1:-1:Rr(i),n)}}function mn(i){return function(e,t){return"string"==typeof e&&"string"==typeof t||(e=zr(e),t=zr(t)),i(e,t)}}function bn(e,t,i,n,o,a,s,r,u,l){var d=8&t,h,p,c,_;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var g=[e,t,o,d?a:dd,d?s:dd,d?dd:a,d?dd:s,r,u,l],f=i.apply(dd,g);return io(e)&&vo(f,g),f.placeholder=n,yo(f,e,t)}function yn(e){var o=a[e];return function(e,t){if(e=zr(e),(t=null==t?0:Q(Dr(t),292))&&z(e)){var i=(Zr(e)+"e").split("e"),n;return+((i=(Zr(o(i[0]+"e"+(+i[1]+t)))+"e").split("e"))[0]+"e"+(+i[1]-t))}return o(e)}}var Sn=te&&1/Wp(new te([,-0]))[1]==1/0?function(e){return new te(e)}:Ll;function Pn(i){return function(e){var t=zn(e);return t==Id?Ep(e):t==Rd?Rp(e):Pp(e,i(e))}}function Mn(e,t,i,n,o,a,s,r){var u=2&t;if(!u&&"function"!=typeof e)throw new P(cd);var l=n?n.length:0;if(l||(t&=-97,n=o=dd),s=s===dd?s:Z(Dr(s),0),r=r===dd?r:Dr(r),l-=o?o.length:0,64&t){var d=n,h=o;n=o=dd}var p=u?dd:In(e),c=[e,t,i,n,o,d,h,a,s,r],_;if(p&&lo(c,p),e=c[0],t=c[1],i=c[2],n=c[3],o=c[4],!(r=c[9]=c[9]===dd?u?0:e.length:Z(c[9]-l,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?un(e,t,r):32!=t&&33!=t||o.length?hn.apply(dd,c):fn(e,t,i,n);else var g=on(e,t,i);return yo((p?fi:vo)(g,c),e,t)}function On(e,t,i,n){return e===dd||Js(e,h[i])&&!S.call(n,i)?t:e}function Bn(e,t,i,n,o,a){return vr(e)&&vr(t)&&(a.set(t,e),ei(e,t,dd,Bn,a),a.delete(t)),e}function kn(e){return xr(e)?dd:e}function xn(e,t,i,n,o,a){var s=1&i,r=e.length,u=t.length;if(r!=u&&!(s&&r<u))return!1;var l=a.get(e);if(l&&a.get(t))return l==t;var d=-1,h=!0,p=2&i?new De:dd;for(a.set(e,t),a.set(t,e);++d<r;){var c=e[d],_=t[d];if(n)var g=s?n(_,c,d,t,e,a):n(c,_,d,e,t,a);if(g!==dd){if(g)continue;h=!1;break}if(p){if(!lp(t,function(e,t){if(!Bp(p,t)&&(c===e||o(c,e,i,n,a)))return p.push(t)})){h=!1;break}}else if(c!==_&&!o(c,_,i,n,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Cn(e,t,i,n,o,a,s){switch(i){case Qd:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Zd:return!(e.byteLength!=t.byteLength||!a(new k(e),new k(t)));case xd:case Cd:case jd:return Js(+e,+t);case Td:return e.name==t.name&&e.message==t.message;case Wd:case Dd:return e==t+"";case Id:var r=Ep;case Rd:var u=1&n;if(r=r||Wp,e.size!=t.size&&!u)return!1;var l=s.get(e);if(l)return l==t;n|=2,s.set(e,t);var d=xn(r(e),r(t),n,o,a,s);return s.delete(e),d;case Fd:if(pe)return pe.call(e)==pe.call(t)}return!1}function wn(e,t,i,n,o,a){var s=1&i,r=Ln(e),u=r.length,l,d;if(u!=Ln(t).length&&!s)return!1;for(var h=u;h--;){var p=r[h];if(!(s?p in t:S.call(t,p)))return!1}var c=a.get(e);if(c&&a.get(t))return c==t;var _=!0;a.set(e,t),a.set(t,e);for(var g=s;++h<u;){var f=e[p=r[h]],v=t[p];if(n)var m=s?n(v,f,p,t,e,a):n(f,v,p,e,t,a);if(!(m===dd?f===v||o(f,v,i,n,a):m)){_=!1;break}g=g||"constructor"==p}if(_&&!g){var b=e.constructor,y=t.constructor;b!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(_=!1)}return a.delete(e),a.delete(t),_}function Tn(e){return bo(co(e,dd,Do),e+"")}function Ln(e){return xt(e,gu,Dn)}function Nn(e){return xt(e,fu,Fn)}var In=oe?function(e){return oe.get(e)}:Ll;function jn(e){for(var t=e.name+"",i=ae[t],n=S.call(ae,t)?i.length:0;n--;){var o=i[n],a=o.func;if(null==a||a==e)return o.name}return t}function An(e){var t;return(S.call(_e,"placeholder")?_e:e).placeholder}function En(){var e=_e.iteratee||Ol;return e=e===Ol?Qt:e,arguments.length?e(arguments[0],arguments[1]):e}function Gn(e,t){var i=e.__data__;return to(t)?i["string"==typeof t?"string":"hash"]:i.map}function qn(e){for(var t=gu(e),i=t.length;i--;){var n=t[i],o=e[n];t[i]=[n,o,so(o)]}return t}function Wn(e,t){var i=Np(e,t);return zt(i)?i:dd}function Rn(e){var t=S.call(e,j),i=e[j];try{e[j]=dd;var n=!0}catch(e){}var o=g.call(e);return n&&(t?e[j]=i:delete e[j]),o}var Dn=D?function(t){return null==t?[]:(t=c(t),ip(D(t),function(e){return T.call(t,e)}))}:Rl,Fn=D?function(e){for(var t=[];e;)sp(t,Dn(e)),e=C(e);return t}:Rl,zn=Ct;function Vn(e,t,i){for(var n=-1,o=i.length;++n<o;){var a=i[n],s=a.size;switch(a.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Q(t,e+s);break;case"takeRight":e=Z(e,t-s)}}return{start:e,end:t}}function Xn(e){var t=e.match(Ph);return t?t[1].split(Mh):[]}function Zn(e,t,i){for(var n=-1,o=(t=Ai(t,e)).length,a=!1;++n<o;){var s=Oo(t[n]);if(!(a=null!=e&&i(e,s)))break;e=e[s]}return a||++n!=o?a:!!(o=null==e?0:e.length)&&fr(o)&&$n(s,o)&&(tr(e)||er(e))}function Qn(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&S.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Yn(e){return"function"!=typeof e.constructor||ao(e)?{}:ge(C(e))}function Un(e,t,i){var n=e.constructor;switch(t){case Zd:return Ri(e);case xd:case Cd:return new n(+e);case Qd:return Di(e,i);case Yd:case Ud:case Hd:case Jd:case $d:case Kd:case eh:case th:case ih:return Vi(e,i);case Id:return new n;case jd:case Dd:return new n(e);case Wd:return Fi(e);case Rd:return new n;case Fd:return zi(e)}}function Hn(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(1<i?"& ":"")+t[n],t=t.join(2<i?", ":" "),e.replace(Sh,"{\n/* [wrapped with "+t+"] */\n")}function Jn(e){return tr(e)||er(e)||!!(N&&e&&e[N])}function $n(e,t){var i=typeof e;return!!(t=null==t?vd:t)&&("number"==i||"symbol"!=i&&Lh.test(e))&&-1<e&&e%1==0&&e<t}function Kn(e,t,i){if(!vr(i))return!1;var n=typeof t;return!!("number"==n?nr(i)&&$n(t,i.length):"string"==n&&t in i)&&Js(i[t],e)}function eo(e,t){if(tr(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Nr(e))||(_h.test(e)||!ch.test(e)||null!=t&&e in c(t))}function to(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function io(e){var t=jn(e),i=_e[t];if("function"!=typeof i||!(t in be.prototype))return!1;if(e===i)return!0;var n=In(i);return!!n&&e===n[0]}function no(e){return!!p&&p in e}($&&zn(new $(new ArrayBuffer(1)))!=Qd||K&&zn(new K)!=Id||ee&&zn(ee.resolve())!=Gd||te&&zn(new te)!=Rd||ie&&zn(new ie)!=Vd)&&(zn=function(e){var t=Ct(e),i=t==Ed?e.constructor:dd,n=i?Bo(i):"";if(n)switch(n){case se:return Qd;case re:return Id;case ue:return Gd;case le:return Rd;case de:return Vd}return t});var oo=r?_r:Dl;function ao(e){var t=e&&e.constructor,i;return e===("function"==typeof t&&t.prototype||h)}function so(e){return e==e&&!vr(e)}function ro(t,i){return function(e){return null!=e&&(e[t]===i&&(i!==dd||t in c(e)))}}function uo(e){var t=Is(e,function(e){return 500===i.size&&i.clear(),e}),i=t.cache;return t}function lo(e,t){var i=e[1],n=t[1],o=i|n,a=o<131,s=128==n&&8==i||128==n&&256==i&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i;if(!a&&!s)return e;1&n&&(e[2]=t[2],o|=1&i?0:4);var r=t[3];if(r){var u=e[3];e[3]=u?Qi(u,r,t[4]):r,e[4]=u?qp(e[3],gd):t[4]}return(r=t[5])&&(u=e[5],e[5]=u?Yi(u,r,t[6]):r,e[6]=u?qp(e[5],gd):t[6]),(r=t[7])&&(e[7]=r),128&n&&(e[8]=null==e[8]?t[8]:Q(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function ho(e){var t=[];if(null!=e)for(var i in c(e))t.push(i);return t}function po(e){return g.call(e)}function co(a,s,r){return s=Z(s===dd?a.length-1:s,0),function(){for(var e=arguments,t=-1,i=Z(e.length-s,0),n=B(i);++t<i;)n[t]=e[s+t];t=-1;for(var o=B(s+1);++t<s;)o[t]=e[t];return o[s]=r(n),Jh(a,this,o)}}function _o(e,t){return t.length<2?e:kt(e,bi(t,0,-1))}function go(e,t){for(var i=e.length,n=Q(t.length,i),o=Ui(e);n--;){var a=t[n];e[n]=$n(a,i)?o[a]:dd}return e}function fo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var vo=So(fi),mo=q||function(e,t){return zh.setTimeout(e,t)},bo=So(vi);function yo(e,t,i){var n=t+"";return bo(e,Hn(n,ko(Xn(n),i)))}function So(i){var n=0,o=0;return function(){var e=Y(),t=16-(e-o);if(o=e,0<t){if(800<=++n)return arguments[0]}else n=0;return i.apply(dd,arguments)}}function Po(e,t){var i=-1,n=e.length,o=n-1;for(t=t===dd?n:t;++i<t;){var a=li(i,o),s=e[a];e[a]=e[i],e[i]=s}return e.length=t,e}var Mo=uo(function(e){var o=[];return 46===e.charCodeAt(0)&&o.push(""),e.replace(gh,function(e,t,i,n){o.push(i?n.replace(Oh,"$1"):t||e)}),o});function Oo(e){if("string"==typeof e||Nr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bo(e){if(null!=e){try{return u.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ko(i,n){return Kh(Md,function(e){var t="_."+e[0];n&e[1]&&!np(i,t)&&i.push(t)}),i.sort()}function xo(e){if(e instanceof be)return e.clone();var t=new me(e.__wrapped__,e.__chain__);return t.__actions__=Ui(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Co(e,t,i){t=(i?Kn(e,t,i):t===dd)?1:Z(Dr(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var o=0,a=0,s=B(W(n/t));o<n;)s[a++]=bi(e,o,o+=t);return s}function wo(e){for(var t=-1,i=null==e?0:e.length,n=0,o=[];++t<i;){var a=e[t];a&&(o[n++]=a)}return o}function To(){var e=arguments.length;if(!e)return[];for(var t=B(e-1),i=arguments[0],n=e;n--;)t[n-1]=arguments[n];return sp(tr(i)?Ui(i):[i],yt(t,1))}var Lo=pi(function(e,t){return or(e)?ct(e,yt(t,1,or,!0)):[]}),No=pi(function(e,t){var i=$o(t);return or(i)&&(i=dd),or(e)?ct(e,yt(t,1,or,!0),En(i,2)):[]}),Io=pi(function(e,t){var i=$o(t);return or(i)&&(i=dd),or(e)?ct(e,yt(t,1,or,!0),dd,i):[]});function jo(e,t,i){var n=null==e?0:e.length;return n?bi(e,(t=i||t===dd?1:Dr(t))<0?0:t,n):[]}function Ao(e,t,i){var n=null==e?0:e.length;return n?bi(e,0,(t=n-(t=i||t===dd?1:Dr(t)))<0?0:t):[]}function Eo(e,t){return e&&e.length?wi(e,En(t,3),!0,!0):[]}function Go(e,t){return e&&e.length?wi(e,En(t,3),!0):[]}function qo(e,t,i,n){var o=null==e?0:e.length;return o?(i&&"number"!=typeof i&&Kn(e,t,i)&&(i=0,n=o),mt(e,t,i,n)):[]}function Wo(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=null==i?0:Dr(i);return o<0&&(o=Z(n+o,0)),pp(e,En(t,3),o)}function Ro(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=n-1;return i!==dd&&(o=Dr(i),o=i<0?Z(n+o,0):Q(o,n-1)),pp(e,En(t,3),o,!0)}function Do(e){var t;return(null==e?0:e.length)?yt(e,1):[]}function Fo(e){var t;return(null==e?0:e.length)?yt(e,1/0):[]}function zo(e,t){var i;return(null==e?0:e.length)?yt(e,t=t===dd?1:Dr(t)):[]}function Vo(e){for(var t=-1,i=null==e?0:e.length,n={};++t<i;){var o=e[t];n[o[0]]=o[1]}return n}function Xo(e){return e&&e.length?e[0]:dd}function Zo(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=null==i?0:Dr(i);return o<0&&(o=Z(n+o,0)),cp(e,t,o)}function Qo(e){var t;return(null==e?0:e.length)?bi(e,0,-1):[]}var Yo=pi(function(e){var t=ap(e,Ii);return t.length&&t[0]===e[0]?It(t):[]}),Uo=pi(function(e){var t=$o(e),i=ap(e,Ii);return t===$o(i)?t=dd:i.pop(),i.length&&i[0]===e[0]?It(i,En(t,2)):[]}),Ho=pi(function(e){var t=$o(e),i=ap(e,Ii);return(t="function"==typeof t?t:dd)&&i.pop(),i.length&&i[0]===e[0]?It(i,dd,t):[]});function Jo(e,t){return null==e?"":V.call(e,t)}function $o(e){var t=null==e?0:e.length;return t?e[t-1]:dd}function Ko(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var o=n;return i!==dd&&(o=(o=Dr(i))<0?Z(n+o,0):Q(o,n-1)),t==t?Dp(e,t,o):pp(e,gp,o,!0)}function ea(e,t){return e&&e.length?ii(e,Dr(t)):dd}var ta=pi(ia);function ia(e,t){return e&&e.length&&t&&t.length?ri(e,t):e}function na(e,t,i){return e&&e.length&&t&&t.length?ri(e,t,En(i,2)):e}function oa(e,t,i){return e&&e.length&&t&&t.length?ri(e,t,dd,i):e}var aa=Tn(function(e,t){var i=null==e?0:e.length,n=rt(e,t);return ui(e,ap(t,function(e){return $n(e,i)?+e:e}).sort(Xi)),n});function sa(e,t){var i=[];if(!e||!e.length)return i;var n=-1,o=[],a=e.length;for(t=En(t,3);++n<a;){var s=e[n];t(s,n,e)&&(i.push(s),o.push(n))}return ui(e,o),i}function ra(e){return null==e?e:J.call(e)}function ua(e,t,i){var n=null==e?0:e.length;return n?(i=i&&"number"!=typeof i&&Kn(e,t,i)?(t=0,n):(t=null==t?0:Dr(t),i===dd?n:Dr(i)),bi(e,t,i)):[]}function la(e,t){return Si(e,t)}function da(e,t,i){return Pi(e,t,En(i,2))}function ha(e,t){var i=null==e?0:e.length;if(i){var n=Si(e,t);if(n<i&&Js(e[n],t))return n}return-1}function pa(e,t){return Si(e,t,!0)}function ca(e,t,i){return Pi(e,t,En(i,2),!0)}function _a(e,t){var i;if(null==e?0:e.length){var n=Si(e,t,!0)-1;if(Js(e[n],t))return n}return-1}function ga(e){return e&&e.length?Mi(e):[]}function fa(e,t){return e&&e.length?Mi(e,En(t,2)):[]}function va(e){var t=null==e?0:e.length;return t?bi(e,1,t):[]}function ma(e,t,i){return e&&e.length?bi(e,0,(t=i||t===dd?1:Dr(t))<0?0:t):[]}function ba(e,t,i){var n=null==e?0:e.length;return n?bi(e,(t=n-(t=i||t===dd?1:Dr(t)))<0?0:t,n):[]}function ya(e,t){return e&&e.length?wi(e,En(t,3),!1,!0):[]}function Sa(e,t){return e&&e.length?wi(e,En(t,3)):[]}var Pa=pi(function(e){return ki(yt(e,1,or,!0))}),Ma=pi(function(e){var t=$o(e);return or(t)&&(t=dd),ki(yt(e,1,or,!0),En(t,2))}),Oa=pi(function(e){var t=$o(e);return t="function"==typeof t?t:dd,ki(yt(e,1,or,!0),dd,t)});function Ba(e){return e&&e.length?ki(e):[]}function ka(e,t){return e&&e.length?ki(e,En(t,2)):[]}function xa(e,t){return t="function"==typeof t?t:dd,e&&e.length?ki(e,dd,t):[]}function Ca(t){if(!t||!t.length)return[];var i=0;return t=ip(t,function(e){if(or(e))return i=Z(e.length,i),!0}),Sp(i,function(e){return ap(t,vp(e))})}function wa(e,t){if(!e||!e.length)return[];var i=Ca(e);return null==t?i:ap(i,function(e){return Jh(t,dd,e)})}var Ta=pi(function(e,t){return or(e)?ct(e,t):[]}),La=pi(function(e){return Li(ip(e,or))}),Na=pi(function(e){var t=$o(e);return or(t)&&(t=dd),Li(ip(e,or),En(t,2))}),Ia=pi(function(e){var t=$o(e);return t="function"==typeof t?t:dd,Li(ip(e,or),dd,t)}),ja=pi(Ca);function Aa(e,t){return Ni(e||[],t||[],tt)}function Ea(e,t){return Ni(e||[],t||[],gi)}var Ga=pi(function(e){var t=e.length,i=1<t?e[t-1]:dd;return i="function"==typeof i?(e.pop(),i):dd,wa(e,i)});function qa(e){var t=_e(e);return t.__chain__=!0,t}function Wa(e,t){return t(e),e}function Ra(e,t){return t(e)}var Da=Tn(function(t){var i=t.length,e=i?t[0]:0,n=this.__wrapped__,o=function(e){return rt(e,t)};return!(1<i||this.__actions__.length)&&n instanceof be&&$n(e)?((n=n.slice(e,+e+(i?1:0))).__actions__.push({func:Ra,args:[o],thisArg:dd}),new me(n,this.__chain__).thru(function(e){return i&&!e.length&&e.push(dd),e})):this.thru(o)});function Fa(){return qa(this)}function za(){return new me(this.value(),this.__chain__)}function Va(){this.__values__===dd&&(this.__values__=Wr(this.value()));var e=this.__index__>=this.__values__.length,t;return{done:e,value:e?dd:this.__values__[this.__index__++]}}function Xa(){return this}function Za(e){for(var t,i=this;i instanceof ve;){var n=xo(i);n.__index__=0,n.__values__=dd,t?o.__wrapped__=n:t=n;var o=n;i=i.__wrapped__}return o.__wrapped__=e,t}function Qa(){var e=this.__wrapped__;if(e instanceof be){var t=e;return this.__actions__.length&&(t=new be(this)),(t=t.reverse()).__actions__.push({func:Ra,args:[ra],thisArg:dd}),new me(t,this.__chain__)}return this.thru(ra)}function Ya(){return Ti(this.__wrapped__,this.__actions__)}var Ua=Ki(function(e,t,i){S.call(e,i)?++e[i]:st(e,i,1)});function Ha(e,t,i){var n=tr(e)?tp:ft;return i&&Kn(e,t,i)&&(t=dd),n(e,En(t,3))}function Ja(e,t){var i;return(tr(e)?ip:bt)(e,En(t,3))}var $a=ln(Wo),Ka=ln(Ro);function es(e,t){return yt(ls(e,t),1)}function ts(e,t){return yt(ls(e,t),1/0)}function is(e,t,i){return i=i===dd?1:Dr(i),yt(ls(e,t),i)}function ns(e,t){var i;return(tr(e)?Kh:_t)(e,En(t,3))}function os(e,t){var i;return(tr(e)?ep:gt)(e,En(t,3))}var as=Ki(function(e,t,i){S.call(e,i)?e[i].push(t):st(e,i,[t])});function ss(e,t,i,n){e=nr(e)?e:ju(e),i=i&&!n?Dr(i):0;var o=e.length;return i<0&&(i=Z(o+i,0)),Lr(e)?i<=o&&-1<e.indexOf(t,i):!!o&&-1<cp(e,t,i)}var rs=pi(function(e,t,i){var n=-1,o="function"==typeof t,a=nr(e)?B(e.length):[];return _t(e,function(e){a[++n]=o?Jh(t,e,i):At(e,t,i)}),a}),us=Ki(function(e,t,i){st(e,i,t)});function ls(e,t){var i;return(tr(e)?ap:Jt)(e,En(t,3))}function ds(e,t,i,n){return null==e?[]:(tr(t)||(t=null==t?[]:[t]),tr(i=n?dd:i)||(i=null==i?[]:[i]),ni(e,t,i))}var hs=Ki(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function ps(e,t,i){var n=tr(e)?rp:mp,o=arguments.length<3;return n(e,En(t,4),i,o,_t)}function cs(e,t,i){var n=tr(e)?up:mp,o=arguments.length<3;return n(e,En(t,4),i,o,gt)}function _s(e,t){var i;return(tr(e)?ip:bt)(e,js(En(t,3)))}function gs(e){var t;return(tr(e)?Je:ci)(e)}function fs(e,t,i){var n;return t=(i?Kn(e,t,i):t===dd)?1:Dr(t),(tr(e)?$e:_i)(e,t)}function vs(e){var t;return(tr(e)?Ke:mi)(e)}function ms(e){if(null==e)return 0;if(nr(e))return Lr(e)?Fp(e):e.length;var t=zn(e);return t==Id||t==Rd?e.size:Yt(e).length}function bs(e,t,i){var n=tr(e)?lp:yi;return i&&Kn(e,t,i)&&(t=dd),n(e,En(t,3))}var ys=pi(function(e,t){if(null==e)return[];var i=t.length;return 1<i&&Kn(e,t[0],t[1])?t=[]:2<i&&Kn(t[0],t[1],t[2])&&(t=[t[0]]),ni(e,yt(t,1),[])}),Ss=G||function(){return zh.Date.now()};function Ps(e,t){if("function"!=typeof t)throw new P(cd);return e=Dr(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ms(e,t,i){return t=i?dd:t,t=e&&null==t?e.length:t,Mn(e,128,dd,dd,dd,dd,t)}function Os(e,t){var i;if("function"!=typeof t)throw new P(cd);return e=Dr(e),function(){return 0<--e&&(i=t.apply(this,arguments)),e<=1&&(t=dd),i}}var Bs=pi(function(e,t,i){var n=1;if(i.length){var o=qp(i,An(Bs));n|=32}return Mn(e,n,t,i,o)}),ks=pi(function(e,t,i){var n=3;if(i.length){var o=qp(i,An(ks));n|=32}return Mn(t,n,e,i,o)});function xs(e,t,i){var n=Mn(e,8,dd,dd,dd,dd,dd,t=i?dd:t);return n.placeholder=xs.placeholder,n}function Cs(e,t,i){var n=Mn(e,16,dd,dd,dd,dd,dd,t=i?dd:t);return n.placeholder=Cs.placeholder,n}function ws(n,o,e){var a,s,r,u,i,l,d=0,t=!1,h=!1,p=!0;if("function"!=typeof n)throw new P(cd);function c(e){var t=a,i=s;return a=s=dd,d=e,u=n.apply(i,t)}function _(e){return d=e,i=mo(v,o),t?c(e):u}function g(e){var t,i,n=o-(e-l);return h?Q(n,r-(e-d)):n}function f(e){var t=e-l,i;return l===dd||o<=t||t<0||h&&r<=e-d}function v(){var e=Ss();if(f(e))return m(e);i=mo(v,g(e))}function m(e){return i=dd,p&&a?c(e):(a=s=dd,u)}function b(){i!==dd&&qi(i),d=0,a=l=s=i=dd}function y(){return i===dd?u:m(Ss())}function S(){var e=Ss(),t=f(e);if(a=arguments,s=this,l=e,t){if(i===dd)return _(l);if(h)return qi(i),i=mo(v,o),c(l)}return i===dd&&(i=mo(v,o)),u}return o=zr(o)||0,vr(e)&&(t=!!e.leading,r=(h="maxWait"in e)?Z(zr(e.maxWait)||0,o):r,p="trailing"in e?!!e.trailing:p),S.cancel=b,S.flush=y,S}var Ts=pi(function(e,t){return pt(e,1,t)}),Ls=pi(function(e,t,i){return pt(e,zr(t)||0,i)});function Ns(e){return Mn(e,512)}function Is(o,a){if("function"!=typeof o||null!=a&&"function"!=typeof a)throw new P(cd);var s=function(){var e=arguments,t=a?a.apply(this,e):e[0],i=s.cache;if(i.has(t))return i.get(t);var n=o.apply(this,e);return s.cache=i.set(t,n)||i,n};return s.cache=new(Is.Cache||Ae),s}function js(t){if("function"!=typeof t)throw new P(cd);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function As(e){return Os(2,e)}Is.Cache=Ae;var Es=Ei(function(n,o){var a=(o=1==o.length&&tr(o[0])?ap(o[0],Mp(En())):ap(yt(o,1),Mp(En()))).length;return pi(function(e){for(var t=-1,i=Q(e.length,a);++t<i;)e[t]=o[t].call(this,e[t]);return Jh(n,this,e)})}),Gs=pi(function(e,t){var i=qp(t,An(Gs));return Mn(e,32,dd,t,i)}),qs=pi(function(e,t){var i=qp(t,An(qs));return Mn(e,64,dd,t,i)}),Ws=Tn(function(e,t){return Mn(e,256,dd,dd,dd,t)});function Rs(e,t){if("function"!=typeof e)throw new P(cd);return pi(e,t=t===dd?t:Dr(t))}function Ds(n,o){if("function"!=typeof n)throw new P(cd);return o=null==o?0:Z(Dr(o),0),pi(function(e){var t=e[o],i=Gi(e,0,o);return t&&sp(i,t),Jh(n,this,i)})}function Fs(e,t,i){var n=!0,o=!0;if("function"!=typeof e)throw new P(cd);return vr(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),ws(e,t,{leading:n,maxWait:t,trailing:o})}function zs(e){return Ms(e,1)}function Vs(e,t){return Gs(ji(t),e)}function Xs(){if(!arguments.length)return[];var e=arguments[0];return tr(e)?e:[e]}function Zs(e){return lt(e,4)}function Qs(e,t){return lt(e,4,t="function"==typeof t?t:dd)}function Ys(e){return lt(e,5)}function Us(e,t){return lt(e,5,t="function"==typeof t?t:dd)}function Hs(e,t){return null==t||ht(e,t,gu(t))}function Js(e,t){return e===t||e!=e&&t!=t}var $s=mn(wt),Ks=mn(function(e,t){return t<=e}),er=Et(function(){return arguments}())?Et:function(e){return mr(e)&&S.call(e,"callee")&&!T.call(e,"callee")},tr=B.isArray,ir=Xh?Mp(Xh):Gt;function nr(e){return null!=e&&fr(e.length)&&!_r(e)}function or(e){return mr(e)&&nr(e)}function ar(e){return!0===e||!1===e||mr(e)&&Ct(e)==xd}var sr=F||Dl,rr=Zh?Mp(Zh):qt;function ur(e){return mr(e)&&1===e.nodeType&&!xr(e)}function lr(e){if(null==e)return!0;if(nr(e)&&(tr(e)||"string"==typeof e||"function"==typeof e.splice||sr(e)||Ir(e)||er(e)))return!e.length;var t=zn(e);if(t==Id||t==Rd)return!e.size;if(ao(e))return!Yt(e).length;for(var i in e)if(S.call(e,i))return!1;return!0}function dr(e,t){return Wt(e,t)}function hr(e,t,i){var n=(i="function"==typeof i?i:dd)?i(e,t):dd;return n===dd?Wt(e,t,dd,i):!!n}function pr(e){if(!mr(e))return!1;var t=Ct(e);return t==Td||t==wd||"string"==typeof e.message&&"string"==typeof e.name&&!xr(e)}function cr(e){return"number"==typeof e&&z(e)}function _r(e){if(!vr(e))return!1;var t=Ct(e);return t==Ld||t==Nd||t==kd||t==qd}function gr(e){return"number"==typeof e&&e==Dr(e)}function fr(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=vd}function vr(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function mr(e){return null!=e&&"object"==typeof e}var br=Qh?Mp(Qh):Dt;function yr(e,t){return e===t||Ft(e,t,qn(t))}function Sr(e,t,i){return i="function"==typeof i?i:dd,Ft(e,t,qn(t),i)}function Pr(e){return kr(e)&&e!=+e}function Mr(e){if(oo(e))throw new n(pd);return zt(e)}function Or(e){return null===e}function Br(e){return null==e}function kr(e){return"number"==typeof e||mr(e)&&Ct(e)==jd}function xr(e){if(!mr(e)||Ct(e)!=Ed)return!1;var t=C(e);if(null===t)return!0;var i=S.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&u.call(i)==m}var Cr=Yh?Mp(Yh):Vt;function wr(e){return gr(e)&&-vd<=e&&e<=vd}var Tr=Uh?Mp(Uh):Xt;function Lr(e){return"string"==typeof e||!tr(e)&&mr(e)&&Ct(e)==Dd}function Nr(e){return"symbol"==typeof e||mr(e)&&Ct(e)==Fd}var Ir=Hh?Mp(Hh):Zt;function jr(e){return e===dd}function Ar(e){return mr(e)&&zn(e)==Vd}function Er(e){return mr(e)&&Ct(e)==Xd}var Gr=mn(Ht),qr=mn(function(e,t){return e<=t});function Wr(e){if(!e)return[];if(nr(e))return Lr(e)?zp(e):Ui(e);if(I&&e[I])return Ap(e[I]());var t=zn(e),i;return(t==Id?Ep:t==Rd?Wp:ju)(e)}function Rr(e){return e?(e=zr(e))!==1/0&&e!==-1/0?e==e?e:0:(e<0?-1:1)*md:0===e?e:0;var t}function Dr(e){var t=Rr(e),i=t%1;return t==t?i?t-i:t:0}function Fr(e){return e?ut(Dr(e),0,yd):0}function zr(e){if("number"==typeof e)return e;if(Nr(e))return bd;if(vr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=vr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(mh,"");var i=Ch.test(e);return i||Th.test(e)?Fh(e.slice(2),i?2:8):xh.test(e)?bd:+e}function Vr(e){return Hi(e,fu(e))}function Xr(e){return e?ut(Dr(e),-vd,vd):0===e?e:0}function Zr(e){return null==e?"":Bi(e)}var Qr=en(function(e,t){if(ao(t)||nr(t))Hi(t,gu(t),e);else for(var i in t)S.call(t,i)&&tt(e,i,t[i])}),Yr=en(function(e,t){Hi(t,fu(t),e)}),Ur=en(function(e,t,i,n){Hi(t,fu(t),e,n)}),Hr=en(function(e,t,i,n){Hi(t,gu(t),e,n)}),Jr=Tn(rt);function $r(e,t){var i=ge(e);return null==t?i:ot(i,t)}var Kr=pi(function(e,t){e=c(e);var i=-1,n=t.length,o=2<n?t[2]:dd;for(o&&Kn(t[0],t[1],o)&&(n=1);++i<n;)for(var a=t[i],s=fu(a),r=-1,u=s.length;++r<u;){var l=s[r],d=e[l];(d===dd||Js(d,h[l])&&!S.call(e,l))&&(e[l]=a[l])}return e}),eu=pi(function(e){return e.push(dd,Bn),Jh(yu,dd,e)});function tu(e,t){return hp(e,En(t,3),Mt)}function iu(e,t){return hp(e,En(t,3),Ot)}function nu(e,t){return null==e?e:St(e,En(t,3),fu)}function ou(e,t){return null==e?e:Pt(e,En(t,3),fu)}function au(e,t){return e&&Mt(e,En(t,3))}function su(e,t){return e&&Ot(e,En(t,3))}function ru(e){return null==e?[]:Bt(e,gu(e))}function uu(e){return null==e?[]:Bt(e,fu(e))}function lu(e,t,i){var n=null==e?dd:kt(e,t);return n===dd?i:n}function du(e,t){return null!=e&&Zn(e,t,Tt)}function hu(e,t){return null!=e&&Zn(e,t,Lt)}var pu=pn(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=g.call(t)),e[t]=i},bl(Ml)),cu=pn(function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=g.call(t)),S.call(e,t)?e[t].push(i):e[t]=[i]},En),_u=pi(At);function gu(e){return nr(e)?He(e):Yt(e)}function fu(e){return nr(e)?He(e,!0):Ut(e)}function vu(e,n){var o={};return n=En(n,3),Mt(e,function(e,t,i){st(o,n(e,t,i),e)}),o}function mu(e,n){var o={};return n=En(n,3),Mt(e,function(e,t,i){st(o,t,n(e,t,i))}),o}var bu=en(function(e,t,i){ei(e,t,i)}),yu=en(function(e,t,i,n){ei(e,t,i,n)}),Su=Tn(function(t,e){var i={};if(null==t)return i;var n=!1;e=ap(e,function(e){return e=Ai(e,t),n=n||1<e.length,e}),Hi(t,Nn(t),i),n&&(i=lt(i,7,kn));for(var o=e.length;o--;)xi(i,e[o]);return i});function Pu(e,t){return Ou(e,js(En(t)))}var Mu=Tn(function(e,t){return null==e?{}:oi(e,t)});function Ou(e,i){if(null==e)return{};var t=ap(Nn(e),function(e){return[e]});return i=En(i),ai(e,t,function(e,t){return i(e,t[0])})}function Bu(e,t,i){var n=-1,o=(t=Ai(t,e)).length;for(o||(o=1,e=dd);++n<o;){var a=null==e?dd:e[Oo(t[n])];a===dd&&(n=o,a=i),e=_r(a)?a.call(e):a}return e}function ku(e,t,i){return null==e?e:gi(e,t,i)}function xu(e,t,i,n){return n="function"==typeof n?n:dd,null==e?e:gi(e,t,i,n)}var Cu=Pn(gu),wu=Pn(fu);function Tu(e,n,o){var t=tr(e),i=t||sr(e)||Ir(e);if(n=En(n,4),null==o){var a=e&&e.constructor;o=i?t?new a:[]:vr(e)&&_r(a)?ge(C(e)):{}}return(i?Kh:Mt)(e,function(e,t,i){return n(o,e,t,i)}),o}function Lu(e,t){return null==e||xi(e,t)}function Nu(e,t,i){return null==e?e:Ci(e,t,ji(i))}function Iu(e,t,i,n){return n="function"==typeof n?n:dd,null==e?e:Ci(e,t,ji(i),n)}function ju(e){return null==e?[]:Op(e,gu(e))}function Au(e){return null==e?[]:Op(e,fu(e))}function Eu(e,t,i){return i===dd&&(i=t,t=dd),i!==dd&&(i=(i=zr(i))==i?i:0),t!==dd&&(t=(t=zr(t))==t?t:0),ut(zr(e),t,i)}function Gu(e,t,i){return t=Rr(t),i===dd?(i=t,t=0):i=Rr(i),Nt(e=zr(e),t,i)}function qu(e,t,i){if(i&&"boolean"!=typeof i&&Kn(e,t,i)&&(t=i=dd),i===dd&&("boolean"==typeof t?(i=t,t=dd):"boolean"==typeof e&&(i=e,e=dd)),e===dd&&t===dd?(e=0,t=1):(e=Rr(e),t===dd?(t=e,e=0):t=Rr(t)),t<e){var n=e;e=t,t=n}if(i||e%1||t%1){var o=H();return Q(e+o*(t-e+Dh("1e-"+((o+"").length-1))),t)}return li(e,t)}var Wu=sn(function(e,t,i){return t=t.toLowerCase(),e+(i?Ru(t):t)});function Ru(e){return cl(Zr(e).toLowerCase())}function Du(e){return(e=Zr(e))&&e.replace(Nh,wp).replace(Eh,"")}function Fu(e,t,i){e=Zr(e),t=Bi(t);var n=e.length,o=i=i===dd?n:ut(Dr(i),0,n);return 0<=(i-=t.length)&&e.slice(i,o)==t}function zu(e){return(e=Zr(e))&&lh.test(e)?e.replace(rh,Tp):e}function Vu(e){return(e=Zr(e))&&vh.test(e)?e.replace(fh,"\\$&"):e}var Xu=sn(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),Zu=sn(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Qu=an("toLowerCase");function Yu(e,t,i){e=Zr(e);var n=(t=Dr(t))?Fp(e):0;if(!t||t<=n)return e;var o=(t-n)/2;return gn(R(o),i)+e+gn(W(o),i)}function Uu(e,t,i){e=Zr(e);var n=(t=Dr(t))?Fp(e):0;return t&&n<t?e+gn(t-n,i):e}function Hu(e,t,i){e=Zr(e);var n=(t=Dr(t))?Fp(e):0;return t&&n<t?gn(t-n,i)+e:e}function Ju(e,t,i){return t=i||null==t?0:t&&+t,U(Zr(e).replace(bh,""),t||0)}function $u(e,t,i){return t=(i?Kn(e,t,i):t===dd)?1:Dr(t),hi(Zr(e),t)}function Ku(){var e=arguments,t=Zr(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var el=sn(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function tl(e,t,i){return i&&"number"!=typeof i&&Kn(e,t,i)&&(t=i=dd),(i=i===dd?yd:i>>>0)?(e=Zr(e))&&("string"==typeof t||null!=t&&!Cr(t))&&!(t=Bi(t))&&Ip(e)?Gi(zp(e),0,i):e.split(t,i):[]}var il=sn(function(e,t,i){return e+(i?" ":"")+cl(t)});function nl(e,t,i){return e=Zr(e),i=null==i?0:ut(Dr(i),0,e.length),t=Bi(t),e.slice(i,i+t.length)==t}function ol(s,e,t){var i=_e.templateSettings;t&&Kn(s,e,t)&&(e=dd),s=Zr(s),e=Ur({},e,i,On);var n=Ur({},e.imports,i.imports,On),o=gu(n),a=Op(n,o),r,u,l=0,d=e.interpolate||Ih,h="__p += '",p=v((e.escape||Ih).source+"|"+d.source+"|"+(d===ph?Bh:Ih).source+"|"+(e.evaluate||Ih).source+"|$","g"),c="//# sourceURL="+(S.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++qh+"]")+"\n";s.replace(p,function(e,t,i,n,o,a){return i=i||n,h+=s.slice(l,a).replace(jh,Lp),t&&(r=!0,h+="' +\n__e("+t+") +\n'"),o&&(u=!0,h+="';\n"+o+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=a+e.length,e}),h+="';\n";var _=S.call(e,"variable")&&e.variable;_||(h="with (obj) {\n"+h+"\n}\n"),h=(u?h.replace(nh,""):h).replace(oh,"$1").replace(ah,"$1;"),h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=gl(function(){return f(o,c+"return "+h).apply(dd,a)});if(g.source=h,pr(g))throw g;return g}function al(e){return Zr(e).toLowerCase()}function sl(e){return Zr(e).toUpperCase()}function rl(e,t,i){if((e=Zr(e))&&(i||t===dd))return e.replace(mh,"");if(!e||!(t=Bi(t)))return e;var n=zp(e),o=zp(t),a,s;return Gi(n,kp(n,o),xp(n,o)+1).join("")}function ul(e,t,i){if((e=Zr(e))&&(i||t===dd))return e.replace(yh,"");if(!e||!(t=Bi(t)))return e;var n=zp(e),o;return Gi(n,0,xp(n,zp(t))+1).join("")}function ll(e,t,i){if((e=Zr(e))&&(i||t===dd))return e.replace(bh,"");if(!e||!(t=Bi(t)))return e;var n=zp(e),o;return Gi(n,kp(n,zp(t))).join("")}function dl(e,t){var i=30,n=fd;if(vr(t)){var o="separator"in t?t.separator:o;i="length"in t?Dr(t.length):i,n="omission"in t?Bi(t.omission):n}var a=(e=Zr(e)).length;if(Ip(e)){var s=zp(e);a=s.length}if(a<=i)return e;var r=i-Fp(n);if(r<1)return n;var u=s?Gi(s,0,r).join(""):e.slice(0,r);if(o===dd)return u+n;if(s&&(r+=u.length-r),Cr(o)){if(e.slice(r).search(o)){var l,d=u;for(o.global||(o=v(o.source,Zr(kh.exec(o))+"g")),o.lastIndex=0;l=o.exec(d);)var h=l.index;u=u.slice(0,h===dd?r:h)}}else if(e.indexOf(Bi(o),r)!=r){var p=u.lastIndexOf(o);-1<p&&(u=u.slice(0,p))}return u+n}function hl(e){return(e=Zr(e))&&uh.test(e)?e.replace(sh,Vp):e}var pl=sn(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),cl=an("toUpperCase");function _l(e,t,i){return e=Zr(e),(t=i?dd:t)===dd?jp(e)?Xp(e):dp(e):e.match(t)||[]}var gl=pi(function(e,t){try{return Jh(e,dd,t)}catch(e){return pr(e)?e:new n(e)}}),fl=Tn(function(t,e){return Kh(e,function(e){e=Oo(e),st(t,e,Bs(t[e],t))}),t});function vl(n){var o=null==n?0:n.length,t=En();return n=o?ap(n,function(e){if("function"!=typeof e[1])throw new P(cd);return[t(e[0]),e[1]]}):[],pi(function(e){for(var t=-1;++t<o;){var i=n[t];if(Jh(i[0],this,e))return Jh(i[1],this,e)}})}function ml(e){return dt(lt(e,1))}function bl(e){return function(){return e}}function yl(e,t){return null==e||e!=e?t:e}var Sl=dn(),Pl=dn(!0);function Ml(e){return e}function Ol(e){return Qt("function"==typeof e?e:lt(e,1))}function Bl(e){return $t(lt(e,1))}function kl(e,t){return Kt(e,lt(t,1))}var xl=pi(function(t,i){return function(e){return At(e,t,i)}}),Cl=pi(function(t,i){return function(e){return At(t,e,i)}});function wl(o,t,e){var i=gu(t),n=Bt(t,i);null!=e||vr(t)&&(n.length||!i.length)||(e=t,t=o,o=this,n=Bt(t,gu(t)));var a=!(vr(e)&&"chain"in e&&!e.chain),s=_r(o);return Kh(n,function(e){var n=t[e];o[e]=n,s&&(o.prototype[e]=function(){var e=this.__chain__;if(a||e){var t=o(this.__wrapped__),i;return(t.__actions__=Ui(this.__actions__)).push({func:n,args:arguments,thisArg:o}),t.__chain__=e,t}return n.apply(o,sp([this.value()],arguments))})}),o}function Tl(){return zh._===this&&(zh._=b),this}function Ll(){}function Nl(t){return t=Dr(t),pi(function(e){return ii(e,t)})}var Il=_n(ap),jl=_n(tp),Al=_n(lp);function El(e){return eo(e)?vp(Oo(e)):si(e)}function Gl(t){return function(e){return null==t?dd:kt(t,e)}}var ql=vn(),Wl=vn(!0);function Rl(){return[]}function Dl(){return!1}function Fl(){return{}}function zl(){return""}function Vl(){return!0}function Xl(e,t){if((e=Dr(e))<1||vd<e)return[];var i=yd,n=Q(e,yd);t=En(t),e-=yd;for(var o=Sp(n,t);++i<e;)t(i);return o}function Zl(e){return tr(e)?ap(e,Oo):Nr(e)?[e]:Ui(Mo(Zr(e)))}function Ql(e){var t=++l;return Zr(e)+t}var Yl=cn(function(e,t){return e+t},0),Ul=yn("ceil"),Hl=cn(function(e,t){return e/t},1),Jl=yn("floor");function $l(e){return e&&e.length?vt(e,Ml,wt):dd}function Kl(e,t){return e&&e.length?vt(e,En(t,2),wt):dd}function ed(e){return fp(e,Ml)}function td(e,t){return fp(e,En(t,2))}function id(e){return e&&e.length?vt(e,Ml,Ht):dd}function nd(e,t){return e&&e.length?vt(e,En(t,2),Ht):dd}var od=cn(function(e,t){return e*t},1),ad=yn("round"),sd=cn(function(e,t){return e-t},0),rd;function ud(e){return e&&e.length?yp(e,Ml):0}function ld(e,t){return e&&e.length?yp(e,En(t,2)):0}return _e.after=Ps,_e.ary=Ms,_e.assign=Qr,_e.assignIn=Yr,_e.assignInWith=Ur,_e.assignWith=Hr,_e.at=Jr,_e.before=Os,_e.bind=Bs,_e.bindAll=fl,_e.bindKey=ks,_e.castArray=Xs,_e.chain=qa,_e.chunk=Co,_e.compact=wo,_e.concat=To,_e.cond=vl,_e.conforms=ml,_e.constant=bl,_e.countBy=Ua,_e.create=$r,_e.curry=xs,_e.curryRight=Cs,_e.debounce=ws,_e.defaults=Kr,_e.defaultsDeep=eu,_e.defer=Ts,_e.delay=Ls,_e.difference=Lo,_e.differenceBy=No,_e.differenceWith=Io,_e.drop=jo,_e.dropRight=Ao,_e.dropRightWhile=Eo,_e.dropWhile=Go,_e.fill=qo,_e.filter=Ja,_e.flatMap=es,_e.flatMapDeep=ts,_e.flatMapDepth=is,_e.flatten=Do,_e.flattenDeep=Fo,_e.flattenDepth=zo,_e.flip=Ns,_e.flow=Sl,_e.flowRight=Pl,_e.fromPairs=Vo,_e.functions=ru,_e.functionsIn=uu,_e.groupBy=as,_e.initial=Qo,_e.intersection=Yo,_e.intersectionBy=Uo,_e.intersectionWith=Ho,_e.invert=pu,_e.invertBy=cu,_e.invokeMap=rs,_e.iteratee=Ol,_e.keyBy=us,_e.keys=gu,_e.keysIn=fu,_e.map=ls,_e.mapKeys=vu,_e.mapValues=mu,_e.matches=Bl,_e.matchesProperty=kl,_e.memoize=Is,_e.merge=bu,_e.mergeWith=yu,_e.method=xl,_e.methodOf=Cl,_e.mixin=wl,_e.negate=js,_e.nthArg=Nl,_e.omit=Su,_e.omitBy=Pu,_e.once=As,_e.orderBy=ds,_e.over=Il,_e.overArgs=Es,_e.overEvery=jl,_e.overSome=Al,_e.partial=Gs,_e.partialRight=qs,_e.partition=hs,_e.pick=Mu,_e.pickBy=Ou,_e.property=El,_e.propertyOf=Gl,_e.pull=ta,_e.pullAll=ia,_e.pullAllBy=na,_e.pullAllWith=oa,_e.pullAt=aa,_e.range=ql,_e.rangeRight=Wl,_e.rearg=Ws,_e.reject=_s,_e.remove=sa,_e.rest=Rs,_e.reverse=ra,_e.sampleSize=fs,_e.set=ku,_e.setWith=xu,_e.shuffle=vs,_e.slice=ua,_e.sortBy=ys,_e.sortedUniq=ga,_e.sortedUniqBy=fa,_e.split=tl,_e.spread=Ds,_e.tail=va,_e.take=ma,_e.takeRight=ba,_e.takeRightWhile=ya,_e.takeWhile=Sa,_e.tap=Wa,_e.throttle=Fs,_e.thru=Ra,_e.toArray=Wr,_e.toPairs=Cu,_e.toPairsIn=wu,_e.toPath=Zl,_e.toPlainObject=Vr,_e.transform=Tu,_e.unary=zs,_e.union=Pa,_e.unionBy=Ma,_e.unionWith=Oa,_e.uniq=Ba,_e.uniqBy=ka,_e.uniqWith=xa,_e.unset=Lu,_e.unzip=Ca,_e.unzipWith=wa,_e.update=Nu,_e.updateWith=Iu,_e.values=ju,_e.valuesIn=Au,_e.without=Ta,_e.words=_l,_e.wrap=Vs,_e.xor=La,_e.xorBy=Na,_e.xorWith=Ia,_e.zip=ja,_e.zipObject=Aa,_e.zipObjectDeep=Ea,_e.zipWith=Ga,_e.entries=Cu,_e.entriesIn=wu,_e.extend=Yr,_e.extendWith=Ur,wl(_e,_e),_e.add=Yl,_e.attempt=gl,_e.camelCase=Wu,_e.capitalize=Ru,_e.ceil=Ul,_e.clamp=Eu,_e.clone=Zs,_e.cloneDeep=Ys,_e.cloneDeepWith=Us,_e.cloneWith=Qs,_e.conformsTo=Hs,_e.deburr=Du,_e.defaultTo=yl,_e.divide=Hl,_e.endsWith=Fu,_e.eq=Js,_e.escape=zu,_e.escapeRegExp=Vu,_e.every=Ha,_e.find=$a,_e.findIndex=Wo,_e.findKey=tu,_e.findLast=Ka,_e.findLastIndex=Ro,_e.findLastKey=iu,_e.floor=Jl,_e.forEach=ns,_e.forEachRight=os,_e.forIn=nu,_e.forInRight=ou,_e.forOwn=au,_e.forOwnRight=su,_e.get=lu,_e.gt=$s,_e.gte=Ks,_e.has=du,_e.hasIn=hu,_e.head=Xo,_e.identity=Ml,_e.includes=ss,_e.indexOf=Zo,_e.inRange=Gu,_e.invoke=_u,_e.isArguments=er,_e.isArray=tr,_e.isArrayBuffer=ir,_e.isArrayLike=nr,_e.isArrayLikeObject=or,_e.isBoolean=ar,_e.isBuffer=sr,_e.isDate=rr,_e.isElement=ur,_e.isEmpty=lr,_e.isEqual=dr,_e.isEqualWith=hr,_e.isError=pr,_e.isFinite=cr,_e.isFunction=_r,_e.isInteger=gr,_e.isLength=fr,_e.isMap=br,_e.isMatch=yr,_e.isMatchWith=Sr,_e.isNaN=Pr,_e.isNative=Mr,_e.isNil=Br,_e.isNull=Or,_e.isNumber=kr,_e.isObject=vr,_e.isObjectLike=mr,_e.isPlainObject=xr,_e.isRegExp=Cr,_e.isSafeInteger=wr,_e.isSet=Tr,_e.isString=Lr,_e.isSymbol=Nr,_e.isTypedArray=Ir,_e.isUndefined=jr,_e.isWeakMap=Ar,_e.isWeakSet=Er,_e.join=Jo,_e.kebabCase=Xu,_e.last=$o,_e.lastIndexOf=Ko,_e.lowerCase=Zu,_e.lowerFirst=Qu,_e.lt=Gr,_e.lte=qr,_e.max=$l,_e.maxBy=Kl,_e.mean=ed,_e.meanBy=td,_e.min=id,_e.minBy=nd,_e.stubArray=Rl,_e.stubFalse=Dl,_e.stubObject=Fl,_e.stubString=zl,_e.stubTrue=Vl,_e.multiply=od,_e.nth=ea,_e.noConflict=Tl,_e.noop=Ll,_e.now=Ss,_e.pad=Yu,_e.padEnd=Uu,_e.padStart=Hu,_e.parseInt=Ju,_e.random=qu,_e.reduce=ps,_e.reduceRight=cs,_e.repeat=$u,_e.replace=Ku,_e.result=Bu,_e.round=ad,_e.runInContext=e,_e.sample=gs,_e.size=ms,_e.snakeCase=el,_e.some=bs,_e.sortedIndex=la,_e.sortedIndexBy=da,_e.sortedIndexOf=ha,_e.sortedLastIndex=pa,_e.sortedLastIndexBy=ca,_e.sortedLastIndexOf=_a,_e.startCase=il,_e.startsWith=nl,_e.subtract=sd,_e.sum=ud,_e.sumBy=ld,_e.template=ol,_e.times=Xl,_e.toFinite=Rr,_e.toInteger=Dr,_e.toLength=Fr,_e.toLower=al,_e.toNumber=zr,_e.toSafeInteger=Xr,_e.toString=Zr,_e.toUpper=sl,_e.trim=rl,_e.trimEnd=ul,_e.trimStart=ll,_e.truncate=dl,_e.unescape=hl,_e.uniqueId=Ql,_e.upperCase=pl,_e.upperFirst=cl,_e.each=ns,_e.eachRight=os,_e.first=Xo,wl(_e,(rd={},Mt(_e,function(e,t){S.call(_e.prototype,t)||(rd[t]=e)}),rd),{chain:!1}),_e.VERSION=hd,Kh(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){_e[e].placeholder=_e}),Kh(["drop","take"],function(i,n){be.prototype[i]=function(e){e=e===dd?1:Z(Dr(e),0);var t=this.__filtered__&&!n?new be(this):this.clone();return t.__filtered__?t.__takeCount__=Q(e,t.__takeCount__):t.__views__.push({size:Q(e,yd),type:i+(t.__dir__<0?"Right":"")}),t},be.prototype[i+"Right"]=function(e){return this.reverse()[i](e).reverse()}}),Kh(["filter","map","takeWhile"],function(e,t){var i=t+1,n=1==i||3==i;be.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:En(e,3),type:i}),t.__filtered__=t.__filtered__||n,t}}),Kh(["head","last"],function(e,t){var i="take"+(t?"Right":"");be.prototype[e]=function(){return this[i](1).value()[0]}}),Kh(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");be.prototype[e]=function(){return this.__filtered__?new be(this):this[i](1)}}),be.prototype.compact=function(){return this.filter(Ml)},be.prototype.find=function(e){return this.filter(e).head()},be.prototype.findLast=function(e){return this.reverse().find(e)},be.prototype.invokeMap=pi(function(t,i){return"function"==typeof t?new be(this):this.map(function(e){return At(e,t,i)})}),be.prototype.reject=function(e){return this.filter(js(En(e)))},be.prototype.slice=function(e,t){e=Dr(e);var i=this;return i.__filtered__&&(0<e||t<0)?new be(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==dd&&(i=(t=Dr(t))<0?i.dropRight(-t):i.take(t-e)),i)},be.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},be.prototype.toArray=function(){return this.take(yd)},Mt(be.prototype,function(h,e){var p=/^(?:filter|find|map|reject)|While$/.test(e),c=/^(?:head|last)$/.test(e),_=_e[c?"take"+("last"==e?"Right":""):e],g=c||/^find/.test(e);_&&(_e.prototype[e]=function(){var e=this.__wrapped__,i=c?[1]:arguments,t=e instanceof be,n=i[0],o=t||tr(e),a=function(e){var t=_.apply(_e,sp([e],i));return c&&s?t[0]:t};o&&p&&"function"==typeof n&&1!=n.length&&(t=o=!1);var s=this.__chain__,r=!!this.__actions__.length,u=g&&!s,l=t&&!r;if(g||!o)return u&&l?h.apply(this,i):(d=this.thru(a),u?c?d.value()[0]:d.value():d);e=l?e:new be(this);var d=h.apply(e,i);return d.__actions__.push({func:Ra,args:[a],thisArg:dd}),new me(d,s)})}),Kh(["pop","push","shift","sort","splice","unshift"],function(e){var i=s[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);_e.prototype[e]=function(){var t=arguments;if(!o||this.__chain__)return this[n](function(e){return i.apply(tr(e)?e:[],t)});var e=this.value();return i.apply(tr(e)?e:[],t)}}),Mt(be.prototype,function(e,t){var i=_e[t];if(i){var n=i.name+"";S.call(ae,n)||(ae[n]=[]),ae[n].push({name:t,func:i})}}),ae[hn(dd,2).name]=[{name:"wrapper",func:dd}],be.prototype.clone=ye,be.prototype.reverse=Se,be.prototype.value=Pe,_e.prototype.at=Da,_e.prototype.chain=Fa,_e.prototype.commit=za,_e.prototype.next=Va,_e.prototype.plant=Za,_e.prototype.reverse=Qa,_e.prototype.toJSON=_e.prototype.valueOf=_e.prototype.value=Ya,_e.prototype.first=_e.prototype.head,I&&(_e.prototype[I]=Xa),_e}();zh._=Zp,(Ae=function(){return Zp}.call(Ee,Ge,Ee,je))===dd||(je.exports=Ae)}).call(this)}).call(this,Ge(34),Ge(35)(e))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleDragQA=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,g=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["DragQA"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),g.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=void 0;for(n=this._dragQAGroup.length,i=0;i<n;i++)t=this._dragQAGroup[i];for(n=this._dragContainerGroup.length,i=0;i<n;i++){t=this._dragContainerGroup[i];var o=this._parent.getInstanceMirror(t);t.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,g.default.supportPassive())}}},{key:"reset",value:function e(){this.isInited||this.init(),g.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=void 0;for(n=this._dragQAGroup.length,i=0;i<n;i++){(t=this._dragQAGroup[i]).cursor="pointer";var o=this._parent.getInstanceMirror(t),a=this.pickLink(t.parent,o);g.default.notNull(a)&&(a.visible=!1)}for(n=this._dragContainerGroup.length,i=0;i<n;i++){t=this._dragContainerGroup[i];var s=this._parent.getInstanceMirror(t);g.default.notNull(s.target.orgX)&&(s.target.x=s.target.orgX),g.default.notNull(s.target.orgY)&&(s.target.y=s.target.orgY);var r=this.pickAnsBtnLink(t,s,"showhide");if(g.default.notNull(r)){var u=this._parent.getInstanceMirror(r),l=s.target[u.args[0]];g.default.notNull(l)&&(l.visible=!1)}t.removeEventListener("pressmove",triggerDragContainerPressmove,g.default.supportPassive())}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"DragQA":n=this.getCustomTag(t),this._dragQAGroup.push(t),this._dragQAGroupMirror[n]=this.pickRelation(t.parent,i.args[0]),this._dragContainerGroup.push(this.pickLink(t.parent,i))}}}},{key:"getCustomTag",value:function e(t){return g.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"pickLink",value:function e(t,i){var n=t[i.args[0]+"_"+i.args[1]];return n||null}},{key:"pickAnsBtnLink",value:function e(t,i,n){var o=void 0,a=i.subset.length;for(o=0;o<a;o++){var s=t[i.subset[o]],r;if(this._parent.getInstanceMirror(s).command===n)return s}return null}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=void 0;for(this.triggerDragQAMousedownBind=this.triggerDragQAMousedownBind||this.triggerDragQAMousedown.bind(this),this.triggerSubAnsMousedownBind=this.triggerSubAnsMousedownBind||this.triggerSubAnsMousedown.bind(this),this.triggerDragContainerMousedownBind=this.triggerDragContainerMousedownBind||this.triggerDragContainerMousedown.bind(this),this.triggerDragContainerPressupBind=this.triggerDragContainerPressupBind||this.triggerDragContainerPressup.bind(this),this.triggerDragContainerPressmoveBind=this.triggerDragContainerPressmoveBind||this.triggerDragContainerPressmove.bind(this),a=this._dragQAGroup.length,o=0;o<a;o++)if(!(n=this._dragQAGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer";var s=this._parent.getInstanceMirror(n),r=this.pickLink(n.parent,s);g.default.notNull(r)&&(r.visible=!1),n.addEventListener(this._mouseTriggerBehavior,this.triggerDragQAMousedownBind)}for(a=this._dragContainerGroup.length,o=0;o<a;o++)if(!(n=this._dragContainerGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0;var u=this._parent.getInstanceMirror(n);u.target.orgX=u.target.x,u.target.orgY=u.target.y;var l=this.pickAnsBtnLink(n,u,"showhide");if(g.default.notNull(l)){l.cursor="pointer",l.addEventListener(this._mouseTriggerBehavior,this.triggerSubAnsMousedownBind);var d=this._parent.getInstanceMirror(l),h=u.target[d.args[0]];g.default.notNull(h)&&(h.visible=!1)}n.addEventListener("mousedown",this.triggerDragContainerMousedownBind),n.addEventListener("pressup",this.triggerDragContainerPressupBind)}}},{key:"triggerDragQAMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=this.getCustomTag(i),a=void 0,s=void 0,r=this._dragQAGroupMirror[o].length,u=!1;for(s=0;s<r;s++)if(this._dragQAGroupMirror[o][s].visible){a=this._dragQAGroupMirror[o][s],u=!0;break}for(s=0;s<r;s++){this._dragQAGroupMirror[o][s].visible=!1;var l=this._dragQAGroupMirror[o][s],d=this._parent.getInstanceMirror(l),h=this.pickAnsBtnLink(l,d,"showhide");if(g.default.notNull(h)){var p=this._parent.getInstanceMirror(h),c=d.target[p.args[0]];g.default.notNull(c)&&(c.visible=!1)}}var _=this.pickLink(i.parent,n);a===_?g.default.notNull(_)&&(_.visible=!u):g.default.notNull(_)&&(_.visible=!0),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSubAnsMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]];g.default.notNull(o)&&(o.visible=!o.visible),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY);i.fixX=i.x-n.x,i.fixY=i.y-n.y,i.startX=i.x+i.fixX,i.startY=i.y+i.fixY,i.addEventListener("pressmove",this.triggerDragContainerPressmoveBind,g.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+i.fixX,i.y=n.y+i.fixY,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressup",value:function e(t){var i;this._parent.setPressEventIsOn(!1),t.currentTarget.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,g.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._dragQAGroup=[],this._dragContainerGroup=[],this._dragQAGroupMirror={},this._seq=999}t.ModuleDragQA=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleEnCnTranslate=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,d=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["EnCnTrans"],l=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=this._encnTransGroup.length;for(i=0;i<n;i++)t=this._encnTransGroup[i],d.default.notNull(t.selfReset)&&t.selfReset(t)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"EnCnTrans":n=this.getCustomTag(t),this._encnTransGroup.push(t),this._enBtnGroup[n]=this.pickEnCnRelation(t,"showLangEnOn"),this._cnBtnGroup[n]=this.pickEnCnRelation(t,"showLangCnOn")}}}},{key:"getCustomTag",value:function e(t){return d.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickEnCnRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];if(r.command===i){"showLangEnOn"===i?t.enTag=r.args[0]:"showLangCnOn"===i&&(t.cnTag=r.args[0]);var l=this.pickRelation(t,r.args[0])||[];n=n.concat(l)}}return n}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0;this.selfResetBind=this.selfResetBind||this.selfReset.bind(this),this.triggerEnCnMousedownBind=this.triggerEnCnMousedownBind||this.triggerEnCnMousedown.bind(this),this.triggerEnCnSubMousedownBind=this.triggerEnCnSubMousedownBind||this.triggerEnCnSubMousedown.bind(this);var a=this._encnTransGroup.length;for(o=0;o<a;o++)if(!(n=this._encnTransGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.selfReset=this.selfResetBind,n.btnCnOn=n["showLangCnOn_"+n.cnTag],n.btnCnOff=n["showLangCnOff_"+n.cnTag],n.btnEnOn=n["showLangEnOn_"+n.enTag],n.btnEnOff=n["showLangEnOff_"+n.enTag],n.btnAllOn=n.showLangAllOn,n.btnAllOff=n.showLangAllOff,n.isBtnPass=n.btnCnOn&&n.btnCnOff&&n.btnEnOn&&n.btnEnOff&&n.btnAllOn&&n.btnAllOff,d.default.notNull(n.btnEnOn)&&(n.btnEnOn.cursor="pointer",n.btnEnOn.visible=!0,n.btnEnOn.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnEnOff)&&(n.btnEnOff.cursor="pointer",n.btnEnOff.visible=!1,n.btnEnOff.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnCnOn)&&(n.btnCnOn.cursor="pointer",n.btnCnOn.visible=!1,n.btnCnOn.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnCnOff)&&(n.btnCnOff.cursor="pointer",n.btnCnOff.visible=!0,n.btnCnOff.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnAllOn)&&(n.btnAllOn.cursor="pointer",n.btnAllOn.visible=!1,n.btnAllOn.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind)),d.default.notNull(n.btnAllOff)&&(n.btnAllOff.cursor="pointer",n.btnAllOff.visible=!0,n.btnAllOff.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnMousedownBind));var s=void 0,r=void 0,u=this.getCustomTag(n);r=this._enBtnGroup[u].length;var l=void 0;for(s=0;s<r;s++)(l=this._enBtnGroup[u][s]).cursor="pointer",l.encnTag="en",l.bigTag=u,l.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnSubMousedownBind);for(r=this._cnBtnGroup[u].length,s=0;s<r;s++)(l=this._cnBtnGroup[u][s]).cursor="pointer",l.encnTag="cn",l.bigTag=u,l.addEventListener(this._mouseTriggerBehavior,this.triggerEnCnSubMousedownBind);this.updateTransStatus(n)}}},{key:"selfReset",value:function e(t){d.default.notNull(t.btnEnOn)&&(t.btnEnOn.visible=!0),d.default.notNull(t.btnEnOff)&&(t.btnEnOff.visible=!1),d.default.notNull(t.btnCnOn)&&(t.btnCnOn.visible=!1),d.default.notNull(t.btnCnOff)&&(t.btnCnOff.visible=!0),d.default.notNull(t.btnAllOn)&&(t.btnAllOn.visible=!1),d.default.notNull(t.btnAllOff)&&(t.btnAllOff.visible=!0),this.updateTransStatus(t)}},{key:"updateTransStatus",value:function e(t){var i=void 0,n=void 0,o=this.getCustomTag(t);for(n=this._enBtnGroup[o].length,i=0;i<n;i++)t.btnEnOn.visible?this._enBtnGroup[o][i].gotoAndStop(0):this._enBtnGroup[o][i].gotoAndStop(1);for(n=this._cnBtnGroup[o].length,i=0;i<n;i++)t.btnCnOn.visible?this._cnBtnGroup[o][i].gotoAndStop(0):this._cnBtnGroup[o][i].gotoAndStop(1)}},{key:"triggerEnCnMousedown",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=this.getCustomTag(i),a=i.parent;if(d.default.trace(a.isBtnPass),!a.isBtnPass)return t.stopPropagation(),void t.stopImmediatePropagation();switch(i){case a.btnEnOn:a.btnEnOn.visible=!1,a.btnEnOff.visible=!0,a.btnAllOff.visible=!0,a.btnAllOn.visible=!1,a.btnEnOff.gotoAndStop(0);break;case a.btnEnOff:a.btnEnOn.visible=!0,a.btnEnOff.visible=!1,a.btnCnOn.visible?(a.btnAllOn.visible=!0,a.btnAllOff.visible=!1):(a.btnAllOn.visible=!1,a.btnAllOff.visible=!0),a.btnEnOn.gotoAndStop(0);break;case a.btnCnOn:a.btnCnOn.visible=!1,a.btnCnOff.visible=!0,a.btnAllOff.visible=!0,a.btnAllOn.visible=!1,a.btnCnOff.gotoAndStop(0);break;case a.btnCnOff:a.btnCnOn.visible=!0,a.btnCnOff.visible=!1,a.btnEnOn.visible?(a.btnAllOn.visible=!0,a.btnAllOff.visible=!1):(a.btnAllOn.visible=!1,a.btnAllOff.visible=!0),a.btnCnOn.gotoAndStop(0);break;case a.btnAllOn:a.btnAllOn.visible=!1,a.btnAllOff.visible=!0,a.btnEnOn.visible=!1,a.btnEnOff.visible=!0,a.btnCnOn.visible=!1,a.btnCnOff.visible=!0,a.btnAllOff.gotoAndStop(0);break;case a.btnAllOff:a.btnAllOn.visible=!0,a.btnAllOff.visible=!1,a.btnEnOn.visible=!0,a.btnEnOff.visible=!1,a.btnCnOn.visible=!0,a.btnCnOff.visible=!1,a.btnAllOn.gotoAndStop(0)}this.updateTransStatus(a),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerEnCnSubMousedown",value:function e(t){var i=t.currentTarget,n=i.bigTag,o=i.parent;if(!o.isBtnPass)return t.stopPropagation(),void t.stopImmediatePropagation();0===i.currentFrame?i.gotoAndStop(1):i.gotoAndStop(0);var a=void 0,s=void 0,r=!1;if("cn"===i.encnTag){if(o.btnCnOn.visible){for(r=!1,s=this._cnBtnGroup[n].length,a=0;a<s;a++)if(0===this._cnBtnGroup[n][a].currentFrame){r=!0;break}}else if(o.btnCnOff.visible)for(r=!0,s=this._cnBtnGroup[n].length,a=0;a<s;a++)if(0!==this._cnBtnGroup[n][a].currentFrame){r=!1;break}r?(o.btnCnOn.visible=!0,o.btnCnOff.visible=!1,o.btnEnOn.visible&&(o.btnAllOn.visible=!0,o.btnAllOff.visible=!1)):(o.btnCnOn.visible=!1,o.btnCnOff.visible=!0,o.btnAllOn.visible&&(o.btnAllOn.visible=!1,o.btnAllOff.visible=!0))}else if("en"===i.encnTag){if(o.btnEnOn.visible){for(r=!1,s=this._enBtnGroup[n].length,a=0;a<s;a++)if(0===this._enBtnGroup[n][a].currentFrame){r=!0;break}}else if(o.btnEnOff.visible)for(r=!0,s=this._enBtnGroup[n].length,a=0;a<s;a++)if(0!==this._enBtnGroup[n][a].currentFrame){r=!1;break}r?(o.btnEnOn.visible=!0,o.btnEnOff.visible=!1,o.btnCnOn.visible&&(o.btnAllOn.visible=!0,o.btnAllOff.visible=!1)):(o.btnEnOn.visible=!1,o.btnEnOff.visible=!0,o.btnAllOn.visible&&(o.btnAllOn.visible=!1,o.btnAllOff.visible=!0))}t.stopPropagation(),t.stopImmediatePropagation()}}]),h);function h(e){r(this,h),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._encnTransGroup=[],this._enBtnGroup={},this._cnBtnGroup={},this._seq=999}t.ModuleEnCnTranslate=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleAnimateAnsRightWrong=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,h=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["AnimateAnsRight","AnimateAnsWrong"],l={AnimateAnsRight:"none",AnimateAnsWrong:"none"},d=!1,p=(n(c,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0;t=this._ansRightGroup.length;for(var o=0;o<t;o++)0!==(i=this._ansRightGroup[o]).currentFrame&&i.gotoAndStop(i.totalFrames-1);t=this._ansWrongGroup.length;for(var a=0;a<t;a++)0!==(i=this._ansWrongGroup[a]).currentFrame&&i.gotoAndStop(0);h.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),h.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0,n=void 0;t=this._ansRightGroup.length;for(var o=0;o<t;o++)(i=this._ansRightGroup[o]).gotoAndStop(0);t=this._ansWrongGroup.length;for(var a=0;a<t;a++)(i=this._ansWrongGroup[a]).gotoAndStop(0);h.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),h.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"AnimateAnsRight":this._ansRightGroup.push(t);break;case"AnimateAnsWrong":this._ansWrongGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this);var n=void 0;n=this._ansRightGroup.length;for(var o=void 0,a=0;a<n;a++)(o=this._ansRightGroup[a])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),h.default.notNull(o.EffectBase)&&h.default.applyMultiply(o.EffectBase));n=this._ansWrongGroup.length;for(var s=0;s<n;s++)(o=this._ansWrongGroup[s])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),h.default.notNull(o.EffectBase)&&h.default.applyMultiply(o.EffectBase))}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=void 0;if("AnimateAnsRight"===n.command){if(o=n.args[0],0!==i.currentFrame)return i.gotoAndStop(0),t.stopPropagation(),void t.stopImmediatePropagation()}else"AnimateAnsWrong"===n.command&&(o=n.args[0]);var a=i.nominalBounds,s={x:i.x+a.x*i.scale,y:i.y+a.y*i.scale},r=i.parent.localToGlobal(s.x,s.y),u=this._parent.exportRoot.globalToLocal(r.x,r.y),l=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:o,path:l,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:u.x,locY:u.y,excludeTags:null,command:n.command,target:i};var d=this.checkCommandMode(n.command);h.default.isIOS(!1)&&"none"===d?h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):h.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(h.default.isNull(this._parent.soundObj)||h.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)h.default.notNull(i)&&i.stop();else switch(n){case"fileload":h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var o=this.checkCommandMode(this._parent.soundObj.command);"none"!==o&&this._parent.openSoundPlayBar(o,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){if(h.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var o=this._parent.lib.properties.fps,a=Math.round(i/1e3*o),s=this._parent.soundObj.target;a>s.totalFrames-1&&(a=s.totalFrames-1),h.default.notNull(s)&&s.gotoAndStop(a)}}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.getInstanceMirror(i);"right"===this._parent.soundObj.id?i.gotoAndStop(i.totalFrames-1):"wrong"===this._parent.soundObj.id&&i.gotoAndStop(0),this.stop();var o=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===o||"normal-close"===o||"ex-normal-close"===o||"none"===o?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,h.default.isIOS(!1)&&"none"===o?h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):h.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}}]),c);function c(e){r(this,c),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._ansRightGroup=[],this._ansWrongGroup=[],this._prevTime=-1,this._seq=999}t.ModuleAnimateAnsRightWrong=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleSpotlight=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,f=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["Spotlight"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),f.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1)}},{key:"reset",value:function e(){this.isInited||this.init(),f.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),f.default.notNull(this._lockSpotlight)&&(this._lockSpotlight._rectSpot.x=this._lockSpotlight._rectSpot.orgX,this._lockSpotlight._rectSpot.y=this._lockSpotlight._rectSpot.orgY,this._lockSpotlight._maskRef.updateCache(),this._lockSpotlight.updateCache(),this._lockSpotlight._useStageMouseMove?this._parent.stage.removeEventListener("stagemousemove",this.triggerSpotlightPressmoveBind):(this._lockSpotlight.removeEventListener("mousedown",this.triggerSpotlightPressmoveBind),this._lockSpotlight.removeEventListener("pressmove",this.triggerSpotlightPressmoveBind,f.default.supportPassive()),this._lockSpotlight.removeEventListener("pressup",this.triggerSpotlightPressupBind)),this._lockSpotlight._useAnimateMC&&this._lockSpotlight.removeEventListener("tick",this.triggerSpotlightUpdateBind),this._lockSpotlight.visible=this._lockSpotlight._maskLayer.visible=!1),this._lockSpotlight=null}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,t._pageUI=!0,this._seq++,i.command){case"Spotlight":n=this.getCustomTag(t),this._spotlightGroup.push(t),this._spotlightMirror[n]=this.pickRelation(t,i.args[0])}}}},{key:"getCustomTag",value:function e(t){return f.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=void 0,o=this._parent.getInstanceMirror(t.parent),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&(n=u)}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0;this.triggerSpotlightMousedownBind=this.triggerSpotlightMousedownBind||this.triggerSpotlightMousedown.bind(this),this.triggerSpotlightPressmoveBind=this.triggerSpotlightPressmoveBind||this.triggerSpotlightPressmove.bind(this),this.triggerSpotlightPressupBind=this.triggerSpotlightPressupBind||this.triggerSpotlightPressup.bind(this),this.triggerSpotlightUpdateBind=this.triggerSpotlightUpdateBind||this.triggerSpotlightUpdate.bind(this);for(var o=this._spotlightGroup.length,a=0;a<o;a++)if(!(n=this._spotlightGroup[a])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.cursor="pointer",f.default.notNull(n.EffectBase)&&f.default.applyMultiply(n.EffectBase),n.addEventListener(this._mouseTriggerBehavior,this.triggerSpotlightMousedownBind);var s=this.getCustomTag(n),r=this._spotlightMirror[s];r.visible=!1;var u=r.parent,l=this._parent.lib.properties.width,d=this._parent.lib.properties.height;r.Spot.orgX=r.Spot.x,r.Spot.orgY=r.Spot.y;var h=new this._parent.createjs.Shape;h.graphics.beginFill(r._maskColor).drawRect(0,0,l,d),h.visible=!1,r._maskLayer=h,u.addChildAt(h,u.getChildIndex(r)),h.cache(0,0,l,d);var p=new this._parent.createjs.Shape;p.graphics.beginFill(r._bgColor).drawRect(0,0,l,d),r._baseLayer=p,r.addChildAt(p,0);var c=new this._parent.createjs.Container,_=new this._parent.createjs.Shape;_.graphics.beginFill("DeepSkyBlue").drawRect(0,0,l,d);var g=r.Spot;g.compositeOperation="destination-in",c.addChild(_),c.addChild(g),c.cache(0,0,l,d),r._maskRef=c,r._rectBase=_,r._rectSpot=g,r.filters=[new this._parent.createjs.AlphaMaskFilter(c.cacheCanvas)],r.cache(0,0,l,d)}}},{key:"triggerSpotlightMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=this.getCustomTag(i);this._lockSpotlight=this._spotlightMirror[o],this._lockSpotlight._rectSpot.x=this._lockSpotlight._rectSpot.orgX,this._lockSpotlight._rectSpot.y=this._lockSpotlight._rectSpot.orgY,this._lockSpotlight._maskRef.updateCache(),this._lockSpotlight.updateCache(),this._lockSpotlight.visible?(this._parent.setPressEventIsOn(!1),this._lockSpotlight._useStageMouseMove?this._parent.stage.removeEventListener("stagemousemove",this.triggerSpotlightPressmoveBind):(this._lockSpotlight.removeEventListener("mousedown",this.triggerSpotlightPressmoveBind),this._lockSpotlight.removeEventListener("pressmove",this.triggerSpotlightPressmoveBind,f.default.supportPassive()),this._lockSpotlight.removeEventListener("pressup",this.triggerSpotlightPressupBind)),this._lockSpotlight._useAnimateMC&&this._lockSpotlight.removeEventListener("tick",this.triggerSpotlightUpdateBind)):(this._parent.setPressEventIsOn(!0),this._lockSpotlight._useStageMouseMove?this._parent.stage.addEventListener("stagemousemove",this.triggerSpotlightPressmoveBind):(this._lockSpotlight.addEventListener("mousedown",this.triggerSpotlightPressmoveBind),this._lockSpotlight.addEventListener("pressmove",this.triggerSpotlightPressmoveBind,f.default.supportPassive()),this._lockSpotlight.addEventListener("pressup",this.triggerSpotlightPressupBind)),this._lockSpotlight._useAnimateMC&&this._lockSpotlight.addEventListener("tick",this.triggerSpotlightUpdateBind)),this._lockSpotlight.visible=this._lockSpotlight._maskLayer.visible=!this._lockSpotlight.visible,this._lockSpotlight.visible||(this._lockSpotlight=null),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSpotlightPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=this._lockSpotlight.globalToLocal(t.stageX,t.stageY);this._lockSpotlight._rectSpot.x=i.x,this._lockSpotlight._rectSpot.y=i.y,this._lockSpotlight._maskRef.updateCache(),this._lockSpotlight._useAnimateMC||this._lockSpotlight.updateCache(),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSpotlightPressup",value:function e(t){this._parent.setPressEventIsOn(!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerSpotlightUpdate",value:function e(t){this._lockSpotlight.updateCache(),t.stopPropagation(),t.stopImmediatePropagation()}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._spotlightGroup=[],this._spotlightMirror={},this._lockSpotlight,this._seq=999}t.ModuleSpotlight=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleLetterStroke=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,v=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["LetterStrokeBar"],l={LetterStrokeBar:"none"},d=!1,h=!0,p=.5,c=.7,_=1,g=1.4,f=(n(m,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModulesByModule(),this.setupByModule(t))}},{key:"stop",value:function e(t){var i=0<arguments.length&&void 0!==t&&t;if(this.isInited||this.init(),i)return v.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),void(v.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc));v.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),v.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc),v.default.notNull(this._parent.videoChannel)&&(this._parent.videoChannel.paused||(this._parent.videoChannel.position=0,this._parent.videoChannel.paused=!0,this._parent.pageParam[4].status="idle"));for(var n=void 0,o=void 0,a=this._letterStrokeBarGroup.length,s=0;s<a;s++)n=this._letterStrokeBarGroup[s],this.refreshButton(n)}},{key:"reset",value:function e(){this.isInited||this.init(),this.stop(),v.default.notNull(this._parent.videoChannel)&&(v.default.notNull(this._parent.videoChannel.videoBitmap)&&(v.default.notNull(this._parent.videoChannel.videoBitmap.parent)&&this._parent.videoChannel.videoBitmap.parent.removeChild(this._parent.videoChannel.videoBitmap),this._parent.videoChannel.videoBitmap=null,this._parent.videoChannel.videoBuffer=null),this._parent.videoChannel.removeEventListener("complete",this._parent.videoObj.completeFunc)),v.default.notNull(this._parent.videoObj)&&(v.default.notNull(this._parent.videoObj.videoBase)&&(this._parent.videoObj.videoBase.visible=!1,this._parent.videoObj.videoBase._abortZeroFrame&&(this._parent.videoObj.videoBase.visible=!1),this._parent.videoObj.videoBase.bitmapCache&&(this._parent.videoObj.videoBase.uncache(),this._parent.stage.update())),this._parent.createjs.Ticker.removeEventListener("tick",this._parent.videoObj.watchFunc));for(var t=void 0,i=void 0,n=!this._parent.stage.contains(this._parent.exportRoot),o=this._letterStrokeBarGroup.length,a=0;a<o;a++)t=this._letterStrokeBarGroup[a],v.default.notNull(t.defaultPickTarget)&&this.setupVideoParms(t,t.defaultPickTarget,"letterStrokeOrderSrc","playNormal","idle");var s=this;this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),n||(this._timeout=setTimeout(function(){s._parent.stage.contains(s._parent.exportRoot)||s.stop()},100))}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"initModulesByModule",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTargetByModule(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTargetByModule(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"LetterStrokeBar":this._letterStrokeBarGroup.push(t),t.firstClick=!0,n=this.getCustomTag(t),this._letterStrokeBarExtendGroupMirror[n]=this.pickRelation(t.parent,"extendProps"),this._letterStrokeBarExtendGroupMirror[n]=this._letterStrokeBarExtendGroupMirror[n].sort(function(e,t){return e.letterIndexSeq>t.letterIndexSeq?1:-1}),this._letterStrokeBarMarqueeGroupMirror[n]=this.pickRelation(t.parent,"letterMarquee"),this._letterStrokeBarMarqueeGroupMirror[n]=this._letterStrokeBarMarqueeGroupMirror[n].sort(function(e,t){return e.letterIndexSeq>t.letterIndexSeq?1:-1})}}}},{key:"pickTargetByModule",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command))switch(i.command){case"LetterStrokeBar":n=this.getCustomTag(t),this._letterStrokeBarExtendGroupMirror[n]=this.pickRelation(t.parent,"extendProps"),this._letterStrokeBarExtendGroupMirror[n]=this._letterStrokeBarExtendGroupMirror[n].sort(function(e,t){return e.letterIndexSeq>t.letterIndexSeq?1:-1}),this._letterStrokeBarMarqueeGroupMirror[n]=this.pickRelation(t.parent,"letterMarquee"),this._letterStrokeBarMarqueeGroupMirror[n]=this._letterStrokeBarMarqueeGroupMirror[n].sort(function(e,t){return e.letterIndexSeq>t.letterIndexSeq?1:-1})}}},{key:"getCustomTag",value:function e(t){return v.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&(u.letterIndexSeq=Number(r.args[0])-1,n.push(u))}return n}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerVideoWatchBind=this.triggerVideoWatchBind||this.triggerVideoWatch.bind(this),this.triggerVideoCompleteBind=this.triggerVideoCompleteBind||this.triggerVideoComplete.bind(this),this.checkVideoPlayStatusBind=this.checkVideoPlayStatusBind||this.checkVideoPlayStatus.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this),this.triggerNavigatorClickActionBind=this.triggerNavigatorClickActionBind||this.callBackNavigatorClickAction.bind(this),this.triggerNavigatorClearActionBind=this.triggerNavigatorClearActionBind||this.callBackNavigatorClearAction.bind(this),this.triggerNavigatorCompleteActionBind=this.triggerNavigatorCompleteActionBind||this.callBackNavigatorCompleteAction.bind(this),this.triggerVideoFunctionMousedownBind=this.triggerVideoFunctionMousedownBind||this.triggerVideoFunctionMousedown.bind(this);for(var n=void 0,o=void 0,a=this._letterStrokeBarGroup.length,s=0;s<a;s++)if(!(n=this._letterStrokeBarGroup[s])._isModuleInited){n._replacePath=i,n._isModuleInited=!0,n.videoPaneRef=n.parent.videoPane,n.extendPropsRef=n.parent.extendProps;for(var r=this._parent.getInstanceMirror(n.parent),u=r.subset.length,l=0;l<u;l++)if(-1!==r.subset[l].indexOf("WordsNav")){n.lettersNavControl=n.wordsNavControl=n.parent[r.subset[l]],(n.parent[r.subset[l]].lettersModuleControl=n).lettersNavControl.callSpecClickFunc=this.triggerNavigatorClickActionBind,n.lettersNavControl.callSpecClearFunc=this.triggerNavigatorClearActionBind,n.lettersNavControl.callSpecCompleteFunc=this.triggerNavigatorCompleteActionBind;break}o=this.getCustomTag(n);for(var d=this._letterStrokeBarMarqueeGroupMirror[o].length,h=0;h<d;h++){var p=this._letterStrokeBarMarqueeGroupMirror[o][h];p._isModuleInited||(p._replacePath=i,p._isModuleInited=!0)}(((((((n.playSlow.letterStrokeBar=n).playNormal.letterStrokeBar=n).playFast.letterStrokeBar=n).extendPropsRef.playUppercase.letterStrokeBar=n).extendPropsRef.playLowercase.letterStrokeBar=n).extendPropsRef.playLetterName.letterStrokeBar=n).extendPropsRef.playLetterPronounce.letterStrokeBar=n).playSlow.gotoAndStop(0),n.playSlow.cursor="pointer",n.playSlow.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.playSlow.EffectBase)&&v.default.applyMultiply(n.playSlow.EffectBase),n.playNormal.gotoAndStop(0),n.playNormal.cursor="pointer",n.playNormal.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.playNormal.EffectBase)&&v.default.applyMultiply(n.playNormal.EffectBase),n.playFast.gotoAndStop(0),n.playFast.cursor="pointer",n.playFast.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.playFast.EffectBase)&&v.default.applyMultiply(n.playFast.EffectBase),n.extendPropsRef.playUppercase.gotoAndStop(0),n.extendPropsRef.playUppercase.cursor="pointer",n.extendPropsRef.playUppercase.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.extendPropsRef.playUppercase.EffectBase)&&v.default.applyMultiply(n.extendPropsRef.playUppercase.EffectBase),n.extendPropsRef.playLowercase.gotoAndStop(0),n.extendPropsRef.playLowercase.cursor="pointer",n.extendPropsRef.playLowercase.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.extendPropsRef.playLowercase.EffectBase)&&v.default.applyMultiply(n.extendPropsRef.playLowercase.EffectBase),n.extendPropsRef.playLetterName.gotoAndStop(0),n.extendPropsRef.playLetterName.cursor="pointer",n.extendPropsRef.playLetterName.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.extendPropsRef.playLetterName.EffectBase)&&v.default.applyMultiply(n.extendPropsRef.playLetterName.EffectBase),n.extendPropsRef.playLetterPronounce.gotoAndStop(0),n.extendPropsRef.playLetterPronounce.cursor="pointer",n.extendPropsRef.playLetterPronounce.addEventListener(this._mouseTriggerBehavior,this.triggerVideoFunctionMousedownBind),v.default.notNull(n.extendPropsRef.playLetterPronounce.EffectBase)&&v.default.applyMultiply(n.extendPropsRef.playLetterPronounce.EffectBase)}}},{key:"setupByModule",value:function e(t){for(var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=this._letterStrokeBarGroup.length,s=0;s<a;s++){n=this._letterStrokeBarGroup[s],o=this.getCustomTag(n);for(var r=this._letterStrokeBarMarqueeGroupMirror[o].length,u=0;u<r;u++){var l=this._letterStrokeBarMarqueeGroupMirror[o][u];l._isModuleInited||(l._replacePath=i,l._isModuleInited=!0)}}}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerVideoFunctionMousedown",value:function e(t){var i=t.currentTarget,n=i.letterStrokeBar,o=void 0,a=void 0,s=n.playSlow,r=n.playNormal,u=n.playFast,l=n.extendPropsRef.playUppercase,d=n.extendPropsRef.playLowercase,h=n.extendPropsRef.playLetterName,p=n.extendPropsRef.playLetterPronounce,c=void 0;switch(this._parent.pageParam[4].lastTouch){case"playSlow":c=s;break;case"playNormal":c=r;break;case"playFast":c=u;break;case"playUppercase":c=l;break;case"playLowercase":c=d;break;case"playLetterName":c=h;break;case"playLetterPronounce":c=p}switch(i.name){case"playSlow":case"playNormal":case"playFast":o="letterStrokeOrderSrc";break;case"playUppercase":o="letterUppercaseSrc";break;case"playLowercase":o="letterLowercaseSrc";break;case"playLetterName":o="letterNameSrc";break;case"playLetterPronounce":o="letterPronounceSrc"}var _=i.name;0===i.currentFrame||3===i.currentFrame?a="play":1===i.currentFrame?a="pause":2===i.currentFrame&&(a="play"),this.setupVideoParms(n,n.currentLetterMarquee,o,_,a),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"callBackNavigatorClickAction",value:function e(t){var i,n=t.self.lettersModuleControl;v.default.isNull(n._callAction)&&(n._callAction="click")}},{key:"callBackNavigatorClearAction",value:function e(t){var i,n=t.self.lettersModuleControl;v.default.isNull(n._callAction)&&(n._callAction="clear")}},{key:"callBackNavigatorCompleteAction",value:function e(t){var i,n=t.self.lettersModuleControl,o=t.pickTarget,a=this._parent.getInstanceMirror(o),s=n.parent[a.args[0]+"_"+a.args[1]];this.setupVideoParms(n,s,"letterStrokeOrderSrc","playNormal","idle"),v.default.isNull(n.defaultPickTarget)&&(n.defaultPickTarget=s),n.firstClick&&v.default.notNull(this._parent.pageParam[5])&&!0===this._parent.pageParam[5]||this.playLetterSound(n,s),n._callAction=null,this._parent.pageParam[5]=!0,n.firstClick=!1}},{key:"setupVideoParms",value:function e(t,i,n,o,a){t.currentLetterMarquee=i,this._parent.pageParam[3]=i.name;var s="";v.default.notNull(this._parent.pageParam)&&v.default.notNull(this._parent.pageParam[4])&&v.default.notNull(this._parent.pageParam[4].lastTouch)&&(s=this._parent.pageParam[4].lastTouch),this._parent.pageParam[4]={srcType:n,lastTouch:o,status:a};var r=!(s===this._parent.pageParam[4].lastTouch);"idle"===a?this.refreshShowLetter(t,i,!0,r):this.refreshShowLetter(t,i,!1,r),this.refreshButton(t)}},{key:"refreshButton",value:function e(t){t.playSlow.gotoAndStop(0),t.playNormal.gotoAndStop(0),t.playFast.gotoAndStop(0),t.extendPropsRef.playUppercase.gotoAndStop(0),t.extendPropsRef.playLowercase.gotoAndStop(0),t.extendPropsRef.playLetterName.gotoAndStop(0),t.extendPropsRef.playLetterPronounce.gotoAndStop(0);var i=t.playSlow,n=t.playNormal,o=t.playFast,a=t.extendPropsRef.playUppercase,s=t.extendPropsRef.playLowercase,r=t.extendPropsRef.playLetterName,u=t.extendPropsRef.playLetterPronounce,l=void 0;switch(this._parent.pageParam[4].lastTouch){case"playSlow":l=i;break;case"playNormal":l=n;break;case"playFast":l=o;break;case"playUppercase":l=a;break;case"playLowercase":l=s;break;case"playLetterName":l=r;break;case"playLetterPronounce":l=u}switch(this._parent.pageParam[4].status){case"idle":l.gotoAndStop(3);break;case"play":l.gotoAndStop(1);break;case"pause":l.gotoAndStop(2);break;case"stop":l.gotoAndStop(0)}}},{key:"refreshShowLetter",value:function e(t,i,n,o){var a=!(2<arguments.length&&void 0!==n)||n,s=!(3<arguments.length&&void 0!==o)||o;if(t.currentLetterMarquee=i,v.default.notNull(this._parent.videoObj)&&v.default.notNull(this._parent.videoChannel)){var r=this._parent.pageParam[4].srcType,u=this._parent.pageParam[4].status;if(this._parent.videoObj.id===i[r]){switch(this._parent.pageParam[4].lastTouch){case"playSlow":this._parent.videoChannel.playbackRate=.7;break;case"playNormal":this._parent.videoChannel.playbackRate=1;break;case"playFast":this._parent.videoChannel.playbackRate=1.4;break;default:this._parent.videoChannel.playbackRate=1}if(a)this._parent.stop(["VideoChannel"],!0),this._parent.videoChannel.position=0,this._parent.videoChannel.paused=!0;else switch(s&&(this._parent.videoChannel.paused=!0,this._parent.videoChannel.position=0),this._parent.videoChannel.video.muted=!1,u){case"play":this._parent.videoChannel.paused=!1;break;case"pause":this._parent.videoChannel.paused=!0;break;case"resume":this._parent.videoChannel.paused=!1}return}}this._parent.stop(null,!0);var l=this._parent.pageParam[4].srcType;null!==this._parent.assetVideoPath&&""!==this._parent.assetVideoPath||(this._parent.assetVideoPath=this._parent.assetSoundPath),null!==this._parent.pageVideoPath&&""!==this._parent.pageVideoPath||(this._parent.pageVideoPath=this._parent.pageSoundPath);var d=this._parent.getInstanceMirror(i),h=i.nominalBounds,p={x:i.x+h.x*i.scale,y:i.y+h.y*i.scale},c=i.parent.localToGlobal(p.x,p.y),_=this._parent.exportRoot.globalToLocal(c.x,c.y),g=this._parent.assetVideoPath?this._parent.assetVideoPath:this._parent.pageVideoPath?this._parent.pageVideoPath+i._replacePath+"videos/":i._replacePath+"./videos/",f=navigator.platform.match(/iPhone|iPod|iPad|Mac/)?15:0;this._parent.videoObj={id:i[l],path:g,loop:0,offset:f,volume:this._parent.volume,callback:this.checkVideoPlayStatusBind,watchFunc:this.triggerVideoWatchBind,completeFunc:this.triggerVideoCompleteBind,autoPlay:!0,locX:_.x,locY:_.y,excludeTags:null,command:d.command,target:i,videoBase:t.videoPaneRef,letterStrokeBase:t,idle:a},v.default.playWebVideo(this._parent.createjs,this._parent.videoObj.path,this._parent.videoObj.id,this._parent.videoObj.loop,this._parent.videoObj.offset,this._parent.videoObj.volume,this._parent.videoObj.callback)}},{key:"checkVideoPlayStatus",value:function e(t,i,n){if(v.default.isNull(this._parent.videoObj)||v.default.notNull(this._parent.videoObj)&&this._parent.videoObj.id!==t)v.default.notNull(i)&&i.stop();else switch(n){case"fileload":break;case"fileerror":this.stop(),this._parent.videoObj=null;break;case"playSuccess":switch(this._prevTime=-1,this._parent.videoChannel=i,this._parent.videoChannel.video.muted=!0,this._parent.videoChannel.paused=!this._parent.videoObj.autoPlay,this._parent.pageParam[4].lastTouch){case"playSlow":this._parent.videoChannel.playbackRate=.7;break;case"playNormal":this._parent.videoChannel.playbackRate=1;break;case"playFast":this._parent.videoChannel.playbackRate=1.4;break;default:this._parent.videoChannel.playbackRate=1}this._parent.createjs.Ticker.addEventListener("tick",this._parent.videoObj.watchFunc),this._parent.videoChannel.addEventListener("complete",this._parent.videoObj.completeFunc)}}},{key:"triggerVideoWatch",value:function e(t){if(v.default.notNull(this._parent.videoChannel)&&v.default.notNull(this._parent.videoObj))if(v.default.isNull(this._parent.videoChannel.videoBitmap))if(this._parent.stage.isWebGL){var i=function e(){o._video.currentTime!==u||o._video.currentTime===u&&3===l?(o._video.currentTime!==u?l=0:l<Number.MAX_VALUE&&l++,u=o._video.currentTime,a.image._invalid=!0,a.parent&&(!n._parent.videoObj.videoBase.visible&&0<=o._video.currentTime&&(n._parent.videoObj.videoBase.visible=!0,o._video.muted=!1),a.parent.bitmapCache&&a.parent.updateCache())):l<Number.MAX_VALUE&&l++,a.parent&&(n._parent.videoObj.idle&&.2<o._video.currentTime?(n._parent.videoObj.idle=!1,n._parent.videoChannel.position=0,n._parent.videoChannel.paused=!0):n._parent.videoObj.idle||(n._parent.videoChannel.video.muted=!1),requestAnimationFrame(e))};this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),v.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&v.default.notNull(this._parent.videoObj.videoBase)&&this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap);var n=this,o=this._parent.videoChannel.videoBuffer,a=this._parent.videoChannel.videoBitmap,s=this._parent.videoObj.offset,r=this._parent.videoChannel,u=-1,l=0;requestAnimationFrame(i)}else this._parent.videoChannel.videoBuffer=new this._parent.createjs.VideoBuffer(this._parent.videoChannel.video),this._parent.videoChannel.videoBitmap=new this._parent.createjs.Bitmap(this._parent.videoChannel.videoBuffer),v.default.isNull(this._parent.videoChannel.videoBitmap.parent)&&(v.default.notNull(this._parent.videoObj.videoBase)&&this._parent.videoObj.videoBase.addChild(this._parent.videoChannel.videoBitmap),this._parent.videoObj.videoBase.visible=!0);else!this._parent.stage.isWebGL&&this._parent.videoChannel&&(this._parent.videoChannel.paused&&this._parent.videoChannel.position===this._parent.videoObj.offset?v.default.notNull(this._parent.videoChannel.videoBuffer)&&(this._parent.videoChannel.videoBuffer._lastTime=-1,this._parent.videoObj.idle&&.2<this._parent.videoChannel.videoBuffer._video.currentTime?(this._parent.videoObj.idle=!1,this._parent.videoChannel.position=0,this._parent.videoChannel.paused=!0):this._parent.videoObj.idle||(this._parent.videoChannel.video.muted=!1)):this._parent.videoChannel.paused||v.default.notNull(this._parent.videoChannel.videoBuffer)&&(this._parent.videoObj.idle?(this._parent.videoObj.idle=!1,this._parent.videoChannel.position=0,this._parent.videoChannel.paused=!0):this._parent.videoChannel.video.muted=!1))}},{key:"triggerVideoComplete",value:function e(t){var i=this._parent.videoObj.videoBase;this._parent.pageParam[4].status="idle",this.refreshButton(this._parent.videoObj.letterStrokeBase)}},{key:"playLetterSound",value:function e(t,i,n,o){var a=2<arguments.length&&void 0!==n&&n,s=!(3<arguments.length&&void 0!==o)||o,r=this._parent.getInstanceMirror(i),u=i._replacePath,l=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+u+"sounds/":u+"./sounds/";this._parent.soundObj={id:i.letterSoundSrc,path:l,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:0,locY:0,excludeTags:null,command:r.command,target:i,isContinue:a,letterStrokeBase:t},this._parent.iosMode?v.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):v.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(v.default.isNull(this._parent.soundObj)||v.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)v.default.notNull(i)&&i.stop();else switch(n){case"fileload":v.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc)}}},{key:"triggerSoundWatch",value:function e(t){}},{key:"triggerSoundComplete",value:function e(t){var i=!!this._parent.soundObj.isContinue&&this._parent.soundObj.isContinue,n=this._parent.soundObj.letterStrokeBase;this.stop(!0),this._parent.clearSoundChannel()}}]),m);function m(e){r(this,m),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._letterStrokeBarGroup=[],this._letterStrokeBarMarqueeGroupMirror={},this._letterStrokeBarExtendGroupMirror={},this._actMVGroup=[],this._actVideoGroup=[],this._abortActMVGroup=[],this._onceActVideoGroup=[],this._prevTime=-1,this._seq=999,this._timeout}t.ModuleLetterStroke=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathBookPage=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,O=i(15).ModuleOnAndOff,B=i(16).ModuleCalculator,k=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(42).ModuleMathGameEchoControl,w=i(43).ModuleMathGameDragNumberCard,T=i(44).ModuleMathGameSplitAndMath,L=i(45).ModuleTwoStepAnimate,N=(h(j,I=p),n(j,[{key:"init",value:function e(){a(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.stop(n,o,!0)}},{key:"stop",value:function e(t,i,n){var o=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i,s=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(o=this.soundObj.excludeTags),r.default.isNull(o)&&(o=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(o=o.concat(this.videoObj.excludeTags)),-1===o.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!s&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!s&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleGoOutCommand&&-1===o.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===o.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===o.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===o.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===o.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===o.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===o.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===o.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===o.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===o.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===o.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===o.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===o.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleGameEchoControl&&-1===o.indexOf("ModuleGameEchoControl")&&-1===this._resetExclude.indexOf("ModuleGameEchoControl")&&this._moduleGameEchoControl.stop(),this._moduleGameDragNumberCard&&-1===o.indexOf("ModuleGameDragNumberCard")&&-1===this._resetExclude.indexOf("ModuleGameDragNumberCard")&&this._moduleGameDragNumberCard.stop(),this._moduleGameSplitAndMatch&&-1===o.indexOf("ModuleGameSpritAndMatch")&&-1===this._resetExclude.indexOf("ModuleGameSpritAndMatch")&&this._moduleGameSplitAndMatch.stop(),this._moduleTwoStepAnimate&&-1===o.indexOf("ModuleTwoStepAnimate")&&-1===this._resetExclude.indexOf("ModuleTwoStepAnimate")&&this._moduleTwoStepAnimate.stop(),this._moduleAnsZone&&-1===o.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===o.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===o.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleGameEchoControl&&-1===n.indexOf("ModuleGameEchoControl")&&-1===this._resetExclude.indexOf("ModuleGameEchoControl")&&this._moduleGameEchoControl.reset(),this._moduleGameDragNumberCard&&-1===n.indexOf("ModuleGameDragNumberCard")&&-1===this._resetExclude.indexOf("ModuleGameDragNumberCard")&&this._moduleGameDragNumberCard.reset(),this._moduleGameSplitAndMatch&&-1===n.indexOf("ModuleGameSpritAndMatch")&&-1===this._resetExclude.indexOf("ModuleGameSpritAndMatch")&&this._moduleGameSplitAndMatch.reset(),this._moduleTwoStepAnimate&&-1===n.indexOf("ModuleTwoStepAnimate")&&-1===this._resetExclude.indexOf("ModuleTwoStepAnimate")&&this._moduleTwoStepAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),o&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleGameDragNumberCard&&-1===n.indexOf("ModuleGameDragNumberCard")&&-1===this._resetExclude.indexOf("ModuleGameDragNumberCard")&&this._moduleGameDragNumberCard.reset(),this._moduleGameSplitAndMatch&&-1===n.indexOf("ModuleGameSpritAndMatch")&&-1===this._resetExclude.indexOf("ModuleGameSpritAndMatch")&&this._moduleGameSplitAndMatch.reset(),this._moduleTwoStepAnimate&&-1===n.indexOf("ModuleTwoStepAnimate")&&-1===this._resetExclude.indexOf("ModuleTwoStepAnimate")&&this._moduleTwoStepAnimate.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),o&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(a(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var o=1<arguments.length&&void 0!==i?i:.2,a=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,o,a)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(a(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new O(this).init(),this._moduleCalculator=new B(this).init(),this._modulePureAnimate=new k(this).init(),this._moduleZoom=new x(this).init(),this._moduleGameEchoControl=new C(this).init(),this._moduleGameDragNumberCard=new w(this).init(),this._moduleGameSplitAndMatch=new T(this).init(),this._moduleTwoStepAnimate=new L(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new O(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new B(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new k(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleZoom)?this._moduleZoom=new x(this).init(t):this._moduleZoom.reinit(t),r.default.isNull(this._moduleGameEchoControl)?this._moduleGameEchoControl=new C(this).init(t):this._moduleGameEchoControl.reinit(t),r.default.isNull(this._moduleGameDragNumberCard)?this._moduleGameDragNumberCard=new w(this).init(t):this._moduleGameDragNumberCard.reinit(t),r.default.isNull(this._moduleGameSplitAndMatch)?this._moduleGameSplitAndMatch=new T(this).init(t):this._moduleGameSplitAndMatch.reinit(t),r.default.isNull(this._moduleTwoStepAnimate)?this._moduleTwoStepAnimate=new L(this).init(t):this._moduleTwoStepAnimate.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),j),I;function j(e,t,i,n){l(this,j);var o=d(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,e,t,i,n));return(o._this=o)._resetExclude=[],o}t.MathBookPage=N},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleMathGameEchoControl=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,p=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["MathGameEchoAnimate","MathGameEchoSound"],l={MathGameEchoAnimate:"none",MathGameEchoSound:"none"},d=!1,h=(n(c,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.reset()}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0;t=this._echoAnimateGroup.length;for(var i=void 0,n=0;n<t;n++){i=this._echoAnimateGroup[n];var o=this._parent.getInstanceMirror(i),a=o.parent[o.args[0]];p.default.notNull(a)&&(a.gotoAndStop(0),a.visible=!1)}t=this._echoSoundGroup.length;for(var s=0;s<t;s++)i=this._echoSoundGroup[s];p.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),p.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"MathGameEchoAnimate":this._echoAnimateGroup.push(t);break;case"MathGameEchoSound":this._echoSoundGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerMousedownBind=this.triggerMousedownBind||this.triggerMousedown.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this);var n=void 0;n=this._echoAnimateGroup.length;for(var o=void 0,a=0;a<n;a++)if(!(o=this._echoAnimateGroup[a])._isModuleInited){o._isModuleInited=!0,o._replacePath=i,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind);var s=this._parent.getInstanceMirror(o),r=s.parent[s.args[0]];p.default.notNull(r)&&(r.gotoAndStop(0),r.visible=!1),p.default.notNull(o.EffectBase)&&p.default.applyMultiply(o.EffectBase)}n=this._echoSoundGroup.length;for(var u=0;u<n;u++)(o=this._echoSoundGroup[u])._isModuleInited||(o._replacePath=i,o._isModuleInited=!0,o.cursor="pointer",o.addEventListener(this._mouseTriggerBehavior,this.triggerMousedownBind),p.default.notNull(o.EffectBase)&&p.default.applyMultiply(o.EffectBase))}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=void 0,a=null;"MathGameEchoAnimate"===n.command?(o=n.args[1],a=n.parent[n.args[0]],p.default.notNull(a)&&(a.gotoAndStop(0),a.visible=!0)):"MathGameEchoSound"===n.command&&(o=n.args[0]);var s=i.nominalBounds,r={x:i.x+s.x*i.scale,y:i.y+s.y*i.scale},u=i.parent.localToGlobal(r.x,r.y),l=this._parent.exportRoot.globalToLocal(u.x,u.y),d=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+i._replacePath+"sounds/":i._replacePath+"./sounds/";this._parent.soundObj={id:o,path:d,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:l.x,locY:l.y,excludeTags:null,command:n.command,target:i,target2:a};var h=this.checkCommandMode(n.command);p.default.isIOS(!1)&&"none"===h?p.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):p.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(p.default.isNull(this._parent.soundObj)||p.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)p.default.notNull(i)&&i.stop();else switch(n){case"fileload":p.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var o=this.checkCommandMode(this._parent.soundObj.command);"none"!==o&&this._parent.openSoundPlayBar(o,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){if(p.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var o=this._parent.lib.properties.fps,a=Math.round(i/1e3*o),s=this._parent.soundObj.target,r=this._parent.soundObj.target2;p.default.notNull(this._parent.soundObj.target2)&&(a>r.totalFrames-1&&(a=r.totalFrames-1),p.default.notNull(r)&&r.gotoAndStop(a))}}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.soundObj.target2,o=this._parent.getInstanceMirror(i);p.default.notNull(n)&&(n.gotoAndStop(0),n.visible=!1),this.stop();var a=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===a||"normal-close"===a||"ex-normal-close"===a||"none"===a?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,p.default.isIOS(!1)&&"none"===a?p.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):p.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}}]),c);function c(e){r(this,c),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._echoAnimateGroup=[],this._echoSoundGroup=[],this._prevTime=-1,this._seq=999}t.ModuleMathGameEchoControl=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleMathGameDragNumberCard=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,l=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["MathGameDragNumberCard"],d={MathGameDragNumberCard:"none"},h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),l.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);for(var t=this._dragNumberCardGroup.length,i=void 0,n=0;n<t;n++){i=this._dragNumberCardGroup[n];for(var o=this._parent.getInstanceMirror(i),a=o.subset.length,s=void 0,r=0;r<a;r++){var u;s=i[o.subset[r]],"drag"===this._parent.getInstanceMirror(s).command&&s.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,l.default.supportPassive())}}l.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),l.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),l.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);for(var t=this._dragNumberCardGroup.length,i=void 0,n=0;n<t;n++){i=this._dragNumberCardGroup[n];for(var o=this._parent.getInstanceMirror(i),a=o.subset.length,s=void 0,r=0;r<a;r++){var u;s=i[o.subset[r]],"drag"===this._parent.getInstanceMirror(s).command&&(s.x=s.orgX,s.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,l.default.supportPassive()))}}l.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),l.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"MathGameDragNumberCard":this._dragNumberCardGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerResetMousedownBind=this.triggerResetMousedownBind||this.triggerResetMousedown.bind(this),this.triggerDragContainerMousedownBind=this.triggerDragContainerMousedownBind||this.triggerDragContainerMousedown.bind(this),this.triggerDragContainerPressupBind=this.triggerDragContainerPressupBind||this.triggerDragContainerPressup.bind(this),this.triggerDragContainerPressmoveBind=this.triggerDragContainerPressmoveBind||this.triggerDragContainerPressmove.bind(this);for(var n=this._dragNumberCardGroup.length,o=void 0,a=0;a<n;a++)if(!(o=this._dragNumberCardGroup[a])._isModuleInited){o._replacePath=i,o._isModuleInited=!0;for(var s=this._parent.getInstanceMirror(o),r=s.subset.length,u=void 0,l=0;l<r;l++){var d;if(u=o[s.subset[l]],"drag"===this._parent.getInstanceMirror(u).command){var h=this._parent.getInstanceMirror(u);u.cursor="pointer",u.orgX=u.x,u.minX=Number(h.args[0]),u.maxX=Number(h.args[1]),(o.drag=u).addEventListener("mousedown",this.triggerDragContainerMousedownBind),u.addEventListener("pressup",this.triggerDragContainerPressupBind)}}o.reset.cursor="pointer",o.reset.addEventListener("mousedown",this.triggerResetMousedownBind)}}},{key:"checkCommandMode",value:function e(t){var i;return d[t]}},{key:"triggerResetMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.parent;o.drag.x=o.drag.orgX,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY);i.fixX=i.x-n.x,i.fixY=i.y-n.y,i.startX=i.x+i.fixX,i.startY=i.y+i.fixY,i.addEventListener("pressmove",this.triggerDragContainerPressmoveBind,l.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY),o=n.x+i.fixX;o>=i.minX&&o<=i.maxX&&(i.x=n.x+i.fixX),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressup",value:function e(t){var i;this._parent.setPressEventIsOn(!1),t.currentTarget.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,l.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}}]),p);function p(e){r(this,p),this._parent=e,this._dragNumberCardGroup=[],this._prevTime=-1,this._seq=999}t.ModuleMathGameDragNumberCard=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleMathGameSplitAndMath=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,b=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["MathGameSplitAndMatch"],l={MathGameSplitAndMatch:"none"},d=(n(h,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),b.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1)}},{key:"reset",value:function e(){this.isInited||this.init(),b.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);for(var t=this._splitAndMatchGroup.length,i=void 0,n=0;n<t;n++){(i=this._splitAndMatchGroup[n]).mode="random",i.questionBaseIndex=0;var o=this._parent.getInstanceMirror(i),a=void 0;if(a=i.numberSelect,b.default.notNull(a)){for(var s=this._parent.getInstanceMirror(a),r=s.subset.length,u=0;u<r;u++){var l=s.target[s.subset[u]],d=this._parent.getInstanceMirror(l);"zone"===d.command?l.visible=!1:"Calculator"===d.command?l.visible=!1:"num"===d.command&&(l.text="")}var h=a.num;b.default.notNull(h)&&(h.text="")}a=i.clearCan,b.default.notNull(a),a=i.randBtn,b.default.notNull(a),a=i.freeBtn,b.default.notNull(a),a=i.clearBtn,b.default.notNull(a)&&(a.visible=!1),a=i.freeTip,b.default.notNull(a)&&(a.visible=!1),a=i.questionBase,b.default.notNull(a)&&0===i.questionBaseIndex&&(a.visible=!1);var p=void 0;p=o.subset.length;for(var c=0;c<p;c++){var _;if(a=i[o.subset[c]],"infinity"===this._parent.getInstanceMirror(a).command){var g=this._parent.getInstanceMirror(a);a.x=a.orgX,a.y=a.orgY,a.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive())}}p=i.infinityList.length;for(var f=0;f<p;f++)a=i.infinityList[f],i.removeChild(a),a.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),a.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),a.removeEventListener("pressup",this.triggerDragContainerPressupBind);i.infinityList.length=0,this.openDefault(i)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"MathGameSplitAndMatch":this._splitAndMatchGroup.push(t)}}}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";this.triggerCreateMousedownBind=this.triggerCreateMousedownBind||this.triggerCreateMousedown.bind(this),this.triggerFuncMousedownBind=this.triggerFuncMousedownBind||this.triggerFuncMousedown.bind(this),this.triggerDragContainerMousedownBind=this.triggerDragContainerMousedownBind||this.triggerDragContainerMousedown.bind(this),this.triggerDragContainerPressupBind=this.triggerDragContainerPressupBind||this.triggerDragContainerPressup.bind(this),this.triggerDragBasePressupBind=this.triggerDragBasePressupBind||this.triggerDragBasePressup.bind(this),this.triggerDragContainerPressmoveBind=this.triggerDragContainerPressmoveBind||this.triggerDragContainerPressmove.bind(this),this.calcCallUpdateFuncBind=this.calcCallUpdateFuncBind||this.calcCallUpdateFunc.bind(this);for(var n=this._splitAndMatchGroup.length,o=void 0,a=0;a<n;a++)if(!(o=this._splitAndMatchGroup[a])._isModuleInited){o._replacePath=i,o._isModuleInited=!0,o.questionBaseMin=1,o.questionBaseMax=1,o.infinityList=[],o.mode="random",o.questionBaseIndex=0;var s=this._parent.getInstanceMirror(o),r=void 0;if(r=o.numberSelect,b.default.notNull(r)){for(var u=this._parent.getInstanceMirror(r),l=u.subset.length,d=0;d<l;d++){var h=u.target[u.subset[d]],p=this._parent.getInstanceMirror(h);"zone"===p.command?(h.cursor="pointer",h.addEventListener("mousedown",this.triggerFuncMousedownBind),h.visible=!1):"Calculator"===p.command?(h.callUpdateFunc=this.calcCallUpdateFuncBind,(r.calc=h).visible=!1):"num"===p.command&&(h.textBaseline=this._parent.textBaseline,h.text="9","alphabetic"===this._parent.textBaseline&&(h.y+=h.lineHeight*this._parent.textAlphabeticFixYScale),h.cache(h.getBounds().x,h.getBounds().y,h.getBounds().width,h.getBounds().height,2),h.text="",h.updateCache())}var c=r.num;b.default.notNull(c)&&(c.textBaseline=this._parent.textBaseline,c.font="bold 26px Arial",c.text="9","alphabetic"===this._parent.textBaseline&&(c.y+=c.lineHeight*this._parent.textAlphabeticFixYScale),c.cache(c.getBounds().x,c.getBounds().y,c.getBounds().width,c.getBounds().height,2),c.text="",c.updateCache())}r=o.clearCan,b.default.notNull(r)&&(r.cursor="pointer",r.addEventListener("mousedown",this.triggerFuncMousedownBind)),r=o.randBtn,b.default.notNull(r)&&(r.cursor="pointer",r.addEventListener("mousedown",this.triggerFuncMousedownBind)),r=o.freeBtn,b.default.notNull(r)&&(r.cursor="pointer",r.addEventListener("mousedown",this.triggerFuncMousedownBind)),r=o.clearBtn,b.default.notNull(r)&&(r.cursor="pointer",r.visible=!1,r.addEventListener("mousedown",this.triggerFuncMousedownBind)),r=o.freeTip,b.default.notNull(r)&&(r.visible=!1),r=o.questionBase,b.default.notNull(r)&&(o.questionBaseMax=r.totalFrames,0===o.questionBaseIndex&&(r.visible=!1));var _=void 0;_=s.subset.length;for(var g=0;g<_;g++){var f;if(r=o[s.subset[g]],"infinity"===this._parent.getInstanceMirror(r).command){var v=this._parent.getInstanceMirror(r);r.cursor="pointer",r.orgX=r.x,r.orgY=r.y,r.addEventListener("mousedown",this.triggerCreateMousedownBind),r.addEventListener("pressup",this.triggerDragBasePressupBind)}}_=o.infinityList.length;for(var m=0;m<_;m++)r=o.infinityList[m],o.removeChild(r),r.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),r.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),r.removeEventListener("pressup",this.triggerDragContainerPressupBind);o.infinityList.length=0,this.openDefault(o)}}},{key:"calcCallUpdateFunc",value:function e(t){var i=t.parent,n=t.parent.parent;b.default.notNull(i.num)&&(""!==i.num.text&&"+"!==i.num.text&&"-"!==i.num.text&&"x"!==i.num.text&&"÷"!==i.num.text&&"."!==i.num.text&&">"!==i.num.text&&"<"!==i.num.text&&"="!==i.num.text?n.questionBaseIndex=Number(i.num.text):n.questionBaseIndex=0),this.refreshQuestionBase(n)}},{key:"refreshQuestionBase",value:function e(t){var i=t.questionBase;b.default.notNull(i)&&(0!==t.questionBaseIndex?(i.gotoAndStop(t.questionBaseIndex-1),i.visible=!0):(i.gotoAndStop(0),i.visible=!1))}},{key:"clearInfinityList",value:function e(t){if(b.default.notNull(t.infinityList)){for(var i=t.infinityList.length,n=0;n<i;n++){var o=t.infinityList[n];t.removeChild(o),o.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),o.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),o.removeEventListener("pressup",this.triggerDragContainerPressupBind)}t.infinityList.length=0}}},{key:"openDefault",value:function e(t){if(this.clearInfinityList(t),"random"===t.mode){t.questionBaseIndex=this.randomInt(t.questionBaseMin,t.questionBaseMax,t.questionBaseIndex);var i=void 0;if(i=t.numberSelect,b.default.notNull(i)){for(var n=this._parent.getInstanceMirror(i),o=n.subset.length,a=0;a<o;a++){var s=n.target[n.subset[a]],r=this._parent.getInstanceMirror(s);"zone"===r.command?s.visible=!1:"Calculator"===r.command?s.visible=!1:"num"===r.command&&(s.text="")}0!==t.questionBaseIndex?i.num.text=t.questionBaseIndex:i.num.text="",i.num.updateCache()}i=t.questionBase,b.default.notNull(i)&&(i.gotoAndStop(t.questionBaseIndex-1),i.visible=!0),i=t.freeBtn,b.default.notNull(i)&&(i.visible=!0),i=t.clearBtn,b.default.notNull(i)&&(i.visible=!1),i=t.freeTip,b.default.notNull(i)&&(i.visible=!1)}else if("free"===t.mode){var u=void(t.questionBaseIndex=0);if(u=t.numberSelect,b.default.notNull(u)){for(var l=this._parent.getInstanceMirror(u),d=l.subset.length,h=0;h<d;h++){var p=l.target[l.subset[h]],c=this._parent.getInstanceMirror(p);"zone"===c.command?p.visible=!0:"Calculator"===c.command?p.visible=!1:"num"===c.command&&(p.text="")}b.default.trace(u.num.text),0!==t.questionBaseIndex?u.num.text=t.questionBaseIndex:u.num.text="",u.num.updateCache(),b.default.trace(u.num.text)}u=t.questionBase,b.default.notNull(u)&&(0!==t.questionBaseIndex?(u.gotoAndStop(t.questionBaseIndex-1),u.visible=!0):(u.gotoAndStop(0),u.visible=!1)),u=t.freeBtn,b.default.notNull(u)&&(u.visible=!1),u=t.clearBtn,b.default.notNull(u)&&(u.visible=!0),u=t.freeTip,b.default.notNull(u)&&(u.visible=!0)}}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"triggerCreateMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.parent,a=new this._parent.lib[n.args[0]];a.setTransform(i.x,i.y,i.scaleX,i.scaleY),a.cursor="pointer";var s=i.parent.globalToLocal(t.stageX,t.stageY);i.fixX=i.x-s.x,i.fixY=i.y-s.y,i.startX=i.x+i.fixX,i.startY=i.y+i.fixY,(o.waitChangePick=a).addEventListener("mousedown",this.triggerDragContainerMousedownBind),a.addEventListener("pressup",this.triggerDragContainerPressupBind),o.addChildAt(a,1),i.addEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerFuncMousedown",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.parent;switch(n.command){case"randBtn":o.mode="random",this.openDefault(o);break;case"freeBtn":o.mode="free",this.openDefault(o);break;case"clearBtn":this.openDefault(o);break;case"zone":o.calc.visible=!o.calc.visible;break;case"clearCan":this.clearInfinityList(o)}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY);i.fixX=i.x-n.x,i.fixY=i.y-n.y,i.startX=i.x+i.fixX,i.startY=i.y+i.fixY,i.addEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressmove",value:function e(t){if(this._parent.setPressEventIsOn(!0),b.default.isNull(t.stageX))return t.stopPropagation(),void t.stopImmediatePropagation();var i=t.currentTarget;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+i.fixX,i.y=n.y+i.fixY,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragContainerPressup",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=i.parent;if(i.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),b.default.collisionTest(i,n.canHint)&&(i.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),i.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),i.removeEventListener("pressup",this.triggerDragContainerPressupBind),n.removeChild(i),b.default.notNull(n.infinityList))){var o=n.infinityList.indexOf(i);b.default.trace(n.infinityList,o),-1!==o&&n.infinityList.splice(o,1)}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerDragBasePressup",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=i.parent;i.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),b.default.notNull(n.waitChangePick)?(n.waitChangePick.x=i.x,n.waitChangePick.y=i.y,i.x=i.orgX,i.y=i.orgY,n.swapChildren(i,n.waitChangePick),b.default.collisionTest(n.waitChangePick,n.canHint)?(n.waitChangePick.removeEventListener("mousedown",this.triggerDragContainerMousedownBind),n.waitChangePick.removeEventListener("pressmove",this.triggerDragContainerPressmoveBind,b.default.supportPassive()),n.waitChangePick.removeEventListener("pressup",this.triggerDragContainerPressupBind),n.removeChild(n.waitChangePick)):n.infinityList.push(n.waitChangePick),n.waitChangePick=null):(i.x=i.orgX,i.y=i.orgY),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"collisionTest",value:function e(t,i){var n=t.getBounds().width*t.scale,o=t.getBounds().height*t.scale,a=i.getBounds().width*i.scale,s=i.getBounds().height*i.scale,r=t.x+t.getBounds().x*t.scale-n/2,u=t.x+t.getBounds().x*t.scale+n/2,l=t.y+t.getBounds().y*t.scale-o/2,d=t.y+t.getBounds().y*t.scale+o/2,h=i.x+i.getBounds().x*i.scale-a/2,p=i.x+i.getBounds().x*i.scale+a/2,c=i.y+i.getBounds().y*i.scale-s/2,_=i.y+i.getBounds().y*i.scale+o/2,g=void 0,f=void 0;return f=l<c&&c<d||l<_&&_<d,(g=r<h&&h<u||r<p&&p<u)&&f}},{key:"randomInt",value:function e(t,i,n){for(var o=void 0;o=Math.round(Math.random()*(i-t))+t,b.default.notNull(n)&&o===n;);return o}}]),h);function h(e){r(this,h),this._parent=e,this._splitAndMatchGroup=[],this._prevTime=-1,this._seq=999}t.ModuleMathGameSplitAndMath=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleTwoStepAnimate=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,N=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["TwoStepAnimateOn","TwoStepAnimateOff"],l=(n(d,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init();var t=void 0,i=void 0;t=this._animateOnGroup.length;for(var n=0;n<t;n++){var o=void 0;i=this._animateOnGroup[n];for(var a=this._parent.getInstanceMirror(i),s=i.subControls.length,r=0;r<s;r++){o=a.target[i.subControls[r]];var u=this._parent.getInstanceMirror(o),l=u.parent[u.args[0]];N.default.notNull(l)&&N.default.notNull(l.timeout)&&clearTimeout(l.timeout)}}t=this._animateOffGroup.length;for(var d=0;d<t;d++){var h=void 0;i=this._animateOffGroup[d];for(var p=this._parent.getInstanceMirror(i),c=i.subControls.length,_=0;_<c;_++){h=p.target[i.subControls[_]];var g=this._parent.getInstanceMirror(h),f=g.parent[g.args[0]];N.default.notNull(f)&&N.default.notNull(f.timeout)&&clearTimeout(f.timeout)}}}},{key:"reset",value:function e(){this.isInited||this.init();var t=void 0,i=void 0;t=this._animateOnGroup.length;for(var n=0;n<t;n++){var o=void 0;(i=this._animateOnGroup[n]).isShow=!0;for(var a=this._parent.getInstanceMirror(i),s=i.subControls.length,r=0;r<s;r++){o=a.target[i.subControls[r]],i.mouseEnabled=!0;var u=this._parent.getInstanceMirror(o),l=u.parent[u.args[0]];N.default.notNull(l)&&N.default.notNull(l.timeout)&&clearTimeout(l.timeout)}this.refreshTwoStepAnimate(i)}t=this._animateOffGroup.length;for(var d=0;d<t;d++){var h=void 0;(i=this._animateOffGroup[d]).isShow=!1;for(var p=this._parent.getInstanceMirror(i),c=i.subControls.length,_=0;_<c;_++){h=p.target[i.subControls[_]],i.mouseEnabled=!0;var g=this._parent.getInstanceMirror(h),f=g.parent[g.args[0]];N.default.notNull(f)&&N.default.notNull(f.timeout)&&clearTimeout(f.timeout)}this.refreshTwoStepAnimate(i)}}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"TwoStepAnimateOn":this._animateOnGroup.push(t);break;case"TwoStepAnimateOff":this._animateOffGroup.push(t)}}}},{key:"getCustomTag",value:function e(t){return N.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"pickRelationControl",value:function e(t,i,n){for(var o=[],a=this._parent.getInstanceMirror(t),s=a.subset.length,r=0;r<s;r++){var u=this._parent.getInstanceMirror(a.target[a.subset[r]]);if(u.command===i)for(var l=u.subset.length,d=0;d<l;d++){var h=u.target[u.subset[d]],p;this._parent.getInstanceMirror(h).command===n&&o.push(h)}}return o}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0,a=void 0;this.triggerTwoStepFuncMousedownBind=this.triggerTwoStepFuncMousedownBind||this.triggerTwoStepFuncMousedown.bind(this),n=this._animateOnGroup.length;for(var s=0;s<n;s++){var r=void 0,u=void 0;if(!(o=this._animateOnGroup[s])._isModuleInited){o._replacePath=i,o._isModuleInited=!0;var l=this._parent.getInstanceMirror(o);o.isShow=!0,o.subControls=[],o.defaultControl=null,u=l.subset.length;for(var d=0;d<u;d++)"btnOn"!==l.subset[d]&&0===l.subset[d].indexOf("btn")&&(o.subControls.push(l.subset[d]),-1!==l.subset[d].indexOf("One")&&(o.defaultControl=l.subset[d]));r=o.btnOn,N.default.notNull(r)&&(r.isSubControl=!1,r.cursor="pointer",r.mouseChildren=!1,r.addEventListener(this._mouseTriggerBehavior,this.triggerTwoStepFuncMousedownBind),N.default.notNull(r.EffectBase)&&N.default.applyMultiply(r.EffectBase)),u=o.subControls.length;for(var h=0;h<u;h++){(r=l.target[o.subControls[h]]).isSubControl=!0,r.cursor="pointer",r.mouseChildren=!1,r.addEventListener(this._mouseTriggerBehavior,this.triggerTwoStepFuncMousedownBind),N.default.notNull(r.EffectBase)&&N.default.applyMultiply(r.EffectBase),r.gotoAndStop(0);var p=this._parent.getInstanceMirror(r),c=p.parent[p.args[0]];if(N.default.notNull(c)){c.gotoAndStop(0),c.visible=!1,c._this=this,c.animateRunningBind=c.animateRunningBind||this.animateRunning.bind(c),c.startStep=0,c.endStep=0;var _=r.labels.length;r.animateRange={};for(var g=0;g<_;g++){r.animateRange[r.labels[g].label]={};for(var f=c.labels.length,v=-1,m=0;m<f;m++)if(c.labels[m].label===r.labels[g].label){v=m;break}-1!==v&&(r.animateRange[r.labels[g].label].begin=c.labels[v].position,N.default.notNull(c.labels[v+1])?r.animateRange[r.labels[g].label].end=c.labels[v+1].position-1:r.animateRange[r.labels[g].label].end=c.totalFrames-1)}}}this.refreshTwoStepAnimate(o)}}n=this._animateOffGroup.length;for(var b=0;b<n;b++){var y=void 0,S=void 0;if(!(o=this._animateOffGroup[b])._isModuleInited){o._replacePath=i,o._isModuleInited=!0;var P=this._parent.getInstanceMirror(o);o.isShow=!1,o.subControls=[],o.defaultControl=null,S=P.subset.length;for(var M=0;M<S;M++)"btnOn"!==P.subset[M]&&0===P.subset[M].indexOf("btn")&&(o.subControls.push(P.subset[M]),-1!==P.subset[M].indexOf("One")&&(o.defaultControl=P.subset[M]));y=o.btnOn,N.default.notNull(y)&&(y.isSubControl=!1,y.cursor="pointer",y.mouseChildren=!1,y.addEventListener(this._mouseTriggerBehavior,this.triggerTwoStepFuncMousedownBind),N.default.notNull(y.EffectBase)&&N.default.applyMultiply(y.EffectBase)),S=o.subControls.length;for(var O=0;O<S;O++){(y=P.target[o.subControls[O]]).isSubControl=!0,y.cursor="pointer",y.mouseChildren=!1,y.addEventListener(this._mouseTriggerBehavior,this.triggerTwoStepFuncMousedownBind),N.default.notNull(y.EffectBase)&&N.default.applyMultiply(y.EffectBase),y.gotoAndStop(0);var B=this._parent.getInstanceMirror(y),k=B.parent[B.args[0]];if(N.default.notNull(k)){k.gotoAndStop(0),k.visible=!1,k._this=this,k.animateRunningBind=k.animateRunningBind||this.animateRunning.bind(k),k.startStep=0,k.endStep=0;var x=y.labels.length;y.animateRange={};for(var C=0;C<x;C++){y.animateRange[y.labels[C].label]={};for(var w=k.labels.length,T=-1,L=0;L<w;L++)if(k.labels[L].label===y.labels[C].label){T=L;break}-1!==T&&(y.animateRange[y.labels[C].label].begin=k.labels[T].position,N.default.notNull(k.labels[T+1])?y.animateRange[y.labels[C].label].end=k.labels[T+1].position-1:y.animateRange[y.labels[C].label].end=k.totalFrames-1)}}}this.refreshTwoStepAnimate(o)}}}},{key:"refreshTwoStepAnimate",value:function e(t){var i=void 0,n=this._parent.getInstanceMirror(t);if(t.isShow){if(i=t.btnOn,N.default.notNull(i)){i.gotoAndStop(1);for(var o=t.subControls.length,a=0;a<o;a++){(i=n.target[t.subControls[a]]).visible=!0,i.mouseEnabled=!0,i.gotoAndStop(0);var s=this._parent.getInstanceMirror(i),r=s.parent[s.args[0]];N.default.notNull(r)&&(N.default.notNull(r.timeout)&&clearTimeout(r.timeout),r.startStep=0,r.endStep=0,r.gotoAndStop(0),s.name===t.defaultControl?r.visible=!0:r.visible=!1)}}}else if(i=t.btnOn,N.default.notNull(i)){i.gotoAndStop(0);for(var u=t.subControls.length,l=0;l<u;l++){(i=n.target[t.subControls[l]]).visible=!1,i.gotoAndStop(0);var d=this._parent.getInstanceMirror(i),h=d.parent[d.args[0]];N.default.notNull(h)&&(N.default.notNull(h.timeout)&&clearTimeout(h.timeout),h.startStep=0,h.endStep=0,h.gotoAndStop(0),h.visible=!1)}}}},{key:"pickTargetLabel",value:function e(t,i){var n="";if(N.default.notNull(t.labels))for(var o=t.labels.length,a=0;a<o;a++)if(t.labels[a].position===i){n=t.labels[a].label;break}return n}},{key:"triggerTwoStepFuncMousedown",value:function e(t){this.stop();var i=t.currentTarget,n=i.parent,o=this._parent.getInstanceMirror(i),a=this._parent.getInstanceMirror(n);if(i.isSubControl){for(var s=n.subControls.length,r=void 0,u=!1,l=0;l<s;l++){var d=o.parent[n.subControls[l]],h=this._parent.getInstanceMirror(d);r=o.parent[h.args[0]],o.parent[o.args[0]]===r?(r.visible||(u=!0),r.visible=!0):r.visible=!1}if(u)for(var p=0;p<s;p++){var c=o.parent[n.subControls[p]];c.mouseEnabled=!0,c.gotoAndStop(0)}if(r=o.parent[o.args[0]],N.default.notNull(r)){var _=this.pickTargetLabel(i,i.currentFrame);if(""!==_){i.gotoAndStop(i.currentFrame+1),r.startStep=i.animateRange[_].begin,r.endStep=i.animateRange[_].end,r.gotoAndStop(r.startStep),r._target=i;var g=Math.floor(1e3/this._parent.lib.properties.fps);r.startStep<r.endStep?(i.mouseEnabled=!1,r.timeout=setTimeout(r.animateRunningBind,g)):(r.endStep=r.startStep,i.gotoAndStop(i.currentFrame+1))}}}else if(n.isShow)this.refreshTwoStepAnimate(n);else{n.isShow=!0;for(var f=this._pickList.length,v=0;v<f;v++){var m=this._pickList[v],b;this._parent.getInstanceMirror(m).args[0]===a.args[0]&&m!==n&&(m.isShow=!1,this.refreshTwoStepAnimate(m))}this.refreshTwoStepAnimate(n)}}},{key:"animateRunning",value:function e(){var t=this._target,i=this._this._parent.getInstanceMirror(t),n=i.parent[i.args[0]];if(!(n.currentFrame<n.endStep))return clearTimeout(n.timeout),t.gotoAndStop(t.currentFrame+1),void(t.mouseEnabled=!0);n.gotoAndStop(n.currentFrame+1);var o=Math.floor(1e3/this._this._parent.lib.properties.fps);n.timeout=setTimeout(n.animateRunningBind,o)}}]),d);function d(e){r(this,d),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._animateOnGroup=[],this._animateOffGroup=[],this._seq=999}t.ModuleTwoStepAnimate=l},,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(60).WaterEduPage,o=i(19).EnBookPage,a=i(61).QuizBookPage,s=i(2).CommonBookPage,r=i(41).MathBookPage,u=i(20).ChBookPage,l=i(19).EnBookPage,d=i(63).GameBookPage;e.exports={WaterEdu:n,QuizBook:a,JoyEdu:o,CommonBook:s,MathBook:r,ChineseBook:u,EnglishBook:l,GameBook:d}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaterEduPage=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s,r=l(i(0)),u=i(2);function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=(p(g,_=u.CommonBookPage),n(g,[{key:"init",value:function e(){a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam))}}]),g),_;function g(e,t,i,n){d(this,g);var o=h(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,e,t,i,n));return(o._this=o)._resetExclude=[],o}t.WaterEduPage=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuizBookPage=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,O=i(15).ModuleOnAndOff,B=i(16).ModuleCalculator,k=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(62).ModuleNXQuiz,w=(h(L,T=p),n(L,[{key:"init",value:function e(){a(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.stop(n,o,!0)}},{key:"stop",value:function e(t,i,n){var o=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i,s=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(o=this.soundObj.excludeTags),r.default.isNull(o)&&(o=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(o=o.concat(this.videoObj.excludeTags)),-1===o.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!s&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!s&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleGoOutCommand&&-1===o.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===o.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===o.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===o.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===o.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===o.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===o.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===o.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===o.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===o.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===o.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===o.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===o.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleNXQuiz&&-1===o.indexOf("ModuleNXQuiz")&&-1===this._resetExclude.indexOf("ModuleNXQuiz")&&this._moduleNXQuiz.stop(),this._moduleAnsZone&&-1===o.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===o.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===o.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleNXQuiz&&-1===n.indexOf("ModuleNXQuiz")&&-1===this._resetExclude.indexOf("ModuleNXQuiz")&&this._moduleNXQuiz.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),o&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleNXQuiz&&-1===n.indexOf("ModuleNXQuiz")&&-1===this._resetExclude.indexOf("ModuleNXQuiz")&&this._moduleNXQuiz.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),o&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(a(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var o=1<arguments.length&&void 0!==i?i:.2,a=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,o,a)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(a(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new O(this).init(),this._moduleCalculator=new B(this).init(),this._modulePureAnimate=new k(this).init(),this._moduleZoom=new x(this).init(),this._moduleNXQuiz=new C(this).init())}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new O(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new B(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new k(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleNXQuiz)?this._moduleNXQuiz=new C(this).init(t):this._moduleNXQuiz.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),L),T;function L(e,t,i,n){l(this,L);var o=d(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,e,t,i,n));return(o._this=o)._resetExclude=[],o}t.QuizBookPage=w},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleNXQuiz=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,q=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["NXQuizPanel"],l={NXQuizPanel:"none"},d=!1,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),q.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null),q.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),q.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),q.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),this._runningAutoHint=null;for(var t=this._pickList.length,i=void 0,n=void 0,o=0;o<t;o++){i=this._pickList[o],n=this._parent.getInstanceMirror(i);var a=this.getCustomTag(i),s=i.parent,r=s.mcRight,u=s.mcWrong,l=s.NXQuizToolBar,d=s.NXQuizContent,h=i;this.clearQuizAnsStatus(i),d.visible=!1,h.visible=!0}q.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),q.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t);if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;this._pickList.push(t),t._seq=this._seq,this._seq++}}},{key:"getCustomTag",value:function e(t){return q.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"setup",value:function e(t){var d=this,h=0<arguments.length&&void 0!==t?t:"",i=this._pickList.length,p=void 0,c=this;this._preloadManifestCount=0,this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.handleFileLoadBind=this.handleFileLoadBind||this.handleFileLoad.bind(this),this.handleCompleteBind=this.handleCompleteBind||this.handleComplete.bind(this),this.triggerIntroMouseDownBind=this.triggerIntroMouseDownBind||this.triggerIntroMouseDown.bind(this),this.triggerIntroMouseSwitchBind=this.triggerIntroMouseSwitchBind||this.triggerIntroMouseSwitch.bind(this),this.triggerToolbarMouseDownBind=this.triggerToolbarMouseDownBind||this.triggerToolbarMouseDown.bind(this),this.handleQuestionSoundClickBind=this.handleQuestionSoundClickBind||this.handleQuestionSoundClick.bind(this),this.triggerQuestionSoundWatchBind=this.triggerQuestionSoundWatchBind||this.triggerQuestionSoundWatch.bind(this),this.handleQuestionSoundCompleteBind=this.handleQuestionSoundCompleteBind||this.handleQuestionSoundComplete.bind(this),this.handleQuizUnitTouchIsOnlySoundBind=this.handleQuizUnitTouchIsOnlySoundBind||this.handleQuizUnitTouchIsOnlySound.bind(this),this.handleQuizUnitTouchIsCheckBind=this.handleQuizUnitTouchIsCheckBind||this.handleQuizUnitTouchIsCheck.bind(this),this.triggerResultAnimateSoundWatchBind=this.triggerResultAnimateSoundWatchBind||this.triggerResultAnimateSoundWatch.bind(this),this.triggerResultAnimateSoundCompleteBind=this.triggerResultAnimateSoundCompleteBind||this.triggerResultAnimateSoundComplete.bind(this),this.triggerAutoHintAnimateSoundCompleteBind=this.triggerAutoHintAnimateSoundCompleteBind||this.triggerAutoHintAnimateSoundComplete.bind(this),this.handleQuizUnitTouchMoveStartByType3Bind=this.handleQuizUnitTouchMoveStartByType3Bind||this.handleQuizUnitTouchMoveStartByType3.bind(this),this.handleQuizUnitTouchMoveMoveByType3Bind=this.handleQuizUnitTouchMoveMoveByType3Bind||this.handleQuizUnitTouchMoveMoveByType3.bind(this),this.handleQuizUnitTouchMoveEndByType3Bind=this.handleQuizUnitTouchMoveEndByType3Bind||this.handleQuizUnitTouchMoveEndByType3.bind(this),this.handleQuizUnitLineMoveStartBind=this.handleQuizUnitLineMoveStartBind||this.handleQuizUnitLineMoveStart.bind(this),this.handleQuizUnitLineMoveMoveBind=this.handleQuizUnitLineMoveMoveBind||this.handleQuizUnitLineMoveMove.bind(this),this.handleQuizUnitLineMoveEndBind=this.handleQuizUnitLineMoveEndBind||this.handleQuizUnitLineMoveEnd.bind(this),this.handleQuizUnitTouchMoveStartByType6Bind=this.handleQuizUnitTouchMoveStartByType6Bind||this.handleQuizUnitTouchMoveStartByType6.bind(this),this.handleQuizUnitTouchMoveMoveByType6Bind=this.handleQuizUnitTouchMoveMoveByType6Bind||this.handleQuizUnitTouchMoveMoveByType6.bind(this),this.handleQuizUnitTouchMoveEndByType6Bind=this.handleQuizUnitTouchMoveEndByType6Bind||this.handleQuizUnitTouchMoveEndByType6.bind(this),this.handleQuizUnitTouchMoveStartByType7Bind=this.handleQuizUnitTouchMoveStartByType7Bind||this.handleQuizUnitTouchMoveStartByType7.bind(this),this.handleQuizUnitTouchMoveMoveByType7Bind=this.handleQuizUnitTouchMoveMoveByType7Bind||this.handleQuizUnitTouchMoveMoveByType7.bind(this),this.handleQuizUnitTouchMoveEndByType7Bind=this.handleQuizUnitTouchMoveEndByType7Bind||this.handleQuizUnitTouchMoveEndByType7.bind(this),this.handleType7KeyboardBind=this.handleType7KeyboardBind||this.handleType7Keyboard.bind(this);for(var n=0;n<i;n++)(p=this._pickList[n])._isModuleInited||function(){p._replacePath=h,p._isModuleInited=!0;var e=d.getCustomTag(p),t=p.parent,i=t.mcRight,n=t.mcWrong,o=t.NXQuizToolBar,a=t.NXQuizContent,s=p;i.rawdata="right",n.rawdata="wrong",o.mcToolType.pageShowMC.pageTxt.textBaseline=d._parent.textBaseline,"alphabetic"===d._parent.textBaseline&&(o.mcToolType.pageShowMC.pageTxt.y+=o.mcToolType.pageShowMC.pageTxt.lineHeight*d._parent.textAlphabeticFixYScale),s.titleText.textBaseline=d._parent.textBaseline,s.titleText.text="　　　　　　　　　　　　　　　　　　　　　　　　　　　","alphabetic"===d._parent.textBaseline&&(s.titleText.y+=s.titleText.lineHeight*d._parent.textAlphabeticFixYScale),d._parent.stage.isWebGL&&(s.titleText.cache(s.titleText.getBounds().x,s.titleText.getBounds().y,s.titleText.getBounds().width,s.titleText.getBounds().height,2),s.titleText.updateCache()),o.mcToolType.pageShowMC.pageTxt.text="99/99",d._parent.stage.isWebGL&&(o.mcToolType.pageShowMC.pageTxt.cache(o.mcToolType.pageShowMC.pageTxt.getBounds().x,o.mcToolType.pageShowMC.pageTxt.getBounds().y,o.mcToolType.pageShowMC.pageTxt.getBounds().width,o.mcToolType.pageShowMC.pageTxt.getBounds().height,2),o.mcToolType.pageShowMC.pageTxt.updateCache()),i.visible=!1,n.visible=!1,o.visible=!1,a.visible=!1,s.visible=!0,s.sequenceBtn.cursor="pointer",s.randomBtn.cursor="pointer",s.autoSoundPlayBtn.cursor="pointer",s.sequenceBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerIntroMouseDownBind),s.randomBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerIntroMouseDownBind),s.autoSoundPlayBtn.addEventListener("mousedown",d.triggerIntroMouseSwitchBind),d.disableButtonHelper(s.sequenceBtn),d.disableButtonHelper(s.randomBtn),s.autoSoundPlayBtn.gotoAndStop(0),d.disableButtonHelper(s.autoSoundPlayBtn),o.checkButton.cursor="pointer",o.mcToolType.prevBtn.cursor="pointer",o.mcToolType.nextBtn.cursor="pointer",o.mcToolType.againBtn.cursor="pointer",o.mcToolType.backOne.cursor="pointer",o.checkButton.parentRef=s,o.mcToolType.prevBtn.parentRef=s,o.mcToolType.nextBtn.parentRef=s,o.mcToolType.againBtn.parentRef=s,o.mcToolType.backOne.parentRef=s,d.disableButtonHelper(o.mcToolType.prevBtn),d.disableButtonHelper(o.mcToolType.nextBtn),d.disableButtonHelper(o.mcToolType.againBtn),d.disableButtonHelper(o.mcToolType.backOne),d.disableButtonHelper(o.checkButton),o.mcToolType.prevBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),o.mcToolType.nextBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),o.mcToolType.againBtn.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),o.mcToolType.backOne.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),o.checkButton.addEventListener(d._parent.mouseTriggerBehavior,d.triggerToolbarMouseDownBind),d._pickListLoader[e]=new d._parent.createjs.LoadQueue(!0,"./quiz/","Anonymous"),d._pickListLoader[e].id=e,d._pickListLoader[e].installPlugin(d._parent.createjs.Sound),d._pickListLoader[e].setMaxConnections(6),d._pickListXML[e]=null,d._pickListImages[e]={},d._pickListProp[e]={},d._pickListMP3Resource[e]={},d._parentListShapeTemp[e]=new d._parent.createjs.Shape,d._parentListShapeBase[e]=new d._parent.createjs.Shape,d._pickListProp[e].quiz_resource=[],d._pickListProp[e].quiz_resource_map=[],d._pickListProp[e].quiz_prop={},d._pickListProp[e].quiz_page_data=[],d._pickListProp[e].quiz_unit_data=[],d._pickListProp[e].unit_instance=[],d._pickListProp[e].unit_auto_type=[],d._pickListProp[e].quizPageIndex,d._pickListProp[e].questionSound,d._pickListProp[e].quizTouchSound,d._pickListProp[e].answerStatus=[],d._pickListProp[e].page_type2_ans=[],d._pickListProp[e].page_type3_ans={},d._pickListProp[e].page_type5_ans={},d._pickListProp[e].page_type7_ans={},d._pickListProp[e].page_type6_ans={},d._pickListProp[e].autoSoundPlay=!1;var r=document.getElementsByTagName("head")[0],u=document.createElement("script");u.id=e,u.type="text/javascript";var l=d._pickListManifest;u.onload=u.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(l[u.id]=JSON.parse(JSON.stringify(quiz_manifest)),u.onload=u.onreadystatechange=null,c._preloadManifestCount+=1,c.readJSONManifest(u.id))},u.src="./quiz/mapping.js?"+Math.ceil(5e3*Math.random()),r.appendChild(u)}()}},{key:"readJSONManifest",value:function e(t){var i=this,n=this._pickListJsonManifest;n[t]=null,i.checkPreloadManifest()}},{key:"readTextFile",value:function e(t,i){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",t,!0),n.onreadystatechange=function(){4===n.readyState&&"200"==n.status?i(n.responseText):4===n.readyState&&"404"==n.status&&i("")},n.send(null)}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"checkPreloadManifest",value:function e(){if(this._preloadManifestCount===this._pickList.length)for(var t=this._pickList.length,i=this._preloadResourceCount=0;i<t;i++){for(var n=this._pickList[i],o=this.getCustomTag(n),a=this._pickListManifest[o].length,s=[],r=0;r<a;r++)if(-1===this._pickListManifest[o][r].src.indexOf(".mp3"))null===this._pickListJsonManifest[o]&&s.push(this._pickListManifest[o][r]);else{var u=this._pickListManifest[o][r].src.split(".mp3");u=u[0].split("asset/"),this._pickListMP3Resource[o][this._pickListManifest[o][r].id]=u[1]}if(null!==this._pickListJsonManifest[o])for(var l=this._pickListJsonManifest[o].images.length,d=0;d<l;d++)s.push({src:"asset2/"+this._pickListJsonManifest[o].images[d],id:this._pickListJsonManifest[o].images[d]});this._pickListManifest[o]=JSON.parse(JSON.stringify(s)),0===this._pickListManifest[o].length&&null===this._pickListJsonManifest[o]?this._preloadResourceCount+=1:(this._pickListLoader[o].addEventListener("fileload",this.handleFileLoadBind),this._pickListLoader[o].addEventListener("complete",this.handleCompleteBind),this._pickListLoader[o].loadFile({src:"data.xml?"+Math.ceil(5e3*Math.random()),type:"xml",id:"quiz_xml"},!1),this._pickListLoader[o].loadManifest(this._pickListManifest[o],!1),this._pickListLoader[o].load())}}},{key:"handleFileLoad",value:function e(t){var i=t.currentTarget;t&&"image"===t.item.type?this._pickListImages[i.id][t.item.id]=t.result:t&&"xml"===t.item.type&&"quiz_xml"===t.item.id&&(this._pickListXML[i.id]=t.result)}},{key:"handleComplete",value:function e(t){var i,n=t.currentTarget.id;if(null!==this._pickListJsonManifest[n]){for(var o=this._pickListJsonManifest[n].images.length,a=[],s=0;s<o;s++)a.push(this._pickListImages[n][this._pickListJsonManifest[n].images[s]]);this._pickListJsonSS[n]=new this._parent.createjs.SpriteSheet({images:a,frames:this._pickListJsonManifest[n].frames})}if(this._pickListLoader[n].removeEventListener("fileload",this.handleFileLoadBind),this._pickListLoader[n].removeEventListener("complete",this.handleCompleteBind),this._preloadResourceCount+=1,this._preloadResourceCount===this._pickList.length)for(var r=this._pickList.length,u=0;u<r;u++){var l=this.getCustomTag(this._pickList[u]);if(this.parseQuizData(l),this._pickList[u].titleText.text=this._pickListProp[l].quiz_prop.PageMenuTitle,this._parent.stage.isWebGL&&this._pickList[u].titleText.updateCache(),null!==this._pickListJsonManifest[l]){this._pickListJsonSSImage[l]={};var d=[];for(var h in this._pickListJsonManifest[n].animations)if(""!==h){var p=Number(this._pickListJsonManifest[n].animations[h].frames[0]);this._pickListJsonSSImage[l][h]=new this._parent.createjs.Sprite(this._pickListJsonSS[l]),this._pickListJsonSSImage[l][h].gotoAndStop(p),d.push(h)}for(var c=d.length,_=this._pickListProp[l].quiz_resource.length,g=0;g<c;g++)for(var f=0;f<_;f++){var v=this._pickListProp[l].quiz_resource[f].data.split(".");if("mp3"!==v[1]&&v[0]===d[g]){var m=this._pickListProp[l].quiz_resource[f].id;this._pickListImages[l][m]=this._pickListJsonSSImage[l][d[g]];break}}}if(0<this._pickListProp[l].quiz_page_data.length){this._pickListQuestionSeqIndex[l]=0,this._pickListQuestionSeq[l]=this.generateArrayNumber(0,this._pickListProp[n].quiz_page_data.length),this.enableButtonHelper(this._pickList[u].sequenceBtn),this.enableButtonHelper(this._pickList[u].randomBtn);var b=this._pickList[u].parent.NXQuizToolBar;this.enableButtonHelper(b.mcToolType.prevBtn),this.enableButtonHelper(b.mcToolType.nextBtn),this.enableButtonHelper(b.mcToolType.againBtn),this.enableButtonHelper(b.mcToolType.backOne),this.enableButtonHelper(b.checkButton);var y=this._pickList[u];switch(y.autoSoundPlayBtn.cursor="pointer",this._pickListProp[l].autoSoundPlay=!1,Number(this._pickListProp[l].quiz_prop.PageIntroSoundStatus)){case 0:this.disableButtonHelper(y.autoSoundPlayBtn);break;case 1:this._pickListProp[l].autoSoundPlay=!1,this.enableButtonHelper(y.autoSoundPlayBtn),y.autoSoundPlayBtn.gotoAndStop(0);break;case 2:this._pickListProp[l].autoSoundPlay=!0,this.enableButtonHelper(y.autoSoundPlayBtn),y.autoSoundPlayBtn.gotoAndStop(2)}this.initUnitInstance(this._pickList[u]),!1===b.mcToolType.backOne.visible&&this._pickList[u].sequenceBtn.dispatchEvent("click")}}}},{key:"parseQuizData",value:function e(t){var i=void 0,n=void 0,o=void 0,a=void 0,s=void 0,r=void 0,u=this._pickListXML[t].documentElement;o=(i=u.getElementsByTagName("Resource"))[0].childNodes.length;for(var l=0;l<o;l++)l%2!=0&&this._pickListProp[t].quiz_resource.push({id:i[0].childNodes[l].id,data:i[0].childNodes[l].textContent});o=(i=u.getElementsByTagName("ResourceMap"))[0].childNodes.length;for(var d=0;d<o;d++)d%2!=0&&this._pickListProp[t].quiz_resource_map.push({id:i[0].childNodes[d].id,type:i[0].childNodes[d].textContent});o=(i=u.getElementsByTagName("Prop"))[0].childNodes.length;for(var h=0;h<o;h++)h%2!=0&&(this._pickListProp[t].quiz_prop[i[0].childNodes[h].nodeName]=i[0].childNodes[h].textContent);o=(i=u.getElementsByTagName("PageData")).length;for(var p=void 0,c=void 0,_=0;_<o;_++){r={},this._pickListProp[t].quiz_page_data[i[_].getAttribute("index")]=r,a=(n=i[_].childNodes).length;for(var g=0;g<a;g++)if(g%2!=0&&"unit"!=n[g].nodeName&&"activeRightSets"!=n[g].nodeName){r[n[g].nodeName]={},s=n[g].attributes.length;for(var f=0;f<s;f++)p=n[g].attributes[f].name,c=n[g].attributes[f].value,r[n[g].nodeName][p]=c;r[n[g].nodeName].rawdata=n[g].textContent}else if(g%2!=0&&"unit"==n[g].nodeName){void 0===this._pickListProp[t].quiz_unit_data&&(this._pickListProp[t].quiz_unit_data=[]),void 0===this._pickListProp[t].quiz_unit_data[_]&&(this._pickListProp[t].quiz_unit_data[_]={}),void 0===this._pickListProp[t].quiz_unit_data[_][n[g].textContent]&&(this._pickListProp[t].quiz_unit_data[_][n[g].textContent]=[]);var v={};s=n[g].attributes.length;for(var m=0;m<s;m++)p=n[g].attributes[m].name,c=n[g].attributes[m].value,v[p]=c;this._pickListProp[t].quiz_unit_data[_][n[g].textContent].push(v)}else if(g%2!=0&&"activeRightSets"==n[g].nodeName){var v;void 0===r[n[g].nodeName]&&(r[n[g].nodeName]=[]),(v={}).rawdata=n[g].textContent,r[n[g].nodeName].push(v)}}}},{key:"initUnitInstance",value:function e(t){for(var i=this.getCustomTag(t),n=this._parent.createjs,o=this._pickListImages[i],a=Number.MAX_VALUE,s=Number.MAX_VALUE,r=Number.MIN_VALUE,u=Number.MIN_VALUE,l=this._pickListProp[i].quiz_unit_data.length,d=0;d<l;d++)for(var h in void 0===this._pickListProp[i].unit_auto_type[d]&&(this._pickListProp[i].unit_auto_type[d]={}),void 0===this._pickListProp[i].unit_instance[d]&&(this._pickListProp[i].unit_instance[d]={}),this._pickListProp[i].quiz_unit_data[d])if(this._pickListProp[i].quiz_unit_data[d].hasOwnProperty(h)){var p=void 0,c=this._pickListProp[i].quiz_unit_data[d][h],_=0,g=0,f;if(!("HittingAuto"===c[0].autoType&&"undefined"===c[0].typeKind||void 0===c[0].autoType&&"NXFLEXTEXTFILED"!=c[0].id&&"KEYBOARDCLASS"!=c[0].id)){switch(c[0].autoType){case"HittingAuto":p=this.factoryAutoType(c[0].id,c[0]);break;default:"NXFLEXTEXTFILED"===c[0].id?(p=this.factoryAutoType(c[0].id,c[0]),c[0].autoType=""):"KEYBOARDCLASS"===c[0].id&&(p=this.factoryAutoType(c[0].id,c[0]),c[0].autoType="KEYBOARDCLASS")}this._pickListProp[i].unit_auto_type[d][h]=c[0].autoType,(this._pickListProp[i].unit_instance[d][h]=p).gotoAndStop(1),p.id=h,null!=c[0].sound?p.sound=c[0].sound:p.sound="",null!=c[0].group?p.group=Number(c[0].group):p.group=0;continue}var v=[];this._pickListProp[i].unit_auto_type[d][h]="",p=new n.MovieClip,this._pickListProp[i].unit_instance[d][h]=p;var m=c.length;a=Number.MAX_VALUE,s=Number.MAX_VALUE,r=Number.MIN_VALUE,u=Number.MIN_VALUE;for(var b=0;b<m;b++){a>c[b].originX&&(a=c[b].originX),s>c[b].originY&&(s=c[b].originY),r<c[b].textWidth&&(r=c[b].textWidth),u<c[b].textHeight&&(u=c[b].textHeight),0===b&&(_=Number(Number(c[b].originX)+Number(c[b].textWidth)/2)*Number(c[b].scaleX),g=Number(Number(c[b].originY)+Number(c[b].textHeight)/2)*Number(c[b].scaleY));var y=void 0;(y=null===this._pickListJsonManifest[i]?new n.Bitmap(o[c[b].id]):o[c[b].id].clone()).parent=p,y.setTransform(c[b].originX,c[b].originY),1===m?p.timeline.addTween(n.Tween.get({}).to({state:[{t:y}]}).wait(1)):v.push(y)}if(0<v.length)switch(v.length){case 2:p.timeline.addTween(n.Tween.get({}).to({state:[{t:v[0]}]}).to({state:[{t:v[1]}]},1).wait(1));break;case 3:p.timeline.addTween(n.Tween.get({}).to({state:[{t:v[0]}]}).to({state:[{t:v[1]}]},1).to({state:[{t:v[2]}]},2).wait(1));break;case 4:default:p.timeline.addTween(n.Tween.get({}).to({state:[{t:v[0]}]}).to({state:[{t:v[1]}]},1).to({state:[{t:v[2]}]},2).to({state:[{t:v[3]}]},3).wait(1))}p.nominalBounds=new n.Rectangle(a,s,r,u),c[0].x=Number(c[0].x)-_,c[0].y=Number(c[0].y)-g,p.setTransform(c[0].x,c[0].y,c[0].scaleX,c[0].scaleY),p.gotoAndStop(1),p.id=h,null!=c[0].sound?p.sound=c[0].sound:p.sound="",null!=c[0].group?p.group=Number(c[0].group):p.group=0}}},{key:"factoryAutoType",value:function e(t,i){var n=this._parent.createjs,o=this._parent.lib,a=void 0;switch(t){case"GMCLASSHITGAMEAUTOTYPEB01":(a=new o.AutoHit01).rawdata="thump",a.setTransform(i.x,i.y,i.scaleX,i.scaleY,0,0,0,-i.originX,-i.originY);break;case"NXFLEXTEXTFILED":a=new n.MovieClip;var s=(new n.Text).set({text:i.text,font:i.assetFontSize+"px "+i.fontName,color:"#"+i.fontColor,lineWidth:i.textWidth,textAlign:i.fontAlign});s.y=-i.textHeight/2+(i.textHeight-s.getMeasuredHeight())/2,a.addChild(s),a.text=s,a.setTransform(i.x,i.y,i.scaleX,i.scaleY,0,0,0),a.nominalBounds=new n.Rectangle(-i.textWidth/2,-i.textHeight/2,i.textWidth,i.textHeight),this._parent.stage.isWebGL&&(a.cache(a.nominalBounds.x,a.nominalBounds.y,a.nominalBounds.width,a.nominalBounds.height,2),a.updateCache());var r=new n.Shape;a.addChild(r),(a.shape=r).graphics.clear(),r.alpha=.01,r.graphics.beginFill("#FFFFFF").drawRect(-i.textWidth/2,-i.textHeight/2,i.textWidth,i.textHeight),a.optText=i.optText,a.chinaCode=i.chinaCode,a.passType=i.passType;break;case"KEYBOARDCLASS":(a=new o.QuizKeyBoard).setTransform(i.x,i.y,i.scaleX,i.scaleY,0,0,0,-i.originX,-i.originY);break;default:a=new n.MovieClip}return a}},{key:"stepQuizProcess",value:function e(t,i){this._parent.stop(null,!0);var n=this.getCustomTag(t),o=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[n],r=t.parent.NXQuizContent,u=t.parent.NXQuizToolBar,l=t,d=this._pickListProp[n].quiz_page_data[i],h=this._parentListShapeTemp[n],p=this._parentListShapeBase[n],c=d.layout.rawdata.split(",");for(var _ in c)if(c.hasOwnProperty(_)&&q.default.notNull(c[_])&&""!==c[_]){var g=this._pickListProp[n].quiz_unit_data[i][c[_]];this._pickListProp[n].unit_instance[i][c[_]].gotoAndStop(0),this._pickListProp[n].unit_instance[i][c[_]].x=g[0].x,this._pickListProp[n].unit_instance[i][c[_]].y=g[0].y,this._pickListProp[n].unit_instance[i][c[_]].scaleX=g[0].scaleX,this._pickListProp[n].unit_instance[i][c[_]].scaleY=g[0].scaleY,this._pickListProp[n].unit_instance[i][c[_]].scale0X=g[0].scaleX,this._pickListProp[n].unit_instance[i][c[_]].scale0Y=g[0].scaleY,r.addChild(this._pickListProp[n].unit_instance[i][c[_]])}switch(r._btn_sound.rawdata=this._pickListMP3Resource[n][d.sound.rawdata],r._btn_sound.loopdata=Number(this._pickListProp[n].quiz_prop.SoundCount),0<r._btn_sound.loopdata&&(r._btn_sound.loopdata-=1),r._btn_sound.addEventListener("click",this.handleQuestionSoundClickBind),r._btn_sound.setTransform(d.sound.x,d.sound.y,d.sound.scaleX,d.sound.scaleY),r._btn_sound.cursor="pointer",""===d.sound.rawdata?r._btn_sound.visible=!1:(r._btn_sound.visible=!0,this._pickListProp[n].autoSoundPlay&&this.callQuestionSoundClick(r._btn_sound)),u.checkButton.visible=!0,""===d.activeMC.rawdata&&""===d.activeMCP.rawdata&&(u.checkButton.visible=!1),this._quizPageIndex=i,h.graphics.clear(),p.graphics.clear(),r.addChild(h),r.addChild(p),q.default.trace(d.type.rawdata),d.type.rawdata){case"Type2":this.injectQuizType2(t);break;case"Type3":this.injectQuizType3(t);break;case"Type5":this.injectQuizType5(t);break;case"Type6":this.injectQuizType6(t);break;case"Type7":this.injectQuizType7(t)}r._btn_sound.visible&&r.addChild(r._btn_sound)}},{key:"injectQuizType2",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,o=this._parent.lib,a=this._pickListImages[i],s=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];for(var g in c.page_type="type2",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_active_right="",0!=d.activeRightSets.length?(c.page_active_right=d.activeRightSets[0].rawdata.split(","),c.page_active_right=this.checkArrayData(c.page_active_right)):c.page_active_right="",c.page_type2_ans.length=0,c.page_base)if(""!==g){var f=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[g]][0].sound];q.default.notNull(f)&&(_[c.page_base[g]].cursor="pointer",_[c.page_base[g]].rawdata=f,_[c.page_base[g]].baseTarget=t,_[c.page_base[g]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var v in c.page_active_mc)if(""!==v){var m=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[v]][0].sound];_[c.page_active_mc[v]].rawdata=_[c.page_active_mc[v]].rawdata?_[c.page_active_mc[v]].rawdata:m,_[c.page_active_mc[v]].cursor="pointer",_[c.page_active_mc[v]].baseTarget=t,_[c.page_active_mc[v]].addEventListener("click",this.handleQuizUnitTouchIsCheckBind)}for(var b in c.page_active_mcp)if(""!==b){var y=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[b]][0].sound];q.default.notNull(y)&&(_[c.page_active_mcp[b]].cursor="pointer",_[c.page_active_mcp[b]].rawdata=y,_[c.page_active_mcp[b]].baseTarget=t,_[c.page_active_mcp[b]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}}},{key:"handleQuizUnitTouchIsCheck",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null),this._parent.stop(null,!0);var i=t.currentTarget,n=i.baseTarget,o=this.getCustomTag(n),a=this._pickListProp[o];if(!a.page_is_check_ans){switch(a.page_type){case"type2":if(-1!=a.page_type2_ans.indexOf(i.id))return}""===a.unit_auto_type[this._quizPageIndex][i.id]?(q.default.notNull(i.rawdata)&&this.callQuestionSoundClick(i),2<=i.totalFrames&&i.gotoAndStop(1),this.checkTouchIsQuizAns(n,i.id)):this.callAutoHintAnimate(i)}}},{key:"injectQuizType3",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,o=this._parent.lib,a=this._pickListImages[i],s=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];if(c.page_type="type3",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type3_ans={},c.page_active_right={},0!=d.activeRightSets.length)for(var g=c.page_active_mcp.length,f=0;f<g;f++)void 0===d.activeRightSets[f]?c.page_active_right[c.page_active_mcp[f]]=[]:(c.page_active_right[c.page_active_mcp[f]]=d.activeRightSets[f].rawdata.split(","),c.page_active_right[c.page_active_mcp[f]]=this.checkArrayData(c.page_active_right[c.page_active_mcp[f]])),c.page_type3_ans[c.page_active_mcp[f]]={};for(var v in c.page_base)if(""!==v){var m=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[v]][0].sound];q.default.notNull(m)&&(_[c.page_base[v]].cursor="pointer",_[c.page_base[v]].rawdata=m,_[c.page_base[v]].baseTarget=t,_[c.page_base[v]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var b in c.page_active_mc)if(""!==b){var y=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[b]][0].sound];_[c.page_active_mc[b]].cursor="pointer",_[c.page_active_mc[b]].rawdata=_[c.page_active_mc[b]].rawdata?_[c.page_active_mc[b]].rawdata:y,_[c.page_active_mc[b]].baseTarget=t,_[c.page_active_mc[b]].addEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType3Bind),_[c.page_active_mc[b]].addEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType3Bind,q.default.supportPassive()),_[c.page_active_mc[b]].addEventListener("pressup",this.handleQuizUnitTouchMoveEndByType3Bind)}for(var S in c.page_active_mcp)if(""!==S){switch(c.page_type3_ans[c.page_active_mcp[S]].passType=c.quiz_unit_data[l][c.page_active_mcp[S]][0].passType,c.page_type3_ans[c.page_active_mcp[S]].gainans=[],c.page_type3_ans[c.page_active_mcp[S]].gainright=0,c.page_type3_ans[c.page_active_mcp[S]].gainmax=0,c.page_type3_ans[c.page_active_mcp[S]].passType){case"ONE":case"ONEOF":c.page_type3_ans[c.page_active_mcp[S]].gainmax=1;break;case"ALL":c.page_type3_ans[c.page_active_mcp[S]].gainmax=c.page_active_right[c.page_active_mcp[S]].length}var P=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[S]][0].sound];q.default.notNull(P)&&(_[c.page_active_mcp[S]].cursor="pointer",_[c.page_active_mcp[S]].rawdata=P,_[c.page_active_mcp[S]].baseTarget=t,_[c.page_active_mcp[S]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}}},{key:"handleQuizUnitTouchMoveStartByType3",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.baseTarget,a=this.getCustomTag(o),s=this._pickListProp[a],r=o.parent.NXQuizContent;if(!s.page_is_check_ans){var u=t.currentTarget;q.default.notNull(u.rawdata)&&this.callQuestionSoundClick(u),this.clearTouchPickerType3(o,u);var l=s.quiz_unit_data[this._quizPageIndex][u.id];u.scaleX=l[0].scaleX,u.scaleY=l[0].scaleY,r.setChildIndex(u,r.numChildren-1);var d=r.globalToLocal(t.stageX,t.stageY);u.offset={x:u.x-d.x,y:u.y-d.y}}}},{key:"handleQuizUnitTouchMoveMoveByType3",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.baseTarget,a=this.getCustomTag(o),s=this._pickListProp[a],r,u=o.parent.NXQuizContent.globalToLocal(t.stageX,t.stageY),l=t.currentTarget;l.x=u.x+l.offset.x,l.y=u.y+l.offset.y}},{key:"handleQuizUnitTouchMoveEndByType3",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.baseTarget,a=this.getCustomTag(o),s=this._pickListProp[a],r=o.parent.NXQuizContent,u=t.currentTarget,l=void 0,d=void 0,h=void 0;d=-1,h="",l=Number.MAX_VALUE;for(var p=s.page_active_mcp.length,c=0;c<p;c++)if(this.checkCollision(u,s.unit_instance[this._quizPageIndex][s.page_active_mcp[c]])){var _=this.getDistanceFromTwoPoint(u.x,u.y,s.unit_instance[this._quizPageIndex][s.page_active_mcp[c]].x,s.unit_instance[this._quizPageIndex][s.page_active_mcp[c]].y);_<l&&(l=_,d=c,h=s.page_active_mcp[c])}-1!=d&&("ONE"!==s.page_type3_ans[h].passType&&"ONEOF"!==s.page_type3_ans[h].passType||1<=s.page_type3_ans[h].gainans.length&&(d=-1)),-1!=d?(s.page_type3_ans[h].gainans.push(u.id),u.x=s.quiz_unit_data[this._quizPageIndex][h][0].x,u.y=s.quiz_unit_data[this._quizPageIndex][h][0].y,this.fixedLocTouchZone(o,h)):(u.x=s.quiz_unit_data[this._quizPageIndex][u.id][0].x,u.y=s.quiz_unit_data[this._quizPageIndex][u.id][0].y)}},{key:"clearTouchPickerType3",value:function e(t,i){var n=this.getCustomTag(t),o=this._pickListProp[n],a=t.parent.NXQuizContent,s=void 0;for(var r in o.page_type3_ans)""!==r&&-1!=(s=o.page_type3_ans[r].gainans.indexOf(i.id))&&(o.page_type3_ans[r].gainans.splice(s,1),this.fixedLocTouchZone(t,r))}},{key:"calcType3Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],o=!0;for(var a in n.page_type3_ans)if(""!==a&&(n.page_type3_ans[a].gainans.length<n.page_type3_ans[a].gainmax&&(o=!1),!1===o))break;return o}},{key:"calcType3Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],o=!0;for(var a in n.page_type3_ans)if(""!==a){n.page_type3_ans[a].gainans.length<n.page_type3_ans[a].gainmax&&(o=!1);for(var s=n.page_type3_ans[a].gainans.length,r=0;r<s;r++)-1===n.page_active_right[a].indexOf(n.page_type3_ans[a].gainans[r])&&(o=!1);if(!1===o)break}return o}},{key:"fixedLocTouchZone",value:function e(t,i){var n=this.getCustomTag(t),o=this._pickListProp[n],a=this._pickListProp[n].unit_instance[this._quizPageIndex],s;if("ALL"===o.page_type3_ans[i].passType&&0!==o.page_type3_ans[i].gainans.length){var r=[];this.calcSpaceRect(o.page_type3_ans[i].gainans.length,r),this.flexZoneTouch(t,a[i],o.page_type3_ans[i].gainans,r)}}},{key:"calcSpaceRect",value:function e(t,i){var n=t,o=1;if((i.length=0)!==t){for(i[i.length]={wSize:t,hSize:1};2<n;)t<=(n-1)*o?n--:(n--,o++),i[i.length]={wSize:n,hSize:o};1<t&&(i[i.length]={wSize:1,hSize:t})}}},{key:"flexZoneTouch",value:function e(t,i,n,o){var a=this.getCustomTag(t),s=this._pickListProp[a],r=i.nominalBounds.width*i.scaleX/i.nominalBounds.height*i.scaleY,u=Number.MIN_VALUE,l=0,d,h=o.length;if(0!==h){var p=s.unit_instance[this._quizPageIndex][n[0]],c=s.quiz_unit_data[this._quizPageIndex][p.id];p.scaleX=c[0].scaleX,p.scaleY=c[0].scaleY;for(var _=i.nominalBounds.width*i.scaleX,g=i.nominalBounds.height*i.scaleY,f=Number(p.nominalBounds.width)*c[0].scaleX,v=Number(p.nominalBounds.height)*c[0].scaleY,m=0;m<h;m++){var b=_/o[m].wSize/f,y=g/o[m].hSize/v;y<(d=b)&&(d=y),u<d&&(l=m,u=d)}var S=_/(o[l].wSize*f),P=g/(o[l].hSize*v);P<S&&(S=P),h=n.length;for(var M=0;M<h;M++)p=s.unit_instance[this._quizPageIndex][n[M]],c=s.quiz_unit_data[this._quizPageIndex][p.id],p.scaleX=S*p.scale0X,p.scaleY=S*p.scale0Y,f=Number(p.nominalBounds.width)*S*p.scale0X,v=Number(p.nominalBounds.height)*S*p.scale0Y;var O=1,B=1,k=o[l].wSize,x,C=(_-f*k)/2-_/2,w=(g-v*o[l].hSize)/2-g/2;h=n.length;for(var T=0;T<h;T++)p=s.unit_instance[this._quizPageIndex][n[T]],c=s.quiz_unit_data[this._quizPageIndex][p.id],f=Number(p.nominalBounds.width)*S*p.scale0X,v=Number(p.nominalBounds.height)*S*p.scale0Y,p.x=Number(i.x)+f/2+f*(O-1)+C,p.y=Number(i.y)+v/2+v*(B-1)+w,k<++O&&(O=1,B++)}}},{key:"checkCollision",value:function e(t,i){return!(!t.visible||!i.visible||(t.setBounds(Number(t.nominalBounds.x)*t.scaleX+Number(t.x),Number(t.nominalBounds.y)*t.scaleY+Number(t.y),Number(t.nominalBounds.width)*t.scaleX,Number(t.nominalBounds.height)*t.scaleY),i.setBounds(Number(i.nominalBounds.x)*i.scaleX+Number(i.x),Number(i.nominalBounds.y)*i.scaleY+Number(i.y),Number(i.nominalBounds.width)*i.scaleX,Number(i.nominalBounds.height)*i.scaleY),t=t.getBounds(),i=i.getBounds(),t.y+t.height<i.y||t.y>i.y+i.height||t.x+t.width<i.x||t.x>i.x+i.width))}},{key:"getDistanceFromTwoPoint",value:function e(t,i,n,o){return Math.sqrt(Math.pow(t-n,2)+Math.pow(i-o,2))}},{key:"injectQuizType5",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,o=this._parent.lib,a=this._pickListImages[i],s=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];if(c.page_type="type5",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(this.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type5_ans={},c.page_active_right={},0!=d.activeRightSets.length)for(var g=c.page_active_mcp.length,f=0;f<g;f++)void 0===d.activeRightSets[f]?c.page_active_right[c.page_active_mcp[f]]=[]:(c.page_active_right[c.page_active_mcp[f]]=d.activeRightSets[f].rawdata.split(","),c.page_active_right[c.page_active_mcp[f]]=this.checkArrayData(c.page_active_right[c.page_active_mcp[f]])),c.page_type5_ans[c.page_active_mcp[f]]={};for(var v in c.page_base)if(""!==v){var m=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[v]][0].sound];q.default.notNull(m)&&(_[c.page_base[v]].cursor="pointer",_[c.page_base[v]].rawdata=m,_[c.page_base[v]].baseTarget=t,_[c.page_base[v]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var b in c.page_active_mc)if(""!==b){var y=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[b]][0].sound];_[c.page_active_mc[b]].cursor="pointer",_[c.page_active_mc[b]].rawdata=_[c.page_active_mc[b]].rawdata?_[c.page_active_mc[b]].rawdata:y,_[c.page_active_mc[b]].baseTarget=t;var S=void 0;q.default.isNull(_[c.page_active_mc[b]].shape)?(S=new n.Shape,_[c.page_active_mc[b]].addChild(S),_[c.page_active_mc[b]].shape=S):S=_[c.page_active_mc[b]].shape,S.graphics.clear(),S.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6);var P=_[c.page_active_mc[b]];P.bitmapCache&&P.uncache(),P.cache(P.getBounds().x-8,P.getBounds().y,P.getBounds().width+16,P.getBounds().height,2),_[c.page_active_mc[b]].addEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_[c.page_active_mc[b]].addEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_[c.page_active_mc[b]].addEventListener("pressup",this.handleQuizUnitLineMoveEndBind)}for(var M in c.page_active_mcp)if(""!==M){switch(c.page_type5_ans[c.page_active_mcp[M]].passType=c.quiz_unit_data[l][c.page_active_mcp[M]][0].passType,c.page_type5_ans[c.page_active_mcp[M]].gainans=[],c.page_type5_ans[c.page_active_mcp[M]].gainright=0,c.page_type5_ans[c.page_active_mcp[M]].gainmax=0,c.page_type5_ans[c.page_active_mcp[M]].passType){case"ONE":case"ONEOF":c.page_type5_ans[c.page_active_mcp[M]].gainmax=1;break;case"ALL":c.page_type5_ans[c.page_active_mcp[M]].gainmax=c.page_active_right[c.page_active_mcp[M]].length}var O=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[M]][0].sound];_[c.page_active_mcp[M]].cursor="pointer",_[c.page_active_mcp[M]].rawdata=_[c.page_active_mcp[M]].rawdata?_[c.page_active_mcp[M]].rawdata:O,_[c.page_active_mcp[M]].baseTarget=t;var B=void 0;q.default.isNull(_[c.page_active_mcp[M]].shape)?(B=new n.Shape,_[c.page_active_mcp[M]].addChild(B),_[c.page_active_mcp[M]].shape=B):B=_[c.page_active_mcp[M]].shape,B.graphics.clear(),B.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6);var k=_[c.page_active_mcp[M]];k.bitmapCache&&k.uncache(),k.cache(k.getBounds().x-8,k.getBounds().y,k.getBounds().width+16,k.getBounds().height,2),_[c.page_active_mcp[M]].addEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_[c.page_active_mcp[M]].addEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_[c.page_active_mcp[M]].addEventListener("pressup",this.handleQuizUnitLineMoveEndBind)}}},{key:"handleQuizUnitLineMoveStart",value:function e(t){this._parent.stop(null,!0);var i=t.currentTarget,n=this._parent.createjs,o=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),r=this._pickListProp[s],u=a.parent.NXQuizContent;if(!r.page_is_check_ans){var l=t.currentTarget;q.default.notNull(l.rawdata)&&this.callQuestionSoundClick(l),r.line_pick_1=l,r.line_pick_2=null,l.shape.graphics.clear(),l.shape.graphics.beginStroke("green").beginFill("green").drawCircle(0,0,6),l.bitmapCache&&l.updateCache();var d=u.globalToLocal(t.stageX,t.stageY);r.line_point_1=new n.Point(l.x,l.y),r.line_point_2=d,this.drawTempLine(a,r.line_point_1,r.line_point_2)}}},{key:"handleQuizUnitLineMoveMove",value:function e(t){var i=t.currentTarget,n=this._parent.createjs,o=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),r=this._pickListProp[s],u=a.parent.NXQuizContent,l=u.globalToLocal(t.stageX,t.stageY);r.line_point_2=l,this.drawTempLine(a,r.line_point_1,r.line_point_2),r.line_pick_2=this.changeLineHitColor(a,u.getObjectsUnderPoint(l.x,l.y),r.line_pick_1.id)}},{key:"handleQuizUnitLineMoveEnd",value:function e(t){var i=t.currentTarget,n=this._parent.createjs,o=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),r=this._pickListProp[s],u=a.parent.NXQuizContent,l=this._parentListShapeTemp[s],d=this._parentListShapeBase[s],h=t.currentTarget,p=u.globalToLocal(t.stageX,t.stageY);l.graphics.clear(),l.bitmapCache?l.updateCache():l.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2),this.refreshType5LineStatus(a,r.line_pick_1,r.line_pick_2)}},{key:"refreshType5LineStatus",value:function e(t,i,n){var o=this.getCustomTag(t),a=this._pickListProp[o],s=this._pickListProp[o].unit_instance[this._quizPageIndex],r=this._parentListShapeTemp[o],u=this._parentListShapeBase[o],l=void 0,d=void 0;for(l in null!=n&&(l=i.id,d=n.id,-1!=a.page_active_mc.indexOf(l)?-1!=a.page_active_mcp.indexOf(d)&&s[l].group===s[d].group&&a.page_type5_ans[d].gainans.push(l):-1!=a.page_active_mcp.indexOf(l)&&-1!=a.page_active_mc.indexOf(d)&&s[l].group===s[d].group&&a.page_type5_ans[l].gainans.push(d)),a.page_active_mc)""!==l&&(s[l=a.page_active_mc[l]].shape.graphics.clear(),s[l].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6),s[l].bitmapCache&&s[l].updateCache());for(l in a.page_active_mcp)""!==l&&(s[l=a.page_active_mcp[l]].shape.graphics.clear(),s[l].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6),s[l].bitmapCache&&s[l].updateCache());for(l in r.graphics.clear(),a.page_type5_ans)if(""!==l)for(var h in a.page_type5_ans[l].gainans)""!==h&&(u.graphics.setStrokeStyle(3).beginStroke("red").moveTo(s[l].x,s[l].y).lineTo(s[a.page_type5_ans[l].gainans[h]].x,s[a.page_type5_ans[l].gainans[h]].y),u.bitmapCache?u.updateCache():u.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2))}},{key:"drawTempLine",value:function e(t,i,n){var o=this.getCustomTag(t),a=this._pickListProp[o],s=this._pickListProp[o].unit_instance[this._quizPageIndex],r=this._parentListShapeTemp[o],u=this._parentListShapeBase[o];r.graphics.clear(),r.graphics.setStrokeDash([20,10],0).setStrokeStyle(3).beginStroke("green").moveTo(i.x,i.y).lineTo(n.x,n.y),r.bitmapCache?r.updateCache():r.cache(0,0,this._parent.lib.properties.width,this._parent.lib.properties.height,2)}},{key:"changeLineHitColor",value:function e(t,i,n){var o=this.getCustomTag(t),a=this._pickListProp[o],s=this._pickListProp[o].unit_instance[this._quizPageIndex],r=this._parentListShapeTemp[o],u=this._parentListShapeBase[o],l=null;for(var d in a.page_active_mc)if(""!==d){if(n===(d=a.page_active_mc[d]))continue;s[d].shape.graphics.clear(),s[d].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6),s[d].bitmapCache&&s[d].updateCache()}for(var h in a.page_active_mcp)if(""!==h){if(n===(h=a.page_active_mcp[h]))continue;s[h].shape.graphics.clear(),s[h].shape.graphics.beginStroke("red").beginFill("red").drawCircle(0,0,6),s[h].bitmapCache&&s[h].updateCache()}for(var p in i)if(""!==p){if(n===(p=i[p].parent.id)||void 0===p)continue;-1==a.page_active_mc.indexOf(p)&&-1==a.page_active_mcp.indexOf(p)||((l=s[p]).shape.graphics.clear(),l.shape.graphics.beginStroke("green").beginFill("green").drawCircle(0,0,6),l.bitmapCache&&l.updateCache())}return l}},{key:"calcType5Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],o=this._pickListProp[i].unit_instance[this._quizPageIndex],a=!0;for(var s in n.page_type5_ans)if(""!==s&&(n.page_type5_ans[s].gainans.length<n.page_type5_ans[s].gainmax&&(a=!1),!1===a))break;return a}},{key:"calcType5Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],o=this._pickListProp[i].unit_instance[this._quizPageIndex],a=!0;for(var s in n.page_type5_ans)if(""!==s){n.page_type5_ans[s].gainans.length<n.page_type5_ans[s].gainmax&&(a=!1);for(var r=n.page_type5_ans[s].gainans.length,u=0;u<r;u++)-1===n.page_active_right[s].indexOf(n.page_type5_ans[s].gainans[u])&&(a=!1);if(!1===a)break}return a}},{key:"clearType6Puzzle",value:function e(t,i){var n=this.getCustomTag(t),o=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[n],r=t.parent.NXQuizContent,u=t.parent.NXQuizToolBar,l=t,d=this._pickListQuestionSeq[n][this._pickListQuestionSeqIndex[n]],h=this._pickListProp[n].quiz_page_data[d],p=this._parentListShapeTemp[n],c=this._parentListShapeBase[n],_=this._pickListProp[n],g=this._pickListProp[n].unit_instance[d];if(i){for(var f in _.puzzle_unit_instance)""!==f&&(r.removeChild(_.puzzle_unit_instance[f]),_.puzzle_unit_instance[f].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType6Bind),_.puzzle_unit_instance[f].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType6Bind,q.default.supportPassive()),_.puzzle_unit_instance[f].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType6Bind),_.puzzle_unit_instance[f].removeAllChildren(),_.puzzle_unit_instance[f].bmp=null);for(var v in _.puzzle_unit_instance)""!==v&&(r.removeChild(_.puzzle_alpha_instance[v]),_.puzzle_alpha_instance[v].removeAllChildren(),_.puzzle_alpha_instance[v].shape.graphics.clear(),_.puzzle_alpha_instance[v].shape=null);_.puzzle_unit_instance={},_.puzzle_alpha_instance={}}else for(var m in _.puzzle_unit_instance)""!==m&&(_.puzzle_unit_instance[m].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType6Bind),_.puzzle_unit_instance[m].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType6Bind,q.default.supportPassive()),_.puzzle_unit_instance[m].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType6Bind))}},{key:"injectQuizType6",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,o=this._parent.lib,a=this._pickListImages[i],s=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];this.clearType6Puzzle(t,!0);var g=void 0;for(var f in c.page_type="type6",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type6_ans={},c.page_active_right={},c.page_base)if(""!==f){var v=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[f]][0].sound];q.default.notNull(v)&&(_[c.page_base[f]].cursor="pointer",_[c.page_base[f]].rawdata=v,_[c.page_base[f]].baseTarget=t,_[c.page_base[f]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var m in c.page_active_mc)if(""!==m){_[c.page_active_mc[m]].visible=!1;for(var b=(g=c.quiz_unit_data[l][c.page_active_mc[m]])[0].passType.split(","),y=Number(b[1]),S=Number(b[2]),P=_[c.page_active_mc[m]].nominalBounds.width/Number(b[1]),M=_[c.page_active_mc[m]].nominalBounds.width/Number(b[2]),O=0,B=0,k=0;k<y;k++)for(var x=0;x<S;x++){var C=new n.MovieClip,w=new n.Bitmap(a[g[0].id]);w.sourceRect=new n.Rectangle(x*P,k*M,P,M),w.setTransform(-P/2,-M/2),C.timeline.addTween(n.Tween.get(w).wait(1).to({visible:!1},0).wait(1)),s.addChild(C),C.cursor="pointer",C.rawdata=null,C.baseTarget=t,C.addEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType6Bind),C.addEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType6Bind,q.default.supportPassive()),C.addEventListener("pressup",this.handleQuizUnitTouchMoveEndByType6Bind),C.setTransform(Number(b[3+O]),Number(b[4+O]),g[0].scaleX,g[0].scaleY),C.gotoAndStop(0),C.nominalBounds=new n.Rectangle(-P/2,-P/2,P,M),C.sound="",C.orgX=Number(b[3+O]),C.orgY=Number(b[4+O]),C.id=c.page_active_mc[m]+"_"+B,C.bmp=w,c.puzzle_unit_instance[c.page_active_mc[m]+"_"+B]=C,B++,O+=2}B=O=0;for(var T=Number(g[0].x)-P/2*g[0].scaleX,L=Number(g[0].y)-M/2*g[0].scaleY,N=P*g[0].scaleX,I=M*g[0].scaleY,j=0;j<y;j++)for(var A=0;A<S;A++){var E=new n.MovieClip,G=new n.Shape;G.graphics.clear(),G.graphics.beginFill("#ffffff").drawRect(0,0,P,M),G.setTransform(-P/2,-M/2),G.alpha=.01,E.timeline.addTween(n.Tween.get(G).wait(1).to({visible:!1},0).wait(1)),s.addChild(E),E.setTransform(T+A*N,L+j*I,g[0].scaleX,g[0].scaleY),E.gotoAndStop(0),E.nominalBounds=new n.Rectangle(-P/2,-P/2,P,M),E.sound="",E.orgX=T+A*N,E.orgY=L+j*I,E.id=c.page_active_mc[m]+"_"+B,E.shape=G,c.puzzle_alpha_instance[c.page_active_mc[m]+"_"+B]=E,c.page_type6_ans[c.page_active_mc[m]+"_"+B]="",B++,O+=2}}}},{key:"handleQuizUnitTouchMoveStartByType6",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,o=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),r=this._pickListProp[s],u=a.parent.NXQuizContent;if(!r.page_is_check_ans){var l=t.currentTarget;q.default.notNull(l.rawdata)&&this.callQuestionSoundClick(l),this.clearTouchPickerType6(a,l),u.setChildIndex(l,u.numChildren-1);var d=u.globalToLocal(t.stageX,t.stageY);l.offset={x:l.x-d.x,y:l.y-d.y}}}},{key:"handleQuizUnitTouchMoveMoveByType6",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,o=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),r=this._pickListProp[s],u,l=a.parent.NXQuizContent.globalToLocal(t.stageX,t.stageY),d=t.currentTarget;d.x=l.x+d.offset.x,d.y=l.y+d.offset.y}},{key:"handleQuizUnitTouchMoveEndByType6",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.createjs,o=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),r=this._pickListProp[s],u=a.parent.NXQuizContent,l=t.currentTarget,d=u.globalToLocal(t.stageX,t.stageY),h="",p=Number.MAX_VALUE;for(var c in r.puzzle_alpha_instance)if(""!==c&&this.checkCollision(l,r.puzzle_alpha_instance[c])){var _=this.getDistanceFromTwoPoint(l.x,l.y,r.puzzle_alpha_instance[c].x,r.puzzle_alpha_instance[c].y);_<p&&""===r.page_type6_ans[c]&&(p=_,h=c)}""!==h?(r.page_type6_ans[h]=l.id,l.x=r.puzzle_alpha_instance[h].x,l.y=r.puzzle_alpha_instance[h].y):(l.x=l.orgX,l.y=l.orgY)}},{key:"clearTouchPickerType6",value:function e(t,i){var n=this.getCustomTag(t),o=this._pickListProp[n],a=this._pickListProp[n].unit_instance[this._quizPageIndex];for(var s in o.page_type6_ans)o.page_type6_ans[s]===i.id&&(o.page_type6_ans[s]="")}},{key:"calcType6Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],o=this._pickListProp[i].unit_instance[this._quizPageIndex],a=!0;for(var s in n.page_type6_ans)if(""!==s&&(""===n.page_type6_ans[s]&&(a=!1),!1===a))break;return a}},{key:"calcType6Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],o=this._pickListProp[i].unit_instance[this._quizPageIndex],a=!0;for(var s in n.page_type6_ans)if(""!==s&&(n.page_type6_ans[s]!=s&&(a=!1),!1===a))break;return a}},{key:"injectQuizType7",value:function e(t){var i=this.getCustomTag(t),n=this._parent.createjs,o=this._parent.lib,a=this._pickListImages[i],s=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];if(c.page_type="type7",c.page_is_check_ans=!1,c.page_base=d.baseMC.rawdata.split(","),c.page_base=this.checkArrayData(c.page_base),c.page_active_mc=d.activeMC.rawdata.split(","),c.page_active_mc=this.checkArrayData(c.page_active_mc),c.page_active_mcp=d.activeMCP.rawdata.split(","),c.page_active_mcp=this.checkArrayData(c.page_active_mcp),c.page_type7_ans={},c.page_active_right={},0!=d.activeRightSets.length)for(var g=c.page_active_mcp.length,f=0;f<g;f++)for(var v in void 0===d.activeRightSets[f]?c.page_active_right[c.page_active_mcp[f]]=[]:(c.page_active_right[c.page_active_mcp[f]]=d.activeRightSets[f].rawdata.split(","),c.page_active_right[c.page_active_mcp[f]]=this.checkArrayData(c.page_active_right[c.page_active_mcp[f]])),c.page_type7_ans[c.page_active_mcp[f]]={},c.page_active_right[c.page_active_mcp[f]])"KEYBOARDCLASS"===c.unit_auto_type[this._quizPageIndex][c.page_active_right[c.page_active_mcp[f]][v]]&&(c.unit_instance[l][c.page_active_right[c.page_active_mcp[f]][v]].relTag=c.page_active_mcp[f],c.unit_instance[l][c.page_active_right[c.page_active_mcp[f]][v]].relFunc=this.handleType7KeyboardBind,c.unit_instance[l][c.page_active_right[c.page_active_mcp[f]][v]].baseTarget=t);for(var m in c.page_base)if(""!==m){var b=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_base[m]][0].sound];q.default.notNull(b)&&(_[c.page_base[m]].cursor="pointer",_[c.page_base[m]].rawdata=b,_[c.page_base[m]].baseTarget=t,_[c.page_base[m]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}for(var y in c.page_active_mc)if(""!==y){var S=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mc[y]][0].sound];_[c.page_active_mc[y]].cursor="pointer",_[c.page_active_mc[y]].rawdata=_[c.page_active_mc[y]].rawdata?_[c.page_active_mc[y]].rawdata:S,_[c.page_active_mc[y]].baseTarget=t,_[c.page_active_mc[y]].visible=!0,"KEYBOARDCLASS"!==c.unit_auto_type[this._quizPageIndex][c.page_active_mc[y]]?(_[c.page_active_mc[y]].addEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType7Bind),_[c.page_active_mc[y]].addEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType7Bind,q.default.supportPassive()),_[c.page_active_mc[y]].addEventListener("pressup",this.handleQuizUnitTouchMoveEndByType7Bind)):_[c.page_active_mc[y]].initRef(this._parent.stage.isWebGL)}for(var P in c.page_active_mcp)if(""!==P){c.page_type7_ans[c.page_active_mcp[P]].passType=c.quiz_unit_data[l][c.page_active_mcp[P]][0].passType,c.page_type7_ans[c.page_active_mcp[P]].gainans=[],c.page_type7_ans[c.page_active_mcp[P]].gainright="",c.page_type7_ans[c.page_active_mcp[P]].ans=_[c.page_active_mcp[P]].optText,_[c.page_active_mcp[P]].text.text="",this._parent.stage.isWebGL&&_[c.page_active_mcp[P]].updateCache();var M=this._pickListMP3Resource[i][c.quiz_unit_data[l][c.page_active_mcp[P]][0].sound];q.default.notNull(M)&&(_[c.page_active_mcp[P]].cursor="pointer",_[c.page_active_mcp[P]].rawdata=M,_[c.page_active_mcp[P]].baseTarget=t,_[c.page_active_mcp[P]].addEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind))}}},{key:"handleType7Keyboard",value:function e(t,i,n){this.displayType7TextByKeyBoard(t,i,n)}},{key:"handleQuizUnitTouchMoveStartByType7",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,o=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),r=this._pickListProp[s],u=a.parent.NXQuizContent;if(!r.page_is_check_ans){var l=t.currentTarget;q.default.notNull(l.rawdata)&&this.callQuestionSoundClick(l),u.setChildIndex(l,u.numChildren-1);var d=u.globalToLocal(t.stageX,t.stageY);l.offset={x:l.x-d.x,y:l.y-d.y}}}},{key:"handleQuizUnitTouchMoveMoveByType7",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=this._parent.createjs,o=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),r=this._pickListProp[s],u,l=a.parent.NXQuizContent.globalToLocal(t.stageX,t.stageY),d=t.currentTarget;void 0===d.nominalBounds&&(d=t.currentTarget.parent),d.x=l.x+d.offset.x,d.y=l.y+d.offset.y}},{key:"handleQuizUnitTouchMoveEndByType7",value:function e(t){this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.createjs,o=this._parent.getInstanceMirror(i),a=i.baseTarget,s=this.getCustomTag(a),r=this._pickListProp[s],u=a.parent.NXQuizContent,l=this._pickListProp[s].unit_instance[this._quizPageIndex],d=t.currentTarget,h=u.globalToLocal(t.stageX,t.stageY),p=void 0,c=-1,_="";p=Number.MAX_VALUE;for(var g=r.page_active_mcp.length,f=0;f<g;f++)if(-1!=r.page_active_right[r.page_active_mcp[f]].indexOf(d.id)&&this.checkCollision(d,l[r.page_active_mcp[f]])){var v=this.getDistanceFromTwoPoint(d.x,d.y,l[r.page_active_mcp[f]].x,l[r.page_active_mcp[f]].y);v<p&&(p=v,c=f,_=r.page_active_mcp[f])}-1!=c&&(r.page_type7_ans[_].gainans.push(d.id),this.displayType7Text(a,_),"ONE"===d.passType&&(d.visible=!1)),d.x=r.quiz_unit_data[this._quizPageIndex][d.id][0].x,d.y=r.quiz_unit_data[this._quizPageIndex][d.id][0].y}},{key:"displayType7TextByKeyBoard",value:function e(t,i,n){var o=this.getCustomTag(t),a=this._pickListProp[o],s=this._pickListProp[o].unit_instance[this._quizPageIndex],r=a.page_type7_ans[n].gainans,u="";for(var l in"back"===i?0<r.length&&(r.length=r.length-1):r.push(i),r)""!==l&&(u+=r[l]);a.page_type7_ans[n].gainright=u,s[n].text.text=a.page_type7_ans[n].gainright.trim(),this._parent.stage.isWebGL&&s[n].updateCache()}},{key:"displayType7Text",value:function e(t,i){var n=this.getCustomTag(t),o=this._pickListProp[n],a=this._pickListProp[n].unit_instance[this._quizPageIndex],s=void 0,r="",u="",l=o.page_type7_ans[i].gainans;for(var d in l)if(""!==d){var h=a[l[d]],p=0===d?h:a[l[d-1]];if("false"!==h.chinaCode||0!==Number(d)&&","!==h.optText&&"."!==h.optText&&";"!==h.optText&&"!"!==p.optText&&"?"!==p.optText){if(","===p.optText||"."===p.optText||";"===p.optText||"!"===p.optText||"?"===p.optText)for(var c in r+=" ",s=h.optText.split(""))""!==c&&(0===Number(c)&&(s[c]=s[c].toUpperCase()),r+=s[c]);else r+=" "+h.optText;u+=" "+h.optText}else for(var _ in s=h.optText.split(""))""!==_&&(u+=s[_],0===Number(_)&&(s[_]=s[_].toUpperCase()),r+=s[_])}a[i].text.text=r.trim(),this._parent.stage.isWebGL&&a[i].updateCache(),o.page_type7_ans[i].gainright=u.trim()}},{key:"calcType7Gain",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],o=this._pickListProp[i].unit_instance[this._quizPageIndex],a=!0;for(var s in n.page_type7_ans)if(""!==i&&(n.page_type7_ans[s].ans.split("").length>n.page_type7_ans[s].gainright.split("").length&&(a=!1),!1===a))break;return a}},{key:"calcType7Pass",value:function e(t){var i=this.getCustomTag(t),n=this._pickListProp[i],o=this._pickListProp[i].unit_instance[this._quizPageIndex],a=!0;for(var s in n.page_type7_ans)if(""!==s&&(n.page_type7_ans[s].ans.toUpperCase()!=n.page_type7_ans[s].gainright.toUpperCase()&&(a=!1),!1===a))break;return a}},{key:"checkTouchIsQuizAns",value:function e(t,i){var n=1<arguments.length&&void 0!==i?i:"",o=this.getCustomTag(t),a=this._parent.createjs,s=this._parent.lib,r=this._pickListImages[o],u=t.parent.NXQuizContent,l=t.parent.NXQuizToolBar,d=t,h=this._pickListQuestionSeq[o][this._pickListQuestionSeqIndex[o]],p=this._pickListProp[o].quiz_page_data[h],c=this._parentListShapeTemp[o],_=this._parentListShapeBase[o],g=this._pickListProp[o],f=this._pickListProp[o].unit_instance[h];switch(g.page_type){case"type2":""===n&&!q.default.isNull(n)||g.page_type2_ans.push(n),g.page_type2_ans=g.page_type2_ans.filter(q.default.getArrayUnique);var v=0;for(var m in g.page_type2_ans)-1!=g.page_active_right.indexOf(g.page_type2_ans[m])&&v++;""===n&&(v===g.page_active_right.length&&g.page_active_right.length===g.page_type2_ans.length?this.checkAnsIsRight(t):this.checkAnsIsWrong(t));break;case"type3":this.calcType3Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t);break;case"type5":this.calcType5Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t);break;case"type6":this.calcType6Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t);break;case"type7":this.calcType7Pass(t)?this.checkAnsIsRight(t):this.checkAnsIsWrong(t)}}},{key:"clearQuizAnsStatus",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,o=this._parent.lib,a=this._pickListImages[i],s=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];h.graphics.clear(),p.graphics.clear(),h.bitmapCache&&h.updateCache(),p.bitmapCache&&p.updateCache(),this.clearContent(t,!0)}},{key:"resetQuizAnsStatus",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,o=this._parent.lib,a=this._pickListImages[i],s=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l];h.graphics.clear(),p.graphics.clear(),h.bitmapCache&&h.updateCache(),p.bitmapCache&&p.updateCache(),this.clearContent(t,!0),this.stepQuizProcess(t,l)}},{key:"clearContent",value:function e(t,i){this._parent.stop(null,!0);var n=this.getCustomTag(t),o=this._parent.createjs,a=this._parent.lib,s=this._pickListImages[n],r=t.parent.NXQuizContent,u=t.parent.NXQuizToolBar,l=t,d=this._pickListQuestionSeq[n][this._pickListQuestionSeqIndex[n]],h=this._pickListProp[n].quiz_page_data[d],p=this._parentListShapeTemp[n],c=this._parentListShapeBase[n],_=this._pickListProp[n],g=this._pickListProp[n].unit_instance[d],f=t.parent.mcRight,v=t.parent.mcWrong;for(var m in f.visible=!1,v.visible=!1,f.gotoAndStop(0),v.gotoAndStop(0),_.page_base)""!=m&&(_.unit_instance[d][_.page_base[m]].removeEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind),_.unit_instance[d][_.page_base[m]].cursor="null");for(var b in _.page_active_mc)""!=b&&(_.unit_instance[d][_.page_active_mc[b]].removeEventListener("click",this.handleQuizUnitTouchIsCheckBind),_.unit_instance[d][_.page_active_mc[b]].cursor="null",_.unit_instance[d][_.page_active_mc[b]].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType3Bind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType3Bind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType3Bind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressup",this.handleQuizUnitLineMoveEndBind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("mousedown",this.handleQuizUnitTouchMoveStartByType7Bind),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressmove",this.handleQuizUnitTouchMoveMoveByType7Bind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mc[b]].removeEventListener("pressup",this.handleQuizUnitTouchMoveEndByType7Bind));for(var y in _.page_active_mcp)""!=y&&(_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("click",this.handleQuizUnitTouchIsOnlySoundBind),_.unit_instance[d][_.page_active_mcp[y]].cursor="null",_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("mousedown",this.handleQuizUnitLineMoveStartBind),_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("pressmove",this.handleQuizUnitLineMoveMoveBind,q.default.supportPassive()),_.unit_instance[d][_.page_active_mcp[y]].removeEventListener("pressup",this.handleQuizUnitLineMoveEndBind));if(this.clearType6Puzzle(t,i),i){r._btn_sound.removeEventListener("click",this.handleQuestionSoundClickBind),r._btn_sound.cursor="null";var S=h.layout.rawdata.split(",");for(var P in S)S.hasOwnProperty(P)&&q.default.notNull(S[P])&&""!==S[P]&&(_.unit_instance[d][S[P]].gotoAndStop(0),r.removeChild(_.unit_instance[d][S[P]]));r._btn_sound.visible=!1}}},{key:"callAutoHintAnimate",value:function e(t){this._parent.stop(null,!0);var i=(this._runningAutoHint=t).nominalBounds,n={x:t.x+i.x*t.scale,y:t.y+i.y*t.scale},o=t.parent.localToGlobal(n.x,n.y),a=this._parent.exportRoot.globalToLocal(o.x,o.y),s=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:t.rawdata,path:s,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerResultAnimateSoundWatchBind,completeFunc:this.triggerAutoHintAnimateSoundCompleteBind,autoPlay:!0,locX:a.x,locY:a.y,excludeTags:null,command:"NXQuizPanel",target:t};var r=this.checkCommandMode("NXQuizPanel");this._parent.iosMode&&"none"===r?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerAutoHintAnimateSoundComplete",value:function e(t){var i=this._parent.soundObj.target;this._runningAutoHint=null;var n=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===n?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)),this.checkTouchIsQuizAns(i.baseTarget,i.id)}},{key:"checkAnsIsRight",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,o=this._parent.lib,a=this._pickListImages[i],s=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l],g=t.parent.mcRight,f=t.parent.mcWrong;this.clearContent(t,!1),g.visible=!0,this.callResultAnimate(g)}},{key:"checkAnsIsWrong",value:function e(t){this._parent.stop(null,!0);var i=this.getCustomTag(t),n=this._parent.createjs,o=this._parent.lib,a=this._pickListImages[i],s=t.parent.NXQuizContent,r=t.parent.NXQuizToolBar,u=t,l=this._pickListQuestionSeq[i][this._pickListQuestionSeqIndex[i]],d=this._pickListProp[i].quiz_page_data[l],h=this._parentListShapeTemp[i],p=this._parentListShapeBase[i],c=this._pickListProp[i],_=this._pickListProp[i].unit_instance[l],g=t.parent.mcRight,f=t.parent.mcWrong;this.clearContent(t,!1),f.visible=!0,this.callResultAnimate(f)}},{key:"callResultAnimate",value:function e(t){this._parent.stop(null,!0);var i=t.nominalBounds,n={x:t.x+i.x*t.scale,y:t.y+i.y*t.scale},o=t.parent.localToGlobal(n.x,n.y),a=this._parent.exportRoot.globalToLocal(o.x,o.y),s=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"sounds/":"./sounds/";this._parent.soundObj={id:t.rawdata,path:s,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerResultAnimateSoundWatchBind,completeFunc:this.triggerResultAnimateSoundCompleteBind,autoPlay:!0,locX:a.x,locY:a.y,excludeTags:null,command:"NXQuizPanel",target:t};var r=this.checkCommandMode("NXQuizPanel");this._parent.iosMode&&"none"===r?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"triggerResultAnimateSoundWatch",value:function e(t){if(q.default.notNull(this._parent.soundChannel)&&this._prevTime!==this._parent.soundChannel.position){var i=this._parent.soundChannel.position,n=this._parent.soundChannel.duration,o=this._prevTime;this._prevTime=i,this._parent.soundChannel.sec&&(i*=1e3,n*=1e3);var a=this._parent.lib.properties.fps,s=Math.round(i/1e3*a),r=this._parent.soundObj.target;s<r.totalFrames&&r.gotoAndStop(s)}}},{key:"triggerResultAnimateSoundComplete",value:function e(t){var i;this._parent.soundObj.target.visible=!1;var n=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===n||"normal-close"===n||"ex-normal-close"===n||"none"===n?(this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===n?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"handleQuizUnitTouchIsOnlySound",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);var i=t.currentTarget,n=i.baseTarget,o=this.getCustomTag(n),a;this._pickListProp[o].page_is_check_ans||q.default.notNull(i.rawdata)&&this.callQuestionSoundClick(i)}},{key:"callQuestionSoundClick",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);var i=this._parent.getInstanceMirror(t);this._parent.stop(null,!0);var n=t.nominalBounds,o={x:t.x+n.x*t.scale,y:t.y+n.y*t.scale},a=t.parent.localToGlobal(o.x,o.y),s=this._parent.exportRoot.globalToLocal(a.x,a.y),r=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"quiz/asset/":"./quiz/asset/";this._parent.soundObj={id:t.rawdata,path:r,loop:t.loopdata,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerQuestionSoundWatchBind,completeFunc:this.handleQuestionSoundCompleteBind,autoPlay:!0,locX:s.x,locY:s.y,excludeTags:null,command:"NXQuizPanel",target:t,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null};var u=this.checkCommandMode("NXQuizPanel");this._parent.iosMode&&"none"===u?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"handleQuestionSoundClick",value:function e(t){null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null);var i=t.currentTarget,n=this._parent.getInstanceMirror(i);this._parent.stop(null,!0);var o=i.nominalBounds,a={x:i.x+o.x*i.scale,y:i.y+o.y*i.scale},s=i.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+"quiz/asset/":"./quiz/asset/";this._parent.soundObj={id:i.rawdata,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerQuestionSoundWatchBind,completeFunc:this.handleQuestionSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:"NXQuizPanel",target:i,pager:null,pagerMarqueeData:null,alphaMode:null,shiftIndex:null};var l=this.checkCommandMode("NXQuizPanel");this._parent.iosMode&&"none"===l?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(q.default.isNull(this._parent.soundObj)||q.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)q.default.notNull(i)&&i.stop();else switch(n){case"fileload":q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var o=this.checkCommandMode(this._parent.soundObj.command);"none"!==o&&this._parent.openSoundPlayBar(o,this._parent.soundObj)}}},{key:"triggerQuestionSoundWatch",value:function e(t){}},{key:"handleQuestionSoundComplete",value:function e(t){q.default.trace("SoundComplete");var i=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===i||"normal-close"===i||"ex-normal-close"===i||"none"===i?(this.stop(),this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,this._parent.iosMode&&"none"===i?q.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback):q.default.playWebAudioSound(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback))}},{key:"generateArrayNumber",value:function e(t,i){if(i<t){var n=i;i=t,t=n}for(var o=[],a=t;a<i;a++)o.push(a);return o}},{key:"disableButtonHelper",value:function e(t){t._buttonHelper&&(t._buttonHelper.enabled=!1),t.mouseEnabled=!1,t.gotoAndStop(0),q.default.applyColorGrayFilter(this._parent.createjs,t,1)}},{key:"enableButtonHelper",value:function e(t){t._buttonHelper&&(t._buttonHelper.enabled=!0),t.mouseEnabled=!0,t.gotoAndStop(0),q.default.unapplyColorFilter(this._parent.createjs,t)}},{key:"checkArrayData",value:function e(t){return null!=t&&1===t.length&&""===t[0]&&(t.length=0),t}},{key:"triggerIntroMouseDown",value:function e(t){var i=t.currentTarget,n=i.parent,o=this.getCustomTag(n);"sequenceBtn"===i.name?(this._pickListQuestionSeq[o].sort(),this._pickListQuestionSeqIndex[o]=0):"randomBtn"===i.name&&(q.default.shuffleArray(this._pickListQuestionSeq[o]),this._pickListQuestionSeqIndex[o]=0),this.stepQuizProcess(n,this._pickListQuestionSeq[o][this._pickListQuestionSeqIndex[o]]);var a=n.parent.NXQuizToolBar,s=n,r;n.parent.NXQuizContent.visible=!0,s.visible=!1,a.visible=!0,this.refreshToolbar(n)}},{key:"triggerIntroMouseSwitch",value:function e(t){var i=t.currentTarget,n=i.parent,o=this.getCustomTag(n);this._pickListProp[o].autoSoundPlay?(this._pickListProp[o].autoSoundPlay=!1,i.gotoAndStop(0)):(this._pickListProp[o].autoSoundPlay=!0,i.gotoAndStop(2))}},{key:"triggerToolbarMouseDown",value:function e(t){var i=t.currentTarget,n=i.parentRef,o=this.getCustomTag(n),a=n.parent.NXQuizContent;switch(i.name){case"checkButton":null!==this._runningAutoHint&&(this._runningAutoHint.gotoAndStop(this._runningAutoHint.totalFrames-1),this.checkTouchIsQuizAns(this._runningAutoHint.baseTarget,this._runningAutoHint.id),this._runningAutoHint=null),this.checkTouchIsQuizAns(n);break;case"againBtn":this._runningAutoHint=null,this.resetQuizAnsStatus(n);break;case"backOne":var s;this._runningAutoHint=null,this.clearQuizAnsStatus(n),n.parent.NXQuizContent.visible=!1,n.visible=!0;break;case"prevBtn":this._runningAutoHint=null,this.clearQuizAnsStatus(n),this._pickListQuestionSeqIndex[o]--,this.stepQuizProcess(n,this._pickListQuestionSeq[o][this._pickListQuestionSeqIndex[o]]),this.refreshToolbar(n);break;case"nextBtn":this._runningAutoHint=null,this.clearQuizAnsStatus(n),this._pickListQuestionSeqIndex[o]++,this.stepQuizProcess(n,this._pickListQuestionSeq[o][this._pickListQuestionSeqIndex[o]]),this.refreshToolbar(n)}}},{key:"refreshToolbar",value:function e(t){var i=this.getCustomTag(t),n,o=t.parent.NXQuizToolBar,a=this._pickListQuestionSeqIndex[i],s=this._pickListQuestionSeq[i].length;o.mcToolType.pageShowMC.pageTxt.text=this.padLeft(a+1,2)+"/"+this.padLeft(s,2),this._parent.stage.isWebGL&&o.mcToolType.pageShowMC.pageTxt.updateCache(),this.enableButtonHelper(o.mcToolType.prevBtn),this.enableButtonHelper(o.mcToolType.nextBtn),0===a&&this.disableButtonHelper(o.mcToolType.prevBtn),s<=a+1&&this.disableButtonHelper(o.mcToolType.nextBtn)}},{key:"padLeft",value:function e(t,i){return(t=""+t).length>=i?t:new Array(i-t.length+1).join("0")+t}},{key:"padRight",value:function e(t,i){return(t=""+t).length>=i?t:t+new Array(i-t.length+1).join("0")}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._pickListLoader={},this._pickListXML={},this._pickListManifest={},this._pickListJsonManifest={},this._pickListImages={},this._pickListProp={},this._pickListQuestionSeq={},this._pickListQuestionSeqIndex={},this._pickListMP3Resource={},this._parentListShapeTemp={},this._parentListShapeBase={},this._pickListJsonSS={},this._pickListJsonSSImage={},this._seq=999,this._prevTime=-1,this._preloadManifestCount=0,this._preloadResourceCount=0,this._runningAutoHint=null}t.ModuleNXQuiz=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameBookPage=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(n):void 0},s,r=u(i(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=i(3).BasePage,c=i(4).ModuleGoOutCommand,_=i(5).ModuleBookSound,g=i(6).ModuleAnsZone,f=i(7).ModulePlaySwitchSound,v=i(8).ModuleListPop,m=i(9).ModuleSwitchPop,b=i(10).ModuleStopTouch,y=i(11).ModuleDragListPop,S=i(12).ModulePageActSoundMV,P=i(13).ModulePager,M=i(14).ModuleWordsNavigator,O=i(15).ModuleOnAndOff,B=i(16).ModuleCalculator,k=i(17).ModulePureAnimate,x=i(18).ModuleZoom,C=i(64).ModuleGameDragDrop,w=i(65).ModuleGameGuideSeqConnect,T=(h(N,L=p),n(N,[{key:"init",value:function e(){a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"init",this).call(this),r.default.notNull(this.pageParam)&&this.updatePageParam(JSON.stringify(this.pageParam)),window.callDelayPageInitComplete&&window.callDelayPageInitComplete()}},{key:"getGoOutCommandItemList",value:function e(){return this.isInited||this.init(),this._moduleGoOutCommand?this._moduleGoOutCommand.getPickListName():null}},{key:"interrupt",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.stop(n,o,!0)}},{key:"stop",value:function e(t,i,n){var o=0<arguments.length&&void 0!==t?t:null,a=1<arguments.length&&void 0!==i&&i,s=2<arguments.length&&void 0!==n&&n;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(o=this.soundObj.excludeTags),r.default.isNull(o)&&(o=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(o=o.concat(this.videoObj.excludeTags)),-1===o.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&!s&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&!s&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.stop(),this._moduleGoOutCommand&&-1===o.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.stop(),this._moduleBookSound&&-1===o.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.stop(),this._modulePlaySwitchSound&&-1===o.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.stop(),this._moduleListPop&&-1===o.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.stop(),this._moduleSwitchPop&&-1===o.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.stop(),this._moduleStopTouch&&-1===o.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.stop(),this._moduleDragListPop&&-1===o.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.stop(),this._modulePageActSoundMV&&-1===o.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.stop(),this._modulePager&&-1===o.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.stop(),this._moduleWordsNavigator&&-1===o.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.stop(),this._moduleOnAndOff&&-1===o.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.stop(),this._moduleCalculator&&-1===o.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.stop(),this._modulePureAnimate&&-1===o.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.stop(),this._moduleGameDragDrop&&-1===o.indexOf("ModuleGameDragDrop")&&-1===this._resetExclude.indexOf("ModuleGameDragDrop")&&this._moduleGameDragDrop.stop(),this._moduleGameGuideSeqConnect&&-1===o.indexOf("ModuleGameGuideSeqConnect")&&-1===this._resetExclude.indexOf("ModuleGameGuideSeqConnect")&&this._moduleGameGuideSeqConnect.stop(),this._moduleAnsZone&&-1===o.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.stop(),this._moduleZoom&&-1===o.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.stop(),this.soundObj=null,this.soundChannel=null,-1===o.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),a&&this.sendCommand("Stop","Stop")}},{key:"reset",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.notNull(this.soundObj)&&r.default.notNull(this.soundObj.excludeTags)&&(n=this.soundObj.excludeTags),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundPlayBar&&this.soundPlayBar.reset(),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleBookSound&&-1===n.indexOf("ModuleBookSound")&&-1===this._resetExclude.indexOf("ModuleBookSound")&&this._moduleBookSound.reset(),this._modulePlaySwitchSound&&-1===n.indexOf("ModulePlaySwitchSound")&&-1===this._resetExclude.indexOf("ModulePlaySwitchSound")&&this._modulePlaySwitchSound.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePageActSoundMV&&-1===n.indexOf("ModulePageActSoundMV")&&-1===this._resetExclude.indexOf("ModulePageActSoundMV")&&this._modulePageActSoundMV.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleGameDragDrop&&-1===n.indexOf("ModuleGameDragDrop")&&-1===this._resetExclude.indexOf("ModuleGameDragDrop")&&this._moduleGameDragDrop.reset(),this._moduleGameGuideSeqConnect&&-1===n.indexOf("ModuleGameGuideSeqConnect")&&-1===this._resetExclude.indexOf("ModuleGameGuideSeqConnect")&&this._moduleGameGuideSeqConnect.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),this.soundObj=null,this.soundChannel=null,-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),this.createjs.Sound.removeAllSounds(),o&&this.sendCommand("Reset","Reset")}},{key:"resetAbortSound",value:function e(t,i){var n=0<arguments.length&&void 0!==t?t:null,o=1<arguments.length&&void 0!==i&&i;this.isInited||this.init(),clearTimeout(this.callTouchInstanceTimer),r.default.isNull(n)&&(n=[]),r.default.notNull(this.videoObj)&&r.default.notNull(this.videoObj.excludeTags)&&(n=n.concat(this.videoObj.excludeTags)),-1===n.indexOf("VideoChannel")&&(r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoPlayBar&&this.videoPlayBar.stop()),this._moduleGoOutCommand&&-1===n.indexOf("ModuleGoOutCommand")&&-1===this._resetExclude.indexOf("ModuleGoOutCommand")&&this._moduleGoOutCommand.reset(),this._moduleListPop&&-1===n.indexOf("ModuleListPop")&&-1===this._resetExclude.indexOf("ModuleListPop")&&this._moduleListPop.reset(),this._moduleSwitchPop&&-1===n.indexOf("ModuleSwitchPop")&&-1===this._resetExclude.indexOf("ModuleSwitchPop")&&this._moduleSwitchPop.reset(),this._moduleStopTouch&&-1===n.indexOf("ModuleStopTouch")&&-1===this._resetExclude.indexOf("ModuleStopTouch")&&this._moduleStopTouch.reset(),this._moduleDragListPop&&-1===n.indexOf("ModuleDragListPop")&&-1===this._resetExclude.indexOf("ModuleDragListPop")&&this._moduleDragListPop.reset(),this._modulePager&&-1===n.indexOf("ModulePager")&&-1===this._resetExclude.indexOf("ModulePager")&&this._modulePager.reset(),this._moduleWordsNavigator&&-1===n.indexOf("ModuleWordsNavigator")&&-1===this._resetExclude.indexOf("ModuleWordsNavigator")&&this._moduleWordsNavigator.reset(),this._moduleOnAndOff&&-1===n.indexOf("ModuleOnAndOff")&&-1===this._resetExclude.indexOf("ModuleOnAndOff")&&this._moduleOnAndOff.reset(),this._moduleCalculator&&-1===n.indexOf("ModuleCalculator")&&-1===this._resetExclude.indexOf("ModuleCalculator")&&this._moduleCalculator.reset(),this._modulePureAnimate&&-1===n.indexOf("ModulePureAnimate")&&-1===this._resetExclude.indexOf("ModulePureAnimate")&&this._modulePureAnimate.reset(),this._moduleGameDragDrop&&-1===n.indexOf("ModuleGameDragDrop")&&-1===this._resetExclude.indexOf("ModuleGameDragDrop")&&this._moduleGameDragDrop.reset(),this._moduleGameGuideSeqConnect&&-1===n.indexOf("ModuleGameGuideSeqConnect")&&-1===this._resetExclude.indexOf("ModuleGameGuideSeqConnect")&&this._moduleGameGuideSeqConnect.reset(),this._moduleAnsZone&&-1===n.indexOf("ModuleAnsZone")&&-1===this._resetExclude.indexOf("ModuleAnsZone")&&this._moduleAnsZone.reset(),this._moduleZoom&&-1===n.indexOf("ModuleZoom")&&-1===this._resetExclude.indexOf("ModuleZoom")&&this._moduleZoom.reset(),-1===n.indexOf("VideoChannel")&&(this.videoObj=null,this.videoChannel=null),o&&this.sendCommand("ResetAbortSound","ResetAbortSound")}},{key:"clearSoundChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.soundChannel)&&this.soundChannel.stop(),this.soundObj=null,this.soundChannel=null,this.createjs.Sound.removeAllSounds()}},{key:"clearVideoChannel",value:function e(){this.isInited||this.init(),r.default.notNull(this.videoChannel)&&this.videoChannel.stop(!0),this.videoObj=null,this.videoChannel=null}},{key:"updatePageParam",value:function e(t){r.default.isNull(t)||(a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"updatePageParam",this).call(this,t),r.default.trace("updatePageParam:",this.pageParam),0===this.pageParam.length&&(this.pageParam[0]=1),this._moduleWordsNavigator?(this._moduleWordsNavigator.useJSON=!0,1===this.pageParam.length&&(this.pageParam[1]=1),this._modulePager&&(this._modulePager.useNav=!0,this._modulePager.useJSON=!0),this._moduleWordsNavigator.reset()):this._modulePager&&(this._modulePager.useNav=!1,this._modulePager.useJSON=!0,this._modulePager.reset()),this._moduleSwitchPop&&this._moduleSwitchPop.reset())}},{key:"updatePageProps",value:function e(){r.default.trace("updatePageProps:","wbcMode:",this.wbcMode,",webMode:",this.webMode,",mobileMode:",this.mobileMode,"actWinNavHide",this.actWinNavHide,"actWinWordGroupHide",this.actWinWordGroupHide),this._moduleGoOutCommand&&this._moduleGoOutCommand.reset(),this._moduleListPop&&this._moduleListPop.reset(),this._moduleDragListPop&&this._moduleDragListPop.reset(),this._moduleWordsNavigator&&this._moduleWordsNavigator.reset(),this._moduleSwitchPop&&this._moduleSwitchPop.reset()}},{key:"getZoomInInfo",value:function e(){return this.isInited||this.init(),this._moduleZoom?this._moduleZoom.getZoomInInfoList():[]}},{key:"setAnsZoneEnable",value:function e(t,i,n){var o=1<arguments.length&&void 0!==i?i:.2,a=2<arguments.length&&void 0!==n&&n;this.isInited||init(),this._moduleAnsZone&&this._moduleAnsZone.setAnsZoneEnable(t,o,a)}},{key:"injectPagerMarqueeData",value:function e(t){this.marqueePagerData=t}},{key:"updatePagerIndex",value:function e(t,i){this._modulePager&&this._modulePager.update(t,i)}},{key:"initModules",value:function e(){this.isInited&&(a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"initModules",this).call(this),this._moduleGoOutCommand=new c(this).init(),this._moduleBookSound=new _(this).init(),this._moduleAnsZone=new g(this).init(),this._modulePlaySwitchSound=new f(this).init(),this._moduleListPop=new v(this).init(),this._moduleSwitchPop=new m(this).init(),this._moduleStopTouch=new b(this).init(),this._moduleDragListPop=new y(this).init(),this._modulePageActSoundMV=new S(this).init(),this._modulePager=new P(this).init(),this._moduleWordsNavigator=new M(this).init(),this._moduleOnAndOff=new O(this).init(),this._moduleCalculator=new B(this).init(),this._modulePureAnimate=new k(this).init(),this._moduleZoom=new x(this).init(),this._moduleGameDragDrop=new C(this).init(),this._moduleGameGuideSeqConnect=new w(this).init(),r.default.notNull(this._modulePlaySwitchSound)&&this._modulePlaySwitchSound.isForceUseCreateJSAudio(!0))}},{key:"reinitModules",value:function e(t){if(this.isInited){if(r.default.isNull(this._moduleGoOutCommand)?this._moduleGoOutCommand=new c(this).init(t):this._moduleGoOutCommand.reinit(t),r.default.isNull(this._moduleBookSound)?this._moduleBookSound=new _(this).init(t):this._moduleBookSound.reinit(t),r.default.isNull(this._moduleAnsZone)?this._moduleAnsZone=new g(this).init(t):this._moduleAnsZone.reinit(t),r.default.isNull(this._modulePlaySwitchSound)?this._modulePlaySwitchSound=new f(this).init(t):this._modulePlaySwitchSound.reinit(t),r.default.isNull(this._moduleListPop)?this._moduleListPop=new v(this).init(t):this._moduleListPop.reinit(t),r.default.isNull(this._moduleSwitchPop)?this._moduleSwitchPop=new m(this).init(t):this._moduleSwitchPop.reinit(t),r.default.isNull(this._moduleStopTouch)?this._moduleStopTouch=new b(this).init(t):this._moduleStopTouch.reinit(t),r.default.isNull(this._moduleDragListPop)?this._moduleDragListPop=new y(this).init(t):this._moduleDragListPop.reinit(t),r.default.isNull(this._modulePageActSoundMV)?this._modulePageActSoundMV=new S(this).init(t):this._modulePageActSoundMV.reinit(t),r.default.isNull(this._modulePager)?this._modulePager=new P(this).init(t):this._modulePager.reinit(t),r.default.isNull(this._moduleWordsNavigator)?this._moduleWordsNavigator=new M(this).init(t):this._moduleWordsNavigator.reinit(t),r.default.isNull(this._moduleOnAndOff)?this._moduleOnAndOff=new O(this).init(t):this._moduleOnAndOff.reinit(t),r.default.isNull(this._moduleCalculator)?this._moduleCalculator=new B(this).init(t):this._moduleCalculator.reinit(t),r.default.isNull(this._modulePureAnimate)?this._modulePureAnimate=new k(this).init(t):this._modulePureAnimate.reinit(t),r.default.isNull(this._moduleGameDragDrop)?this._moduleGameDragDrop=new C(this).init(t):this._moduleGameDragDrop.reinit(t),r.default.isNull(this._moduleGameGuideSeqConnect)?this._moduleGameGuideSeqConnect=new w(this).init(t):this._moduleGameGuideSeqConnect.reinit(t),r.default.notNull(this.__backInfo))switch(this.__backInfo.TYPE){case"words-navigator":this.__backInfo.target.showWordFunc(this.__backInfo.target,this.__backInfo.index,this.__backInfo.subindex,this.__backInfo.pagerindex,this.__backInfo.changeBar)}this.__backInfo=null,this.__loadinfo=null}}}]),N),L;function N(e,t,i,n){l(this,N);var o=d(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,e,t,i,n));return(o._this=o)._resetExclude=[],o}t.GameBookPage=T},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleGameDragDrop=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,h=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["GameDragDrop"],l={Echo:"none"},d=!0,p=(n(c,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),h.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),h.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),h.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),h.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=this._gameDragDropGroup.length;for(i=0;i<n;i++){t=this._gameDragDropGroup[i];var o=this._parent.getInstanceMirror(t),a=this.getCustomTag(t);this._gameDropListCount[a]=0;for(var s=this._gameDragList[a].length,r=0;r<s;r++){var u=this._gameDragList[a][r];u.cursor="pointer",u.x=u.orgX,u.y=u.orgY,u.addEventListener("mousedown",this.triggerBtnDragMousedownBind),u.addEventListener("pressmove",this.triggerBtnDragPressmoveBind,h.default.supportPassive()),u.addEventListener("pressup",this.triggerBtnDragPressupBind)}}h.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),h.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"GameDragDrop":n=this.getCustomTag(t),this._gameDragDropGroup.push(t),this._gameDragList[n]=this.pickRelation(t,"Drag"),this._gameDropListMax[n]=this.pickRelation(t,"Drop").length,this._gameDropListCount[n]=0}}}},{key:"getCustomTag",value:function e(t){return h.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0;this.triggerBtnDragMousedownBind=this.triggerBtnDragMousedownBind||this.triggerBtnDragMousedown.bind(this),this.triggerBtnDragClickBind=this.triggerBtnDragClickBind||this.triggerBtnDragListClick.bind(this),this.triggerBtnDragPressmoveBind=this.triggerBtnDragPressmoveBind||this.triggerBtnDragPressmove.bind(this),this.triggerBtnDragPressupBind=this.triggerBtnDragPressupBind||this.triggerBtnDragPressup.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this);var a=this._gameDragDropGroup.length;for(o=0;o<a;o++)if(!(n=this._gameDragDropGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0;for(var s=this._parent.getInstanceMirror(n),r=this.getCustomTag(n),u=this._gameDragList[r].length,l=0;l<u;l++){var d=this._gameDragList[r][l];d.cursor="pointer",d.orgX=d.x,d.orgY=d.y,d.addEventListener("mousedown",this.triggerBtnDragMousedownBind),d.addEventListener("pressmove",this.triggerBtnDragPressmoveBind,h.default.supportPassive()),d.addEventListener("pressup",this.triggerBtnDragPressupBind),h.default.notNull(d.EffectBase)&&h.default.applyMultiply(d.EffectBase)}}}},{key:"triggerBtnDragListClick",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]];t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragMousedown",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget,n=i.parent.globalToLocal(t.stageX,t.stageY);this.isCheckMove=!1,i.fixX=i.x-n.x,i.fixY=i.y-n.y,i.startX=i.x,i.startY=i.y,t.stopPropagation(),t.stopImmediatePropagation()}},{key:"triggerBtnDragPressmove",value:function e(t){this._parent.setPressEventIsOn(!0);var i=t.currentTarget;i.parent.setChildIndex(i,i.parent.getNumChildren()-1);var n=i.parent.globalToLocal(t.stageX,t.stageY);i.x=n.x+i.fixX,i.y=n.y+i.fixY;var o=Math.abs(i.x-i.startX),a=Math.abs(i.y-i.startY),s;60<Math.sqrt(Math.pow(o,2)+Math.pow(a,2))&&(this.isCheckMove=!0),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"findCanHint",value:function e(t){for(var i=this._parent.getInstanceMirror(t),n=t.parent,o=this._parent.getInstanceMirror(n),a=o.subset.length,s=null,r=0;r<a;r++){var u=n[o.subset[r]],l=this._parent.getInstanceMirror(u);if("Drop"===l.command&&l.args[0]===i.args[0]){s=u;break}}return s}},{key:"triggerBtnDragPressup",value:function e(t){this._parent.stop(null,!0),this._parent.setPressEventIsOn(!1);var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=i.parent,a=this.getCustomTag(o),s=this._gameDragList[a].indexOf(i),r=this.findCanHint(i),u=!0;1<n.args.length&&this._gameDropListCount[a]+1!==Number(n.args[1])&&(u=!1),h.default.notNull(r)&&u&&h.default.collisionTest(i,r)?(i.cursor="auto",i.x=r.x+i.regX*i.scaleX-r.regX*r.scaleX,i.y=r.y+i.regY*i.scaleY-r.regY*r.scaleY,i.removeEventListener("mousedown",this.triggerBtnDragMousedownBind),i.removeEventListener("pressmove",this.triggerBtnDragPressmoveBind,h.default.supportPassive()),i.removeEventListener("pressup",this.triggerBtnDragPressupBind),this._gameDropListCount[a]+=1,this.playEchoSound(o,"RIGHT")):(i.x=i.orgX,i.y=i.orgY,this.isCheckMove&&this.playEchoSound(o,"WRONG")),this.checkAnsStatus(o,!1),t.stopPropagation(),t.stopImmediatePropagation()}},{key:"playEchoSound",value:function e(t,i){this._parent.stop(null,!0);var n=this._parent.getInstanceMirror(t),o=t.nominalBounds,a={x:t.x+o.x*t.scale,y:t.y+o.y*t.scale},s=t.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+t._replacePath+"sounds/":t._replacePath+"./sounds/";this._parent.soundObj={id:i,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:"Echo",target:t,target2:null};var l=this.checkCommandMode("Echo");h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"checkAnsStatus",value:function e(t,i){var n=!(1<arguments.length&&void 0!==i)||i,o=this.getCustomTag(t);this._gameDropListCount[o]===this._gameDropListMax[o]&&(n?this._parent.sendCommand("Game","Game_Finish"):t.parent.mouseChildren=!1)}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(h.default.isNull(this._parent.soundObj)||h.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)h.default.notNull(i)&&i.stop();else switch(n){case"fileload":h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var o=this.checkCommandMode(this._parent.soundObj.command);"none"!==o&&this._parent.openSoundPlayBar(o,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){h.default.notNull(this._parent.soundChannel)}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.soundObj.target2,o=this._parent.getInstanceMirror(i);h.default.notNull(n)&&(n.gotoAndStop(0),n.visible=!1),this.stop();var a=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===a||"normal-close"===a||"ex-normal-close"===a||"none"===a?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,h.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)),this.checkAnsStatus(i)}},{key:"fixRegXY",value:function e(t){t._fixX=t.x+t.regX*t.scaleX,t._fixY=t.y+t.regY*t.scaleY}}]),c);function c(e){r(this,c),this._parent=e,this._pickList,this._gameDragDropGroup=[],this._gameDragList={},this._gameDropListCount={},this._gameDropListMax={},this._seq=999}t.ModuleGameDragDrop=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleGameGuideSeqConnect=void 0;var n=function(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e};function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a,_=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=["GameGuideSeqConnect"],l={Echo:"none"},d=!0,h=(n(p,[{key:"init",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"";if(!this.isInited){var n;if(this.isInited=!0,!this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e}))return null;this.initModules(),this.setup(i)}return this}},{key:"reinit",value:function e(t){var i;this.isInited&&this._parent.modulesIsOn.reduce(function(e,t,i,n){return!0!==e&&!1!==e?-1!==u.indexOf(e)||-1!==u.indexOf(t):-1!==u.indexOf(t)||e})&&(this.initModules(),this.setup(t))}},{key:"stop",value:function e(){this.isInited||this.init(),_.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1),_.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),_.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"reset",value:function e(){this.isInited||this.init(),this.cleanTween(),_.default.notNull(this._parent)&&this._parent.setPressEventIsOn(!1);var t=void 0,i=void 0,n=this._gameGuideSeqConnectGroup.length;for(i=0;i<n;i++){t=this._gameGuideSeqConnectGroup[i];var o=this._parent.getInstanceMirror(t),a=this.getCustomTag(t);this._gameSeqClickLineListCount[a]=0;for(var s=this._gameSeqClickStartTouchList[a].length,r=0;r<s;r++){var u=this._gameSeqClickStartTouchList[a][r],l=this._parent.getInstanceMirror(u),d=t["End_"+l.args[0]],h=t["Line_"+l.args[0]];u.cursor="pointer",d.cursor="pointer",h.cursor="auto",this._gameSeqClickLineListCount[a]+1===Number(l.args[0])?(u.visible=!0,d.visible=!0,h.visible=!0):(u.visible=!1,d.visible=!1,h.visible=!1),u.gotoAndStop(0),d.gotoAndStop(0),h.gotoAndStop(0)}}_.default.notNull(this._parent.soundChannel)&&this._parent.soundChannel.removeEventListener("complete",this._parent.soundObj.completeFunc),_.default.notNull(this._parent.soundObj)&&this._parent.createjs.Ticker.removeEventListener("tick",this._parent.soundObj.watchFunc)}},{key:"switchMobileMode",value:function e(t){}},{key:"switchWebMode",value:function e(t){}},{key:"initModules",value:function e(){if(this.isInited)for(var s=this,t=function e(t){for(var i=s._parent.getInstanceMirror(t),n=i.subset.length,o=void 0,a=0;a<n;a++)o=i.subset[a],s.pickTarget(i.target[o]),e(i.target[o])},i=this._parent.levelOneInstanceNames.length,n=void 0,o=void 0,a=0;a<i;a++)n=this._parent.levelOneInstanceNames[a],this.pickTarget(this._parent.exportRoot[n]),t((o=this._parent.getInstanceMirror(this._parent.exportRoot[n])).target)}},{key:"pickTarget",value:function e(t){this._pickList=this._pickList||[];var i=this._parent.getInstanceMirror(t),n=void 0;if(-1!==u.indexOf(i.command)){if(this._pickList.includes(t))return;switch(t._pageUI=!0,this._pickList.push(t),t._seq=this._seq,this._seq++,i.command){case"GameGuideSeqConnect":n=this.getCustomTag(t),this._gameGuideSeqConnectGroup.push(t),this._gameSeqClickStartTouchList[n]=this.pickRelation(t,"Start"),this._gameSeqClickLineListMax[n]=this._gameSeqClickStartTouchList[n].length,this._gameSeqClickLineListCount[n]=0,this._gameSeqClickStartTouchList[n].sort(_.default.sortByNameACS)}}}},{key:"getCustomTag",value:function e(t){return _.default.notNull(t.parent.name)?t.parent.name+"$"+t.name+"$"+t._seq:t.name+"$"+t._seq}},{key:"pickRelation",value:function e(t,i){for(var n=[],o=this._parent.getInstanceMirror(t),a=o.subset.length,s=0;s<a;s++){var r=this._parent.getInstanceMirror(o.target[o.subset[s]]),u=o.target[o.subset[s]];r.command===i&&n.push(u)}return n}},{key:"checkCommandMode",value:function e(t){var i;return l[t]}},{key:"setup",value:function e(t){var i=0<arguments.length&&void 0!==t?t:"",n=void 0,o=void 0;this.triggerBtnClickListBind=this.triggerBtnClickListBind||this.triggerBtnListClick.bind(this),this.checkEndStatusBind=this.checkEndStatusBind||this.checkEndStatus.bind(this),this.finishLineStatusBind=this.finishLineStatusBind||this.finishLineStatus.bind(this),this.checkAnsStatusBind=this.checkAnsStatusBind||this.checkAnsStatus.bind(this),this.tweenCompleteBind=this.tweenCompleteBind||this.triggerTweenComplete.bind(this),this.checkSoundPlayStatusBind=this.checkSoundPlayStatusBind||this.checkSoundPlayStatus.bind(this),this.triggerSoundWatchBind=this.triggerSoundWatchBind||this.triggerSoundWatch.bind(this),this.triggerSoundCompleteBind=this.triggerSoundCompleteBind||this.triggerSoundComplete.bind(this);var a=this._gameGuideSeqConnectGroup.length;for(o=0;o<a;o++)if(!(n=this._gameGuideSeqConnectGroup[o])._isModuleInited){n._replacePath=i,n._isModuleInited=!0;for(var s=this._parent.getInstanceMirror(n),r=this.getCustomTag(n),u=this._gameSeqClickStartTouchList[r].length,l=0;l<u;l++){var d=this._gameSeqClickStartTouchList[r][l],h=this._parent.getInstanceMirror(d),p=n["End_"+h.args[0]],c=n["Line_"+h.args[0]];c.relTarget=n,d._replacePath=i,p._replacePath=i,c._replacePath=i,((d.relEnd=p).relStart=d).relLine=c,p.relLine=c,d.cursor="pointer",p.cursor="pointer",c.cursor="auto",d.addEventListener(this._mouseTriggerBehavior,this.triggerBtnClickListBind),p.addEventListener(this._mouseTriggerBehavior,this.triggerBtnClickListBind),_.default.notNull(d.EffectBase)&&_.default.applyMultiply(d.EffectBase),_.default.notNull(p.EffectBase)&&_.default.applyMultiply(p.EffectBase),this._gameSeqClickLineListCount[r]+1===Number(h.args[0])?(d.visible=!0,p.visible=!0,c.visible=!0):(d.visible=!1,p.visible=!1,c.visible=!1),d.gotoAndStop(0),p.gotoAndStop(0),c.gotoAndStop(0)}}}},{key:"triggerBtnListClick",value:function e(t){var i=t.currentTarget,n=this._parent.getInstanceMirror(i),o=n.parent[n.args[0]];switch(n.command){case"Start":i.cursor="auto",i.gotoAndStop(1),this.playEchoSound(i,"SWITCH");break;case"End":i.cursor="auto",i.gotoAndStop(1),i.callNextFunc=this.checkEndStatusBind,this.playEchoSound(i,"SWITCH")}t.stopPropagation(),t.stopImmediatePropagation()}},{key:"checkEndStatus",value:function e(t){1===t.relStart.currentFrame?(t.relLine.callNextFunc=this.finishLineStatusBind,t.relStart.visible=!1,t.visible=!1,t.relLine.visible=!0,t.relLine.alpha=0,this.cleanTween(),this._tweenObj=t.relLine,this._parent.createjs.Tween.get(t.relLine).to({alpha:1},700).call(this.tweenCompleteBind),t.relLine.gotoAndStop(1),this.playEchoSound(t.relLine,"RIGHT")):(t.cursor="pointer",t.gotoAndStop(0))}},{key:"finishLineStatus",value:function e(t){var i=this.getCustomTag(t.relTarget);if(this._gameSeqClickLineListCount[i]+=1,this._gameSeqClickLineListCount[i]<this._gameSeqClickLineListMax[i]){var n=this._gameSeqClickLineListCount[i],o=this._gameSeqClickStartTouchList[i][n],a=o.relEnd,s=o.relLine;o.cursor="pointer",a.cursor="pointer",s.cursor="auto",o.visible=!0,a.visible=!0,s.visible=!0,o.gotoAndStop(0),a.gotoAndStop(0),s.gotoAndStop(0)}else{var r=this._parent.getInstanceMirror(t.relTarget),u;t.relTarget.callNextFunc=this.checkAnsStatusBind,this.playEchoSound(t.relTarget,r.args[0]),this.cleanTween(),this._tweenObj=t.relTarget,this._parent.createjs.Tween.get(t.relTarget).to({alpha:0},300).to({alpha:1},300).to({alpha:0},300).to({alpha:1},300).call(this.tweenCompleteBind).stop}}},{key:"cleanTween",value:function e(){this._tweenObj&&(this._parent.createjs.Tween.removeTweens(this._tweenObj),this._tweenObj=null)}},{key:"triggerTweenComplete",value:function e(){this._tweenObj=null}},{key:"playEchoSound",value:function e(t,i){this._parent.stop(null,!0);var n=this._parent.getInstanceMirror(t),o=t.nominalBounds,a={x:t.x+o.x*t.scale,y:t.y+o.y*t.scale},s=t.parent.localToGlobal(a.x,a.y),r=this._parent.exportRoot.globalToLocal(s.x,s.y),u=this._parent.assetSoundPath?this._parent.assetSoundPath:this._parent.pageSoundPath?this._parent.pageSoundPath+t._replacePath+"sounds/":t._replacePath+"./sounds/";this._parent.soundObj={id:i,path:u,loop:0,offset:0,volume:this._parent.volume,callback:this.checkSoundPlayStatusBind,watchFunc:this.triggerSoundWatchBind,completeFunc:this.triggerSoundCompleteBind,autoPlay:!0,locX:r.x,locY:r.y,excludeTags:null,command:"Echo",target:t,target2:null};var l=this.checkCommandMode("Echo");_.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)}},{key:"checkAnsStatus",value:function e(t,i){var n=!(1<arguments.length&&void 0!==i)||i,o=this.getCustomTag(t);this._gameSeqClickLineListCount[o]===this._gameSeqClickLineListMax[o]&&(n?this._parent.sendCommand("Game","Game_Finish"):t.parent.mouseChildren=!1)}},{key:"checkSoundPlayStatus",value:function e(t,i,n){if(_.default.isNull(this._parent.soundObj)||_.default.notNull(this._parent.soundObj)&&this._parent.soundObj.id!==t)_.default.notNull(i)&&i.stop();else switch(n){case"fileload":_.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback);break;case"fileerror":this.stop(),this._parent.soundObj=null;break;case"playSuccess":this._prevTime=-1,this._parent.soundChannel=i,this._parent.soundChannel.paused=!this._parent.soundObj.autoPlay,this._parent.createjs.Ticker.addEventListener("tick",this._parent.soundObj.watchFunc),this._parent.soundChannel.addEventListener("complete",this._parent.soundObj.completeFunc);var o=this.checkCommandMode(this._parent.soundObj.command);"none"!==o&&this._parent.openSoundPlayBar(o,this._parent.soundObj)}}},{key:"triggerSoundWatch",value:function e(t){_.default.notNull(this._parent.soundChannel)}},{key:"triggerSoundComplete",value:function e(t){var i=this._parent.soundObj.target,n=this._parent.soundObj.target2,o=this._parent.getInstanceMirror(i);this.stop();var a=this.checkCommandMode(this._parent.soundObj.command);"mini-close"===a||"normal-close"===a||"ex-normal-close"===a||"none"===a?(this._parent.closeSoundPlayBar(),this._parent.clearSoundChannel()):(this._parent.stopSoundPlayBar(),this._parent.soundObj.autoPlay=!1,_.default.playSoundCheckLoadRequest(this._parent.createjs,this._parent.soundObj.path,this._parent.soundObj.id,this._parent.soundObj.loop,this._parent.soundObj.offset,this._parent.soundObj.volume,this._parent.soundObj.callback)),i.callNextFunc&&i.callNextFunc(i)}}]),p);function p(e){r(this,p),this._mouseTriggerBehavior=e.mouseTriggerBehavior,this._parent=e,this._pickList,this._gameGuideSeqConnectGroup=[],this._gameSeqClickStartTouchList={},this._gameSeqClickLineListCount={},this._gameSeqClickLineListMax={},this._tweenObj=null,this._seq=999}t.ModuleGameGuideSeqConnect=h}],o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return o.d(e,"a",e),e},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=59);function o(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,a});